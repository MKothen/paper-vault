var PS=i=>{throw TypeError(i)};var Mv=(i,e,n)=>e.has(i)||PS("Cannot "+n);var Ke=(i,e,n)=>(Mv(i,e,"read from private field"),n?n.call(i):e.get(i)),bs=(i,e,n)=>e.has(i)?PS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,n),Di=(i,e,n,r)=>(Mv(i,e,"write to private field"),r?r.call(i,n):e.set(i,n),n),vs=(i,e,n)=>(Mv(i,e,"access private method"),n);var OS=(i,e,n,r)=>({set _(s){Di(i,e,s,n)},get _(){return Ke(i,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function $m(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Pv={exports:{}},Fh={};var LS;function YL(){if(LS)return Fh;LS=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var o=null;if(a!==void 0&&(o=""+a),s.key!==void 0&&(o=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:i,type:r,key:o,ref:s!==void 0?s:null,props:a}}return Fh.Fragment=e,Fh.jsx=n,Fh.jsxs=n,Fh}var BS;function KL(){return BS||(BS=1,Pv.exports=YL()),Pv.exports}var I=KL(),Ov={exports:{}},qt={};var FS;function QL(){if(FS)return qt;FS=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function b(q){return q===null||typeof q!="object"?null:(q=y&&q[y]||q["@@iterator"],typeof q=="function"?q:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function E(q,Z,lt){this.props=q,this.context=Z,this.refs=S,this.updater=lt||w}E.prototype.isReactComponent={},E.prototype.setState=function(q,Z){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,Z,"setState")},E.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function k(){}k.prototype=E.prototype;function N(q,Z,lt){this.props=q,this.context=Z,this.refs=S,this.updater=lt||w}var M=N.prototype=new k;M.constructor=N,x(M,E.prototype),M.isPureReactComponent=!0;var O=Array.isArray;function B(){}var C={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function L(q,Z,lt){var ct=lt.ref;return{$$typeof:i,type:q,key:Z,ref:ct!==void 0?ct:null,props:lt}}function F(q,Z){return L(q.type,Z,q.props)}function U(q){return typeof q=="object"&&q!==null&&q.$$typeof===i}function $(q){var Z={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(lt){return Z[lt]})}var V=/\/+/g;function G(q,Z){return typeof q=="object"&&q!==null&&q.key!=null?$(""+q.key):Z.toString(36)}function et(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(B,B):(q.status="pending",q.then(function(Z){q.status==="pending"&&(q.status="fulfilled",q.value=Z)},function(Z){q.status==="pending"&&(q.status="rejected",q.reason=Z)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function z(q,Z,lt,ct,At){var ht=typeof q;(ht==="undefined"||ht==="boolean")&&(q=null);var yt=!1;if(q===null)yt=!0;else switch(ht){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(q.$$typeof){case i:case e:yt=!0;break;case p:return yt=q._init,z(yt(q._payload),Z,lt,ct,At)}}if(yt)return At=At(q),yt=ct===""?"."+G(q,0):ct,O(At)?(lt="",yt!=null&&(lt=yt.replace(V,"$&/")+"/"),z(At,Z,lt,"",function(Gt){return Gt})):At!=null&&(U(At)&&(At=F(At,lt+(At.key==null||q&&q.key===At.key?"":(""+At.key).replace(V,"$&/")+"/")+yt)),Z.push(At)),1;yt=0;var Pt=ct===""?".":ct+":";if(O(q))for(var kt=0;kt<q.length;kt++)ct=q[kt],ht=Pt+G(ct,kt),yt+=z(ct,Z,lt,ht,At);else if(kt=b(q),typeof kt=="function")for(q=kt.call(q),kt=0;!(ct=q.next()).done;)ct=ct.value,ht=Pt+G(ct,kt++),yt+=z(ct,Z,lt,ht,At);else if(ht==="object"){if(typeof q.then=="function")return z(et(q),Z,lt,ct,At);throw Z=String(q),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return yt}function Y(q,Z,lt){if(q==null)return q;var ct=[],At=0;return z(q,ct,"","",function(ht){return Z.call(lt,ht,At++)}),ct}function nt(q){if(q._status===-1){var Z=q._result;Z=Z(),Z.then(function(lt){(q._status===0||q._status===-1)&&(q._status=1,q._result=lt)},function(lt){(q._status===0||q._status===-1)&&(q._status=2,q._result=lt)}),q._status===-1&&(q._status=0,q._result=Z)}if(q._status===1)return q._result.default;throw q._result}var mt=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},bt={map:Y,forEach:function(q,Z,lt){Y(q,function(){Z.apply(this,arguments)},lt)},count:function(q){var Z=0;return Y(q,function(){Z++}),Z},toArray:function(q){return Y(q,function(Z){return Z})||[]},only:function(q){if(!U(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return qt.Activity=g,qt.Children=bt,qt.Component=E,qt.Fragment=n,qt.Profiler=s,qt.PureComponent=N,qt.StrictMode=r,qt.Suspense=h,qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,qt.__COMPILER_RUNTIME={__proto__:null,c:function(q){return C.H.useMemoCache(q)}},qt.cache=function(q){return function(){return q.apply(null,arguments)}},qt.cacheSignal=function(){return null},qt.cloneElement=function(q,Z,lt){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var ct=x({},q.props),At=q.key;if(Z!=null)for(ht in Z.key!==void 0&&(At=""+Z.key),Z)!R.call(Z,ht)||ht==="key"||ht==="__self"||ht==="__source"||ht==="ref"&&Z.ref===void 0||(ct[ht]=Z[ht]);var ht=arguments.length-2;if(ht===1)ct.children=lt;else if(1<ht){for(var yt=Array(ht),Pt=0;Pt<ht;Pt++)yt[Pt]=arguments[Pt+2];ct.children=yt}return L(q.type,At,ct)},qt.createContext=function(q){return q={$$typeof:o,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},qt.createElement=function(q,Z,lt){var ct,At={},ht=null;if(Z!=null)for(ct in Z.key!==void 0&&(ht=""+Z.key),Z)R.call(Z,ct)&&ct!=="key"&&ct!=="__self"&&ct!=="__source"&&(At[ct]=Z[ct]);var yt=arguments.length-2;if(yt===1)At.children=lt;else if(1<yt){for(var Pt=Array(yt),kt=0;kt<yt;kt++)Pt[kt]=arguments[kt+2];At.children=Pt}if(q&&q.defaultProps)for(ct in yt=q.defaultProps,yt)At[ct]===void 0&&(At[ct]=yt[ct]);return L(q,ht,At)},qt.createRef=function(){return{current:null}},qt.forwardRef=function(q){return{$$typeof:u,render:q}},qt.isValidElement=U,qt.lazy=function(q){return{$$typeof:p,_payload:{_status:-1,_result:q},_init:nt}},qt.memo=function(q,Z){return{$$typeof:d,type:q,compare:Z===void 0?null:Z}},qt.startTransition=function(q){var Z=C.T,lt={};C.T=lt;try{var ct=q(),At=C.S;At!==null&&At(lt,ct),typeof ct=="object"&&ct!==null&&typeof ct.then=="function"&&ct.then(B,mt)}catch(ht){mt(ht)}finally{Z!==null&&lt.types!==null&&(Z.types=lt.types),C.T=Z}},qt.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},qt.use=function(q){return C.H.use(q)},qt.useActionState=function(q,Z,lt){return C.H.useActionState(q,Z,lt)},qt.useCallback=function(q,Z){return C.H.useCallback(q,Z)},qt.useContext=function(q){return C.H.useContext(q)},qt.useDebugValue=function(){},qt.useDeferredValue=function(q,Z){return C.H.useDeferredValue(q,Z)},qt.useEffect=function(q,Z){return C.H.useEffect(q,Z)},qt.useEffectEvent=function(q){return C.H.useEffectEvent(q)},qt.useId=function(){return C.H.useId()},qt.useImperativeHandle=function(q,Z,lt){return C.H.useImperativeHandle(q,Z,lt)},qt.useInsertionEffect=function(q,Z){return C.H.useInsertionEffect(q,Z)},qt.useLayoutEffect=function(q,Z){return C.H.useLayoutEffect(q,Z)},qt.useMemo=function(q,Z){return C.H.useMemo(q,Z)},qt.useOptimistic=function(q,Z){return C.H.useOptimistic(q,Z)},qt.useReducer=function(q,Z,lt){return C.H.useReducer(q,Z,lt)},qt.useRef=function(q){return C.H.useRef(q)},qt.useState=function(q){return C.H.useState(q)},qt.useSyncExternalStore=function(q,Z,lt){return C.H.useSyncExternalStore(q,Z,lt)},qt.useTransition=function(){return C.H.useTransition()},qt.version="19.2.0",qt}var US;function Gm(){return US||(US=1,Ov.exports=QL()),Ov.exports}var X=Gm();const nn=$m(X);var Lv={exports:{}},Uh={},Bv={exports:{}},Fv={};var VS;function ZL(){return VS||(VS=1,(function(i){function e(z,Y){var nt=z.length;z.push(Y);t:for(;0<nt;){var mt=nt-1>>>1,bt=z[mt];if(0<s(bt,Y))z[mt]=Y,z[nt]=bt,nt=mt;else break t}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Y=z[0],nt=z.pop();if(nt!==Y){z[0]=nt;t:for(var mt=0,bt=z.length,q=bt>>>1;mt<q;){var Z=2*(mt+1)-1,lt=z[Z],ct=Z+1,At=z[ct];if(0>s(lt,nt))ct<bt&&0>s(At,lt)?(z[mt]=At,z[ct]=nt,mt=ct):(z[mt]=lt,z[Z]=nt,mt=Z);else if(ct<bt&&0>s(At,nt))z[mt]=At,z[ct]=nt,mt=ct;else break t}}return Y}function s(z,Y){var nt=z.sortIndex-Y.sortIndex;return nt!==0?nt:z.id-Y.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var o=Date,u=o.now();i.unstable_now=function(){return o.now()-u}}var h=[],d=[],p=1,g=null,y=3,b=!1,w=!1,x=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function M(z){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=z)r(d),Y.sortIndex=Y.expirationTime,e(h,Y);else break;Y=n(d)}}function O(z){if(x=!1,M(z),!w)if(n(h)!==null)w=!0,B||(B=!0,$());else{var Y=n(d);Y!==null&&et(O,Y.startTime-z)}}var B=!1,C=-1,R=5,L=-1;function F(){return S?!0:!(i.unstable_now()-L<R)}function U(){if(S=!1,B){var z=i.unstable_now();L=z;var Y=!0;try{t:{w=!1,x&&(x=!1,k(C),C=-1),b=!0;var nt=y;try{e:{for(M(z),g=n(h);g!==null&&!(g.expirationTime>z&&F());){var mt=g.callback;if(typeof mt=="function"){g.callback=null,y=g.priorityLevel;var bt=mt(g.expirationTime<=z);if(z=i.unstable_now(),typeof bt=="function"){g.callback=bt,M(z),Y=!0;break e}g===n(h)&&r(h),M(z)}else r(h);g=n(h)}if(g!==null)Y=!0;else{var q=n(d);q!==null&&et(O,q.startTime-z),Y=!1}}break t}finally{g=null,y=nt,b=!1}Y=void 0}}finally{Y?$():B=!1}}}var $;if(typeof N=="function")$=function(){N(U)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,G=V.port2;V.port1.onmessage=U,$=function(){G.postMessage(null)}}else $=function(){E(U,0)};function et(z,Y){C=E(function(){z(i.unstable_now())},Y)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_next=function(z){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var nt=y;y=Y;try{return z()}finally{y=nt}},i.unstable_requestPaint=function(){S=!0},i.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var nt=y;y=z;try{return Y()}finally{y=nt}},i.unstable_scheduleCallback=function(z,Y,nt){var mt=i.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?mt+nt:mt):nt=mt,z){case 1:var bt=-1;break;case 2:bt=250;break;case 5:bt=1073741823;break;case 4:bt=1e4;break;default:bt=5e3}return bt=nt+bt,z={id:p++,callback:Y,priorityLevel:z,startTime:nt,expirationTime:bt,sortIndex:-1},nt>mt?(z.sortIndex=nt,e(d,z),n(h)===null&&z===n(d)&&(x?(k(C),C=-1):x=!0,et(O,nt-mt))):(z.sortIndex=bt,e(h,z),w||b||(w=!0,B||(B=!0,$()))),z},i.unstable_shouldYield=F,i.unstable_wrapCallback=function(z){var Y=y;return function(){var nt=y;y=Y;try{return z.apply(this,arguments)}finally{y=nt}}}})(Fv)),Fv}var jS;function JL(){return jS||(jS=1,Bv.exports=ZL()),Bv.exports}var Uv={exports:{}},ni={};var zS;function t3(){if(zS)return ni;zS=1;var i=Gm();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(h,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:h,containerInfo:d,implementation:p}}var o=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ni.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ni.createPortal=function(h,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(h,d,null,p)},ni.flushSync=function(h){var d=o.T,p=r.p;try{if(o.T=null,r.p=2,h)return h()}finally{o.T=d,r.p=p,r.d.f()}},ni.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(h,d))},ni.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},ni.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var p=d.as,g=u(p,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?r.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:b}):p==="script"&&r.d.X(h,{crossOrigin:g,integrity:y,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ni.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=u(d.as,d.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(h)},ni.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,g=u(p,d.crossOrigin);r.d.L(h,p,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ni.preloadModule=function(h,d){if(typeof h=="string")if(d){var p=u(d.as,d.crossOrigin);r.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(h)},ni.requestFormReset=function(h){r.d.r(h)},ni.unstable_batchedUpdates=function(h,d){return h(d)},ni.useFormState=function(h,d,p){return o.H.useFormState(h,d,p)},ni.useFormStatus=function(){return o.H.useHostTransitionStatus()},ni.version="19.2.0",ni}var HS;function dI(){if(HS)return Uv.exports;HS=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Uv.exports=t3(),Uv.exports}var $S;function e3(){if($S)return Uh;$S=1;var i=JL(),e=Gm(),n=dI();function r(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var c=l,f=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(f=c.return),l=c.return;while(l)}return c.tag===3?f:null}function o(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function u(l){if(l.tag===31){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function h(l){if(a(l)!==l)throw Error(r(188))}function d(l){var c=l.alternate;if(!c){if(c=a(l),c===null)throw Error(r(188));return c!==l?null:l}for(var f=l,m=c;;){var _=f.return;if(_===null)break;var A=_.alternate;if(A===null){if(m=_.return,m!==null){f=m;continue}break}if(_.child===A.child){for(A=_.child;A;){if(A===f)return h(_),l;if(A===m)return h(_),c;A=A.sibling}throw Error(r(188))}if(f.return!==m.return)f=_,m=A;else{for(var D=!1,j=_.child;j;){if(j===f){D=!0,f=_,m=A;break}if(j===m){D=!0,m=_,f=A;break}j=j.sibling}if(!D){for(j=A.child;j;){if(j===f){D=!0,f=A,m=_;break}if(j===m){D=!0,m=A,f=_;break}j=j.sibling}if(!D)throw Error(r(189))}}if(f.alternate!==m)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?l:c}function p(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(c=p(l),c!==null)return c;l=l.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),N=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function $(l){return l===null||typeof l!="object"?null:(l=U&&l[U]||l["@@iterator"],typeof l=="function"?l:null)}var V=Symbol.for("react.client.reference");function G(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===V?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case E:return"Profiler";case S:return"StrictMode";case O:return"Suspense";case B:return"SuspenseList";case L:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case w:return"Portal";case N:return l.displayName||"Context";case k:return(l._context.displayName||"Context")+".Consumer";case M:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case C:return c=l.displayName||null,c!==null?c:G(l.type)||"Memo";case R:c=l._payload,l=l._init;try{return G(l(c))}catch{}}return null}var et=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt={pending:!1,data:null,method:null,action:null},mt=[],bt=-1;function q(l){return{current:l}}function Z(l){0>bt||(l.current=mt[bt],mt[bt]=null,bt--)}function lt(l,c){bt++,mt[bt]=l.current,l.current=c}var ct=q(null),At=q(null),ht=q(null),yt=q(null);function Pt(l,c){switch(lt(ht,c),lt(At,l),lt(ct,null),c.nodeType){case 9:case 11:l=(l=c.documentElement)&&(l=l.namespaceURI)?iS(l):0;break;default:if(l=c.tagName,c=c.namespaceURI)c=iS(c),l=rS(c,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Z(ct),lt(ct,l)}function kt(){Z(ct),Z(At),Z(ht)}function Gt(l){l.memoizedState!==null&&lt(yt,l);var c=ct.current,f=rS(c,l.type);c!==f&&(lt(At,l),lt(ct,f))}function We(l){At.current===l&&(Z(ct),Z(At)),yt.current===l&&(Z(yt),Ph._currentValue=nt)}var ne,jt;function ee(l){if(ne===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);ne=c&&c[1]||"",jt=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ne+l+jt}var Ee=!1;function Ie(l,c){if(!l||Ee)return"";Ee=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(ot){var st=ot}Reflect.construct(l,[],ft)}else{try{ft.call()}catch(ot){st=ot}l.call(ft.prototype)}}else{try{throw Error()}catch(ot){st=ot}(ft=l())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(ot){if(ot&&st&&typeof ot.stack=="string")return[ot.stack,st.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=m.DetermineComponentFrameRoot(),D=A[0],j=A[1];if(D&&j){var W=D.split(`
`),rt=j.split(`
`);for(_=m=0;m<W.length&&!W[m].includes("DetermineComponentFrameRoot");)m++;for(;_<rt.length&&!rt[_].includes("DetermineComponentFrameRoot");)_++;if(m===W.length||_===rt.length)for(m=W.length-1,_=rt.length-1;1<=m&&0<=_&&W[m]!==rt[_];)_--;for(;1<=m&&0<=_;m--,_--)if(W[m]!==rt[_]){if(m!==1||_!==1)do if(m--,_--,0>_||W[m]!==rt[_]){var ut=`
`+W[m].replace(" at new "," at ");return l.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",l.displayName)),ut}while(1<=m&&0<=_);break}}}finally{Ee=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?ee(f):""}function Ai(l,c){switch(l.tag){case 26:case 27:case 5:return ee(l.type);case 16:return ee("Lazy");case 13:return l.child!==c&&c!==null?ee("Suspense Fallback"):ee("Suspense");case 19:return ee("SuspenseList");case 0:case 15:return Ie(l.type,!1);case 11:return Ie(l.type.render,!1);case 1:return Ie(l.type,!0);case 31:return ee("Activity");default:return""}}function Bi(l){try{var c="",f=null;do c+=Ai(l,f),f=l,l=l.return;while(l);return c}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Ue=Object.prototype.hasOwnProperty,Ve=i.unstable_scheduleCallback,vt=i.unstable_cancelCallback,Dt=i.unstable_shouldYield,pe=i.unstable_requestPaint,Ht=i.unstable_now,an=i.unstable_getCurrentPriorityLevel,Fi=i.unstable_ImmediatePriority,ui=i.unstable_UserBlockingPriority,zn=i.unstable_NormalPriority,ei=i.unstable_LowPriority,hi=i.unstable_IdlePriority,Ia=i.log,Vo=i.unstable_setDisableYieldValue,di=null,ze=null;function se(l){if(typeof Ia=="function"&&Vo(l),ze&&typeof ze.setStrictMode=="function")try{ze.setStrictMode(di,l)}catch{}}var Se=Math.clz32?Math.clz32:Mf,Da=Math.log,ka=Math.LN2;function Mf(l){return l>>>=0,l===0?32:31-(Da(l)/ka|0)|0}var Qr=256,jo=262144,bn=4194304;function Zr(l){var c=l&42;if(c!==0)return c;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Jr(l,c,f){var m=l.pendingLanes;if(m===0)return 0;var _=0,A=l.suspendedLanes,D=l.pingedLanes;l=l.warmLanes;var j=m&134217727;return j!==0?(m=j&~A,m!==0?_=Zr(m):(D&=j,D!==0?_=Zr(D):f||(f=j&~l,f!==0&&(_=Zr(f))))):(j=m&~A,j!==0?_=Zr(j):D!==0?_=Zr(D):f||(f=m&~l,f!==0&&(_=Zr(f)))),_===0?0:c!==0&&c!==_&&(c&A)===0&&(A=_&-_,f=c&-c,A>=f||A===32&&(f&4194048)!==0)?c:_}function Ir(l,c){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&c)===0}function By(l,c){switch(l){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pf(){var l=bn;return bn<<=1,(bn&62914560)===0&&(bn=4194304),l}function ts(l){for(var c=[],f=0;31>f;f++)c.push(l);return c}function zo(l,c){l.pendingLanes|=c,c!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Fy(l,c,f,m,_,A){var D=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var j=l.entanglements,W=l.expirationTimes,rt=l.hiddenUpdates;for(f=D&~f;0<f;){var ut=31-Se(f),ft=1<<ut;j[ut]=0,W[ut]=-1;var st=rt[ut];if(st!==null)for(rt[ut]=null,ut=0;ut<st.length;ut++){var ot=st[ut];ot!==null&&(ot.lane&=-536870913)}f&=~ft}m!==0&&Ho(l,m,0),A!==0&&_===0&&l.tag!==0&&(l.suspendedLanes|=A&~(D&~c))}function Ho(l,c,f){l.pendingLanes|=c,l.suspendedLanes&=~c;var m=31-Se(c);l.entangledLanes|=c,l.entanglements[m]=l.entanglements[m]|1073741824|f&261930}function Uu(l,c){var f=l.entangledLanes|=c;for(l=l.entanglements;f;){var m=31-Se(f),_=1<<m;_&c|l[m]&c&&(l[m]|=c),f&=~_}}function Vu(l,c){var f=c&-c;return f=(f&42)!==0?1:$o(f),(f&(l.suspendedLanes|c))!==0?0:f}function $o(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function $s(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Of(){var l=Y.p;return l!==0?l:(l=window.event,l===void 0?32:CS(l.type))}function Dr(l,c){var f=Y.p;try{return Y.p=l,c()}finally{Y.p=f}}var kr=Math.random().toString(36).slice(2),vn="__reactFiber$"+kr,Mn="__reactProps$"+kr,es="__reactContainer$"+kr,Jl="__reactEvents$"+kr,Uy="__reactListeners$"+kr,Lf="__reactHandles$"+kr,Bf="__reactResources$"+kr,ns="__reactMarker$"+kr;function tc(l){delete l[vn],delete l[Mn],delete l[Jl],delete l[Uy],delete l[Lf]}function is(l){var c=l[vn];if(c)return c;for(var f=l.parentNode;f;){if(c=f[es]||f[vn]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(l=hS(l);l!==null;){if(f=l[vn])return f;l=hS(l)}return c}l=f,f=l.parentNode}return null}function sr(l){if(l=l[vn]||l[es]){var c=l.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return l}return null}function Ui(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l.stateNode;throw Error(r(33))}function rs(l){var c=l[Bf];return c||(c=l[Bf]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function _n(l){l[ns]=!0}var ju=new Set,zu={};function ss(l,c){as(l,c),as(l+"Capture",c)}function as(l,c){for(zu[l]=c,l=0;l<c.length;l++)ju.add(c[l])}var Hu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$u={},Gu={};function Ff(l){return Ue.call(Gu,l)?!0:Ue.call($u,l)?!1:Hu.test(l)?Gu[l]=!0:($u[l]=!0,!1)}function ec(l,c,f){if(Ff(c))if(f===null)l.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){l.removeAttribute(c);return}}l.setAttribute(c,""+f)}}function Vi(l,c,f){if(f===null)l.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(c);return}l.setAttribute(c,""+f)}}function wn(l,c,f,m){if(m===null)l.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(c,f,""+m)}}function Pn(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Na(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function qu(l,c,f){var m=Object.getOwnPropertyDescriptor(l.constructor.prototype,c);if(!l.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var _=m.get,A=m.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return _.call(this)},set:function(D){f=""+D,A.call(this,D)}}),Object.defineProperty(l,c,{enumerable:m.enumerable}),{getValue:function(){return f},setValue:function(D){f=""+D},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function Te(l){if(!l._valueTracker){var c=Na(l)?"checked":"value";l._valueTracker=qu(l,c,""+l[c])}}function Go(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var f=c.getValue(),m="";return l&&(m=Na(l)?l.checked?"true":"false":l.value),l=m,l!==f?(c.setValue(l),!0):!1}function os(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var qo=/[\n"\\]/g;function xi(l){return l.replace(qo,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function nc(l,c,f,m,_,A,D,j){l.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?l.type=D:l.removeAttribute("type"),c!=null?D==="number"?(c===0&&l.value===""||l.value!=c)&&(l.value=""+Pn(c)):l.value!==""+Pn(c)&&(l.value=""+Pn(c)):D!=="submit"&&D!=="reset"||l.removeAttribute("value"),c!=null?Wu(l,D,Pn(c)):f!=null?Wu(l,D,Pn(f)):m!=null&&l.removeAttribute("value"),_==null&&A!=null&&(l.defaultChecked=!!A),_!=null&&(l.checked=_&&typeof _!="function"&&typeof _!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?l.name=""+Pn(j):l.removeAttribute("name")}function Uf(l,c,f,m,_,A,D,j){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(l.type=A),c!=null||f!=null){if(!(A!=="submit"&&A!=="reset"||c!=null)){Te(l);return}f=f!=null?""+Pn(f):"",c=c!=null?""+Pn(c):f,j||c===l.value||(l.value=c),l.defaultValue=c}m=m??_,m=typeof m!="function"&&typeof m!="symbol"&&!!m,l.checked=j?l.checked:!!m,l.defaultChecked=!!m,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(l.name=D),Te(l)}function Wu(l,c,f){c==="number"&&os(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function Ma(l,c,f,m){if(l=l.options,c){c={};for(var _=0;_<f.length;_++)c["$"+f[_]]=!0;for(f=0;f<l.length;f++)_=c.hasOwnProperty("$"+l[f].value),l[f].selected!==_&&(l[f].selected=_),_&&m&&(l[f].defaultSelected=!0)}else{for(f=""+Pn(f),c=null,_=0;_<l.length;_++){if(l[_].value===f){l[_].selected=!0,m&&(l[_].defaultSelected=!0);return}c!==null||l[_].disabled||(c=l[_])}c!==null&&(c.selected=!0)}}function Vf(l,c,f){if(c!=null&&(c=""+Pn(c),c!==l.value&&(l.value=c),f==null)){l.defaultValue!==c&&(l.defaultValue=c);return}l.defaultValue=f!=null?""+Pn(f):""}function Pa(l,c,f,m){if(c==null){if(m!=null){if(f!=null)throw Error(r(92));if(et(m)){if(1<m.length)throw Error(r(93));m=m[0]}f=m}f==null&&(f=""),c=f}f=Pn(c),l.defaultValue=f,m=l.textContent,m===f&&m!==""&&m!==null&&(l.value=m),Te(l)}function Ei(l,c){if(c){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=c;return}}l.textContent=c}var jf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xu(l,c,f){var m=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?l.setProperty(c,""):c==="float"?l.cssFloat="":l[c]="":m?l.setProperty(c,f):typeof f!="number"||f===0||jf.has(c)?c==="float"?l.cssFloat=f:l[c]=(""+f).trim():l[c]=f+"px"}function Yu(l,c,f){if(c!=null&&typeof c!="object")throw Error(r(62));if(l=l.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?l.setProperty(m,""):m==="float"?l.cssFloat="":l[m]="");for(var _ in c)m=c[_],c.hasOwnProperty(_)&&f[_]!==m&&Xu(l,_,m)}else for(var A in c)c.hasOwnProperty(A)&&Xu(l,A,c[A])}function ic(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Oa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rc(l){return Oa.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Nr(){}var Ku=null;function ar(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var La=null,ls=null;function Wo(l){var c=sr(l);if(c&&(l=c.stateNode)){var f=l[Mn]||null;t:switch(l=c.stateNode,c.type){case"input":if(nc(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+xi(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var m=f[c];if(m!==l&&m.form===l.form){var _=m[Mn]||null;if(!_)throw Error(r(90));nc(m,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(c=0;c<f.length;c++)m=f[c],m.form===l.form&&Go(m)}break t;case"textarea":Vf(l,f.value,f.defaultValue);break t;case"select":c=f.value,c!=null&&Ma(l,!!f.multiple,c,!1)}}}var sc=!1;function Ba(l,c,f){if(sc)return l(c,f);sc=!0;try{var m=l(c);return m}finally{if(sc=!1,(La!==null||ls!==null)&&(Op(),La&&(c=La,l=ls,ls=La=null,Wo(c),l)))for(c=0;c<l.length;c++)Wo(l[c])}}function Mr(l,c){var f=l.stateNode;if(f===null)return null;var m=f[Mn]||null;if(m===null)return null;f=m[c];t:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(l=l.type,m=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!m;break t;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(r(231,c,typeof f));return f}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xo=!1;if(or)try{var De={};Object.defineProperty(De,"passive",{get:function(){Xo=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch{Xo=!1}var cs=null,Qu=null,Yo=null;function Zu(){if(Yo)return Yo;var l,c=Qu,f=c.length,m,_="value"in cs?cs.value:cs.textContent,A=_.length;for(l=0;l<f&&c[l]===_[l];l++);var D=f-l;for(m=1;m<=D&&c[f-m]===_[A-m];m++);return Yo=_.slice(l,1<m?1-m:void 0)}function Ko(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function Gs(){return!0}function Pr(){return!1}function Hn(l){function c(f,m,_,A,D){this._reactName=f,this._targetInst=_,this.type=m,this.nativeEvent=A,this.target=D,this.currentTarget=null;for(var j in l)l.hasOwnProperty(j)&&(f=l[j],this[j]=f?f(A):A[j]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Gs:Pr,this.isPropagationStopped=Pr,this}return g(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Gs)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Gs)},persist:function(){},isPersistent:Gs}),c}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},us=Hn(qs),Fa=g({},qs,{view:0,detail:0}),Ju=Hn(Fa),Ua,ac,hs,oc=g({},Fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Va,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==hs&&(hs&&l.type==="mousemove"?(Ua=l.screenX-hs.screenX,ac=l.screenY-hs.screenY):ac=Ua=0,hs=l),Ua)},movementY:function(l){return"movementY"in l?l.movementY:ac}}),th=Hn(oc),Qo=g({},oc,{dataTransfer:0}),Hf=Hn(Qo),$f=g({},Fa,{relatedTarget:0}),Zo=Hn($f),eh=g({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),Gf=Hn(eh),lc=g({},qs,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),qf=Hn(lc),Wf=g({},qs,{data:0}),ds=Hn(Wf),Xf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qf(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=Kf[l])?!!c[l]:!1}function Va(){return Qf}var fi=g({},Fa,{key:function(l){if(l.key){var c=Xf[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=Ko(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Yf[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Va,charCode:function(l){return l.type==="keypress"?Ko(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Ko(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Zf=Hn(fi),Jf=g({},oc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ws=Hn(Jf),v=g({},Fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Va}),T=Hn(v),P=g({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),H=Hn(P),tt=g({},oc,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),at=Hn(tt),xt=g({},qs,{newState:0,oldState:0}),Kt=Hn(xt),dn=[9,13,27,32],ve=or&&"CompositionEvent"in window,Xe=null;or&&"documentMode"in document&&(Xe=document.documentMode);var lr=or&&"TextEvent"in window&&!Xe,fs=or&&(!ve||Xe&&8<Xe&&11>=Xe),Or=" ",Lr=!1;function Jo(l,c){switch(l){case"keyup":return dn.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cc(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var uc=!1;function vO(l,c){switch(l){case"compositionend":return cc(c);case"keypress":return c.which!==32?null:(Lr=!0,Or);case"textInput":return l=c.data,l===Or&&Lr?null:l;default:return null}}function _O(l,c){if(uc)return l==="compositionend"||!ve&&Jo(l,c)?(l=Zu(),Yo=Qu=cs=null,uc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return fs&&c.locale!=="ko"?null:c.data;default:return null}}var wO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pA(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!wO[l.type]:c==="textarea"}function gA(l,c,f,m){La?ls?ls.push(m):ls=[m]:La=m,c=zp(c,"onChange"),0<c.length&&(f=new us("onChange","change",null,f,m),l.push({event:f,listeners:c}))}var nh=null,ih=null;function AO(l){QE(l,0)}function tp(l){var c=Ui(l);if(Go(c))return l}function mA(l,c){if(l==="change")return c}var yA=!1;if(or){var Vy;if(or){var jy="oninput"in document;if(!jy){var bA=document.createElement("div");bA.setAttribute("oninput","return;"),jy=typeof bA.oninput=="function"}Vy=jy}else Vy=!1;yA=Vy&&(!document.documentMode||9<document.documentMode)}function vA(){nh&&(nh.detachEvent("onpropertychange",_A),ih=nh=null)}function _A(l){if(l.propertyName==="value"&&tp(ih)){var c=[];gA(c,ih,l,ar(l)),Ba(AO,c)}}function xO(l,c,f){l==="focusin"?(vA(),nh=c,ih=f,nh.attachEvent("onpropertychange",_A)):l==="focusout"&&vA()}function EO(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return tp(ih)}function SO(l,c){if(l==="click")return tp(c)}function TO(l,c){if(l==="input"||l==="change")return tp(c)}function CO(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var ji=typeof Object.is=="function"?Object.is:CO;function rh(l,c){if(ji(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var f=Object.keys(l),m=Object.keys(c);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var _=f[m];if(!Ue.call(c,_)||!ji(l[_],c[_]))return!1}return!0}function wA(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function AA(l,c){var f=wA(l);l=0;for(var m;f;){if(f.nodeType===3){if(m=l+f.textContent.length,l<=c&&m>=c)return{node:f,offset:c-l};l=m}t:{for(;f;){if(f.nextSibling){f=f.nextSibling;break t}f=f.parentNode}f=void 0}f=wA(f)}}function xA(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?xA(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function EA(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var c=os(l.document);c instanceof l.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)l=c.contentWindow;else break;c=os(l.document)}return c}function zy(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}var RO=or&&"documentMode"in document&&11>=document.documentMode,hc=null,Hy=null,sh=null,$y=!1;function SA(l,c,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;$y||hc==null||hc!==os(m)||(m=hc,"selectionStart"in m&&zy(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),sh&&rh(sh,m)||(sh=m,m=zp(Hy,"onSelect"),0<m.length&&(c=new us("onSelect","select",null,c,f),l.push({event:c,listeners:m}),c.target=hc)))}function tl(l,c){var f={};return f[l.toLowerCase()]=c.toLowerCase(),f["Webkit"+l]="webkit"+c,f["Moz"+l]="moz"+c,f}var dc={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionrun:tl("Transition","TransitionRun"),transitionstart:tl("Transition","TransitionStart"),transitioncancel:tl("Transition","TransitionCancel"),transitionend:tl("Transition","TransitionEnd")},Gy={},TA={};or&&(TA=document.createElement("div").style,"AnimationEvent"in window||(delete dc.animationend.animation,delete dc.animationiteration.animation,delete dc.animationstart.animation),"TransitionEvent"in window||delete dc.transitionend.transition);function el(l){if(Gy[l])return Gy[l];if(!dc[l])return l;var c=dc[l],f;for(f in c)if(c.hasOwnProperty(f)&&f in TA)return Gy[l]=c[f];return l}var CA=el("animationend"),RA=el("animationiteration"),IA=el("animationstart"),IO=el("transitionrun"),DO=el("transitionstart"),kO=el("transitioncancel"),DA=el("transitionend"),kA=new Map,qy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qy.push("scrollEnd");function Br(l,c){kA.set(l,c),ss(c,[l])}var ep=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},cr=[],fc=0,Wy=0;function np(){for(var l=fc,c=Wy=fc=0;c<l;){var f=cr[c];cr[c++]=null;var m=cr[c];cr[c++]=null;var _=cr[c];cr[c++]=null;var A=cr[c];if(cr[c++]=null,m!==null&&_!==null){var D=m.pending;D===null?_.next=_:(_.next=D.next,D.next=_),m.pending=_}A!==0&&NA(f,_,A)}}function ip(l,c,f,m){cr[fc++]=l,cr[fc++]=c,cr[fc++]=f,cr[fc++]=m,Wy|=m,l.lanes|=m,l=l.alternate,l!==null&&(l.lanes|=m)}function Xy(l,c,f,m){return ip(l,c,f,m),rp(l)}function nl(l,c){return ip(l,null,null,c),rp(l)}function NA(l,c,f){l.lanes|=f;var m=l.alternate;m!==null&&(m.lanes|=f);for(var _=!1,A=l.return;A!==null;)A.childLanes|=f,m=A.alternate,m!==null&&(m.childLanes|=f),A.tag===22&&(l=A.stateNode,l===null||l._visibility&1||(_=!0)),l=A,A=A.return;return l.tag===3?(A=l.stateNode,_&&c!==null&&(_=31-Se(f),l=A.hiddenUpdates,m=l[_],m===null?l[_]=[c]:m.push(c),c.lane=f|536870912),A):null}function rp(l){if(50<Ch)throw Ch=0,iv=null,Error(r(185));for(var c=l.return;c!==null;)l=c,c=l.return;return l.tag===3?l.stateNode:null}var pc={};function NO(l,c,f,m){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zi(l,c,f,m){return new NO(l,c,f,m)}function Yy(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Xs(l,c){var f=l.alternate;return f===null?(f=zi(l.tag,c,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=c,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,c=l.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function MA(l,c){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=c,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,c=f.dependencies,l.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),l}function sp(l,c,f,m,_,A){var D=0;if(m=l,typeof l=="function")Yy(l)&&(D=1);else if(typeof l=="string")D=BL(l,f,ct.current)?26:l==="html"||l==="head"||l==="body"?27:5;else t:switch(l){case L:return l=zi(31,f,c,_),l.elementType=L,l.lanes=A,l;case x:return il(f.children,_,A,c);case S:D=8,_|=24;break;case E:return l=zi(12,f,c,_|2),l.elementType=E,l.lanes=A,l;case O:return l=zi(13,f,c,_),l.elementType=O,l.lanes=A,l;case B:return l=zi(19,f,c,_),l.elementType=B,l.lanes=A,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case N:D=10;break t;case k:D=9;break t;case M:D=11;break t;case C:D=14;break t;case R:D=16,m=null;break t}D=29,f=Error(r(130,l===null?"null":typeof l,"")),m=null}return c=zi(D,f,c,_),c.elementType=l,c.type=m,c.lanes=A,c}function il(l,c,f,m){return l=zi(7,l,m,c),l.lanes=f,l}function Ky(l,c,f){return l=zi(6,l,null,c),l.lanes=f,l}function PA(l){var c=zi(18,null,null,0);return c.stateNode=l,c}function Qy(l,c,f){return c=zi(4,l.children!==null?l.children:[],l.key,c),c.lanes=f,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}var OA=new WeakMap;function ur(l,c){if(typeof l=="object"&&l!==null){var f=OA.get(l);return f!==void 0?f:(c={value:l,source:c,stack:Bi(c)},OA.set(l,c),c)}return{value:l,source:c,stack:Bi(c)}}var gc=[],mc=0,ap=null,ah=0,hr=[],dr=0,ja=null,ps=1,gs="";function Ys(l,c){gc[mc++]=ah,gc[mc++]=ap,ap=l,ah=c}function LA(l,c,f){hr[dr++]=ps,hr[dr++]=gs,hr[dr++]=ja,ja=l;var m=ps;l=gs;var _=32-Se(m)-1;m&=~(1<<_),f+=1;var A=32-Se(c)+_;if(30<A){var D=_-_%5;A=(m&(1<<D)-1).toString(32),m>>=D,_-=D,ps=1<<32-Se(c)+_|f<<_|m,gs=A+l}else ps=1<<A|f<<_|m,gs=l}function Zy(l){l.return!==null&&(Ys(l,1),LA(l,1,0))}function Jy(l){for(;l===ap;)ap=gc[--mc],gc[mc]=null,ah=gc[--mc],gc[mc]=null;for(;l===ja;)ja=hr[--dr],hr[dr]=null,gs=hr[--dr],hr[dr]=null,ps=hr[--dr],hr[dr]=null}function BA(l,c){hr[dr++]=ps,hr[dr++]=gs,hr[dr++]=ja,ps=c.id,gs=c.overflow,ja=l}var $n=null,He=null,de=!1,za=null,fr=!1,tb=Error(r(519));function Ha(l){var c=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oh(ur(c,l)),tb}function FA(l){var c=l.stateNode,f=l.type,m=l.memoizedProps;switch(c[vn]=l,c[Mn]=m,f){case"dialog":re("cancel",c),re("close",c);break;case"iframe":case"object":case"embed":re("load",c);break;case"video":case"audio":for(f=0;f<Ih.length;f++)re(Ih[f],c);break;case"source":re("error",c);break;case"img":case"image":case"link":re("error",c),re("load",c);break;case"details":re("toggle",c);break;case"input":re("invalid",c),Uf(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":re("invalid",c);break;case"textarea":re("invalid",c),Pa(c,m.value,m.defaultValue,m.children)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||m.suppressHydrationWarning===!0||eS(c.textContent,f)?(m.popover!=null&&(re("beforetoggle",c),re("toggle",c)),m.onScroll!=null&&re("scroll",c),m.onScrollEnd!=null&&re("scrollend",c),m.onClick!=null&&(c.onclick=Nr),c=!0):c=!1,c||Ha(l,!0)}function UA(l){for($n=l.return;$n;)switch($n.tag){case 5:case 31:case 13:fr=!1;return;case 27:case 3:fr=!0;return;default:$n=$n.return}}function yc(l){if(l!==$n)return!1;if(!de)return UA(l),de=!0,!1;var c=l.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||bv(l.type,l.memoizedProps)),f=!f),f&&He&&Ha(l),UA(l),c===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));He=uS(l)}else if(c===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));He=uS(l)}else c===27?(c=He,io(l.type)?(l=xv,xv=null,He=l):He=c):He=$n?gr(l.stateNode.nextSibling):null;return!0}function rl(){He=$n=null,de=!1}function eb(){var l=za;return l!==null&&(Ri===null?Ri=l:Ri.push.apply(Ri,l),za=null),l}function oh(l){za===null?za=[l]:za.push(l)}var nb=q(null),sl=null,Ks=null;function $a(l,c,f){lt(nb,c._currentValue),c._currentValue=f}function Qs(l){l._currentValue=nb.current,Z(nb)}function ib(l,c,f){for(;l!==null;){var m=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),l===f)break;l=l.return}}function rb(l,c,f,m){var _=l.child;for(_!==null&&(_.return=l);_!==null;){var A=_.dependencies;if(A!==null){var D=_.child;A=A.firstContext;t:for(;A!==null;){var j=A;A=_;for(var W=0;W<c.length;W++)if(j.context===c[W]){A.lanes|=f,j=A.alternate,j!==null&&(j.lanes|=f),ib(A.return,f,l),m||(D=null);break t}A=j.next}}else if(_.tag===18){if(D=_.return,D===null)throw Error(r(341));D.lanes|=f,A=D.alternate,A!==null&&(A.lanes|=f),ib(D,f,l),D=null}else D=_.child;if(D!==null)D.return=_;else for(D=_;D!==null;){if(D===l){D=null;break}if(_=D.sibling,_!==null){_.return=D.return,D=_;break}D=D.return}_=D}}function bc(l,c,f,m){l=null;for(var _=c,A=!1;_!==null;){if(!A){if((_.flags&524288)!==0)A=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var D=_.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var j=_.type;ji(_.pendingProps.value,D.value)||(l!==null?l.push(j):l=[j])}}else if(_===yt.current){if(D=_.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(l!==null?l.push(Ph):l=[Ph])}_=_.return}l!==null&&rb(c,l,f,m),c.flags|=262144}function op(l){for(l=l.firstContext;l!==null;){if(!ji(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function al(l){sl=l,Ks=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Gn(l){return VA(sl,l)}function lp(l,c){return sl===null&&al(l),VA(l,c)}function VA(l,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},Ks===null){if(l===null)throw Error(r(308));Ks=c,l.dependencies={lanes:0,firstContext:c},l.flags|=524288}else Ks=Ks.next=c;return f}var MO=typeof AbortController<"u"?AbortController:function(){var l=[],c=this.signal={aborted:!1,addEventListener:function(f,m){l.push(m)}};this.abort=function(){c.aborted=!0,l.forEach(function(f){return f()})}},PO=i.unstable_scheduleCallback,OO=i.unstable_NormalPriority,An={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sb(){return{controller:new MO,data:new Map,refCount:0}}function lh(l){l.refCount--,l.refCount===0&&PO(OO,function(){l.controller.abort()})}var ch=null,ab=0,vc=0,_c=null;function LO(l,c){if(ch===null){var f=ch=[];ab=0,vc=cv(),_c={status:"pending",value:void 0,then:function(m){f.push(m)}}}return ab++,c.then(jA,jA),c}function jA(){if(--ab===0&&ch!==null){_c!==null&&(_c.status="fulfilled");var l=ch;ch=null,vc=0,_c=null;for(var c=0;c<l.length;c++)(0,l[c])()}}function BO(l,c){var f=[],m={status:"pending",value:null,reason:null,then:function(_){f.push(_)}};return l.then(function(){m.status="fulfilled",m.value=c;for(var _=0;_<f.length;_++)(0,f[_])(c)},function(_){for(m.status="rejected",m.reason=_,_=0;_<f.length;_++)(0,f[_])(void 0)}),m}var zA=z.S;z.S=function(l,c){SE=Ht(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&LO(l,c),zA!==null&&zA(l,c)};var ol=q(null);function ob(){var l=ol.current;return l!==null?l:Le.pooledCache}function cp(l,c){c===null?lt(ol,ol.current):lt(ol,c.pool)}function HA(){var l=ob();return l===null?null:{parent:An._currentValue,pool:l}}var wc=Error(r(460)),lb=Error(r(474)),up=Error(r(542)),hp={then:function(){}};function $A(l){return l=l.status,l==="fulfilled"||l==="rejected"}function GA(l,c,f){switch(f=l[f],f===void 0?l.push(c):f!==c&&(c.then(Nr,Nr),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,WA(l),l;default:if(typeof c.status=="string")c.then(Nr,Nr);else{if(l=Le,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=c,l.status="pending",l.then(function(m){if(c.status==="pending"){var _=c;_.status="fulfilled",_.value=m}},function(m){if(c.status==="pending"){var _=c;_.status="rejected",_.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,WA(l),l}throw cl=c,wc}}function ll(l){try{var c=l._init;return c(l._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(cl=f,wc):f}}var cl=null;function qA(){if(cl===null)throw Error(r(459));var l=cl;return cl=null,l}function WA(l){if(l===wc||l===up)throw Error(r(483))}var Ac=null,uh=0;function dp(l){var c=uh;return uh+=1,Ac===null&&(Ac=[]),GA(Ac,l,c)}function hh(l,c){c=c.props.ref,l.ref=c!==void 0?c:null}function fp(l,c){throw c.$$typeof===y?Error(r(525)):(l=Object.prototype.toString.call(c),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l)))}function XA(l){function c(J,K){if(l){var it=J.deletions;it===null?(J.deletions=[K],J.flags|=16):it.push(K)}}function f(J,K){if(!l)return null;for(;K!==null;)c(J,K),K=K.sibling;return null}function m(J){for(var K=new Map;J!==null;)J.key!==null?K.set(J.key,J):K.set(J.index,J),J=J.sibling;return K}function _(J,K){return J=Xs(J,K),J.index=0,J.sibling=null,J}function A(J,K,it){return J.index=it,l?(it=J.alternate,it!==null?(it=it.index,it<K?(J.flags|=67108866,K):it):(J.flags|=67108866,K)):(J.flags|=1048576,K)}function D(J){return l&&J.alternate===null&&(J.flags|=67108866),J}function j(J,K,it,dt){return K===null||K.tag!==6?(K=Ky(it,J.mode,dt),K.return=J,K):(K=_(K,it),K.return=J,K)}function W(J,K,it,dt){var Ot=it.type;return Ot===x?ut(J,K,it.props.children,dt,it.key):K!==null&&(K.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===R&&ll(Ot)===K.type)?(K=_(K,it.props),hh(K,it),K.return=J,K):(K=sp(it.type,it.key,it.props,null,J.mode,dt),hh(K,it),K.return=J,K)}function rt(J,K,it,dt){return K===null||K.tag!==4||K.stateNode.containerInfo!==it.containerInfo||K.stateNode.implementation!==it.implementation?(K=Qy(it,J.mode,dt),K.return=J,K):(K=_(K,it.children||[]),K.return=J,K)}function ut(J,K,it,dt,Ot){return K===null||K.tag!==7?(K=il(it,J.mode,dt,Ot),K.return=J,K):(K=_(K,it),K.return=J,K)}function ft(J,K,it){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Ky(""+K,J.mode,it),K.return=J,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case b:return it=sp(K.type,K.key,K.props,null,J.mode,it),hh(it,K),it.return=J,it;case w:return K=Qy(K,J.mode,it),K.return=J,K;case R:return K=ll(K),ft(J,K,it)}if(et(K)||$(K))return K=il(K,J.mode,it,null),K.return=J,K;if(typeof K.then=="function")return ft(J,dp(K),it);if(K.$$typeof===N)return ft(J,lp(J,K),it);fp(J,K)}return null}function st(J,K,it,dt){var Ot=K!==null?K.key:null;if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return Ot!==null?null:j(J,K,""+it,dt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case b:return it.key===Ot?W(J,K,it,dt):null;case w:return it.key===Ot?rt(J,K,it,dt):null;case R:return it=ll(it),st(J,K,it,dt)}if(et(it)||$(it))return Ot!==null?null:ut(J,K,it,dt,null);if(typeof it.then=="function")return st(J,K,dp(it),dt);if(it.$$typeof===N)return st(J,K,lp(J,it),dt);fp(J,it)}return null}function ot(J,K,it,dt,Ot){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return J=J.get(it)||null,j(K,J,""+dt,Ot);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case b:return J=J.get(dt.key===null?it:dt.key)||null,W(K,J,dt,Ot);case w:return J=J.get(dt.key===null?it:dt.key)||null,rt(K,J,dt,Ot);case R:return dt=ll(dt),ot(J,K,it,dt,Ot)}if(et(dt)||$(dt))return J=J.get(it)||null,ut(K,J,dt,Ot,null);if(typeof dt.then=="function")return ot(J,K,it,dp(dt),Ot);if(dt.$$typeof===N)return ot(J,K,it,lp(K,dt),Ot);fp(K,dt)}return null}function Rt(J,K,it,dt){for(var Ot=null,ye=null,It=K,Zt=K=0,oe=null;It!==null&&Zt<it.length;Zt++){It.index>Zt?(oe=It,It=null):oe=It.sibling;var be=st(J,It,it[Zt],dt);if(be===null){It===null&&(It=oe);break}l&&It&&be.alternate===null&&c(J,It),K=A(be,K,Zt),ye===null?Ot=be:ye.sibling=be,ye=be,It=oe}if(Zt===it.length)return f(J,It),de&&Ys(J,Zt),Ot;if(It===null){for(;Zt<it.length;Zt++)It=ft(J,it[Zt],dt),It!==null&&(K=A(It,K,Zt),ye===null?Ot=It:ye.sibling=It,ye=It);return de&&Ys(J,Zt),Ot}for(It=m(It);Zt<it.length;Zt++)oe=ot(It,J,Zt,it[Zt],dt),oe!==null&&(l&&oe.alternate!==null&&It.delete(oe.key===null?Zt:oe.key),K=A(oe,K,Zt),ye===null?Ot=oe:ye.sibling=oe,ye=oe);return l&&It.forEach(function(lo){return c(J,lo)}),de&&Ys(J,Zt),Ot}function Ft(J,K,it,dt){if(it==null)throw Error(r(151));for(var Ot=null,ye=null,It=K,Zt=K=0,oe=null,be=it.next();It!==null&&!be.done;Zt++,be=it.next()){It.index>Zt?(oe=It,It=null):oe=It.sibling;var lo=st(J,It,be.value,dt);if(lo===null){It===null&&(It=oe);break}l&&It&&lo.alternate===null&&c(J,It),K=A(lo,K,Zt),ye===null?Ot=lo:ye.sibling=lo,ye=lo,It=oe}if(be.done)return f(J,It),de&&Ys(J,Zt),Ot;if(It===null){for(;!be.done;Zt++,be=it.next())be=ft(J,be.value,dt),be!==null&&(K=A(be,K,Zt),ye===null?Ot=be:ye.sibling=be,ye=be);return de&&Ys(J,Zt),Ot}for(It=m(It);!be.done;Zt++,be=it.next())be=ot(It,J,Zt,be.value,dt),be!==null&&(l&&be.alternate!==null&&It.delete(be.key===null?Zt:be.key),K=A(be,K,Zt),ye===null?Ot=be:ye.sibling=be,ye=be);return l&&It.forEach(function(XL){return c(J,XL)}),de&&Ys(J,Zt),Ot}function Me(J,K,it,dt){if(typeof it=="object"&&it!==null&&it.type===x&&it.key===null&&(it=it.props.children),typeof it=="object"&&it!==null){switch(it.$$typeof){case b:t:{for(var Ot=it.key;K!==null;){if(K.key===Ot){if(Ot=it.type,Ot===x){if(K.tag===7){f(J,K.sibling),dt=_(K,it.props.children),dt.return=J,J=dt;break t}}else if(K.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===R&&ll(Ot)===K.type){f(J,K.sibling),dt=_(K,it.props),hh(dt,it),dt.return=J,J=dt;break t}f(J,K);break}else c(J,K);K=K.sibling}it.type===x?(dt=il(it.props.children,J.mode,dt,it.key),dt.return=J,J=dt):(dt=sp(it.type,it.key,it.props,null,J.mode,dt),hh(dt,it),dt.return=J,J=dt)}return D(J);case w:t:{for(Ot=it.key;K!==null;){if(K.key===Ot)if(K.tag===4&&K.stateNode.containerInfo===it.containerInfo&&K.stateNode.implementation===it.implementation){f(J,K.sibling),dt=_(K,it.children||[]),dt.return=J,J=dt;break t}else{f(J,K);break}else c(J,K);K=K.sibling}dt=Qy(it,J.mode,dt),dt.return=J,J=dt}return D(J);case R:return it=ll(it),Me(J,K,it,dt)}if(et(it))return Rt(J,K,it,dt);if($(it)){if(Ot=$(it),typeof Ot!="function")throw Error(r(150));return it=Ot.call(it),Ft(J,K,it,dt)}if(typeof it.then=="function")return Me(J,K,dp(it),dt);if(it.$$typeof===N)return Me(J,K,lp(J,it),dt);fp(J,it)}return typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint"?(it=""+it,K!==null&&K.tag===6?(f(J,K.sibling),dt=_(K,it),dt.return=J,J=dt):(f(J,K),dt=Ky(it,J.mode,dt),dt.return=J,J=dt),D(J)):f(J,K)}return function(J,K,it,dt){try{uh=0;var Ot=Me(J,K,it,dt);return Ac=null,Ot}catch(It){if(It===wc||It===up)throw It;var ye=zi(29,It,null,J.mode);return ye.lanes=dt,ye.return=J,ye}finally{}}}var ul=XA(!0),YA=XA(!1),Ga=!1;function cb(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ub(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function qa(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Wa(l,c,f){var m=l.updateQueue;if(m===null)return null;if(m=m.shared,(_e&2)!==0){var _=m.pending;return _===null?c.next=c:(c.next=_.next,_.next=c),m.pending=c,c=rp(l),NA(l,null,f),c}return ip(l,m,c,f),rp(l)}function dh(l,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var m=c.lanes;m&=l.pendingLanes,f|=m,c.lanes=f,Uu(l,f)}}function hb(l,c){var f=l.updateQueue,m=l.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var _=null,A=null;if(f=f.firstBaseUpdate,f!==null){do{var D={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};A===null?_=A=D:A=A.next=D,f=f.next}while(f!==null);A===null?_=A=c:A=A.next=c}else _=A=c;f={baseState:m.baseState,firstBaseUpdate:_,lastBaseUpdate:A,shared:m.shared,callbacks:m.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=c}var db=!1;function fh(){if(db){var l=_c;if(l!==null)throw l}}function ph(l,c,f,m){db=!1;var _=l.updateQueue;Ga=!1;var A=_.firstBaseUpdate,D=_.lastBaseUpdate,j=_.shared.pending;if(j!==null){_.shared.pending=null;var W=j,rt=W.next;W.next=null,D===null?A=rt:D.next=rt,D=W;var ut=l.alternate;ut!==null&&(ut=ut.updateQueue,j=ut.lastBaseUpdate,j!==D&&(j===null?ut.firstBaseUpdate=rt:j.next=rt,ut.lastBaseUpdate=W))}if(A!==null){var ft=_.baseState;D=0,ut=rt=W=null,j=A;do{var st=j.lane&-536870913,ot=st!==j.lane;if(ot?(ae&st)===st:(m&st)===st){st!==0&&st===vc&&(db=!0),ut!==null&&(ut=ut.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});t:{var Rt=l,Ft=j;st=c;var Me=f;switch(Ft.tag){case 1:if(Rt=Ft.payload,typeof Rt=="function"){ft=Rt.call(Me,ft,st);break t}ft=Rt;break t;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=Ft.payload,st=typeof Rt=="function"?Rt.call(Me,ft,st):Rt,st==null)break t;ft=g({},ft,st);break t;case 2:Ga=!0}}st=j.callback,st!==null&&(l.flags|=64,ot&&(l.flags|=8192),ot=_.callbacks,ot===null?_.callbacks=[st]:ot.push(st))}else ot={lane:st,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ut===null?(rt=ut=ot,W=ft):ut=ut.next=ot,D|=st;if(j=j.next,j===null){if(j=_.shared.pending,j===null)break;ot=j,j=ot.next,ot.next=null,_.lastBaseUpdate=ot,_.shared.pending=null}}while(!0);ut===null&&(W=ft),_.baseState=W,_.firstBaseUpdate=rt,_.lastBaseUpdate=ut,A===null&&(_.shared.lanes=0),Za|=D,l.lanes=D,l.memoizedState=ft}}function KA(l,c){if(typeof l!="function")throw Error(r(191,l));l.call(c)}function QA(l,c){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)KA(f[l],c)}var xc=q(null),pp=q(0);function ZA(l,c){l=aa,lt(pp,l),lt(xc,c),aa=l|c.baseLanes}function fb(){lt(pp,aa),lt(xc,xc.current)}function pb(){aa=pp.current,Z(xc),Z(pp)}var Hi=q(null),pr=null;function Xa(l){var c=l.alternate;lt(fn,fn.current&1),lt(Hi,l),pr===null&&(c===null||xc.current!==null||c.memoizedState!==null)&&(pr=l)}function gb(l){lt(fn,fn.current),lt(Hi,l),pr===null&&(pr=l)}function JA(l){l.tag===22?(lt(fn,fn.current),lt(Hi,l),pr===null&&(pr=l)):Ya()}function Ya(){lt(fn,fn.current),lt(Hi,Hi.current)}function $i(l){Z(Hi),pr===l&&(pr=null),Z(fn)}var fn=q(0);function gp(l){for(var c=l;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||wv(f)||Av(f)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Zs=0,Qt=null,ke=null,xn=null,mp=!1,Ec=!1,hl=!1,yp=0,gh=0,Sc=null,FO=0;function on(){throw Error(r(321))}function mb(l,c){if(c===null)return!1;for(var f=0;f<c.length&&f<l.length;f++)if(!ji(l[f],c[f]))return!1;return!0}function yb(l,c,f,m,_,A){return Zs=A,Qt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,z.H=l===null||l.memoizedState===null?Lx:Nb,hl=!1,A=f(m,_),hl=!1,Ec&&(A=ex(c,f,m,_)),tx(l),A}function tx(l){z.H=bh;var c=ke!==null&&ke.next!==null;if(Zs=0,xn=ke=Qt=null,mp=!1,gh=0,Sc=null,c)throw Error(r(300));l===null||En||(l=l.dependencies,l!==null&&op(l)&&(En=!0))}function ex(l,c,f,m){Qt=l;var _=0;do{if(Ec&&(Sc=null),gh=0,Ec=!1,25<=_)throw Error(r(301));if(_+=1,xn=ke=null,l.updateQueue!=null){var A=l.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}z.H=Bx,A=c(f,m)}while(Ec);return A}function UO(){var l=z.H,c=l.useState()[0];return c=typeof c.then=="function"?mh(c):c,l=l.useState()[0],(ke!==null?ke.memoizedState:null)!==l&&(Qt.flags|=1024),c}function bb(){var l=yp!==0;return yp=0,l}function vb(l,c,f){c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~f}function _b(l){if(mp){for(l=l.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}mp=!1}Zs=0,xn=ke=Qt=null,Ec=!1,gh=yp=0,Sc=null}function pi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?Qt.memoizedState=xn=l:xn=xn.next=l,xn}function pn(){if(ke===null){var l=Qt.alternate;l=l!==null?l.memoizedState:null}else l=ke.next;var c=xn===null?Qt.memoizedState:xn.next;if(c!==null)xn=c,ke=l;else{if(l===null)throw Qt.alternate===null?Error(r(467)):Error(r(310));ke=l,l={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},xn===null?Qt.memoizedState=xn=l:xn=xn.next=l}return xn}function bp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mh(l){var c=gh;return gh+=1,Sc===null&&(Sc=[]),l=GA(Sc,l,c),c=Qt,(xn===null?c.memoizedState:xn.next)===null&&(c=c.alternate,z.H=c===null||c.memoizedState===null?Lx:Nb),l}function vp(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return mh(l);if(l.$$typeof===N)return Gn(l)}throw Error(r(438,String(l)))}function wb(l){var c=null,f=Qt.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var m=Qt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(_){return _.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=bp(),Qt.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(l),m=0;m<l;m++)f[m]=F;return c.index++,f}function Js(l,c){return typeof c=="function"?c(l):c}function _p(l){var c=pn();return Ab(c,ke,l)}function Ab(l,c,f){var m=l.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=f;var _=l.baseQueue,A=m.pending;if(A!==null){if(_!==null){var D=_.next;_.next=A.next,A.next=D}c.baseQueue=_=A,m.pending=null}if(A=l.baseState,_===null)l.memoizedState=A;else{c=_.next;var j=D=null,W=null,rt=c,ut=!1;do{var ft=rt.lane&-536870913;if(ft!==rt.lane?(ae&ft)===ft:(Zs&ft)===ft){var st=rt.revertLane;if(st===0)W!==null&&(W=W.next={lane:0,revertLane:0,gesture:null,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),ft===vc&&(ut=!0);else if((Zs&st)===st){rt=rt.next,st===vc&&(ut=!0);continue}else ft={lane:0,revertLane:rt.revertLane,gesture:null,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},W===null?(j=W=ft,D=A):W=W.next=ft,Qt.lanes|=st,Za|=st;ft=rt.action,hl&&f(A,ft),A=rt.hasEagerState?rt.eagerState:f(A,ft)}else st={lane:ft,revertLane:rt.revertLane,gesture:rt.gesture,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},W===null?(j=W=st,D=A):W=W.next=st,Qt.lanes|=ft,Za|=ft;rt=rt.next}while(rt!==null&&rt!==c);if(W===null?D=A:W.next=j,!ji(A,l.memoizedState)&&(En=!0,ut&&(f=_c,f!==null)))throw f;l.memoizedState=A,l.baseState=D,l.baseQueue=W,m.lastRenderedState=A}return _===null&&(m.lanes=0),[l.memoizedState,m.dispatch]}function xb(l){var c=pn(),f=c.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=l;var m=f.dispatch,_=f.pending,A=c.memoizedState;if(_!==null){f.pending=null;var D=_=_.next;do A=l(A,D.action),D=D.next;while(D!==_);ji(A,c.memoizedState)||(En=!0),c.memoizedState=A,c.baseQueue===null&&(c.baseState=A),f.lastRenderedState=A}return[A,m]}function nx(l,c,f){var m=Qt,_=pn(),A=de;if(A){if(f===void 0)throw Error(r(407));f=f()}else f=c();var D=!ji((ke||_).memoizedState,f);if(D&&(_.memoizedState=f,En=!0),_=_.queue,Tb(sx.bind(null,m,_,l),[l]),_.getSnapshot!==c||D||xn!==null&&xn.memoizedState.tag&1){if(m.flags|=2048,Tc(9,{destroy:void 0},rx.bind(null,m,_,f,c),null),Le===null)throw Error(r(349));A||(Zs&127)!==0||ix(m,c,f)}return f}function ix(l,c,f){l.flags|=16384,l={getSnapshot:c,value:f},c=Qt.updateQueue,c===null?(c=bp(),Qt.updateQueue=c,c.stores=[l]):(f=c.stores,f===null?c.stores=[l]:f.push(l))}function rx(l,c,f,m){c.value=f,c.getSnapshot=m,ax(c)&&ox(l)}function sx(l,c,f){return f(function(){ax(c)&&ox(l)})}function ax(l){var c=l.getSnapshot;l=l.value;try{var f=c();return!ji(l,f)}catch{return!0}}function ox(l){var c=nl(l,2);c!==null&&Ii(c,l,2)}function Eb(l){var c=pi();if(typeof l=="function"){var f=l;if(l=f(),hl){se(!0);try{f()}finally{se(!1)}}}return c.memoizedState=c.baseState=l,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:l},c}function lx(l,c,f,m){return l.baseState=f,Ab(l,ke,typeof m=="function"?m:Js)}function VO(l,c,f,m,_){if(xp(l))throw Error(r(485));if(l=c.action,l!==null){var A={payload:_,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){A.listeners.push(D)}};z.T!==null?f(!0):A.isTransition=!1,m(A),f=c.pending,f===null?(A.next=c.pending=A,cx(c,A)):(A.next=f.next,c.pending=f.next=A)}}function cx(l,c){var f=c.action,m=c.payload,_=l.state;if(c.isTransition){var A=z.T,D={};z.T=D;try{var j=f(_,m),W=z.S;W!==null&&W(D,j),ux(l,c,j)}catch(rt){Sb(l,c,rt)}finally{A!==null&&D.types!==null&&(A.types=D.types),z.T=A}}else try{A=f(_,m),ux(l,c,A)}catch(rt){Sb(l,c,rt)}}function ux(l,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){hx(l,c,m)},function(m){return Sb(l,c,m)}):hx(l,c,f)}function hx(l,c,f){c.status="fulfilled",c.value=f,dx(c),l.state=f,c=l.pending,c!==null&&(f=c.next,f===c?l.pending=null:(f=f.next,c.next=f,cx(l,f)))}function Sb(l,c,f){var m=l.pending;if(l.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=f,dx(c),c=c.next;while(c!==m)}l.action=null}function dx(l){l=l.listeners;for(var c=0;c<l.length;c++)(0,l[c])()}function fx(l,c){return c}function px(l,c){if(de){var f=Le.formState;if(f!==null){t:{var m=Qt;if(de){if(He){e:{for(var _=He,A=fr;_.nodeType!==8;){if(!A){_=null;break e}if(_=gr(_.nextSibling),_===null){_=null;break e}}A=_.data,_=A==="F!"||A==="F"?_:null}if(_){He=gr(_.nextSibling),m=_.data==="F!";break t}}Ha(m)}m=!1}m&&(c=f[0])}}return f=pi(),f.memoizedState=f.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fx,lastRenderedState:c},f.queue=m,f=Mx.bind(null,Qt,m),m.dispatch=f,m=Eb(!1),A=kb.bind(null,Qt,!1,m.queue),m=pi(),_={state:c,dispatch:null,action:l,pending:null},m.queue=_,f=VO.bind(null,Qt,_,A,f),_.dispatch=f,m.memoizedState=l,[c,f,!1]}function gx(l){var c=pn();return mx(c,ke,l)}function mx(l,c,f){if(c=Ab(l,c,fx)[0],l=_p(Js)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=mh(c)}catch(D){throw D===wc?up:D}else m=c;c=pn();var _=c.queue,A=_.dispatch;return f!==c.memoizedState&&(Qt.flags|=2048,Tc(9,{destroy:void 0},jO.bind(null,_,f),null)),[m,A,l]}function jO(l,c){l.action=c}function yx(l){var c=pn(),f=ke;if(f!==null)return mx(c,f,l);pn(),c=c.memoizedState,f=pn();var m=f.queue.dispatch;return f.memoizedState=l,[c,m,!1]}function Tc(l,c,f,m){return l={tag:l,create:f,deps:m,inst:c,next:null},c=Qt.updateQueue,c===null&&(c=bp(),Qt.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=l.next=l:(m=f.next,f.next=l,l.next=m,c.lastEffect=l),l}function bx(){return pn().memoizedState}function wp(l,c,f,m){var _=pi();Qt.flags|=l,_.memoizedState=Tc(1|c,{destroy:void 0},f,m===void 0?null:m)}function Ap(l,c,f,m){var _=pn();m=m===void 0?null:m;var A=_.memoizedState.inst;ke!==null&&m!==null&&mb(m,ke.memoizedState.deps)?_.memoizedState=Tc(c,A,f,m):(Qt.flags|=l,_.memoizedState=Tc(1|c,A,f,m))}function vx(l,c){wp(8390656,8,l,c)}function Tb(l,c){Ap(2048,8,l,c)}function zO(l){Qt.flags|=4;var c=Qt.updateQueue;if(c===null)c=bp(),Qt.updateQueue=c,c.events=[l];else{var f=c.events;f===null?c.events=[l]:f.push(l)}}function _x(l){var c=pn().memoizedState;return zO({ref:c,nextImpl:l}),function(){if((_e&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}function wx(l,c){return Ap(4,2,l,c)}function Ax(l,c){return Ap(4,4,l,c)}function xx(l,c){if(typeof c=="function"){l=l();var f=c(l);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function Ex(l,c,f){f=f!=null?f.concat([l]):null,Ap(4,4,xx.bind(null,c,l),f)}function Cb(){}function Sx(l,c){var f=pn();c=c===void 0?null:c;var m=f.memoizedState;return c!==null&&mb(c,m[1])?m[0]:(f.memoizedState=[l,c],l)}function Tx(l,c){var f=pn();c=c===void 0?null:c;var m=f.memoizedState;if(c!==null&&mb(c,m[1]))return m[0];if(m=l(),hl){se(!0);try{l()}finally{se(!1)}}return f.memoizedState=[m,c],m}function Rb(l,c,f){return f===void 0||(Zs&1073741824)!==0&&(ae&261930)===0?l.memoizedState=c:(l.memoizedState=f,l=CE(),Qt.lanes|=l,Za|=l,f)}function Cx(l,c,f,m){return ji(f,c)?f:xc.current!==null?(l=Rb(l,f,m),ji(l,c)||(En=!0),l):(Zs&42)===0||(Zs&1073741824)!==0&&(ae&261930)===0?(En=!0,l.memoizedState=f):(l=CE(),Qt.lanes|=l,Za|=l,c)}function Rx(l,c,f,m,_){var A=Y.p;Y.p=A!==0&&8>A?A:8;var D=z.T,j={};z.T=j,kb(l,!1,c,f);try{var W=_(),rt=z.S;if(rt!==null&&rt(j,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ut=BO(W,m);yh(l,c,ut,Wi(l))}else yh(l,c,m,Wi(l))}catch(ft){yh(l,c,{then:function(){},status:"rejected",reason:ft},Wi())}finally{Y.p=A,D!==null&&j.types!==null&&(D.types=j.types),z.T=D}}function HO(){}function Ib(l,c,f,m){if(l.tag!==5)throw Error(r(476));var _=Ix(l).queue;Rx(l,_,c,nt,f===null?HO:function(){return Dx(l),f(m)})}function Ix(l){var c=l.memoizedState;if(c!==null)return c;c={memoizedState:nt,baseState:nt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:nt},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:f},next:null},l.memoizedState=c,l=l.alternate,l!==null&&(l.memoizedState=c),c}function Dx(l){var c=Ix(l);c.next===null&&(c=l.alternate.memoizedState),yh(l,c.next.queue,{},Wi())}function Db(){return Gn(Ph)}function kx(){return pn().memoizedState}function Nx(){return pn().memoizedState}function $O(l){for(var c=l.return;c!==null;){switch(c.tag){case 24:case 3:var f=Wi();l=qa(f);var m=Wa(c,l,f);m!==null&&(Ii(m,c,f),dh(m,c,f)),c={cache:sb()},l.payload=c;return}c=c.return}}function GO(l,c,f){var m=Wi();f={lane:m,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},xp(l)?Px(c,f):(f=Xy(l,c,f,m),f!==null&&(Ii(f,l,m),Ox(f,c,m)))}function Mx(l,c,f){var m=Wi();yh(l,c,f,m)}function yh(l,c,f,m){var _={lane:m,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(xp(l))Px(c,_);else{var A=l.alternate;if(l.lanes===0&&(A===null||A.lanes===0)&&(A=c.lastRenderedReducer,A!==null))try{var D=c.lastRenderedState,j=A(D,f);if(_.hasEagerState=!0,_.eagerState=j,ji(j,D))return ip(l,c,_,0),Le===null&&np(),!1}catch{}finally{}if(f=Xy(l,c,_,m),f!==null)return Ii(f,l,m),Ox(f,c,m),!0}return!1}function kb(l,c,f,m){if(m={lane:2,revertLane:cv(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},xp(l)){if(c)throw Error(r(479))}else c=Xy(l,f,m,2),c!==null&&Ii(c,l,2)}function xp(l){var c=l.alternate;return l===Qt||c!==null&&c===Qt}function Px(l,c){Ec=mp=!0;var f=l.pending;f===null?c.next=c:(c.next=f.next,f.next=c),l.pending=c}function Ox(l,c,f){if((f&4194048)!==0){var m=c.lanes;m&=l.pendingLanes,f|=m,c.lanes=f,Uu(l,f)}}var bh={readContext:Gn,use:vp,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useLayoutEffect:on,useInsertionEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useSyncExternalStore:on,useId:on,useHostTransitionStatus:on,useFormState:on,useActionState:on,useOptimistic:on,useMemoCache:on,useCacheRefresh:on};bh.useEffectEvent=on;var Lx={readContext:Gn,use:vp,useCallback:function(l,c){return pi().memoizedState=[l,c===void 0?null:c],l},useContext:Gn,useEffect:vx,useImperativeHandle:function(l,c,f){f=f!=null?f.concat([l]):null,wp(4194308,4,xx.bind(null,c,l),f)},useLayoutEffect:function(l,c){return wp(4194308,4,l,c)},useInsertionEffect:function(l,c){wp(4,2,l,c)},useMemo:function(l,c){var f=pi();c=c===void 0?null:c;var m=l();if(hl){se(!0);try{l()}finally{se(!1)}}return f.memoizedState=[m,c],m},useReducer:function(l,c,f){var m=pi();if(f!==void 0){var _=f(c);if(hl){se(!0);try{f(c)}finally{se(!1)}}}else _=c;return m.memoizedState=m.baseState=_,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:_},m.queue=l,l=l.dispatch=GO.bind(null,Qt,l),[m.memoizedState,l]},useRef:function(l){var c=pi();return l={current:l},c.memoizedState=l},useState:function(l){l=Eb(l);var c=l.queue,f=Mx.bind(null,Qt,c);return c.dispatch=f,[l.memoizedState,f]},useDebugValue:Cb,useDeferredValue:function(l,c){var f=pi();return Rb(f,l,c)},useTransition:function(){var l=Eb(!1);return l=Rx.bind(null,Qt,l.queue,!0,!1),pi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,c,f){var m=Qt,_=pi();if(de){if(f===void 0)throw Error(r(407));f=f()}else{if(f=c(),Le===null)throw Error(r(349));(ae&127)!==0||ix(m,c,f)}_.memoizedState=f;var A={value:f,getSnapshot:c};return _.queue=A,vx(sx.bind(null,m,A,l),[l]),m.flags|=2048,Tc(9,{destroy:void 0},rx.bind(null,m,A,f,c),null),f},useId:function(){var l=pi(),c=Le.identifierPrefix;if(de){var f=gs,m=ps;f=(m&~(1<<32-Se(m)-1)).toString(32)+f,c="_"+c+"R_"+f,f=yp++,0<f&&(c+="H"+f.toString(32)),c+="_"}else f=FO++,c="_"+c+"r_"+f.toString(32)+"_";return l.memoizedState=c},useHostTransitionStatus:Db,useFormState:px,useActionState:px,useOptimistic:function(l){var c=pi();c.memoizedState=c.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=kb.bind(null,Qt,!0,f),f.dispatch=c,[l,c]},useMemoCache:wb,useCacheRefresh:function(){return pi().memoizedState=$O.bind(null,Qt)},useEffectEvent:function(l){var c=pi(),f={impl:l};return c.memoizedState=f,function(){if((_e&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},Nb={readContext:Gn,use:vp,useCallback:Sx,useContext:Gn,useEffect:Tb,useImperativeHandle:Ex,useInsertionEffect:wx,useLayoutEffect:Ax,useMemo:Tx,useReducer:_p,useRef:bx,useState:function(){return _p(Js)},useDebugValue:Cb,useDeferredValue:function(l,c){var f=pn();return Cx(f,ke.memoizedState,l,c)},useTransition:function(){var l=_p(Js)[0],c=pn().memoizedState;return[typeof l=="boolean"?l:mh(l),c]},useSyncExternalStore:nx,useId:kx,useHostTransitionStatus:Db,useFormState:gx,useActionState:gx,useOptimistic:function(l,c){var f=pn();return lx(f,ke,l,c)},useMemoCache:wb,useCacheRefresh:Nx};Nb.useEffectEvent=_x;var Bx={readContext:Gn,use:vp,useCallback:Sx,useContext:Gn,useEffect:Tb,useImperativeHandle:Ex,useInsertionEffect:wx,useLayoutEffect:Ax,useMemo:Tx,useReducer:xb,useRef:bx,useState:function(){return xb(Js)},useDebugValue:Cb,useDeferredValue:function(l,c){var f=pn();return ke===null?Rb(f,l,c):Cx(f,ke.memoizedState,l,c)},useTransition:function(){var l=xb(Js)[0],c=pn().memoizedState;return[typeof l=="boolean"?l:mh(l),c]},useSyncExternalStore:nx,useId:kx,useHostTransitionStatus:Db,useFormState:yx,useActionState:yx,useOptimistic:function(l,c){var f=pn();return ke!==null?lx(f,ke,l,c):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:wb,useCacheRefresh:Nx};Bx.useEffectEvent=_x;function Mb(l,c,f,m){c=l.memoizedState,f=f(m,c),f=f==null?c:g({},c,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var Pb={enqueueSetState:function(l,c,f){l=l._reactInternals;var m=Wi(),_=qa(m);_.payload=c,f!=null&&(_.callback=f),c=Wa(l,_,m),c!==null&&(Ii(c,l,m),dh(c,l,m))},enqueueReplaceState:function(l,c,f){l=l._reactInternals;var m=Wi(),_=qa(m);_.tag=1,_.payload=c,f!=null&&(_.callback=f),c=Wa(l,_,m),c!==null&&(Ii(c,l,m),dh(c,l,m))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var f=Wi(),m=qa(f);m.tag=2,c!=null&&(m.callback=c),c=Wa(l,m,f),c!==null&&(Ii(c,l,f),dh(c,l,f))}};function Fx(l,c,f,m,_,A,D){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(m,A,D):c.prototype&&c.prototype.isPureReactComponent?!rh(f,m)||!rh(_,A):!0}function Ux(l,c,f,m){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,m),c.state!==l&&Pb.enqueueReplaceState(c,c.state,null)}function dl(l,c){var f=c;if("ref"in c){f={};for(var m in c)m!=="ref"&&(f[m]=c[m])}if(l=l.defaultProps){f===c&&(f=g({},f));for(var _ in l)f[_]===void 0&&(f[_]=l[_])}return f}function Vx(l){ep(l)}function jx(l){console.error(l)}function zx(l){ep(l)}function Ep(l,c){try{var f=l.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function Hx(l,c,f){try{var m=l.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Ob(l,c,f){return f=qa(f),f.tag=3,f.payload={element:null},f.callback=function(){Ep(l,c)},f}function $x(l){return l=qa(l),l.tag=3,l}function Gx(l,c,f,m){var _=f.type.getDerivedStateFromError;if(typeof _=="function"){var A=m.value;l.payload=function(){return _(A)},l.callback=function(){Hx(c,f,m)}}var D=f.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(l.callback=function(){Hx(c,f,m),typeof _!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var j=m.stack;this.componentDidCatch(m.value,{componentStack:j!==null?j:""})})}function qO(l,c,f,m,_){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=f.alternate,c!==null&&bc(c,f,_,!0),f=Hi.current,f!==null){switch(f.tag){case 31:case 13:return pr===null?Lp():f.alternate===null&&ln===0&&(ln=3),f.flags&=-257,f.flags|=65536,f.lanes=_,m===hp?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([m]):c.add(m),av(l,m,_)),!1;case 22:return f.flags|=65536,m===hp?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([m]):f.add(m)),av(l,m,_)),!1}throw Error(r(435,f.tag))}return av(l,m,_),Lp(),!1}if(de)return c=Hi.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=_,m!==tb&&(l=Error(r(422),{cause:m}),oh(ur(l,f)))):(m!==tb&&(c=Error(r(423),{cause:m}),oh(ur(c,f))),l=l.current.alternate,l.flags|=65536,_&=-_,l.lanes|=_,m=ur(m,f),_=Ob(l.stateNode,m,_),hb(l,_),ln!==4&&(ln=2)),!1;var A=Error(r(520),{cause:m});if(A=ur(A,f),Th===null?Th=[A]:Th.push(A),ln!==4&&(ln=2),c===null)return!0;m=ur(m,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,l=_&-_,f.lanes|=l,l=Ob(f.stateNode,m,l),hb(f,l),!1;case 1:if(c=f.type,A=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Ja===null||!Ja.has(A))))return f.flags|=65536,_&=-_,f.lanes|=_,_=$x(_),Gx(_,l,f,m),hb(f,_),!1}f=f.return}while(f!==null);return!1}var Lb=Error(r(461)),En=!1;function qn(l,c,f,m){c.child=l===null?YA(c,null,f,m):ul(c,l.child,f,m)}function qx(l,c,f,m,_){f=f.render;var A=c.ref;if("ref"in m){var D={};for(var j in m)j!=="ref"&&(D[j]=m[j])}else D=m;return al(c),m=yb(l,c,f,D,A,_),j=bb(),l!==null&&!En?(vb(l,c,_),ta(l,c,_)):(de&&j&&Zy(c),c.flags|=1,qn(l,c,m,_),c.child)}function Wx(l,c,f,m,_){if(l===null){var A=f.type;return typeof A=="function"&&!Yy(A)&&A.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=A,Xx(l,c,A,m,_)):(l=sp(f.type,null,m,c,c.mode,_),l.ref=c.ref,l.return=c,c.child=l)}if(A=l.child,!$b(l,_)){var D=A.memoizedProps;if(f=f.compare,f=f!==null?f:rh,f(D,m)&&l.ref===c.ref)return ta(l,c,_)}return c.flags|=1,l=Xs(A,m),l.ref=c.ref,l.return=c,c.child=l}function Xx(l,c,f,m,_){if(l!==null){var A=l.memoizedProps;if(rh(A,m)&&l.ref===c.ref)if(En=!1,c.pendingProps=m=A,$b(l,_))(l.flags&131072)!==0&&(En=!0);else return c.lanes=l.lanes,ta(l,c,_)}return Bb(l,c,f,m,_)}function Yx(l,c,f,m){var _=m.children,A=l!==null?l.memoizedState:null;if(l===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((c.flags&128)!==0){if(A=A!==null?A.baseLanes|f:f,l!==null){for(m=c.child=l.child,_=0;m!==null;)_=_|m.lanes|m.childLanes,m=m.sibling;m=_&~A}else m=0,c.child=null;return Kx(l,c,A,f,m)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},l!==null&&cp(c,A!==null?A.cachePool:null),A!==null?ZA(c,A):fb(),JA(c);else return m=c.lanes=536870912,Kx(l,c,A!==null?A.baseLanes|f:f,f,m)}else A!==null?(cp(c,A.cachePool),ZA(c,A),Ya(),c.memoizedState=null):(l!==null&&cp(c,null),fb(),Ya());return qn(l,c,_,f),c.child}function vh(l,c){return l!==null&&l.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function Kx(l,c,f,m,_){var A=ob();return A=A===null?null:{parent:An._currentValue,pool:A},c.memoizedState={baseLanes:f,cachePool:A},l!==null&&cp(c,null),fb(),JA(c),l!==null&&bc(l,c,m,!0),c.childLanes=_,null}function Sp(l,c){return c=Cp({mode:c.mode,children:c.children},l.mode),c.ref=l.ref,l.child=c,c.return=l,c}function Qx(l,c,f){return ul(c,l.child,null,f),l=Sp(c,c.pendingProps),l.flags|=2,$i(c),c.memoizedState=null,l}function WO(l,c,f){var m=c.pendingProps,_=(c.flags&128)!==0;if(c.flags&=-129,l===null){if(de){if(m.mode==="hidden")return l=Sp(c,m),c.lanes=536870912,vh(null,l);if(gb(c),(l=He)?(l=cS(l,fr),l=l!==null&&l.data==="&"?l:null,l!==null&&(c.memoizedState={dehydrated:l,treeContext:ja!==null?{id:ps,overflow:gs}:null,retryLane:536870912,hydrationErrors:null},f=PA(l),f.return=c,c.child=f,$n=c,He=null)):l=null,l===null)throw Ha(c);return c.lanes=536870912,null}return Sp(c,m)}var A=l.memoizedState;if(A!==null){var D=A.dehydrated;if(gb(c),_)if(c.flags&256)c.flags&=-257,c=Qx(l,c,f);else if(c.memoizedState!==null)c.child=l.child,c.flags|=128,c=null;else throw Error(r(558));else if(En||bc(l,c,f,!1),_=(f&l.childLanes)!==0,En||_){if(m=Le,m!==null&&(D=Vu(m,f),D!==0&&D!==A.retryLane))throw A.retryLane=D,nl(l,D),Ii(m,l,D),Lb;Lp(),c=Qx(l,c,f)}else l=A.treeContext,He=gr(D.nextSibling),$n=c,de=!0,za=null,fr=!1,l!==null&&BA(c,l),c=Sp(c,m),c.flags|=4096;return c}return l=Xs(l.child,{mode:m.mode,children:m.children}),l.ref=c.ref,c.child=l,l.return=c,l}function Tp(l,c){var f=c.ref;if(f===null)l!==null&&l.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(l===null||l.ref!==f)&&(c.flags|=4194816)}}function Bb(l,c,f,m,_){return al(c),f=yb(l,c,f,m,void 0,_),m=bb(),l!==null&&!En?(vb(l,c,_),ta(l,c,_)):(de&&m&&Zy(c),c.flags|=1,qn(l,c,f,_),c.child)}function Zx(l,c,f,m,_,A){return al(c),c.updateQueue=null,f=ex(c,m,f,_),tx(l),m=bb(),l!==null&&!En?(vb(l,c,A),ta(l,c,A)):(de&&m&&Zy(c),c.flags|=1,qn(l,c,f,A),c.child)}function Jx(l,c,f,m,_){if(al(c),c.stateNode===null){var A=pc,D=f.contextType;typeof D=="object"&&D!==null&&(A=Gn(D)),A=new f(m,A),c.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Pb,c.stateNode=A,A._reactInternals=c,A=c.stateNode,A.props=m,A.state=c.memoizedState,A.refs={},cb(c),D=f.contextType,A.context=typeof D=="object"&&D!==null?Gn(D):pc,A.state=c.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(Mb(c,f,D,m),A.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(D=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),D!==A.state&&Pb.enqueueReplaceState(A,A.state,null),ph(c,m,A,_),fh(),A.state=c.memoizedState),typeof A.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(l===null){A=c.stateNode;var j=c.memoizedProps,W=dl(f,j);A.props=W;var rt=A.context,ut=f.contextType;D=pc,typeof ut=="object"&&ut!==null&&(D=Gn(ut));var ft=f.getDerivedStateFromProps;ut=typeof ft=="function"||typeof A.getSnapshotBeforeUpdate=="function",j=c.pendingProps!==j,ut||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(j||rt!==D)&&Ux(c,A,m,D),Ga=!1;var st=c.memoizedState;A.state=st,ph(c,m,A,_),fh(),rt=c.memoizedState,j||st!==rt||Ga?(typeof ft=="function"&&(Mb(c,f,ft,m),rt=c.memoizedState),(W=Ga||Fx(c,f,W,m,st,rt,D))?(ut||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(c.flags|=4194308)):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=rt),A.props=m,A.state=rt,A.context=D,m=W):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{A=c.stateNode,ub(l,c),D=c.memoizedProps,ut=dl(f,D),A.props=ut,ft=c.pendingProps,st=A.context,rt=f.contextType,W=pc,typeof rt=="object"&&rt!==null&&(W=Gn(rt)),j=f.getDerivedStateFromProps,(rt=typeof j=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(D!==ft||st!==W)&&Ux(c,A,m,W),Ga=!1,st=c.memoizedState,A.state=st,ph(c,m,A,_),fh();var ot=c.memoizedState;D!==ft||st!==ot||Ga||l!==null&&l.dependencies!==null&&op(l.dependencies)?(typeof j=="function"&&(Mb(c,f,j,m),ot=c.memoizedState),(ut=Ga||Fx(c,f,ut,m,st,ot,W)||l!==null&&l.dependencies!==null&&op(l.dependencies))?(rt||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(m,ot,W),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(m,ot,W)),typeof A.componentDidUpdate=="function"&&(c.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof A.componentDidUpdate!="function"||D===l.memoizedProps&&st===l.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||D===l.memoizedProps&&st===l.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=ot),A.props=m,A.state=ot,A.context=W,m=ut):(typeof A.componentDidUpdate!="function"||D===l.memoizedProps&&st===l.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||D===l.memoizedProps&&st===l.memoizedState||(c.flags|=1024),m=!1)}return A=m,Tp(l,c),m=(c.flags&128)!==0,A||m?(A=c.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:A.render(),c.flags|=1,l!==null&&m?(c.child=ul(c,l.child,null,_),c.child=ul(c,null,f,_)):qn(l,c,f,_),c.memoizedState=A.state,l=c.child):l=ta(l,c,_),l}function tE(l,c,f,m){return rl(),c.flags|=256,qn(l,c,f,m),c.child}var Fb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ub(l){return{baseLanes:l,cachePool:HA()}}function Vb(l,c,f){return l=l!==null?l.childLanes&~f:0,c&&(l|=qi),l}function eE(l,c,f){var m=c.pendingProps,_=!1,A=(c.flags&128)!==0,D;if((D=A)||(D=l!==null&&l.memoizedState===null?!1:(fn.current&2)!==0),D&&(_=!0,c.flags&=-129),D=(c.flags&32)!==0,c.flags&=-33,l===null){if(de){if(_?Xa(c):Ya(),(l=He)?(l=cS(l,fr),l=l!==null&&l.data!=="&"?l:null,l!==null&&(c.memoizedState={dehydrated:l,treeContext:ja!==null?{id:ps,overflow:gs}:null,retryLane:536870912,hydrationErrors:null},f=PA(l),f.return=c,c.child=f,$n=c,He=null)):l=null,l===null)throw Ha(c);return Av(l)?c.lanes=32:c.lanes=536870912,null}var j=m.children;return m=m.fallback,_?(Ya(),_=c.mode,j=Cp({mode:"hidden",children:j},_),m=il(m,_,f,null),j.return=c,m.return=c,j.sibling=m,c.child=j,m=c.child,m.memoizedState=Ub(f),m.childLanes=Vb(l,D,f),c.memoizedState=Fb,vh(null,m)):(Xa(c),jb(c,j))}var W=l.memoizedState;if(W!==null&&(j=W.dehydrated,j!==null)){if(A)c.flags&256?(Xa(c),c.flags&=-257,c=zb(l,c,f)):c.memoizedState!==null?(Ya(),c.child=l.child,c.flags|=128,c=null):(Ya(),j=m.fallback,_=c.mode,m=Cp({mode:"visible",children:m.children},_),j=il(j,_,f,null),j.flags|=2,m.return=c,j.return=c,m.sibling=j,c.child=m,ul(c,l.child,null,f),m=c.child,m.memoizedState=Ub(f),m.childLanes=Vb(l,D,f),c.memoizedState=Fb,c=vh(null,m));else if(Xa(c),Av(j)){if(D=j.nextSibling&&j.nextSibling.dataset,D)var rt=D.dgst;D=rt,m=Error(r(419)),m.stack="",m.digest=D,oh({value:m,source:null,stack:null}),c=zb(l,c,f)}else if(En||bc(l,c,f,!1),D=(f&l.childLanes)!==0,En||D){if(D=Le,D!==null&&(m=Vu(D,f),m!==0&&m!==W.retryLane))throw W.retryLane=m,nl(l,m),Ii(D,l,m),Lb;wv(j)||Lp(),c=zb(l,c,f)}else wv(j)?(c.flags|=192,c.child=l.child,c=null):(l=W.treeContext,He=gr(j.nextSibling),$n=c,de=!0,za=null,fr=!1,l!==null&&BA(c,l),c=jb(c,m.children),c.flags|=4096);return c}return _?(Ya(),j=m.fallback,_=c.mode,W=l.child,rt=W.sibling,m=Xs(W,{mode:"hidden",children:m.children}),m.subtreeFlags=W.subtreeFlags&65011712,rt!==null?j=Xs(rt,j):(j=il(j,_,f,null),j.flags|=2),j.return=c,m.return=c,m.sibling=j,c.child=m,vh(null,m),m=c.child,j=l.child.memoizedState,j===null?j=Ub(f):(_=j.cachePool,_!==null?(W=An._currentValue,_=_.parent!==W?{parent:W,pool:W}:_):_=HA(),j={baseLanes:j.baseLanes|f,cachePool:_}),m.memoizedState=j,m.childLanes=Vb(l,D,f),c.memoizedState=Fb,vh(l.child,m)):(Xa(c),f=l.child,l=f.sibling,f=Xs(f,{mode:"visible",children:m.children}),f.return=c,f.sibling=null,l!==null&&(D=c.deletions,D===null?(c.deletions=[l],c.flags|=16):D.push(l)),c.child=f,c.memoizedState=null,f)}function jb(l,c){return c=Cp({mode:"visible",children:c},l.mode),c.return=l,l.child=c}function Cp(l,c){return l=zi(22,l,null,c),l.lanes=0,l}function zb(l,c,f){return ul(c,l.child,null,f),l=jb(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function nE(l,c,f){l.lanes|=c;var m=l.alternate;m!==null&&(m.lanes|=c),ib(l.return,c,f)}function Hb(l,c,f,m,_,A){var D=l.memoizedState;D===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:_,treeForkCount:A}:(D.isBackwards=c,D.rendering=null,D.renderingStartTime=0,D.last=m,D.tail=f,D.tailMode=_,D.treeForkCount=A)}function iE(l,c,f){var m=c.pendingProps,_=m.revealOrder,A=m.tail;m=m.children;var D=fn.current,j=(D&2)!==0;if(j?(D=D&1|2,c.flags|=128):D&=1,lt(fn,D),qn(l,c,m,f),m=de?ah:0,!j&&l!==null&&(l.flags&128)!==0)t:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&nE(l,f,c);else if(l.tag===19)nE(l,f,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break t;for(;l.sibling===null;){if(l.return===null||l.return===c)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(_){case"forwards":for(f=c.child,_=null;f!==null;)l=f.alternate,l!==null&&gp(l)===null&&(_=f),f=f.sibling;f=_,f===null?(_=c.child,c.child=null):(_=f.sibling,f.sibling=null),Hb(c,!1,_,f,A,m);break;case"backwards":case"unstable_legacy-backwards":for(f=null,_=c.child,c.child=null;_!==null;){if(l=_.alternate,l!==null&&gp(l)===null){c.child=_;break}l=_.sibling,_.sibling=f,f=_,_=l}Hb(c,!0,f,null,A,m);break;case"together":Hb(c,!1,null,null,void 0,m);break;default:c.memoizedState=null}return c.child}function ta(l,c,f){if(l!==null&&(c.dependencies=l.dependencies),Za|=c.lanes,(f&c.childLanes)===0)if(l!==null){if(bc(l,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(l!==null&&c.child!==l.child)throw Error(r(153));if(c.child!==null){for(l=c.child,f=Xs(l,l.pendingProps),c.child=f,f.return=c;l.sibling!==null;)l=l.sibling,f=f.sibling=Xs(l,l.pendingProps),f.return=c;f.sibling=null}return c.child}function $b(l,c){return(l.lanes&c)!==0?!0:(l=l.dependencies,!!(l!==null&&op(l)))}function XO(l,c,f){switch(c.tag){case 3:Pt(c,c.stateNode.containerInfo),$a(c,An,l.memoizedState.cache),rl();break;case 27:case 5:Gt(c);break;case 4:Pt(c,c.stateNode.containerInfo);break;case 10:$a(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,gb(c),null;break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(Xa(c),c.flags|=128,null):(f&c.child.childLanes)!==0?eE(l,c,f):(Xa(c),l=ta(l,c,f),l!==null?l.sibling:null);Xa(c);break;case 19:var _=(l.flags&128)!==0;if(m=(f&c.childLanes)!==0,m||(bc(l,c,f,!1),m=(f&c.childLanes)!==0),_){if(m)return iE(l,c,f);c.flags|=128}if(_=c.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),lt(fn,fn.current),m)break;return null;case 22:return c.lanes=0,Yx(l,c,f,c.pendingProps);case 24:$a(c,An,l.memoizedState.cache)}return ta(l,c,f)}function rE(l,c,f){if(l!==null)if(l.memoizedProps!==c.pendingProps)En=!0;else{if(!$b(l,f)&&(c.flags&128)===0)return En=!1,XO(l,c,f);En=(l.flags&131072)!==0}else En=!1,de&&(c.flags&1048576)!==0&&LA(c,ah,c.index);switch(c.lanes=0,c.tag){case 16:t:{var m=c.pendingProps;if(l=ll(c.elementType),c.type=l,typeof l=="function")Yy(l)?(m=dl(l,m),c.tag=1,c=Jx(null,c,l,m,f)):(c.tag=0,c=Bb(null,c,l,m,f));else{if(l!=null){var _=l.$$typeof;if(_===M){c.tag=11,c=qx(null,c,l,m,f);break t}else if(_===C){c.tag=14,c=Wx(null,c,l,m,f);break t}}throw c=G(l)||l,Error(r(306,c,""))}}return c;case 0:return Bb(l,c,c.type,c.pendingProps,f);case 1:return m=c.type,_=dl(m,c.pendingProps),Jx(l,c,m,_,f);case 3:t:{if(Pt(c,c.stateNode.containerInfo),l===null)throw Error(r(387));m=c.pendingProps;var A=c.memoizedState;_=A.element,ub(l,c),ph(c,m,null,f);var D=c.memoizedState;if(m=D.cache,$a(c,An,m),m!==A.cache&&rb(c,[An],f,!0),fh(),m=D.element,A.isDehydrated)if(A={element:m,isDehydrated:!1,cache:D.cache},c.updateQueue.baseState=A,c.memoizedState=A,c.flags&256){c=tE(l,c,m,f);break t}else if(m!==_){_=ur(Error(r(424)),c),oh(_),c=tE(l,c,m,f);break t}else{switch(l=c.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(He=gr(l.firstChild),$n=c,de=!0,za=null,fr=!0,f=YA(c,null,m,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(rl(),m===_){c=ta(l,c,f);break t}qn(l,c,m,f)}c=c.child}return c;case 26:return Tp(l,c),l===null?(f=gS(c.type,null,c.pendingProps,null))?c.memoizedState=f:de||(f=c.type,l=c.pendingProps,m=Hp(ht.current).createElement(f),m[vn]=c,m[Mn]=l,Wn(m,f,l),_n(m),c.stateNode=m):c.memoizedState=gS(c.type,l.memoizedProps,c.pendingProps,l.memoizedState),null;case 27:return Gt(c),l===null&&de&&(m=c.stateNode=dS(c.type,c.pendingProps,ht.current),$n=c,fr=!0,_=He,io(c.type)?(xv=_,He=gr(m.firstChild)):He=_),qn(l,c,c.pendingProps.children,f),Tp(l,c),l===null&&(c.flags|=4194304),c.child;case 5:return l===null&&de&&((_=m=He)&&(m=EL(m,c.type,c.pendingProps,fr),m!==null?(c.stateNode=m,$n=c,He=gr(m.firstChild),fr=!1,_=!0):_=!1),_||Ha(c)),Gt(c),_=c.type,A=c.pendingProps,D=l!==null?l.memoizedProps:null,m=A.children,bv(_,A)?m=null:D!==null&&bv(_,D)&&(c.flags|=32),c.memoizedState!==null&&(_=yb(l,c,UO,null,null,f),Ph._currentValue=_),Tp(l,c),qn(l,c,m,f),c.child;case 6:return l===null&&de&&((l=f=He)&&(f=SL(f,c.pendingProps,fr),f!==null?(c.stateNode=f,$n=c,He=null,l=!0):l=!1),l||Ha(c)),null;case 13:return eE(l,c,f);case 4:return Pt(c,c.stateNode.containerInfo),m=c.pendingProps,l===null?c.child=ul(c,null,m,f):qn(l,c,m,f),c.child;case 11:return qx(l,c,c.type,c.pendingProps,f);case 7:return qn(l,c,c.pendingProps,f),c.child;case 8:return qn(l,c,c.pendingProps.children,f),c.child;case 12:return qn(l,c,c.pendingProps.children,f),c.child;case 10:return m=c.pendingProps,$a(c,c.type,m.value),qn(l,c,m.children,f),c.child;case 9:return _=c.type._context,m=c.pendingProps.children,al(c),_=Gn(_),m=m(_),c.flags|=1,qn(l,c,m,f),c.child;case 14:return Wx(l,c,c.type,c.pendingProps,f);case 15:return Xx(l,c,c.type,c.pendingProps,f);case 19:return iE(l,c,f);case 31:return WO(l,c,f);case 22:return Yx(l,c,f,c.pendingProps);case 24:return al(c),m=Gn(An),l===null?(_=ob(),_===null&&(_=Le,A=sb(),_.pooledCache=A,A.refCount++,A!==null&&(_.pooledCacheLanes|=f),_=A),c.memoizedState={parent:m,cache:_},cb(c),$a(c,An,_)):((l.lanes&f)!==0&&(ub(l,c),ph(c,null,null,f),fh()),_=l.memoizedState,A=c.memoizedState,_.parent!==m?(_={parent:m,cache:m},c.memoizedState=_,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=_),$a(c,An,m)):(m=A.cache,$a(c,An,m),m!==_.cache&&rb(c,[An],f,!0))),qn(l,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function ea(l){l.flags|=4}function Gb(l,c,f,m,_){if((c=(l.mode&32)!==0)&&(c=!1),c){if(l.flags|=16777216,(_&335544128)===_)if(l.stateNode.complete)l.flags|=8192;else if(kE())l.flags|=8192;else throw cl=hp,lb}else l.flags&=-16777217}function sE(l,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!_S(c))if(kE())l.flags|=8192;else throw cl=hp,lb}function Rp(l,c){c!==null&&(l.flags|=4),l.flags&16384&&(c=l.tag!==22?Pf():536870912,l.lanes|=c,Dc|=c)}function _h(l,c){if(!de)switch(l.tailMode){case"hidden":c=l.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:m.sibling=null}}function $e(l){var c=l.alternate!==null&&l.alternate.child===l.child,f=0,m=0;if(c)for(var _=l.child;_!==null;)f|=_.lanes|_.childLanes,m|=_.subtreeFlags&65011712,m|=_.flags&65011712,_.return=l,_=_.sibling;else for(_=l.child;_!==null;)f|=_.lanes|_.childLanes,m|=_.subtreeFlags,m|=_.flags,_.return=l,_=_.sibling;return l.subtreeFlags|=m,l.childLanes=f,c}function YO(l,c,f){var m=c.pendingProps;switch(Jy(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(c),null;case 1:return $e(c),null;case 3:return f=c.stateNode,m=null,l!==null&&(m=l.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),Qs(An),kt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(yc(c)?ea(c):l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,eb())),$e(c),null;case 26:var _=c.type,A=c.memoizedState;return l===null?(ea(c),A!==null?($e(c),sE(c,A)):($e(c),Gb(c,_,null,m,f))):A?A!==l.memoizedState?(ea(c),$e(c),sE(c,A)):($e(c),c.flags&=-16777217):(l=l.memoizedProps,l!==m&&ea(c),$e(c),Gb(c,_,l,m,f)),null;case 27:if(We(c),f=ht.current,_=c.type,l!==null&&c.stateNode!=null)l.memoizedProps!==m&&ea(c);else{if(!m){if(c.stateNode===null)throw Error(r(166));return $e(c),null}l=ct.current,yc(c)?FA(c):(l=dS(_,m,f),c.stateNode=l,ea(c))}return $e(c),null;case 5:if(We(c),_=c.type,l!==null&&c.stateNode!=null)l.memoizedProps!==m&&ea(c);else{if(!m){if(c.stateNode===null)throw Error(r(166));return $e(c),null}if(A=ct.current,yc(c))FA(c);else{var D=Hp(ht.current);switch(A){case 1:A=D.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:A=D.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":A=D.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":A=D.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":A=D.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof m.is=="string"?D.createElement("select",{is:m.is}):D.createElement("select"),m.multiple?A.multiple=!0:m.size&&(A.size=m.size);break;default:A=typeof m.is=="string"?D.createElement(_,{is:m.is}):D.createElement(_)}}A[vn]=c,A[Mn]=m;t:for(D=c.child;D!==null;){if(D.tag===5||D.tag===6)A.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===c)break t;for(;D.sibling===null;){if(D.return===null||D.return===c)break t;D=D.return}D.sibling.return=D.return,D=D.sibling}c.stateNode=A;t:switch(Wn(A,_,m),_){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break t;case"img":m=!0;break t;default:m=!1}m&&ea(c)}}return $e(c),Gb(c,c.type,l===null?null:l.memoizedProps,c.pendingProps,f),null;case 6:if(l&&c.stateNode!=null)l.memoizedProps!==m&&ea(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(r(166));if(l=ht.current,yc(c)){if(l=c.stateNode,f=c.memoizedProps,m=null,_=$n,_!==null)switch(_.tag){case 27:case 5:m=_.memoizedProps}l[vn]=c,l=!!(l.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||eS(l.nodeValue,f)),l||Ha(c,!0)}else l=Hp(l).createTextNode(m),l[vn]=c,c.stateNode=l}return $e(c),null;case 31:if(f=c.memoizedState,l===null||l.memoizedState!==null){if(m=yc(c),f!==null){if(l===null){if(!m)throw Error(r(318));if(l=c.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[vn]=c}else rl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;$e(c),l=!1}else f=eb(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=f),l=!0;if(!l)return c.flags&256?($i(c),c):($i(c),null);if((c.flags&128)!==0)throw Error(r(558))}return $e(c),null;case 13:if(m=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(_=yc(c),m!==null&&m.dehydrated!==null){if(l===null){if(!_)throw Error(r(318));if(_=c.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[vn]=c}else rl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;$e(c),_=!1}else _=eb(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=_),_=!0;if(!_)return c.flags&256?($i(c),c):($i(c),null)}return $i(c),(c.flags&128)!==0?(c.lanes=f,c):(f=m!==null,l=l!==null&&l.memoizedState!==null,f&&(m=c.child,_=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(_=m.alternate.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==_&&(m.flags|=2048)),f!==l&&f&&(c.child.flags|=8192),Rp(c,c.updateQueue),$e(c),null);case 4:return kt(),l===null&&fv(c.stateNode.containerInfo),$e(c),null;case 10:return Qs(c.type),$e(c),null;case 19:if(Z(fn),m=c.memoizedState,m===null)return $e(c),null;if(_=(c.flags&128)!==0,A=m.rendering,A===null)if(_)_h(m,!1);else{if(ln!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(A=gp(l),A!==null){for(c.flags|=128,_h(m,!1),l=A.updateQueue,c.updateQueue=l,Rp(c,l),c.subtreeFlags=0,l=f,f=c.child;f!==null;)MA(f,l),f=f.sibling;return lt(fn,fn.current&1|2),de&&Ys(c,m.treeForkCount),c.child}l=l.sibling}m.tail!==null&&Ht()>Mp&&(c.flags|=128,_=!0,_h(m,!1),c.lanes=4194304)}else{if(!_)if(l=gp(A),l!==null){if(c.flags|=128,_=!0,l=l.updateQueue,c.updateQueue=l,Rp(c,l),_h(m,!0),m.tail===null&&m.tailMode==="hidden"&&!A.alternate&&!de)return $e(c),null}else 2*Ht()-m.renderingStartTime>Mp&&f!==536870912&&(c.flags|=128,_=!0,_h(m,!1),c.lanes=4194304);m.isBackwards?(A.sibling=c.child,c.child=A):(l=m.last,l!==null?l.sibling=A:c.child=A,m.last=A)}return m.tail!==null?(l=m.tail,m.rendering=l,m.tail=l.sibling,m.renderingStartTime=Ht(),l.sibling=null,f=fn.current,lt(fn,_?f&1|2:f&1),de&&Ys(c,m.treeForkCount),l):($e(c),null);case 22:case 23:return $i(c),pb(),m=c.memoizedState!==null,l!==null?l.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(f&536870912)!==0&&(c.flags&128)===0&&($e(c),c.subtreeFlags&6&&(c.flags|=8192)):$e(c),f=c.updateQueue,f!==null&&Rp(c,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048),l!==null&&Z(ol),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Qs(An),$e(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function KO(l,c){switch(Jy(c),c.tag){case 1:return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return Qs(An),kt(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 26:case 27:case 5:return We(c),null;case 31:if(c.memoizedState!==null){if($i(c),c.alternate===null)throw Error(r(340));rl()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 13:if($i(c),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(r(340));rl()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return Z(fn),null;case 4:return kt(),null;case 10:return Qs(c.type),null;case 22:case 23:return $i(c),pb(),l!==null&&Z(ol),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 24:return Qs(An),null;case 25:return null;default:return null}}function aE(l,c){switch(Jy(c),c.tag){case 3:Qs(An),kt();break;case 26:case 27:case 5:We(c);break;case 4:kt();break;case 31:c.memoizedState!==null&&$i(c);break;case 13:$i(c);break;case 19:Z(fn);break;case 10:Qs(c.type);break;case 22:case 23:$i(c),pb(),l!==null&&Z(ol);break;case 24:Qs(An)}}function wh(l,c){try{var f=c.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var _=m.next;f=_;do{if((f.tag&l)===l){m=void 0;var A=f.create,D=f.inst;m=A(),D.destroy=m}f=f.next}while(f!==_)}}catch(j){Re(c,c.return,j)}}function Ka(l,c,f){try{var m=c.updateQueue,_=m!==null?m.lastEffect:null;if(_!==null){var A=_.next;m=A;do{if((m.tag&l)===l){var D=m.inst,j=D.destroy;if(j!==void 0){D.destroy=void 0,_=c;var W=f,rt=j;try{rt()}catch(ut){Re(_,W,ut)}}}m=m.next}while(m!==A)}}catch(ut){Re(c,c.return,ut)}}function oE(l){var c=l.updateQueue;if(c!==null){var f=l.stateNode;try{QA(c,f)}catch(m){Re(l,l.return,m)}}}function lE(l,c,f){f.props=dl(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(m){Re(l,c,m)}}function Ah(l,c){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var m=l.stateNode;break;case 30:m=l.stateNode;break;default:m=l.stateNode}typeof f=="function"?l.refCleanup=f(m):f.current=m}}catch(_){Re(l,c,_)}}function ms(l,c){var f=l.ref,m=l.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(_){Re(l,c,_)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(_){Re(l,c,_)}else f.current=null}function cE(l){var c=l.type,f=l.memoizedProps,m=l.stateNode;try{t:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break t;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(_){Re(l,l.return,_)}}function qb(l,c,f){try{var m=l.stateNode;bL(m,l.type,f,c),m[Mn]=c}catch(_){Re(l,l.return,_)}}function uE(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&io(l.type)||l.tag===4}function Wb(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||uE(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&io(l.type)||l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Xb(l,c,f){var m=l.tag;if(m===5||m===6)l=l.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(l),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Nr));else if(m!==4&&(m===27&&io(l.type)&&(f=l.stateNode,c=null),l=l.child,l!==null))for(Xb(l,c,f),l=l.sibling;l!==null;)Xb(l,c,f),l=l.sibling}function Ip(l,c,f){var m=l.tag;if(m===5||m===6)l=l.stateNode,c?f.insertBefore(l,c):f.appendChild(l);else if(m!==4&&(m===27&&io(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(Ip(l,c,f),l=l.sibling;l!==null;)Ip(l,c,f),l=l.sibling}function hE(l){var c=l.stateNode,f=l.memoizedProps;try{for(var m=l.type,_=c.attributes;_.length;)c.removeAttributeNode(_[0]);Wn(c,m,f),c[vn]=l,c[Mn]=f}catch(A){Re(l,l.return,A)}}var na=!1,Sn=!1,Yb=!1,dE=typeof WeakSet=="function"?WeakSet:Set,On=null;function QO(l,c){if(l=l.containerInfo,mv=Kp,l=EA(l),zy(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else t:{f=(f=l.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var _=m.anchorOffset,A=m.focusNode;m=m.focusOffset;try{f.nodeType,A.nodeType}catch{f=null;break t}var D=0,j=-1,W=-1,rt=0,ut=0,ft=l,st=null;e:for(;;){for(var ot;ft!==f||_!==0&&ft.nodeType!==3||(j=D+_),ft!==A||m!==0&&ft.nodeType!==3||(W=D+m),ft.nodeType===3&&(D+=ft.nodeValue.length),(ot=ft.firstChild)!==null;)st=ft,ft=ot;for(;;){if(ft===l)break e;if(st===f&&++rt===_&&(j=D),st===A&&++ut===m&&(W=D),(ot=ft.nextSibling)!==null)break;ft=st,st=ft.parentNode}ft=ot}f=j===-1||W===-1?null:{start:j,end:W}}else f=null}f=f||{start:0,end:0}}else f=null;for(yv={focusedElem:l,selectionRange:f},Kp=!1,On=c;On!==null;)if(c=On,l=c.child,(c.subtreeFlags&1028)!==0&&l!==null)l.return=c,On=l;else for(;On!==null;){switch(c=On,A=c.alternate,l=c.flags,c.tag){case 0:if((l&4)!==0&&(l=c.updateQueue,l=l!==null?l.events:null,l!==null))for(f=0;f<l.length;f++)_=l[f],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&A!==null){l=void 0,f=c,_=A.memoizedProps,A=A.memoizedState,m=f.stateNode;try{var Rt=dl(f.type,_);l=m.getSnapshotBeforeUpdate(Rt,A),m.__reactInternalSnapshotBeforeUpdate=l}catch(Ft){Re(f,f.return,Ft)}}break;case 3:if((l&1024)!==0){if(l=c.stateNode.containerInfo,f=l.nodeType,f===9)_v(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":_v(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=c.sibling,l!==null){l.return=c.return,On=l;break}On=c.return}}function fE(l,c,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:ra(l,f),m&4&&wh(5,f);break;case 1:if(ra(l,f),m&4)if(l=f.stateNode,c===null)try{l.componentDidMount()}catch(D){Re(f,f.return,D)}else{var _=dl(f.type,c.memoizedProps);c=c.memoizedState;try{l.componentDidUpdate(_,c,l.__reactInternalSnapshotBeforeUpdate)}catch(D){Re(f,f.return,D)}}m&64&&oE(f),m&512&&Ah(f,f.return);break;case 3:if(ra(l,f),m&64&&(l=f.updateQueue,l!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{QA(l,c)}catch(D){Re(f,f.return,D)}}break;case 27:c===null&&m&4&&hE(f);case 26:case 5:ra(l,f),c===null&&m&4&&cE(f),m&512&&Ah(f,f.return);break;case 12:ra(l,f);break;case 31:ra(l,f),m&4&&mE(l,f);break;case 13:ra(l,f),m&4&&yE(l,f),m&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=aL.bind(null,f),TL(l,f))));break;case 22:if(m=f.memoizedState!==null||na,!m){c=c!==null&&c.memoizedState!==null||Sn,_=na;var A=Sn;na=m,(Sn=c)&&!A?sa(l,f,(f.subtreeFlags&8772)!==0):ra(l,f),na=_,Sn=A}break;case 30:break;default:ra(l,f)}}function pE(l){var c=l.alternate;c!==null&&(l.alternate=null,pE(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&tc(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Ye=null,Si=!1;function ia(l,c,f){for(f=f.child;f!==null;)gE(l,c,f),f=f.sibling}function gE(l,c,f){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(di,f)}catch{}switch(f.tag){case 26:Sn||ms(f,c),ia(l,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Sn||ms(f,c);var m=Ye,_=Si;io(f.type)&&(Ye=f.stateNode,Si=!1),ia(l,c,f),kh(f.stateNode),Ye=m,Si=_;break;case 5:Sn||ms(f,c);case 6:if(m=Ye,_=Si,Ye=null,ia(l,c,f),Ye=m,Si=_,Ye!==null)if(Si)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(f.stateNode)}catch(A){Re(f,c,A)}else try{Ye.removeChild(f.stateNode)}catch(A){Re(f,c,A)}break;case 18:Ye!==null&&(Si?(l=Ye,oS(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),Fc(l)):oS(Ye,f.stateNode));break;case 4:m=Ye,_=Si,Ye=f.stateNode.containerInfo,Si=!0,ia(l,c,f),Ye=m,Si=_;break;case 0:case 11:case 14:case 15:Ka(2,f,c),Sn||Ka(4,f,c),ia(l,c,f);break;case 1:Sn||(ms(f,c),m=f.stateNode,typeof m.componentWillUnmount=="function"&&lE(f,c,m)),ia(l,c,f);break;case 21:ia(l,c,f);break;case 22:Sn=(m=Sn)||f.memoizedState!==null,ia(l,c,f),Sn=m;break;default:ia(l,c,f)}}function mE(l,c){if(c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{Fc(l)}catch(f){Re(c,c.return,f)}}}function yE(l,c){if(c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Fc(l)}catch(f){Re(c,c.return,f)}}function ZO(l){switch(l.tag){case 31:case 13:case 19:var c=l.stateNode;return c===null&&(c=l.stateNode=new dE),c;case 22:return l=l.stateNode,c=l._retryCache,c===null&&(c=l._retryCache=new dE),c;default:throw Error(r(435,l.tag))}}function Dp(l,c){var f=ZO(l);c.forEach(function(m){if(!f.has(m)){f.add(m);var _=oL.bind(null,l,m);m.then(_,_)}})}function Ti(l,c){var f=c.deletions;if(f!==null)for(var m=0;m<f.length;m++){var _=f[m],A=l,D=c,j=D;t:for(;j!==null;){switch(j.tag){case 27:if(io(j.type)){Ye=j.stateNode,Si=!1;break t}break;case 5:Ye=j.stateNode,Si=!1;break t;case 3:case 4:Ye=j.stateNode.containerInfo,Si=!0;break t}j=j.return}if(Ye===null)throw Error(r(160));gE(A,D,_),Ye=null,Si=!1,A=_.alternate,A!==null&&(A.return=null),_.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)bE(c,l),c=c.sibling}var Fr=null;function bE(l,c){var f=l.alternate,m=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Ti(c,l),Ci(l),m&4&&(Ka(3,l,l.return),wh(3,l),Ka(5,l,l.return));break;case 1:Ti(c,l),Ci(l),m&512&&(Sn||f===null||ms(f,f.return)),m&64&&na&&(l=l.updateQueue,l!==null&&(m=l.callbacks,m!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var _=Fr;if(Ti(c,l),Ci(l),m&512&&(Sn||f===null||ms(f,f.return)),m&4){var A=f!==null?f.memoizedState:null;if(m=l.memoizedState,f===null)if(m===null)if(l.stateNode===null){t:{m=l.type,f=l.memoizedProps,_=_.ownerDocument||_;e:switch(m){case"title":A=_.getElementsByTagName("title")[0],(!A||A[ns]||A[vn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=_.createElement(m),_.head.insertBefore(A,_.querySelector("head > title"))),Wn(A,m,f),A[vn]=l,_n(A),m=A;break t;case"link":var D=bS("link","href",_).get(m+(f.href||""));if(D){for(var j=0;j<D.length;j++)if(A=D[j],A.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&A.getAttribute("rel")===(f.rel==null?null:f.rel)&&A.getAttribute("title")===(f.title==null?null:f.title)&&A.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){D.splice(j,1);break e}}A=_.createElement(m),Wn(A,m,f),_.head.appendChild(A);break;case"meta":if(D=bS("meta","content",_).get(m+(f.content||""))){for(j=0;j<D.length;j++)if(A=D[j],A.getAttribute("content")===(f.content==null?null:""+f.content)&&A.getAttribute("name")===(f.name==null?null:f.name)&&A.getAttribute("property")===(f.property==null?null:f.property)&&A.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&A.getAttribute("charset")===(f.charSet==null?null:f.charSet)){D.splice(j,1);break e}}A=_.createElement(m),Wn(A,m,f),_.head.appendChild(A);break;default:throw Error(r(468,m))}A[vn]=l,_n(A),m=A}l.stateNode=m}else vS(_,l.type,l.stateNode);else l.stateNode=yS(_,m,l.memoizedProps);else A!==m?(A===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):A.count--,m===null?vS(_,l.type,l.stateNode):yS(_,m,l.memoizedProps)):m===null&&l.stateNode!==null&&qb(l,l.memoizedProps,f.memoizedProps)}break;case 27:Ti(c,l),Ci(l),m&512&&(Sn||f===null||ms(f,f.return)),f!==null&&m&4&&qb(l,l.memoizedProps,f.memoizedProps);break;case 5:if(Ti(c,l),Ci(l),m&512&&(Sn||f===null||ms(f,f.return)),l.flags&32){_=l.stateNode;try{Ei(_,"")}catch(Rt){Re(l,l.return,Rt)}}m&4&&l.stateNode!=null&&(_=l.memoizedProps,qb(l,_,f!==null?f.memoizedProps:_)),m&1024&&(Yb=!0);break;case 6:if(Ti(c,l),Ci(l),m&4){if(l.stateNode===null)throw Error(r(162));m=l.memoizedProps,f=l.stateNode;try{f.nodeValue=m}catch(Rt){Re(l,l.return,Rt)}}break;case 3:if(qp=null,_=Fr,Fr=$p(c.containerInfo),Ti(c,l),Fr=_,Ci(l),m&4&&f!==null&&f.memoizedState.isDehydrated)try{Fc(c.containerInfo)}catch(Rt){Re(l,l.return,Rt)}Yb&&(Yb=!1,vE(l));break;case 4:m=Fr,Fr=$p(l.stateNode.containerInfo),Ti(c,l),Ci(l),Fr=m;break;case 12:Ti(c,l),Ci(l);break;case 31:Ti(c,l),Ci(l),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,Dp(l,m)));break;case 13:Ti(c,l),Ci(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Np=Ht()),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,Dp(l,m)));break;case 22:_=l.memoizedState!==null;var W=f!==null&&f.memoizedState!==null,rt=na,ut=Sn;if(na=rt||_,Sn=ut||W,Ti(c,l),Sn=ut,na=rt,Ci(l),m&8192)t:for(c=l.stateNode,c._visibility=_?c._visibility&-2:c._visibility|1,_&&(f===null||W||na||Sn||fl(l)),f=null,c=l;;){if(c.tag===5||c.tag===26){if(f===null){W=f=c;try{if(A=W.stateNode,_)D=A.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{j=W.stateNode;var ft=W.memoizedProps.style,st=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;j.style.display=st==null||typeof st=="boolean"?"":(""+st).trim()}}catch(Rt){Re(W,W.return,Rt)}}}else if(c.tag===6){if(f===null){W=c;try{W.stateNode.nodeValue=_?"":W.memoizedProps}catch(Rt){Re(W,W.return,Rt)}}}else if(c.tag===18){if(f===null){W=c;try{var ot=W.stateNode;_?lS(ot,!0):lS(W.stateNode,!1)}catch(Rt){Re(W,W.return,Rt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break t;for(;c.sibling===null;){if(c.return===null||c.return===l)break t;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=l.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,Dp(l,f))));break;case 19:Ti(c,l),Ci(l),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,Dp(l,m)));break;case 30:break;case 21:break;default:Ti(c,l),Ci(l)}}function Ci(l){var c=l.flags;if(c&2){try{for(var f,m=l.return;m!==null;){if(uE(m)){f=m;break}m=m.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var _=f.stateNode,A=Wb(l);Ip(l,A,_);break;case 5:var D=f.stateNode;f.flags&32&&(Ei(D,""),f.flags&=-33);var j=Wb(l);Ip(l,j,D);break;case 3:case 4:var W=f.stateNode.containerInfo,rt=Wb(l);Xb(l,rt,W);break;default:throw Error(r(161))}}catch(ut){Re(l,l.return,ut)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function vE(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var c=l;vE(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),l=l.sibling}}function ra(l,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)fE(l,c.alternate,c),c=c.sibling}function fl(l){for(l=l.child;l!==null;){var c=l;switch(c.tag){case 0:case 11:case 14:case 15:Ka(4,c,c.return),fl(c);break;case 1:ms(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&lE(c,c.return,f),fl(c);break;case 27:kh(c.stateNode);case 26:case 5:ms(c,c.return),fl(c);break;case 22:c.memoizedState===null&&fl(c);break;case 30:fl(c);break;default:fl(c)}l=l.sibling}}function sa(l,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,_=l,A=c,D=A.flags;switch(A.tag){case 0:case 11:case 15:sa(_,A,f),wh(4,A);break;case 1:if(sa(_,A,f),m=A,_=m.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(rt){Re(m,m.return,rt)}if(m=A,_=m.updateQueue,_!==null){var j=m.stateNode;try{var W=_.shared.hiddenCallbacks;if(W!==null)for(_.shared.hiddenCallbacks=null,_=0;_<W.length;_++)KA(W[_],j)}catch(rt){Re(m,m.return,rt)}}f&&D&64&&oE(A),Ah(A,A.return);break;case 27:hE(A);case 26:case 5:sa(_,A,f),f&&m===null&&D&4&&cE(A),Ah(A,A.return);break;case 12:sa(_,A,f);break;case 31:sa(_,A,f),f&&D&4&&mE(_,A);break;case 13:sa(_,A,f),f&&D&4&&yE(_,A);break;case 22:A.memoizedState===null&&sa(_,A,f),Ah(A,A.return);break;case 30:break;default:sa(_,A,f)}c=c.sibling}}function Kb(l,c){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(l=c.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&lh(f))}function Qb(l,c){l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&lh(l))}function Ur(l,c,f,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)_E(l,c,f,m),c=c.sibling}function _E(l,c,f,m){var _=c.flags;switch(c.tag){case 0:case 11:case 15:Ur(l,c,f,m),_&2048&&wh(9,c);break;case 1:Ur(l,c,f,m);break;case 3:Ur(l,c,f,m),_&2048&&(l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&lh(l)));break;case 12:if(_&2048){Ur(l,c,f,m),l=c.stateNode;try{var A=c.memoizedProps,D=A.id,j=A.onPostCommit;typeof j=="function"&&j(D,c.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(W){Re(c,c.return,W)}}else Ur(l,c,f,m);break;case 31:Ur(l,c,f,m);break;case 13:Ur(l,c,f,m);break;case 23:break;case 22:A=c.stateNode,D=c.alternate,c.memoizedState!==null?A._visibility&2?Ur(l,c,f,m):xh(l,c):A._visibility&2?Ur(l,c,f,m):(A._visibility|=2,Cc(l,c,f,m,(c.subtreeFlags&10256)!==0||!1)),_&2048&&Kb(D,c);break;case 24:Ur(l,c,f,m),_&2048&&Qb(c.alternate,c);break;default:Ur(l,c,f,m)}}function Cc(l,c,f,m,_){for(_=_&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var A=l,D=c,j=f,W=m,rt=D.flags;switch(D.tag){case 0:case 11:case 15:Cc(A,D,j,W,_),wh(8,D);break;case 23:break;case 22:var ut=D.stateNode;D.memoizedState!==null?ut._visibility&2?Cc(A,D,j,W,_):xh(A,D):(ut._visibility|=2,Cc(A,D,j,W,_)),_&&rt&2048&&Kb(D.alternate,D);break;case 24:Cc(A,D,j,W,_),_&&rt&2048&&Qb(D.alternate,D);break;default:Cc(A,D,j,W,_)}c=c.sibling}}function xh(l,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=l,m=c,_=m.flags;switch(m.tag){case 22:xh(f,m),_&2048&&Kb(m.alternate,m);break;case 24:xh(f,m),_&2048&&Qb(m.alternate,m);break;default:xh(f,m)}c=c.sibling}}var Eh=8192;function Rc(l,c,f){if(l.subtreeFlags&Eh)for(l=l.child;l!==null;)wE(l,c,f),l=l.sibling}function wE(l,c,f){switch(l.tag){case 26:Rc(l,c,f),l.flags&Eh&&l.memoizedState!==null&&FL(f,Fr,l.memoizedState,l.memoizedProps);break;case 5:Rc(l,c,f);break;case 3:case 4:var m=Fr;Fr=$p(l.stateNode.containerInfo),Rc(l,c,f),Fr=m;break;case 22:l.memoizedState===null&&(m=l.alternate,m!==null&&m.memoizedState!==null?(m=Eh,Eh=16777216,Rc(l,c,f),Eh=m):Rc(l,c,f));break;default:Rc(l,c,f)}}function AE(l){var c=l.alternate;if(c!==null&&(l=c.child,l!==null)){c.child=null;do c=l.sibling,l.sibling=null,l=c;while(l!==null)}}function Sh(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];On=m,EE(m,l)}AE(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)xE(l),l=l.sibling}function xE(l){switch(l.tag){case 0:case 11:case 15:Sh(l),l.flags&2048&&Ka(9,l,l.return);break;case 3:Sh(l);break;case 12:Sh(l);break;case 22:var c=l.stateNode;l.memoizedState!==null&&c._visibility&2&&(l.return===null||l.return.tag!==13)?(c._visibility&=-3,kp(l)):Sh(l);break;default:Sh(l)}}function kp(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];On=m,EE(m,l)}AE(l)}for(l=l.child;l!==null;){switch(c=l,c.tag){case 0:case 11:case 15:Ka(8,c,c.return),kp(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,kp(c));break;default:kp(c)}l=l.sibling}}function EE(l,c){for(;On!==null;){var f=On;switch(f.tag){case 0:case 11:case 15:Ka(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:lh(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,On=m;else t:for(f=l;On!==null;){m=On;var _=m.sibling,A=m.return;if(pE(m),m===f){On=null;break t}if(_!==null){_.return=A,On=_;break t}On=A}}}var JO={getCacheForType:function(l){var c=Gn(An),f=c.data.get(l);return f===void 0&&(f=l(),c.data.set(l,f)),f},cacheSignal:function(){return Gn(An).controller.signal}},tL=typeof WeakMap=="function"?WeakMap:Map,_e=0,Le=null,ie=null,ae=0,Ce=0,Gi=null,Qa=!1,Ic=!1,Zb=!1,aa=0,ln=0,Za=0,pl=0,Jb=0,qi=0,Dc=0,Th=null,Ri=null,tv=!1,Np=0,SE=0,Mp=1/0,Pp=null,Ja=null,kn=0,to=null,kc=null,oa=0,ev=0,nv=null,TE=null,Ch=0,iv=null;function Wi(){return(_e&2)!==0&&ae!==0?ae&-ae:z.T!==null?cv():Of()}function CE(){if(qi===0)if((ae&536870912)===0||de){var l=jo;jo<<=1,(jo&3932160)===0&&(jo=262144),qi=l}else qi=536870912;return l=Hi.current,l!==null&&(l.flags|=32),qi}function Ii(l,c,f){(l===Le&&(Ce===2||Ce===9)||l.cancelPendingCommit!==null)&&(Nc(l,0),eo(l,ae,qi,!1)),zo(l,f),((_e&2)===0||l!==Le)&&(l===Le&&((_e&2)===0&&(pl|=f),ln===4&&eo(l,ae,qi,!1)),ys(l))}function RE(l,c,f){if((_e&6)!==0)throw Error(r(327));var m=!f&&(c&127)===0&&(c&l.expiredLanes)===0||Ir(l,c),_=m?iL(l,c):sv(l,c,!0),A=m;do{if(_===0){Ic&&!m&&eo(l,c,0,!1);break}else{if(f=l.current.alternate,A&&!eL(f)){_=sv(l,c,!1),A=!1;continue}if(_===2){if(A=c,l.errorRecoveryDisabledLanes&A)var D=0;else D=l.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){c=D;t:{var j=l;_=Th;var W=j.current.memoizedState.isDehydrated;if(W&&(Nc(j,D).flags|=256),D=sv(j,D,!1),D!==2){if(Zb&&!W){j.errorRecoveryDisabledLanes|=A,pl|=A,_=4;break t}A=Ri,Ri=_,A!==null&&(Ri===null?Ri=A:Ri.push.apply(Ri,A))}_=D}if(A=!1,_!==2)continue}}if(_===1){Nc(l,0),eo(l,c,0,!0);break}t:{switch(m=l,A=_,A){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:eo(m,c,qi,!Qa);break t;case 2:Ri=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(_=Np+300-Ht(),10<_)){if(eo(m,c,qi,!Qa),Jr(m,0,!0)!==0)break t;oa=c,m.timeoutHandle=sS(IE.bind(null,m,f,Ri,Pp,tv,c,qi,pl,Dc,Qa,A,"Throttled",-0,0),_);break t}IE(m,f,Ri,Pp,tv,c,qi,pl,Dc,Qa,A,null,-0,0)}}break}while(!0);ys(l)}function IE(l,c,f,m,_,A,D,j,W,rt,ut,ft,st,ot){if(l.timeoutHandle=-1,ft=c.subtreeFlags,ft&8192||(ft&16785408)===16785408){ft={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Nr},wE(c,A,ft);var Rt=(A&62914560)===A?Np-Ht():(A&4194048)===A?SE-Ht():0;if(Rt=UL(ft,Rt),Rt!==null){oa=A,l.cancelPendingCommit=Rt(BE.bind(null,l,c,A,f,m,_,D,j,W,ut,ft,null,st,ot)),eo(l,A,D,!rt);return}}BE(l,c,A,f,m,_,D,j,W)}function eL(l){for(var c=l;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var _=f[m],A=_.getSnapshot;_=_.value;try{if(!ji(A(),_))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function eo(l,c,f,m){c&=~Jb,c&=~pl,l.suspendedLanes|=c,l.pingedLanes&=~c,m&&(l.warmLanes|=c),m=l.expirationTimes;for(var _=c;0<_;){var A=31-Se(_),D=1<<A;m[A]=-1,_&=~D}f!==0&&Ho(l,f,c)}function Op(){return(_e&6)===0?(Rh(0),!1):!0}function rv(){if(ie!==null){if(Ce===0)var l=ie.return;else l=ie,Ks=sl=null,_b(l),Ac=null,uh=0,l=ie;for(;l!==null;)aE(l.alternate,l),l=l.return;ie=null}}function Nc(l,c){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,wL(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),oa=0,rv(),Le=l,ie=f=Xs(l.current,null),ae=c,Ce=0,Gi=null,Qa=!1,Ic=Ir(l,c),Zb=!1,Dc=qi=Jb=pl=Za=ln=0,Ri=Th=null,tv=!1,(c&8)!==0&&(c|=c&32);var m=l.entangledLanes;if(m!==0)for(l=l.entanglements,m&=c;0<m;){var _=31-Se(m),A=1<<_;c|=l[_],m&=~A}return aa=c,np(),f}function DE(l,c){Qt=null,z.H=bh,c===wc||c===up?(c=qA(),Ce=3):c===lb?(c=qA(),Ce=4):Ce=c===Lb?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Gi=c,ie===null&&(ln=1,Ep(l,ur(c,l.current)))}function kE(){var l=Hi.current;return l===null?!0:(ae&4194048)===ae?pr===null:(ae&62914560)===ae||(ae&536870912)!==0?l===pr:!1}function NE(){var l=z.H;return z.H=bh,l===null?bh:l}function ME(){var l=z.A;return z.A=JO,l}function Lp(){ln=4,Qa||(ae&4194048)!==ae&&Hi.current!==null||(Ic=!0),(Za&134217727)===0&&(pl&134217727)===0||Le===null||eo(Le,ae,qi,!1)}function sv(l,c,f){var m=_e;_e|=2;var _=NE(),A=ME();(Le!==l||ae!==c)&&(Pp=null,Nc(l,c)),c=!1;var D=ln;t:do try{if(Ce!==0&&ie!==null){var j=ie,W=Gi;switch(Ce){case 8:rv(),D=6;break t;case 3:case 2:case 9:case 6:Hi.current===null&&(c=!0);var rt=Ce;if(Ce=0,Gi=null,Mc(l,j,W,rt),f&&Ic){D=0;break t}break;default:rt=Ce,Ce=0,Gi=null,Mc(l,j,W,rt)}}nL(),D=ln;break}catch(ut){DE(l,ut)}while(!0);return c&&l.shellSuspendCounter++,Ks=sl=null,_e=m,z.H=_,z.A=A,ie===null&&(Le=null,ae=0,np()),D}function nL(){for(;ie!==null;)PE(ie)}function iL(l,c){var f=_e;_e|=2;var m=NE(),_=ME();Le!==l||ae!==c?(Pp=null,Mp=Ht()+500,Nc(l,c)):Ic=Ir(l,c);t:do try{if(Ce!==0&&ie!==null){c=ie;var A=Gi;e:switch(Ce){case 1:Ce=0,Gi=null,Mc(l,c,A,1);break;case 2:case 9:if($A(A)){Ce=0,Gi=null,OE(c);break}c=function(){Ce!==2&&Ce!==9||Le!==l||(Ce=7),ys(l)},A.then(c,c);break t;case 3:Ce=7;break t;case 4:Ce=5;break t;case 7:$A(A)?(Ce=0,Gi=null,OE(c)):(Ce=0,Gi=null,Mc(l,c,A,7));break;case 5:var D=null;switch(ie.tag){case 26:D=ie.memoizedState;case 5:case 27:var j=ie;if(D?_S(D):j.stateNode.complete){Ce=0,Gi=null;var W=j.sibling;if(W!==null)ie=W;else{var rt=j.return;rt!==null?(ie=rt,Bp(rt)):ie=null}break e}}Ce=0,Gi=null,Mc(l,c,A,5);break;case 6:Ce=0,Gi=null,Mc(l,c,A,6);break;case 8:rv(),ln=6;break t;default:throw Error(r(462))}}rL();break}catch(ut){DE(l,ut)}while(!0);return Ks=sl=null,z.H=m,z.A=_,_e=f,ie!==null?0:(Le=null,ae=0,np(),ln)}function rL(){for(;ie!==null&&!Dt();)PE(ie)}function PE(l){var c=rE(l.alternate,l,aa);l.memoizedProps=l.pendingProps,c===null?Bp(l):ie=c}function OE(l){var c=l,f=c.alternate;switch(c.tag){case 15:case 0:c=Zx(f,c,c.pendingProps,c.type,void 0,ae);break;case 11:c=Zx(f,c,c.pendingProps,c.type.render,c.ref,ae);break;case 5:_b(c);default:aE(f,c),c=ie=MA(c,aa),c=rE(f,c,aa)}l.memoizedProps=l.pendingProps,c===null?Bp(l):ie=c}function Mc(l,c,f,m){Ks=sl=null,_b(c),Ac=null,uh=0;var _=c.return;try{if(qO(l,_,c,f,ae)){ln=1,Ep(l,ur(f,l.current)),ie=null;return}}catch(A){if(_!==null)throw ie=_,A;ln=1,Ep(l,ur(f,l.current)),ie=null;return}c.flags&32768?(de||m===1?l=!0:Ic||(ae&536870912)!==0?l=!1:(Qa=l=!0,(m===2||m===9||m===3||m===6)&&(m=Hi.current,m!==null&&m.tag===13&&(m.flags|=16384))),LE(c,l)):Bp(c)}function Bp(l){var c=l;do{if((c.flags&32768)!==0){LE(c,Qa);return}l=c.return;var f=YO(c.alternate,c,aa);if(f!==null){ie=f;return}if(c=c.sibling,c!==null){ie=c;return}ie=c=l}while(c!==null);ln===0&&(ln=5)}function LE(l,c){do{var f=KO(l.alternate,l);if(f!==null){f.flags&=32767,ie=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(l=l.sibling,l!==null)){ie=l;return}ie=l=f}while(l!==null);ln=6,ie=null}function BE(l,c,f,m,_,A,D,j,W){l.cancelPendingCommit=null;do Fp();while(kn!==0);if((_e&6)!==0)throw Error(r(327));if(c!==null){if(c===l.current)throw Error(r(177));if(A=c.lanes|c.childLanes,A|=Wy,Fy(l,f,A,D,j,W),l===Le&&(ie=Le=null,ae=0),kc=c,to=l,oa=f,ev=A,nv=_,TE=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,lL(zn,function(){return zE(),null})):(l.callbackNode=null,l.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=z.T,z.T=null,_=Y.p,Y.p=2,D=_e,_e|=4;try{QO(l,c,f)}finally{_e=D,Y.p=_,z.T=m}}kn=1,FE(),UE(),VE()}}function FE(){if(kn===1){kn=0;var l=to,c=kc,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=z.T,z.T=null;var m=Y.p;Y.p=2;var _=_e;_e|=4;try{bE(c,l);var A=yv,D=EA(l.containerInfo),j=A.focusedElem,W=A.selectionRange;if(D!==j&&j&&j.ownerDocument&&xA(j.ownerDocument.documentElement,j)){if(W!==null&&zy(j)){var rt=W.start,ut=W.end;if(ut===void 0&&(ut=rt),"selectionStart"in j)j.selectionStart=rt,j.selectionEnd=Math.min(ut,j.value.length);else{var ft=j.ownerDocument||document,st=ft&&ft.defaultView||window;if(st.getSelection){var ot=st.getSelection(),Rt=j.textContent.length,Ft=Math.min(W.start,Rt),Me=W.end===void 0?Ft:Math.min(W.end,Rt);!ot.extend&&Ft>Me&&(D=Me,Me=Ft,Ft=D);var J=AA(j,Ft),K=AA(j,Me);if(J&&K&&(ot.rangeCount!==1||ot.anchorNode!==J.node||ot.anchorOffset!==J.offset||ot.focusNode!==K.node||ot.focusOffset!==K.offset)){var it=ft.createRange();it.setStart(J.node,J.offset),ot.removeAllRanges(),Ft>Me?(ot.addRange(it),ot.extend(K.node,K.offset)):(it.setEnd(K.node,K.offset),ot.addRange(it))}}}}for(ft=[],ot=j;ot=ot.parentNode;)ot.nodeType===1&&ft.push({element:ot,left:ot.scrollLeft,top:ot.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<ft.length;j++){var dt=ft[j];dt.element.scrollLeft=dt.left,dt.element.scrollTop=dt.top}}Kp=!!mv,yv=mv=null}finally{_e=_,Y.p=m,z.T=f}}l.current=c,kn=2}}function UE(){if(kn===2){kn=0;var l=to,c=kc,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=z.T,z.T=null;var m=Y.p;Y.p=2;var _=_e;_e|=4;try{fE(l,c.alternate,c)}finally{_e=_,Y.p=m,z.T=f}}kn=3}}function VE(){if(kn===4||kn===3){kn=0,pe();var l=to,c=kc,f=oa,m=TE;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?kn=5:(kn=0,kc=to=null,jE(l,l.pendingLanes));var _=l.pendingLanes;if(_===0&&(Ja=null),$s(f),c=c.stateNode,ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(di,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=z.T,_=Y.p,Y.p=2,z.T=null;try{for(var A=l.onRecoverableError,D=0;D<m.length;D++){var j=m[D];A(j.value,{componentStack:j.stack})}}finally{z.T=c,Y.p=_}}(oa&3)!==0&&Fp(),ys(l),_=l.pendingLanes,(f&261930)!==0&&(_&42)!==0?l===iv?Ch++:(Ch=0,iv=l):Ch=0,Rh(0)}}function jE(l,c){(l.pooledCacheLanes&=c)===0&&(c=l.pooledCache,c!=null&&(l.pooledCache=null,lh(c)))}function Fp(){return FE(),UE(),VE(),zE()}function zE(){if(kn!==5)return!1;var l=to,c=ev;ev=0;var f=$s(oa),m=z.T,_=Y.p;try{Y.p=32>f?32:f,z.T=null,f=nv,nv=null;var A=to,D=oa;if(kn=0,kc=to=null,oa=0,(_e&6)!==0)throw Error(r(331));var j=_e;if(_e|=4,xE(A.current),_E(A,A.current,D,f),_e=j,Rh(0,!1),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(di,A)}catch{}return!0}finally{Y.p=_,z.T=m,jE(l,c)}}function HE(l,c,f){c=ur(f,c),c=Ob(l.stateNode,c,2),l=Wa(l,c,2),l!==null&&(zo(l,2),ys(l))}function Re(l,c,f){if(l.tag===3)HE(l,l,f);else for(;c!==null;){if(c.tag===3){HE(c,l,f);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ja===null||!Ja.has(m))){l=ur(f,l),f=$x(2),m=Wa(c,f,2),m!==null&&(Gx(f,m,c,l),zo(m,2),ys(m));break}}c=c.return}}function av(l,c,f){var m=l.pingCache;if(m===null){m=l.pingCache=new tL;var _=new Set;m.set(c,_)}else _=m.get(c),_===void 0&&(_=new Set,m.set(c,_));_.has(f)||(Zb=!0,_.add(f),l=sL.bind(null,l,c,f),c.then(l,l))}function sL(l,c,f){var m=l.pingCache;m!==null&&m.delete(c),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,Le===l&&(ae&f)===f&&(ln===4||ln===3&&(ae&62914560)===ae&&300>Ht()-Np?(_e&2)===0&&Nc(l,0):Jb|=f,Dc===ae&&(Dc=0)),ys(l)}function $E(l,c){c===0&&(c=Pf()),l=nl(l,c),l!==null&&(zo(l,c),ys(l))}function aL(l){var c=l.memoizedState,f=0;c!==null&&(f=c.retryLane),$E(l,f)}function oL(l,c){var f=0;switch(l.tag){case 31:case 13:var m=l.stateNode,_=l.memoizedState;_!==null&&(f=_.retryLane);break;case 19:m=l.stateNode;break;case 22:m=l.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(c),$E(l,f)}function lL(l,c){return Ve(l,c)}var Up=null,Pc=null,ov=!1,Vp=!1,lv=!1,no=0;function ys(l){l!==Pc&&l.next===null&&(Pc===null?Up=Pc=l:Pc=Pc.next=l),Vp=!0,ov||(ov=!0,uL())}function Rh(l,c){if(!lv&&Vp){lv=!0;do for(var f=!1,m=Up;m!==null;){if(l!==0){var _=m.pendingLanes;if(_===0)var A=0;else{var D=m.suspendedLanes,j=m.pingedLanes;A=(1<<31-Se(42|l)+1)-1,A&=_&~(D&~j),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(f=!0,XE(m,A))}else A=ae,A=Jr(m,m===Le?A:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(A&3)===0||Ir(m,A)||(f=!0,XE(m,A));m=m.next}while(f);lv=!1}}function cL(){GE()}function GE(){Vp=ov=!1;var l=0;no!==0&&_L()&&(l=no);for(var c=Ht(),f=null,m=Up;m!==null;){var _=m.next,A=qE(m,c);A===0?(m.next=null,f===null?Up=_:f.next=_,_===null&&(Pc=f)):(f=m,(l!==0||(A&3)!==0)&&(Vp=!0)),m=_}kn!==0&&kn!==5||Rh(l),no!==0&&(no=0)}function qE(l,c){for(var f=l.suspendedLanes,m=l.pingedLanes,_=l.expirationTimes,A=l.pendingLanes&-62914561;0<A;){var D=31-Se(A),j=1<<D,W=_[D];W===-1?((j&f)===0||(j&m)!==0)&&(_[D]=By(j,c)):W<=c&&(l.expiredLanes|=j),A&=~j}if(c=Le,f=ae,f=Jr(l,l===c?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m=l.callbackNode,f===0||l===c&&(Ce===2||Ce===9)||l.cancelPendingCommit!==null)return m!==null&&m!==null&&vt(m),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||Ir(l,f)){if(c=f&-f,c===l.callbackPriority)return c;switch(m!==null&&vt(m),$s(f)){case 2:case 8:f=ui;break;case 32:f=zn;break;case 268435456:f=hi;break;default:f=zn}return m=WE.bind(null,l),f=Ve(f,m),l.callbackPriority=c,l.callbackNode=f,c}return m!==null&&m!==null&&vt(m),l.callbackPriority=2,l.callbackNode=null,2}function WE(l,c){if(kn!==0&&kn!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(Fp()&&l.callbackNode!==f)return null;var m=ae;return m=Jr(l,l===Le?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m===0?null:(RE(l,m,c),qE(l,Ht()),l.callbackNode!=null&&l.callbackNode===f?WE.bind(null,l):null)}function XE(l,c){if(Fp())return null;RE(l,c,!0)}function uL(){AL(function(){(_e&6)!==0?Ve(Fi,cL):GE()})}function cv(){if(no===0){var l=vc;l===0&&(l=Qr,Qr<<=1,(Qr&261888)===0&&(Qr=256)),no=l}return no}function YE(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:rc(""+l)}function KE(l,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,l.id&&f.setAttribute("form",l.id),c.parentNode.insertBefore(f,c),l=new FormData(l),f.parentNode.removeChild(f),l}function hL(l,c,f,m,_){if(c==="submit"&&f&&f.stateNode===_){var A=YE((_[Mn]||null).action),D=m.submitter;D&&(c=(c=D[Mn]||null)?YE(c.formAction):D.getAttribute("formAction"),c!==null&&(A=c,D=null));var j=new us("action","action",null,m,_);l.push({event:j,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(no!==0){var W=D?KE(_,D):new FormData(_);Ib(f,{pending:!0,data:W,method:_.method,action:A},null,W)}}else typeof A=="function"&&(j.preventDefault(),W=D?KE(_,D):new FormData(_),Ib(f,{pending:!0,data:W,method:_.method,action:A},A,W))},currentTarget:_}]})}}for(var uv=0;uv<qy.length;uv++){var hv=qy[uv],dL=hv.toLowerCase(),fL=hv[0].toUpperCase()+hv.slice(1);Br(dL,"on"+fL)}Br(CA,"onAnimationEnd"),Br(RA,"onAnimationIteration"),Br(IA,"onAnimationStart"),Br("dblclick","onDoubleClick"),Br("focusin","onFocus"),Br("focusout","onBlur"),Br(IO,"onTransitionRun"),Br(DO,"onTransitionStart"),Br(kO,"onTransitionCancel"),Br(DA,"onTransitionEnd"),as("onMouseEnter",["mouseout","mouseover"]),as("onMouseLeave",["mouseout","mouseover"]),as("onPointerEnter",["pointerout","pointerover"]),as("onPointerLeave",["pointerout","pointerover"]),ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ih="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ih));function QE(l,c){c=(c&4)!==0;for(var f=0;f<l.length;f++){var m=l[f],_=m.event;m=m.listeners;t:{var A=void 0;if(c)for(var D=m.length-1;0<=D;D--){var j=m[D],W=j.instance,rt=j.currentTarget;if(j=j.listener,W!==A&&_.isPropagationStopped())break t;A=j,_.currentTarget=rt;try{A(_)}catch(ut){ep(ut)}_.currentTarget=null,A=W}else for(D=0;D<m.length;D++){if(j=m[D],W=j.instance,rt=j.currentTarget,j=j.listener,W!==A&&_.isPropagationStopped())break t;A=j,_.currentTarget=rt;try{A(_)}catch(ut){ep(ut)}_.currentTarget=null,A=W}}}}function re(l,c){var f=c[Jl];f===void 0&&(f=c[Jl]=new Set);var m=l+"__bubble";f.has(m)||(ZE(c,l,2,!1),f.add(m))}function dv(l,c,f){var m=0;c&&(m|=4),ZE(f,l,m,c)}var jp="_reactListening"+Math.random().toString(36).slice(2);function fv(l){if(!l[jp]){l[jp]=!0,ju.forEach(function(f){f!=="selectionchange"&&(pL.has(f)||dv(f,!1,l),dv(f,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[jp]||(c[jp]=!0,dv("selectionchange",!1,c))}}function ZE(l,c,f,m){switch(CS(c)){case 2:var _=zL;break;case 8:_=HL;break;default:_=Rv}f=_.bind(null,c,f,l),_=void 0,!Xo||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(_=!0),m?_!==void 0?l.addEventListener(c,f,{capture:!0,passive:_}):l.addEventListener(c,f,!0):_!==void 0?l.addEventListener(c,f,{passive:_}):l.addEventListener(c,f,!1)}function pv(l,c,f,m,_){var A=m;if((c&1)===0&&(c&2)===0&&m!==null)t:for(;;){if(m===null)return;var D=m.tag;if(D===3||D===4){var j=m.stateNode.containerInfo;if(j===_)break;if(D===4)for(D=m.return;D!==null;){var W=D.tag;if((W===3||W===4)&&D.stateNode.containerInfo===_)return;D=D.return}for(;j!==null;){if(D=is(j),D===null)return;if(W=D.tag,W===5||W===6||W===26||W===27){m=A=D;continue t}j=j.parentNode}}m=m.return}Ba(function(){var rt=A,ut=ar(f),ft=[];t:{var st=kA.get(l);if(st!==void 0){var ot=us,Rt=l;switch(l){case"keypress":if(Ko(f)===0)break t;case"keydown":case"keyup":ot=Zf;break;case"focusin":Rt="focus",ot=Zo;break;case"focusout":Rt="blur",ot=Zo;break;case"beforeblur":case"afterblur":ot=Zo;break;case"click":if(f.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=th;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=Hf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=T;break;case CA:case RA:case IA:ot=Gf;break;case DA:ot=H;break;case"scroll":case"scrollend":ot=Ju;break;case"wheel":ot=at;break;case"copy":case"cut":case"paste":ot=qf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=Ws;break;case"toggle":case"beforetoggle":ot=Kt}var Ft=(c&4)!==0,Me=!Ft&&(l==="scroll"||l==="scrollend"),J=Ft?st!==null?st+"Capture":null:st;Ft=[];for(var K=rt,it;K!==null;){var dt=K;if(it=dt.stateNode,dt=dt.tag,dt!==5&&dt!==26&&dt!==27||it===null||J===null||(dt=Mr(K,J),dt!=null&&Ft.push(Dh(K,dt,it))),Me)break;K=K.return}0<Ft.length&&(st=new ot(st,Rt,null,f,ut),ft.push({event:st,listeners:Ft}))}}if((c&7)===0){t:{if(st=l==="mouseover"||l==="pointerover",ot=l==="mouseout"||l==="pointerout",st&&f!==Ku&&(Rt=f.relatedTarget||f.fromElement)&&(is(Rt)||Rt[es]))break t;if((ot||st)&&(st=ut.window===ut?ut:(st=ut.ownerDocument)?st.defaultView||st.parentWindow:window,ot?(Rt=f.relatedTarget||f.toElement,ot=rt,Rt=Rt?is(Rt):null,Rt!==null&&(Me=a(Rt),Ft=Rt.tag,Rt!==Me||Ft!==5&&Ft!==27&&Ft!==6)&&(Rt=null)):(ot=null,Rt=rt),ot!==Rt)){if(Ft=th,dt="onMouseLeave",J="onMouseEnter",K="mouse",(l==="pointerout"||l==="pointerover")&&(Ft=Ws,dt="onPointerLeave",J="onPointerEnter",K="pointer"),Me=ot==null?st:Ui(ot),it=Rt==null?st:Ui(Rt),st=new Ft(dt,K+"leave",ot,f,ut),st.target=Me,st.relatedTarget=it,dt=null,is(ut)===rt&&(Ft=new Ft(J,K+"enter",Rt,f,ut),Ft.target=it,Ft.relatedTarget=Me,dt=Ft),Me=dt,ot&&Rt)e:{for(Ft=gL,J=ot,K=Rt,it=0,dt=J;dt;dt=Ft(dt))it++;dt=0;for(var Ot=K;Ot;Ot=Ft(Ot))dt++;for(;0<it-dt;)J=Ft(J),it--;for(;0<dt-it;)K=Ft(K),dt--;for(;it--;){if(J===K||K!==null&&J===K.alternate){Ft=J;break e}J=Ft(J),K=Ft(K)}Ft=null}else Ft=null;ot!==null&&JE(ft,st,ot,Ft,!1),Rt!==null&&Me!==null&&JE(ft,Me,Rt,Ft,!0)}}t:{if(st=rt?Ui(rt):window,ot=st.nodeName&&st.nodeName.toLowerCase(),ot==="select"||ot==="input"&&st.type==="file")var ye=mA;else if(pA(st))if(yA)ye=TO;else{ye=EO;var It=xO}else ot=st.nodeName,!ot||ot.toLowerCase()!=="input"||st.type!=="checkbox"&&st.type!=="radio"?rt&&ic(rt.elementType)&&(ye=mA):ye=SO;if(ye&&(ye=ye(l,rt))){gA(ft,ye,f,ut);break t}It&&It(l,st,rt),l==="focusout"&&rt&&st.type==="number"&&rt.memoizedProps.value!=null&&Wu(st,"number",st.value)}switch(It=rt?Ui(rt):window,l){case"focusin":(pA(It)||It.contentEditable==="true")&&(hc=It,Hy=rt,sh=null);break;case"focusout":sh=Hy=hc=null;break;case"mousedown":$y=!0;break;case"contextmenu":case"mouseup":case"dragend":$y=!1,SA(ft,f,ut);break;case"selectionchange":if(RO)break;case"keydown":case"keyup":SA(ft,f,ut)}var Zt;if(ve)t:{switch(l){case"compositionstart":var oe="onCompositionStart";break t;case"compositionend":oe="onCompositionEnd";break t;case"compositionupdate":oe="onCompositionUpdate";break t}oe=void 0}else uc?Jo(l,f)&&(oe="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(oe="onCompositionStart");oe&&(fs&&f.locale!=="ko"&&(uc||oe!=="onCompositionStart"?oe==="onCompositionEnd"&&uc&&(Zt=Zu()):(cs=ut,Qu="value"in cs?cs.value:cs.textContent,uc=!0)),It=zp(rt,oe),0<It.length&&(oe=new ds(oe,l,null,f,ut),ft.push({event:oe,listeners:It}),Zt?oe.data=Zt:(Zt=cc(f),Zt!==null&&(oe.data=Zt)))),(Zt=lr?vO(l,f):_O(l,f))&&(oe=zp(rt,"onBeforeInput"),0<oe.length&&(It=new ds("onBeforeInput","beforeinput",null,f,ut),ft.push({event:It,listeners:oe}),It.data=Zt)),hL(ft,l,rt,f,ut)}QE(ft,c)})}function Dh(l,c,f){return{instance:l,listener:c,currentTarget:f}}function zp(l,c){for(var f=c+"Capture",m=[];l!==null;){var _=l,A=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||A===null||(_=Mr(l,f),_!=null&&m.unshift(Dh(l,_,A)),_=Mr(l,c),_!=null&&m.push(Dh(l,_,A))),l.tag===3)return m;l=l.return}return[]}function gL(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function JE(l,c,f,m,_){for(var A=c._reactName,D=[];f!==null&&f!==m;){var j=f,W=j.alternate,rt=j.stateNode;if(j=j.tag,W!==null&&W===m)break;j!==5&&j!==26&&j!==27||rt===null||(W=rt,_?(rt=Mr(f,A),rt!=null&&D.unshift(Dh(f,rt,W))):_||(rt=Mr(f,A),rt!=null&&D.push(Dh(f,rt,W)))),f=f.return}D.length!==0&&l.push({event:c,listeners:D})}var mL=/\r\n?/g,yL=/\u0000|\uFFFD/g;function tS(l){return(typeof l=="string"?l:""+l).replace(mL,`
`).replace(yL,"")}function eS(l,c){return c=tS(c),tS(l)===c}function Ne(l,c,f,m,_,A){switch(f){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||Ei(l,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&Ei(l,""+m);break;case"className":Vi(l,"class",m);break;case"tabIndex":Vi(l,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Vi(l,f,m);break;case"style":Yu(l,m,A);break;case"data":if(c!=="object"){Vi(l,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||f!=="href")){l.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(f);break}m=rc(""+m),l.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(f==="formAction"?(c!=="input"&&Ne(l,c,"name",_.name,_,null),Ne(l,c,"formEncType",_.formEncType,_,null),Ne(l,c,"formMethod",_.formMethod,_,null),Ne(l,c,"formTarget",_.formTarget,_,null)):(Ne(l,c,"encType",_.encType,_,null),Ne(l,c,"method",_.method,_,null),Ne(l,c,"target",_.target,_,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(f);break}m=rc(""+m),l.setAttribute(f,m);break;case"onClick":m!=null&&(l.onclick=Nr);break;case"onScroll":m!=null&&re("scroll",l);break;case"onScrollEnd":m!=null&&re("scrollend",l);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(_.children!=null)throw Error(r(60));l.innerHTML=f}}break;case"multiple":l.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":l.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){l.removeAttribute("xlink:href");break}f=rc(""+m),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(f,""+m):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":m===!0?l.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(f,m):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?l.setAttribute(f,m):l.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?l.removeAttribute(f):l.setAttribute(f,m);break;case"popover":re("beforetoggle",l),re("toggle",l),ec(l,"popover",m);break;case"xlinkActuate":wn(l,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":wn(l,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":wn(l,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":wn(l,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":wn(l,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":wn(l,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":wn(l,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":wn(l,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":wn(l,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":ec(l,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=zf.get(f)||f,ec(l,f,m))}}function gv(l,c,f,m,_,A){switch(f){case"style":Yu(l,m,A);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(_.children!=null)throw Error(r(60));l.innerHTML=f}}break;case"children":typeof m=="string"?Ei(l,m):(typeof m=="number"||typeof m=="bigint")&&Ei(l,""+m);break;case"onScroll":m!=null&&re("scroll",l);break;case"onScrollEnd":m!=null&&re("scrollend",l);break;case"onClick":m!=null&&(l.onclick=Nr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zu.hasOwnProperty(f))t:{if(f[0]==="o"&&f[1]==="n"&&(_=f.endsWith("Capture"),c=f.slice(2,_?f.length-7:void 0),A=l[Mn]||null,A=A!=null?A[f]:null,typeof A=="function"&&l.removeEventListener(c,A,_),typeof m=="function")){typeof A!="function"&&A!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(c,m,_);break t}f in l?l[f]=m:m===!0?l.setAttribute(f,""):ec(l,f,m)}}}function Wn(l,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":re("error",l),re("load",l);var m=!1,_=!1,A;for(A in f)if(f.hasOwnProperty(A)){var D=f[A];if(D!=null)switch(A){case"src":m=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Ne(l,c,A,D,f,null)}}_&&Ne(l,c,"srcSet",f.srcSet,f,null),m&&Ne(l,c,"src",f.src,f,null);return;case"input":re("invalid",l);var j=A=D=_=null,W=null,rt=null;for(m in f)if(f.hasOwnProperty(m)){var ut=f[m];if(ut!=null)switch(m){case"name":_=ut;break;case"type":D=ut;break;case"checked":W=ut;break;case"defaultChecked":rt=ut;break;case"value":A=ut;break;case"defaultValue":j=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(r(137,c));break;default:Ne(l,c,m,ut,f,null)}}Uf(l,A,j,W,rt,D,_,!1);return;case"select":re("invalid",l),m=D=A=null;for(_ in f)if(f.hasOwnProperty(_)&&(j=f[_],j!=null))switch(_){case"value":A=j;break;case"defaultValue":D=j;break;case"multiple":m=j;default:Ne(l,c,_,j,f,null)}c=A,f=D,l.multiple=!!m,c!=null?Ma(l,!!m,c,!1):f!=null&&Ma(l,!!m,f,!0);return;case"textarea":re("invalid",l),A=_=m=null;for(D in f)if(f.hasOwnProperty(D)&&(j=f[D],j!=null))switch(D){case"value":m=j;break;case"defaultValue":_=j;break;case"children":A=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:Ne(l,c,D,j,f,null)}Pa(l,m,_,A);return;case"option":for(W in f)if(f.hasOwnProperty(W)&&(m=f[W],m!=null))switch(W){case"selected":l.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Ne(l,c,W,m,f,null)}return;case"dialog":re("beforetoggle",l),re("toggle",l),re("cancel",l),re("close",l);break;case"iframe":case"object":re("load",l);break;case"video":case"audio":for(m=0;m<Ih.length;m++)re(Ih[m],l);break;case"image":re("error",l),re("load",l);break;case"details":re("toggle",l);break;case"embed":case"source":case"link":re("error",l),re("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in f)if(f.hasOwnProperty(rt)&&(m=f[rt],m!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Ne(l,c,rt,m,f,null)}return;default:if(ic(c)){for(ut in f)f.hasOwnProperty(ut)&&(m=f[ut],m!==void 0&&gv(l,c,ut,m,f,void 0));return}}for(j in f)f.hasOwnProperty(j)&&(m=f[j],m!=null&&Ne(l,c,j,m,f,null))}function bL(l,c,f,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,A=null,D=null,j=null,W=null,rt=null,ut=null;for(ot in f){var ft=f[ot];if(f.hasOwnProperty(ot)&&ft!=null)switch(ot){case"checked":break;case"value":break;case"defaultValue":W=ft;default:m.hasOwnProperty(ot)||Ne(l,c,ot,null,m,ft)}}for(var st in m){var ot=m[st];if(ft=f[st],m.hasOwnProperty(st)&&(ot!=null||ft!=null))switch(st){case"type":A=ot;break;case"name":_=ot;break;case"checked":rt=ot;break;case"defaultChecked":ut=ot;break;case"value":D=ot;break;case"defaultValue":j=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(r(137,c));break;default:ot!==ft&&Ne(l,c,st,ot,m,ft)}}nc(l,D,j,W,rt,ut,A,_);return;case"select":ot=D=j=st=null;for(A in f)if(W=f[A],f.hasOwnProperty(A)&&W!=null)switch(A){case"value":break;case"multiple":ot=W;default:m.hasOwnProperty(A)||Ne(l,c,A,null,m,W)}for(_ in m)if(A=m[_],W=f[_],m.hasOwnProperty(_)&&(A!=null||W!=null))switch(_){case"value":st=A;break;case"defaultValue":j=A;break;case"multiple":D=A;default:A!==W&&Ne(l,c,_,A,m,W)}c=j,f=D,m=ot,st!=null?Ma(l,!!f,st,!1):!!m!=!!f&&(c!=null?Ma(l,!!f,c,!0):Ma(l,!!f,f?[]:"",!1));return;case"textarea":ot=st=null;for(j in f)if(_=f[j],f.hasOwnProperty(j)&&_!=null&&!m.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:Ne(l,c,j,null,m,_)}for(D in m)if(_=m[D],A=f[D],m.hasOwnProperty(D)&&(_!=null||A!=null))switch(D){case"value":st=_;break;case"defaultValue":ot=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==A&&Ne(l,c,D,_,m,A)}Vf(l,st,ot);return;case"option":for(var Rt in f)if(st=f[Rt],f.hasOwnProperty(Rt)&&st!=null&&!m.hasOwnProperty(Rt))switch(Rt){case"selected":l.selected=!1;break;default:Ne(l,c,Rt,null,m,st)}for(W in m)if(st=m[W],ot=f[W],m.hasOwnProperty(W)&&st!==ot&&(st!=null||ot!=null))switch(W){case"selected":l.selected=st&&typeof st!="function"&&typeof st!="symbol";break;default:Ne(l,c,W,st,m,ot)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ft in f)st=f[Ft],f.hasOwnProperty(Ft)&&st!=null&&!m.hasOwnProperty(Ft)&&Ne(l,c,Ft,null,m,st);for(rt in m)if(st=m[rt],ot=f[rt],m.hasOwnProperty(rt)&&st!==ot&&(st!=null||ot!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(r(137,c));break;default:Ne(l,c,rt,st,m,ot)}return;default:if(ic(c)){for(var Me in f)st=f[Me],f.hasOwnProperty(Me)&&st!==void 0&&!m.hasOwnProperty(Me)&&gv(l,c,Me,void 0,m,st);for(ut in m)st=m[ut],ot=f[ut],!m.hasOwnProperty(ut)||st===ot||st===void 0&&ot===void 0||gv(l,c,ut,st,m,ot);return}}for(var J in f)st=f[J],f.hasOwnProperty(J)&&st!=null&&!m.hasOwnProperty(J)&&Ne(l,c,J,null,m,st);for(ft in m)st=m[ft],ot=f[ft],!m.hasOwnProperty(ft)||st===ot||st==null&&ot==null||Ne(l,c,ft,st,m,ot)}function nS(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vL(){if(typeof performance.getEntriesByType=="function"){for(var l=0,c=0,f=performance.getEntriesByType("resource"),m=0;m<f.length;m++){var _=f[m],A=_.transferSize,D=_.initiatorType,j=_.duration;if(A&&j&&nS(D)){for(D=0,j=_.responseEnd,m+=1;m<f.length;m++){var W=f[m],rt=W.startTime;if(rt>j)break;var ut=W.transferSize,ft=W.initiatorType;ut&&nS(ft)&&(W=W.responseEnd,D+=ut*(W<j?1:(j-rt)/(W-rt)))}if(--m,c+=8*(A+D)/(_.duration/1e3),l++,10<l)break}}if(0<l)return c/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var mv=null,yv=null;function Hp(l){return l.nodeType===9?l:l.ownerDocument}function iS(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rS(l,c){if(l===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&c==="foreignObject"?0:l}function bv(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var vv=null;function _L(){var l=window.event;return l&&l.type==="popstate"?l===vv?!1:(vv=l,!0):(vv=null,!1)}var sS=typeof setTimeout=="function"?setTimeout:void 0,wL=typeof clearTimeout=="function"?clearTimeout:void 0,aS=typeof Promise=="function"?Promise:void 0,AL=typeof queueMicrotask=="function"?queueMicrotask:typeof aS<"u"?function(l){return aS.resolve(null).then(l).catch(xL)}:sS;function xL(l){setTimeout(function(){throw l})}function io(l){return l==="head"}function oS(l,c){var f=c,m=0;do{var _=f.nextSibling;if(l.removeChild(f),_&&_.nodeType===8)if(f=_.data,f==="/$"||f==="/&"){if(m===0){l.removeChild(_),Fc(c);return}m--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")m++;else if(f==="html")kh(l.ownerDocument.documentElement);else if(f==="head"){f=l.ownerDocument.head,kh(f);for(var A=f.firstChild;A;){var D=A.nextSibling,j=A.nodeName;A[ns]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&A.rel.toLowerCase()==="stylesheet"||f.removeChild(A),A=D}}else f==="body"&&kh(l.ownerDocument.body);f=_}while(f);Fc(c)}function lS(l,c){var f=l;l=0;do{var m=f.nextSibling;if(f.nodeType===1?c?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(c?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),m&&m.nodeType===8)if(f=m.data,f==="/$"){if(l===0)break;l--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||l++;f=m}while(f)}function _v(l){var c=l.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":_v(f),tc(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function EL(l,c,f,m){for(;l.nodeType===1;){var _=f;if(l.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(m){if(!l[ns])switch(c){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(A=l.getAttribute("rel"),A==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(A!==_.rel||l.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||l.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||l.getAttribute("title")!==(_.title==null?null:_.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(A=l.getAttribute("src"),(A!==(_.src==null?null:_.src)||l.getAttribute("type")!==(_.type==null?null:_.type)||l.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&A&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(c==="input"&&l.type==="hidden"){var A=_.name==null?null:""+_.name;if(_.type==="hidden"&&l.getAttribute("name")===A)return l}else return l;if(l=gr(l.nextSibling),l===null)break}return null}function SL(l,c,f){if(c==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=gr(l.nextSibling),l===null))return null;return l}function cS(l,c){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!c||(l=gr(l.nextSibling),l===null))return null;return l}function wv(l){return l.data==="$?"||l.data==="$~"}function Av(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function TL(l,c){var f=l.ownerDocument;if(l.data==="$~")l._reactRetry=c;else if(l.data!=="$?"||f.readyState!=="loading")c();else{var m=function(){c(),f.removeEventListener("DOMContentLoaded",m)};f.addEventListener("DOMContentLoaded",m),l._reactRetry=m}}function gr(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return l}var xv=null;function uS(l){l=l.nextSibling;for(var c=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"||f==="/&"){if(c===0)return gr(l.nextSibling);c--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||c++}l=l.nextSibling}return null}function hS(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(c===0)return l;c--}else f!=="/$"&&f!=="/&"||c++}l=l.previousSibling}return null}function dS(l,c,f){switch(c=Hp(f),l){case"html":if(l=c.documentElement,!l)throw Error(r(452));return l;case"head":if(l=c.head,!l)throw Error(r(453));return l;case"body":if(l=c.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function kh(l){for(var c=l.attributes;c.length;)l.removeAttributeNode(c[0]);tc(l)}var mr=new Map,fS=new Set;function $p(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var la=Y.d;Y.d={f:CL,r:RL,D:IL,C:DL,L:kL,m:NL,X:PL,S:ML,M:OL};function CL(){var l=la.f(),c=Op();return l||c}function RL(l){var c=sr(l);c!==null&&c.tag===5&&c.type==="form"?Dx(c):la.r(l)}var Oc=typeof document>"u"?null:document;function pS(l,c,f){var m=Oc;if(m&&typeof c=="string"&&c){var _=xi(c);_='link[rel="'+l+'"][href="'+_+'"]',typeof f=="string"&&(_+='[crossorigin="'+f+'"]'),fS.has(_)||(fS.add(_),l={rel:l,crossOrigin:f,href:c},m.querySelector(_)===null&&(c=m.createElement("link"),Wn(c,"link",l),_n(c),m.head.appendChild(c)))}}function IL(l){la.D(l),pS("dns-prefetch",l,null)}function DL(l,c){la.C(l,c),pS("preconnect",l,c)}function kL(l,c,f){la.L(l,c,f);var m=Oc;if(m&&l&&c){var _='link[rel="preload"][as="'+xi(c)+'"]';c==="image"&&f&&f.imageSrcSet?(_+='[imagesrcset="'+xi(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(_+='[imagesizes="'+xi(f.imageSizes)+'"]')):_+='[href="'+xi(l)+'"]';var A=_;switch(c){case"style":A=Lc(l);break;case"script":A=Bc(l)}mr.has(A)||(l=g({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:l,as:c},f),mr.set(A,l),m.querySelector(_)!==null||c==="style"&&m.querySelector(Nh(A))||c==="script"&&m.querySelector(Mh(A))||(c=m.createElement("link"),Wn(c,"link",l),_n(c),m.head.appendChild(c)))}}function NL(l,c){la.m(l,c);var f=Oc;if(f&&l){var m=c&&typeof c.as=="string"?c.as:"script",_='link[rel="modulepreload"][as="'+xi(m)+'"][href="'+xi(l)+'"]',A=_;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Bc(l)}if(!mr.has(A)&&(l=g({rel:"modulepreload",href:l},c),mr.set(A,l),f.querySelector(_)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Mh(A)))return}m=f.createElement("link"),Wn(m,"link",l),_n(m),f.head.appendChild(m)}}}function ML(l,c,f){la.S(l,c,f);var m=Oc;if(m&&l){var _=rs(m).hoistableStyles,A=Lc(l);c=c||"default";var D=_.get(A);if(!D){var j={loading:0,preload:null};if(D=m.querySelector(Nh(A)))j.loading=5;else{l=g({rel:"stylesheet",href:l,"data-precedence":c},f),(f=mr.get(A))&&Ev(l,f);var W=D=m.createElement("link");_n(W),Wn(W,"link",l),W._p=new Promise(function(rt,ut){W.onload=rt,W.onerror=ut}),W.addEventListener("load",function(){j.loading|=1}),W.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Gp(D,c,m)}D={type:"stylesheet",instance:D,count:1,state:j},_.set(A,D)}}}function PL(l,c){la.X(l,c);var f=Oc;if(f&&l){var m=rs(f).hoistableScripts,_=Bc(l),A=m.get(_);A||(A=f.querySelector(Mh(_)),A||(l=g({src:l,async:!0},c),(c=mr.get(_))&&Sv(l,c),A=f.createElement("script"),_n(A),Wn(A,"link",l),f.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(_,A))}}function OL(l,c){la.M(l,c);var f=Oc;if(f&&l){var m=rs(f).hoistableScripts,_=Bc(l),A=m.get(_);A||(A=f.querySelector(Mh(_)),A||(l=g({src:l,async:!0,type:"module"},c),(c=mr.get(_))&&Sv(l,c),A=f.createElement("script"),_n(A),Wn(A,"link",l),f.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(_,A))}}function gS(l,c,f,m){var _=(_=ht.current)?$p(_):null;if(!_)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=Lc(f.href),f=rs(_).hoistableStyles,m=f.get(c),m||(m={type:"style",instance:null,count:0,state:null},f.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=Lc(f.href);var A=rs(_).hoistableStyles,D=A.get(l);if(D||(_=_.ownerDocument||_,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(l,D),(A=_.querySelector(Nh(l)))&&!A._p&&(D.instance=A,D.state.loading=5),mr.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},mr.set(l,f),A||LL(_,l,f,D.state))),c&&m===null)throw Error(r(528,""));return D}if(c&&m!==null)throw Error(r(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Bc(f),f=rs(_).hoistableScripts,m=f.get(c),m||(m={type:"script",instance:null,count:0,state:null},f.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Lc(l){return'href="'+xi(l)+'"'}function Nh(l){return'link[rel="stylesheet"]['+l+"]"}function mS(l){return g({},l,{"data-precedence":l.precedence,precedence:null})}function LL(l,c,f,m){l.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=l.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),Wn(c,"link",f),_n(c),l.head.appendChild(c))}function Bc(l){return'[src="'+xi(l)+'"]'}function Mh(l){return"script[async]"+l}function yS(l,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var m=l.querySelector('style[data-href~="'+xi(f.href)+'"]');if(m)return c.instance=m,_n(m),m;var _=g({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(l.ownerDocument||l).createElement("style"),_n(m),Wn(m,"style",_),Gp(m,f.precedence,l),c.instance=m;case"stylesheet":_=Lc(f.href);var A=l.querySelector(Nh(_));if(A)return c.state.loading|=4,c.instance=A,_n(A),A;m=mS(f),(_=mr.get(_))&&Ev(m,_),A=(l.ownerDocument||l).createElement("link"),_n(A);var D=A;return D._p=new Promise(function(j,W){D.onload=j,D.onerror=W}),Wn(A,"link",m),c.state.loading|=4,Gp(A,f.precedence,l),c.instance=A;case"script":return A=Bc(f.src),(_=l.querySelector(Mh(A)))?(c.instance=_,_n(_),_):(m=f,(_=mr.get(A))&&(m=g({},f),Sv(m,_)),l=l.ownerDocument||l,_=l.createElement("script"),_n(_),Wn(_,"link",m),l.head.appendChild(_),c.instance=_);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,Gp(m,f.precedence,l));return c.instance}function Gp(l,c,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=m.length?m[m.length-1]:null,A=_,D=0;D<m.length;D++){var j=m[D];if(j.dataset.precedence===c)A=j;else if(A!==_)break}A?A.parentNode.insertBefore(l,A.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(l,c.firstChild))}function Ev(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.title==null&&(l.title=c.title)}function Sv(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.integrity==null&&(l.integrity=c.integrity)}var qp=null;function bS(l,c,f){if(qp===null){var m=new Map,_=qp=new Map;_.set(f,m)}else _=qp,m=_.get(f),m||(m=new Map,_.set(f,m));if(m.has(l))return m;for(m.set(l,null),f=f.getElementsByTagName(l),_=0;_<f.length;_++){var A=f[_];if(!(A[ns]||A[vn]||l==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var D=A.getAttribute(c)||"";D=l+D;var j=m.get(D);j?j.push(A):m.set(D,[A])}}return m}function vS(l,c,f){l=l.ownerDocument||l,l.head.insertBefore(f,c==="title"?l.querySelector("head > title"):null)}function BL(l,c,f){if(f===1||c.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return l=c.disabled,typeof c.precedence=="string"&&l==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function _S(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function FL(l,c,f,m){if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var _=Lc(m.href),A=c.querySelector(Nh(_));if(A){c=A._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(l.count++,l=Wp.bind(l),c.then(l,l)),f.state.loading|=4,f.instance=A,_n(A);return}A=c.ownerDocument||c,m=mS(m),(_=mr.get(_))&&Ev(m,_),A=A.createElement("link"),_n(A);var D=A;D._p=new Promise(function(j,W){D.onload=j,D.onerror=W}),Wn(A,"link",m),f.instance=A}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(l.count++,f=Wp.bind(l),c.addEventListener("load",f),c.addEventListener("error",f))}}var Tv=0;function UL(l,c){return l.stylesheets&&l.count===0&&Yp(l,l.stylesheets),0<l.count||0<l.imgCount?function(f){var m=setTimeout(function(){if(l.stylesheets&&Yp(l,l.stylesheets),l.unsuspend){var A=l.unsuspend;l.unsuspend=null,A()}},6e4+c);0<l.imgBytes&&Tv===0&&(Tv=62500*vL());var _=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Yp(l,l.stylesheets),l.unsuspend)){var A=l.unsuspend;l.unsuspend=null,A()}},(l.imgBytes>Tv?50:800)+c);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(m),clearTimeout(_)}}:null}function Wp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yp(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Xp=null;function Yp(l,c){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Xp=new Map,c.forEach(VL,l),Xp=null,Wp.call(l))}function VL(l,c){if(!(c.state.loading&4)){var f=Xp.get(l);if(f)var m=f.get(null);else{f=new Map,Xp.set(l,f);for(var _=l.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<_.length;A++){var D=_[A];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(f.set(D.dataset.precedence,D),m=D)}m&&f.set(null,m)}_=c.instance,D=_.getAttribute("data-precedence"),A=f.get(D)||m,A===m&&f.set(null,_),f.set(D,_),this.count++,m=Wp.bind(this),_.addEventListener("load",m),_.addEventListener("error",m),A?A.parentNode.insertBefore(_,A.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(_,l.firstChild)),c.state.loading|=4}}var Ph={$$typeof:N,Provider:null,Consumer:null,_currentValue:nt,_currentValue2:nt,_threadCount:0};function jL(l,c,f,m,_,A,D,j,W){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ts(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ts(0),this.hiddenUpdates=ts(null),this.identifierPrefix=m,this.onUncaughtError=_,this.onCaughtError=A,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function wS(l,c,f,m,_,A,D,j,W,rt,ut,ft){return l=new jL(l,c,f,D,W,rt,ut,ft,j),c=1,A===!0&&(c|=24),A=zi(3,null,null,c),l.current=A,A.stateNode=l,c=sb(),c.refCount++,l.pooledCache=c,c.refCount++,A.memoizedState={element:m,isDehydrated:f,cache:c},cb(A),l}function AS(l){return l?(l=pc,l):pc}function xS(l,c,f,m,_,A){_=AS(_),m.context===null?m.context=_:m.pendingContext=_,m=qa(c),m.payload={element:f},A=A===void 0?null:A,A!==null&&(m.callback=A),f=Wa(l,m,c),f!==null&&(Ii(f,l,c),dh(f,l,c))}function ES(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<c?f:c}}function Cv(l,c){ES(l,c),(l=l.alternate)&&ES(l,c)}function SS(l){if(l.tag===13||l.tag===31){var c=nl(l,67108864);c!==null&&Ii(c,l,67108864),Cv(l,67108864)}}function TS(l){if(l.tag===13||l.tag===31){var c=Wi();c=$o(c);var f=nl(l,c);f!==null&&Ii(f,l,c),Cv(l,c)}}var Kp=!0;function zL(l,c,f,m){var _=z.T;z.T=null;var A=Y.p;try{Y.p=2,Rv(l,c,f,m)}finally{Y.p=A,z.T=_}}function HL(l,c,f,m){var _=z.T;z.T=null;var A=Y.p;try{Y.p=8,Rv(l,c,f,m)}finally{Y.p=A,z.T=_}}function Rv(l,c,f,m){if(Kp){var _=Iv(m);if(_===null)pv(l,c,m,Qp,f),RS(l,m);else if(GL(_,l,c,f,m))m.stopPropagation();else if(RS(l,m),c&4&&-1<$L.indexOf(l)){for(;_!==null;){var A=sr(_);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var D=Zr(A.pendingLanes);if(D!==0){var j=A;for(j.pendingLanes|=2,j.entangledLanes|=2;D;){var W=1<<31-Se(D);j.entanglements[1]|=W,D&=~W}ys(A),(_e&6)===0&&(Mp=Ht()+500,Rh(0))}}break;case 31:case 13:j=nl(A,2),j!==null&&Ii(j,A,2),Op(),Cv(A,2)}if(A=Iv(m),A===null&&pv(l,c,m,Qp,f),A===_)break;_=A}_!==null&&m.stopPropagation()}else pv(l,c,m,null,f)}}function Iv(l){return l=ar(l),Dv(l)}var Qp=null;function Dv(l){if(Qp=null,l=is(l),l!==null){var c=a(l);if(c===null)l=null;else{var f=c.tag;if(f===13){if(l=o(c),l!==null)return l;l=null}else if(f===31){if(l=u(c),l!==null)return l;l=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null)}}return Qp=l,null}function CS(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(an()){case Fi:return 2;case ui:return 8;case zn:case ei:return 32;case hi:return 268435456;default:return 32}default:return 32}}var kv=!1,ro=null,so=null,ao=null,Oh=new Map,Lh=new Map,oo=[],$L="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function RS(l,c){switch(l){case"focusin":case"focusout":ro=null;break;case"dragenter":case"dragleave":so=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":Oh.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lh.delete(c.pointerId)}}function Bh(l,c,f,m,_,A){return l===null||l.nativeEvent!==A?(l={blockedOn:c,domEventName:f,eventSystemFlags:m,nativeEvent:A,targetContainers:[_]},c!==null&&(c=sr(c),c!==null&&SS(c)),l):(l.eventSystemFlags|=m,c=l.targetContainers,_!==null&&c.indexOf(_)===-1&&c.push(_),l)}function GL(l,c,f,m,_){switch(c){case"focusin":return ro=Bh(ro,l,c,f,m,_),!0;case"dragenter":return so=Bh(so,l,c,f,m,_),!0;case"mouseover":return ao=Bh(ao,l,c,f,m,_),!0;case"pointerover":var A=_.pointerId;return Oh.set(A,Bh(Oh.get(A)||null,l,c,f,m,_)),!0;case"gotpointercapture":return A=_.pointerId,Lh.set(A,Bh(Lh.get(A)||null,l,c,f,m,_)),!0}return!1}function IS(l){var c=is(l.target);if(c!==null){var f=a(c);if(f!==null){if(c=f.tag,c===13){if(c=o(f),c!==null){l.blockedOn=c,Dr(l.priority,function(){TS(f)});return}}else if(c===31){if(c=u(f),c!==null){l.blockedOn=c,Dr(l.priority,function(){TS(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Zp(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var f=Iv(l.nativeEvent);if(f===null){f=l.nativeEvent;var m=new f.constructor(f.type,f);Ku=m,f.target.dispatchEvent(m),Ku=null}else return c=sr(f),c!==null&&SS(c),l.blockedOn=f,!1;c.shift()}return!0}function DS(l,c,f){Zp(l)&&f.delete(c)}function qL(){kv=!1,ro!==null&&Zp(ro)&&(ro=null),so!==null&&Zp(so)&&(so=null),ao!==null&&Zp(ao)&&(ao=null),Oh.forEach(DS),Lh.forEach(DS)}function Jp(l,c){l.blockedOn===c&&(l.blockedOn=null,kv||(kv=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,qL)))}var tg=null;function kS(l){tg!==l&&(tg=l,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){tg===l&&(tg=null);for(var c=0;c<l.length;c+=3){var f=l[c],m=l[c+1],_=l[c+2];if(typeof m!="function"){if(Dv(m||f)===null)continue;break}var A=sr(f);A!==null&&(l.splice(c,3),c-=3,Ib(A,{pending:!0,data:_,method:f.method,action:m},m,_))}}))}function Fc(l){function c(W){return Jp(W,l)}ro!==null&&Jp(ro,l),so!==null&&Jp(so,l),ao!==null&&Jp(ao,l),Oh.forEach(c),Lh.forEach(c);for(var f=0;f<oo.length;f++){var m=oo[f];m.blockedOn===l&&(m.blockedOn=null)}for(;0<oo.length&&(f=oo[0],f.blockedOn===null);)IS(f),f.blockedOn===null&&oo.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var _=f[m],A=f[m+1],D=_[Mn]||null;if(typeof A=="function")D||kS(f);else if(D){var j=null;if(A&&A.hasAttribute("formAction")){if(_=A,D=A[Mn]||null)j=D.formAction;else if(Dv(_)!==null)continue}else j=D.action;typeof j=="function"?f[m+1]=j:(f.splice(m,3),m-=3),kS(f)}}}function NS(){function l(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(D){return _=D})},focusReset:"manual",scroll:"manual"})}function c(){_!==null&&(_(),_=null),m||setTimeout(f,20)}function f(){if(!m&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,_=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(f,100),function(){m=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),_!==null&&(_(),_=null)}}}function Nv(l){this._internalRoot=l}eg.prototype.render=Nv.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(r(409));var f=c.current,m=Wi();xS(f,m,l,c,null,null)},eg.prototype.unmount=Nv.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;xS(l.current,2,null,l,null,null),Op(),c[es]=null}};function eg(l){this._internalRoot=l}eg.prototype.unstable_scheduleHydration=function(l){if(l){var c=Of();l={blockedOn:null,target:l,priority:c};for(var f=0;f<oo.length&&c!==0&&c<oo[f].priority;f++);oo.splice(f,0,l),f===0&&IS(l)}};var MS=e.version;if(MS!=="19.2.0")throw Error(r(527,MS,"19.2.0"));Y.findDOMNode=function(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=d(c),l=l!==null?p(l):null,l=l===null?null:l.stateNode,l};var WL={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ng=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ng.isDisabled&&ng.supportsFiber)try{di=ng.inject(WL),ze=ng}catch{}}return Uh.createRoot=function(l,c){if(!s(l))throw Error(r(299));var f=!1,m="",_=Vx,A=jx,D=zx;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError)),c=wS(l,1,!1,null,null,f,m,null,_,A,D,NS),l[es]=c.current,fv(l),new Nv(c)},Uh.hydrateRoot=function(l,c,f){if(!s(l))throw Error(r(299));var m=!1,_="",A=Vx,D=jx,j=zx,W=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(A=f.onUncaughtError),f.onCaughtError!==void 0&&(D=f.onCaughtError),f.onRecoverableError!==void 0&&(j=f.onRecoverableError),f.formState!==void 0&&(W=f.formState)),c=wS(l,1,!0,c,f??null,m,_,W,A,D,j,NS),c.context=AS(null),f=c.current,m=Wi(),m=$o(m),_=qa(m),_.callback=null,Wa(f,_,m),f=m,c.current.lanes=f,zo(c,f),ys(c),l[es]=c.current,fv(l),new eg(c)},Uh.version="19.2.0",Uh}var GS;function n3(){if(GS)return Lv.exports;GS=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Lv.exports=e3(),Lv.exports}var i3=n3();const r3=()=>{};var qS={};const fI=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let s=i.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},s3=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const s=i[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=i[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=i[n++],o=i[n++],u=i[n++],h=((s&7)<<18|(a&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=i[n++],o=i[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},pI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<i.length;s+=3){const a=i[s],o=s+1<i.length,u=o?i[s+1]:0,h=s+2<i.length,d=h?i[s+2]:0,p=a>>2,g=(a&3)<<4|u>>4;let y=(u&15)<<2|d>>6,b=d&63;h||(b=64,o||(y=64)),r.push(n[p],n[g],n[y],n[b])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(fI(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):s3(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<i.length;){const a=n[i.charAt(s++)],u=s<i.length?n[i.charAt(s)]:0;++s;const d=s<i.length?n[i.charAt(s)]:64;++s;const g=s<i.length?n[i.charAt(s)]:64;if(++s,a==null||u==null||d==null||g==null)throw new a3;const y=a<<2|u>>4;if(r.push(y),d!==64){const b=u<<4&240|d>>2;if(r.push(b),g!==64){const w=d<<6&192|g;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class a3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o3=function(i){const e=fI(i);return pI.encodeByteArray(e,!0)},Kg=function(i){return o3(i).replace(/\./g,"")},gI=function(i){try{return pI.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const c3=()=>l3().__FIREBASE_DEFAULTS__,u3=()=>{if(typeof process>"u"||typeof qS>"u")return;const i=qS.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},h3=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&gI(i[1]);return e&&JSON.parse(e)},qm=()=>{try{return r3()||c3()||u3()||h3()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},mI=i=>qm()?.emulatorHosts?.[i],yI=i=>{const e=mI(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},bI=()=>qm()?.config,vI=i=>qm()?.[`_${i}`];class d3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Bo(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ew(i){return(await fetch(i,{credentials:"include"})).ok}function _I(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=i.iat||0,a=i.sub||i.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Kg(JSON.stringify(n)),Kg(JSON.stringify(o)),""].join(".")}const gd={};function f3(){const i={prod:[],emulator:[]};for(const e of Object.keys(gd))gd[e]?i.emulator.push(e):i.prod.push(e);return i}function p3(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let WS=!1;function nw(i,e){if(typeof window>"u"||typeof document>"u"||!Bo(window.location.host)||gd[i]===e||gd[i]||WS)return;gd[i]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",a=f3().prod.length>0;function o(){const y=document.getElementById(r);y&&y.remove()}function u(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function h(y,b){y.setAttribute("width","24"),y.setAttribute("id",b),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{WS=!0,o()},y}function p(y,b){y.setAttribute("id",b),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function g(){const y=p3(r),b=n("text"),w=document.getElementById(b)||document.createElement("span"),x=n("learnmore"),S=document.getElementById(x)||document.createElement("a"),E=n("preprendIcon"),k=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const N=y.element;u(N),p(S,x);const M=d();h(k,E),N.append(k,w,S,M),document.body.appendChild(N)}a?(w.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function ci(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ci())}function m3(){const i=qm()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function y3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function b3(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function v3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _3(){const i=ci();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function w3(){return!m3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A3(){try{return typeof indexedDB=="object"}catch{return!1}}function x3(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const E3="FirebaseError";class zs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=E3,Object.setPrototypeOf(this,zs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sf.prototype.create)}}class sf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?S3(a,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new zs(s,u,r)}}function S3(i,e){return i.replace(T3,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const T3=/\{\$([^}]+)}/g;function C3(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ll(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=i[s],o=e[s];if(XS(a)&&XS(o)){if(!Ll(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function XS(i){return i!==null&&typeof i=="object"}function af(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function R3(i,e){const n=new I3(i,e);return n.subscribe.bind(n)}class I3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");D3(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Vv),s.error===void 0&&(s.error=Vv),s.complete===void 0&&(s.complete=Vv);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function D3(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Vv(){}function cn(i){return i&&i._delegate?i._delegate:i}class Ro{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const bl="[DEFAULT]";let k3=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new d3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(M3(e))try{this.getOrInitializeService({instanceIdentifier:bl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=bl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bl){return this.instances.has(e)}getOptions(e=bl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:N3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bl){return this.component?this.component.multipleInstances?e:bl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function N3(i){return i===bl?void 0:i}function M3(i){return i.instantiationMode==="EAGER"}class P3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new k3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var le;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(le||(le={}));const O3={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},L3=le.INFO,B3={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},F3=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),s=B3[e];if(s)console[s](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class iw{constructor(e){this.name=e,this._logLevel=L3,this._logHandler=F3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?O3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const U3=(i,e)=>e.some(n=>i instanceof n);let YS,KS;function V3(){return YS||(YS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j3(){return KS||(KS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wI=new WeakMap,B0=new WeakMap,AI=new WeakMap,jv=new WeakMap,rw=new WeakMap;function z3(i){const e=new Promise((n,r)=>{const s=()=>{i.removeEventListener("success",a),i.removeEventListener("error",o)},a=()=>{n(_o(i.result)),s()},o=()=>{r(i.error),s()};i.addEventListener("success",a),i.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&wI.set(n,i)}).catch(()=>{}),rw.set(e,i),e}function H3(i){if(B0.has(i))return;const e=new Promise((n,r)=>{const s=()=>{i.removeEventListener("complete",a),i.removeEventListener("error",o),i.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(i.error||new DOMException("AbortError","AbortError")),s()};i.addEventListener("complete",a),i.addEventListener("error",o),i.addEventListener("abort",o)});B0.set(i,e)}let F0={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return B0.get(i);if(e==="objectStoreNames")return i.objectStoreNames||AI.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _o(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function $3(i){F0=i(F0)}function G3(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(zv(this),e,...n);return AI.set(r,e.sort?e.sort():[e]),_o(r)}:j3().includes(i)?function(...e){return i.apply(zv(this),e),_o(wI.get(this))}:function(...e){return _o(i.apply(zv(this),e))}}function q3(i){return typeof i=="function"?G3(i):(i instanceof IDBTransaction&&H3(i),U3(i,V3())?new Proxy(i,F0):i)}function _o(i){if(i instanceof IDBRequest)return z3(i);if(jv.has(i))return jv.get(i);const e=q3(i);return e!==i&&(jv.set(i,e),rw.set(e,i)),e}const zv=i=>rw.get(i);function W3(i,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(i,e),u=_o(o);return r&&o.addEventListener("upgradeneeded",h=>{r(_o(o.result),h.oldVersion,h.newVersion,_o(o.transaction),h)}),n&&o.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const X3=["get","getKey","getAll","getAllKeys","count"],Y3=["put","add","delete","clear"],Hv=new Map;function QS(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Hv.get(e))return Hv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Y3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||X3.includes(n)))return;const a=async function(o,...u){const h=this.transaction(o,s?"readwrite":"readonly");let d=h.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),s&&h.done]))[0]};return Hv.set(e,a),a}$3(i=>({...i,get:(e,n,r)=>QS(e,n)||i.get(e,n,r),has:(e,n)=>!!QS(e,n)||i.has(e,n)}));class K3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Q3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Q3(i){return i.getComponent()?.type==="VERSION"}const U0="@firebase/app",ZS="0.14.6";const Aa=new iw("@firebase/app"),Z3="@firebase/app-compat",J3="@firebase/analytics-compat",t4="@firebase/analytics",e4="@firebase/app-check-compat",n4="@firebase/app-check",i4="@firebase/auth",r4="@firebase/auth-compat",s4="@firebase/database",a4="@firebase/data-connect",o4="@firebase/database-compat",l4="@firebase/functions",c4="@firebase/functions-compat",u4="@firebase/installations",h4="@firebase/installations-compat",d4="@firebase/messaging",f4="@firebase/messaging-compat",p4="@firebase/performance",g4="@firebase/performance-compat",m4="@firebase/remote-config",y4="@firebase/remote-config-compat",b4="@firebase/storage",v4="@firebase/storage-compat",_4="@firebase/firestore",w4="@firebase/ai",A4="@firebase/firestore-compat",x4="firebase",E4="12.6.0";const V0="[DEFAULT]",S4={[U0]:"fire-core",[Z3]:"fire-core-compat",[t4]:"fire-analytics",[J3]:"fire-analytics-compat",[n4]:"fire-app-check",[e4]:"fire-app-check-compat",[i4]:"fire-auth",[r4]:"fire-auth-compat",[s4]:"fire-rtdb",[a4]:"fire-data-connect",[o4]:"fire-rtdb-compat",[l4]:"fire-fn",[c4]:"fire-fn-compat",[u4]:"fire-iid",[h4]:"fire-iid-compat",[d4]:"fire-fcm",[f4]:"fire-fcm-compat",[p4]:"fire-perf",[g4]:"fire-perf-compat",[m4]:"fire-rc",[y4]:"fire-rc-compat",[b4]:"fire-gcs",[v4]:"fire-gcs-compat",[_4]:"fire-fst",[A4]:"fire-fst-compat",[w4]:"fire-vertex","fire-js":"fire-js",[x4]:"fire-js-all"};const Qg=new Map,T4=new Map,j0=new Map;function JS(i,e){try{i.container.addComponent(e)}catch(n){Aa.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Bl(i){const e=i.name;if(j0.has(e))return Aa.debug(`There were multiple attempts to register component ${e}.`),!1;j0.set(e,i);for(const n of Qg.values())JS(n,i);for(const n of T4.values())JS(n,i);return!0}function Wm(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function xr(i){return i==null?!1:i.settings!==void 0}const C4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wo=new sf("app","Firebase",C4);class R4{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ro("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wo.create("app-deleted",{appName:this._name})}}const Wl=E4;function xI(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r={name:V0,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw wo.create("bad-app-name",{appName:String(s)});if(n||(n=bI()),!n)throw wo.create("no-options");const a=Qg.get(s);if(a){if(Ll(n,a.options)&&Ll(r,a.config))return a;throw wo.create("duplicate-app",{appName:s})}const o=new P3(s);for(const h of j0.values())o.addComponent(h);const u=new R4(n,r,o);return Qg.set(s,u),u}function sw(i=V0){const e=Qg.get(i);if(!e&&i===V0&&bI())return xI();if(!e)throw wo.create("no-app",{appName:i});return e}function Ns(i,e,n){let r=S4[i]??i;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Aa.warn(o.join(" "));return}Bl(new Ro(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const I4="firebase-heartbeat-database",D4=1,Id="firebase-heartbeat-store";let $v=null;function EI(){return $v||($v=W3(I4,D4,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Id)}catch(n){console.warn(n)}}}}).catch(i=>{throw wo.create("idb-open",{originalErrorMessage:i.message})})),$v}async function k4(i){try{const n=(await EI()).transaction(Id),r=await n.objectStore(Id).get(SI(i));return await n.done,r}catch(e){if(e instanceof zs)Aa.warn(e.message);else{const n=wo.create("idb-get",{originalErrorMessage:e?.message});Aa.warn(n.message)}}}async function tT(i,e){try{const r=(await EI()).transaction(Id,"readwrite");await r.objectStore(Id).put(e,SI(i)),await r.done}catch(n){if(n instanceof zs)Aa.warn(n.message);else{const r=wo.create("idb-set",{originalErrorMessage:n?.message});Aa.warn(r.message)}}}function SI(i){return`${i.name}!${i.options.appId}`}const N4=1024,M4=30;class P4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new L4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=eT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>M4){const s=B4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Aa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=eT(),{heartbeatsToSend:n,unsentEntries:r}=O4(this._heartbeatsCache.heartbeats),s=Kg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Aa.warn(e),""}}}function eT(){return new Date().toISOString().substring(0,10)}function O4(i,e=N4){const n=[];let r=i.slice();for(const s of i){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),nT(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),nT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class L4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return A3()?x3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await k4(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return tT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return tT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function nT(i){return Kg(JSON.stringify({version:2,heartbeats:i})).length}function B4(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}function F4(i){Bl(new Ro("platform-logger",e=>new K3(e),"PRIVATE")),Bl(new Ro("heartbeat",e=>new P4(e),"PRIVATE")),Ns(U0,ZS,i),Ns(U0,ZS,"esm2020"),Ns("fire-js","")}F4("");var U4="firebase",V4="12.6.0";Ns(U4,V4,"app");function TI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const j4=TI,CI=new sf("auth","Firebase",TI());const Zg=new iw("@firebase/auth");function z4(i,...e){Zg.logLevel<=le.WARN&&Zg.warn(`Auth (${Wl}): ${i}`,...e)}function Ng(i,...e){Zg.logLevel<=le.ERROR&&Zg.error(`Auth (${Wl}): ${i}`,...e)}function Us(i,...e){throw ow(i,...e)}function qr(i,...e){return ow(i,...e)}function aw(i,e,n){const r={...j4(),[e]:n};return new sf("auth","Firebase",r).create(e,{appName:i.name})}function Dl(i){return aw(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function H4(i,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Us(i,"argument-error"),aw(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ow(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return CI.create(i,...e)}function zt(i,e,...n){if(!i)throw ow(e,...n)}function ya(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Ng(e),new Error(e)}function xa(i,e){i||ya(e)}function z0(){return typeof self<"u"&&self.location?.href||""}function $4(){return iT()==="http:"||iT()==="https:"}function iT(){return typeof self<"u"&&self.location?.protocol||null}function G4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($4()||b3()||"connection"in navigator)?navigator.onLine:!0}function q4(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class of{constructor(e,n){this.shortDelay=e,this.longDelay=n,xa(n>e,"Short delay should be less than long delay!"),this.isMobile=g3()||v3()}get(){return G4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lw(i,e){xa(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class RI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ya("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ya("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ya("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const W4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const X4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Y4=new of(3e4,6e4);function cw(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Ru(i,e,n,r,s={}){return II(i,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const u=af({key:i.config.apiKey,...o}).slice(1),h=await i._getAdditionalHeaders();h["Content-Type"]="application/json",i.languageCode&&(h["X-Firebase-Locale"]=i.languageCode);const d={method:e,headers:h,...a};return y3()||(d.referrerPolicy="no-referrer"),i.emulatorConfig&&Bo(i.emulatorConfig.host)&&(d.credentials="include"),RI.fetch()(await DI(i,i.config.apiHost,n,u),d)})}async function II(i,e,n){i._canInitEmulator=!1;const r={...W4,...e};try{const s=new Q4(i),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw ig(i,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const u=a.ok?o.errorMessage:o.error.message,[h,d]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw ig(i,"credential-already-in-use",o);if(h==="EMAIL_EXISTS")throw ig(i,"email-already-in-use",o);if(h==="USER_DISABLED")throw ig(i,"user-disabled",o);const p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw aw(i,p,d);Us(i,p)}}catch(s){if(s instanceof zs)throw s;Us(i,"network-request-failed",{message:String(s)})}}async function K4(i,e,n,r,s={}){const a=await Ru(i,e,n,r,s);return"mfaPendingCredential"in a&&Us(i,"multi-factor-auth-required",{_serverResponse:a}),a}async function DI(i,e,n,r){const s=`${e}${n}?${r}`,a=i,o=a.config.emulator?lw(i.config,s):`${i.config.apiScheme}://${s}`;return X4.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}class Q4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qr(this.auth,"network-request-failed")),Y4.get())})}}function ig(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=qr(i,e,r);return s.customData._tokenResponse=n,s}async function Z4(i,e){return Ru(i,"POST","/v1/accounts:delete",e)}async function Jg(i,e){return Ru(i,"POST","/v1/accounts:lookup",e)}function md(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function J4(i,e=!1){const n=cn(i),r=await n.getIdToken(e),s=uw(r);zt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a?.sign_in_provider;return{claims:s,token:r,authTime:md(Gv(s.auth_time)),issuedAtTime:md(Gv(s.iat)),expirationTime:md(Gv(s.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Gv(i){return Number(i)*1e3}function uw(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return Ng("JWT malformed, contained fewer than 3 sections"),null;try{const s=gI(n);return s?JSON.parse(s):(Ng("Failed to decode base64 JWT payload"),null)}catch(s){return Ng("Caught error parsing JWT payload as JSON",s?.toString()),null}}function rT(i){const e=uw(i);return zt(e,"internal-error"),zt(typeof e.exp<"u","internal-error"),zt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Dd(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zs&&t6(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function t6({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class e6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class H0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=md(this.lastLoginAt),this.creationTime=md(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function tm(i){const e=i.auth,n=await i.getIdToken(),r=await Dd(i,Jg(e,{idToken:n}));zt(r?.users.length,e,"internal-error");const s=r.users[0];i._notifyReloadListener(s);const a=s.providerUserInfo?.length?kI(s.providerUserInfo):[],o=i6(i.providerData,a),u=i.isAnonymous,h=!(i.email&&s.passwordHash)&&!o?.length,d=u?h:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new H0(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(i,p)}async function n6(i){const e=cn(i);await tm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function i6(i,e){return[...i.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function kI(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function r6(i,e){const n=await II(i,{},async()=>{const r=af({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=i.config,o=await DI(i,s,"/v1/token",`key=${a}`),u=await i._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return i.emulatorConfig&&Bo(i.emulatorConfig.host)&&(h.credentials="include"),RI.fetch()(o,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function s6(i,e){return Ru(i,"POST","/v2/accounts:revokeToken",cw(i,e))}class Qc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){zt(e.idToken,"internal-error"),zt(typeof e.idToken<"u","internal-error"),zt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){zt(e.length!==0,"internal-error");const n=rT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(zt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await r6(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new Qc;return r&&(zt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(zt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(zt(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qc,this.toJSON())}_performRefresh(){return ya("not implemented")}}function co(i,e){zt(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Hr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new e6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new H0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Dd(this,this.stsTokenManager.getToken(this.auth,e));return zt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return J4(this,e)}reload(){return n6(this)}_assign(e){this!==e&&(zt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){zt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await tm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xr(this.auth.app))return Promise.reject(Dl(this.auth));const e=await this.getIdToken();return await Dd(this,Z4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,d=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:g,emailVerified:y,isAnonymous:b,providerData:w,stsTokenManager:x}=n;zt(g&&x,e,"internal-error");const S=Qc.fromJSON(this.name,x);zt(typeof g=="string",e,"internal-error"),co(r,e.name),co(s,e.name),zt(typeof y=="boolean",e,"internal-error"),zt(typeof b=="boolean",e,"internal-error"),co(a,e.name),co(o,e.name),co(u,e.name),co(h,e.name),co(d,e.name),co(p,e.name);const E=new Hr({uid:g,auth:e,email:s,emailVerified:y,displayName:r,isAnonymous:b,photoURL:o,phoneNumber:a,tenantId:u,stsTokenManager:S,createdAt:d,lastLoginAt:p});return w&&Array.isArray(w)&&(E.providerData=w.map(k=>({...k}))),h&&(E._redirectEventId=h),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Qc;s.updateFromServerResponse(n);const a=new Hr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await tm(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];zt(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?kI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!a?.length,u=new Qc;u.updateFromIdToken(r);const h=new Hr({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new H0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(h,d),h}}const sT=new Map;function ba(i){xa(i instanceof Function,"Expected a class definition");let e=sT.get(i);return e?(xa(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,sT.set(i,e),e)}class NI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NI.type="NONE";const aT=NI;function Mg(i,e,n){return`firebase:${i}:${e}:${n}`}class Zc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Mg(this.userKey,s.apiKey,a),this.fullPersistenceKey=Mg("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Jg(this.auth,{idToken:e}).catch(()=>{});return n?Hr._fromGetAccountInfoResponse(this.auth,n,e):null}return Hr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Zc(ba(aT),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=s[0]||ba(aT);const o=Mg(r,e.config.apiKey,e.name);let u=null;for(const d of n)try{const p=await d._get(o);if(p){let g;if(typeof p=="string"){const y=await Jg(e,{idToken:p}).catch(()=>{});if(!y)break;g=await Hr._fromGetAccountInfoResponse(e,y,p)}else g=Hr._fromJSON(e,p);d!==a&&(u=g),a=d;break}}catch{}const h=s.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new Zc(a,e,r):(a=h[0],u&&await a._set(o,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Zc(a,e,r))}}function oT(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FI(e))return"Blackberry";if(UI(e))return"Webos";if(PI(e))return"Safari";if((e.includes("chrome/")||OI(e))&&!e.includes("edge/"))return"Chrome";if(BI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if(r?.length===2)return r[1]}return"Other"}function MI(i=ci()){return/firefox\//i.test(i)}function PI(i=ci()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OI(i=ci()){return/crios\//i.test(i)}function LI(i=ci()){return/iemobile/i.test(i)}function BI(i=ci()){return/android/i.test(i)}function FI(i=ci()){return/blackberry/i.test(i)}function UI(i=ci()){return/webos/i.test(i)}function hw(i=ci()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function a6(i=ci()){return hw(i)&&!!window.navigator?.standalone}function o6(){return _3()&&document.documentMode===10}function VI(i=ci()){return hw(i)||BI(i)||UI(i)||FI(i)||/windows phone/i.test(i)||LI(i)}function jI(i,e=[]){let n;switch(i){case"Browser":n=oT(ci());break;case"Worker":n=`${oT(ci())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wl}/${r}`}class l6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,u)=>{try{const h=e(a);o(h)}catch(h){u(h)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function c6(i,e={}){return Ru(i,"GET","/v2/passwordPolicy",cw(i,e))}const u6=6;class h6{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??u6,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class d6{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lT(this),this.idTokenSubscription=new lT(this),this.beforeStateQueue=new l6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ba(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Zc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Jg(this,{idToken:e}),r=await Hr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(xr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===o)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return zt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tm(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=q4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xr(this.app))return Promise.reject(Dl(this));const n=e?cn(e):null;return n&&zt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&zt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xr(this.app)?Promise.reject(Dl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xr(this.app)?Promise.reject(Dl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ba(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await c6(this),n=new h6(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await s6(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ba(e)||this._popupRedirectResolver;zt(n,this,"argument-error"),this.redirectPersistenceManager=await Zc.create(this,[ba(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(zt(u,this,"internal-error"),u.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,s);return()=>{o=!0,h()}}else{const h=e.addObserver(n);return()=>{o=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return zt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(xr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&z4(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Xm(i){return cn(i)}class lT{constructor(e){this.auth=e,this.observer=null,this.addObserver=R3(n=>this.observer=n)}get next(){return zt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let dw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function f6(i){dw=i}function p6(i){return dw.loadJS(i)}function g6(){return dw.gapiScript}function m6(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function y6(i,e){const n=Wm(i,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Ll(a,e??{}))return s;Us(s,"already-initialized")}return n.initialize({options:e})}function b6(i,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ba);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function v6(i,e,n){const r=Xm(i);zt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=zI(e),{host:o,port:u}=_6(e),h=u===null?"":`:${u}`,d={url:`${a}//${o}${h}/`},p=Object.freeze({host:o,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){zt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),zt(Ll(d,r.config.emulator)&&Ll(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Bo(o)?(ew(`${a}//${o}${h}`),nw("Auth",!0)):w6()}function zI(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function _6(i){const e=zI(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:cT(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:cT(o)}}}function cT(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function w6(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class HI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ya("not implemented")}_getIdTokenResponse(e){return ya("not implemented")}_linkToIdToken(e,n){return ya("not implemented")}_getReauthenticationResolver(e){return ya("not implemented")}}async function Jc(i,e){return K4(i,"POST","/v1/accounts:signInWithIdp",cw(i,e))}const A6="http://localhost";class Fl extends HI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Us("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=n;if(!r||!s)return null;const o=new Fl(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Jc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Jc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Jc(e,n)}buildRequest(){const e={requestUri:A6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=af(n)}return e}}class fw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class lf extends fw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class po extends lf{constructor(){super("facebook.com")}static credential(e){return Fl._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return po.credentialFromTaggedObject(e)}static credentialFromError(e){return po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return po.credential(e.oauthAccessToken)}catch{return null}}}po.FACEBOOK_SIGN_IN_METHOD="facebook.com";po.PROVIDER_ID="facebook.com";class ma extends lf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fl._fromParams({providerId:ma.PROVIDER_ID,signInMethod:ma.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ma.credentialFromTaggedObject(e)}static credentialFromError(e){return ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ma.credential(n,r)}catch{return null}}}ma.GOOGLE_SIGN_IN_METHOD="google.com";ma.PROVIDER_ID="google.com";class go extends lf{constructor(){super("github.com")}static credential(e){return Fl._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return go.credentialFromTaggedObject(e)}static credentialFromError(e){return go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return go.credential(e.oauthAccessToken)}catch{return null}}}go.GITHUB_SIGN_IN_METHOD="github.com";go.PROVIDER_ID="github.com";class mo extends lf{constructor(){super("twitter.com")}static credential(e,n){return Fl._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return mo.credential(n,r)}catch{return null}}}mo.TWITTER_SIGN_IN_METHOD="twitter.com";mo.PROVIDER_ID="twitter.com";class uu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Hr._fromIdTokenResponse(e,r,s),o=uT(r);return new uu({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=uT(r);return new uu({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function uT(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class em extends zs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,em.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new em(e,n,r,s)}}function $I(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?em._fromErrorAndOperation(i,a,e,r):a})}async function x6(i,e,n=!1){const r=await Dd(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return uu._forOperation(i,"link",r)}async function E6(i,e,n=!1){const{auth:r}=i;if(xr(r.app))return Promise.reject(Dl(r));const s="reauthenticate";try{const a=await Dd(i,$I(r,s,e,i),n);zt(a.idToken,r,"internal-error");const o=uw(a.idToken);zt(o,r,"internal-error");const{sub:u}=o;return zt(i.uid===u,r,"user-mismatch"),uu._forOperation(i,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&Us(r,"user-mismatch"),a}}async function S6(i,e,n=!1){if(xr(i.app))return Promise.reject(Dl(i));const r="signIn",s=await $I(i,r,e),a=await uu._fromIdTokenResponse(i,r,s);return n||await i._updateCurrentUser(a.user),a}function T6(i,e,n,r){return cn(i).onIdTokenChanged(e,n,r)}function C6(i,e,n){return cn(i).beforeAuthStateChanged(e,n)}function R6(i,e,n,r){return cn(i).onAuthStateChanged(e,n,r)}function I6(i){return cn(i).signOut()}const nm="__sak";class GI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(nm,"1"),this.storage.removeItem(nm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const D6=1e3,k6=10;class qI extends GI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,h)=>{this.notifyListeners(o,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);o6()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,k6):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},D6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}qI.type="LOCAL";const N6=qI;class WI extends GI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}WI.type="SESSION";const XI=WI;function M6(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Ym{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ym(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async d=>d(n.origin,a)),h=await M6(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ym.receivers=[];function pw(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}class P6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((u,h)=>{const d=pw("",20);s.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const y=g;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(y.data.response);break;default:clearTimeout(p),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Ms(){return window}function O6(i){Ms().location.href=i}function YI(){return typeof Ms().WorkerGlobalScope<"u"&&typeof Ms().importScripts=="function"}async function L6(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function B6(){return navigator?.serviceWorker?.controller||null}function F6(){return YI()?self:null}const KI="firebaseLocalStorageDb",U6=1,im="firebaseLocalStorage",QI="fbase_key";class cf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Km(i,e){return i.transaction([im],e?"readwrite":"readonly").objectStore(im)}function V6(){const i=indexedDB.deleteDatabase(KI);return new cf(i).toPromise()}function $0(){const i=indexedDB.open(KI,U6);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(im,{keyPath:QI})}catch(s){n(s)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(im)?e(r):(r.close(),await V6(),e(await $0()))})})}async function hT(i,e,n){const r=Km(i,!0).put({[QI]:e,value:n});return new cf(r).toPromise()}async function j6(i,e){const n=Km(i,!1).get(e),r=await new cf(n).toPromise();return r===void 0?null:r.value}function dT(i,e){const n=Km(i,!0).delete(e);return new cf(n).toPromise()}const z6=800,H6=3;class ZI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>H6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return YI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ym._getInstance(F6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await L6(),!this.activeServiceWorker)return;this.sender=new P6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||B6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $0();return await hT(e,nm,"1"),await dT(e,nm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>hT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>j6(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>dT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Km(s,!1).getAll();return new cf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZI.type="LOCAL";const $6=ZI;new of(3e4,6e4);function JI(i,e){return e?ba(e):(zt(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class gw extends HI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Jc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Jc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function G6(i){return S6(i.auth,new gw(i),i.bypassAuthState)}function q6(i){const{auth:e,user:n}=i;return zt(n,e,"internal-error"),E6(n,new gw(i),i.bypassAuthState)}async function W6(i){const{auth:e,user:n}=i;return zt(n,e,"internal-error"),x6(n,new gw(i),i.bypassAuthState)}class tD{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:u}=e;if(o){this.reject(o);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return G6;case"linkViaPopup":case"linkViaRedirect":return W6;case"reauthViaPopup":case"reauthViaRedirect":return q6;default:Us(this.auth,"internal-error")}}resolve(e){xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const X6=new of(2e3,1e4);async function Y6(i,e,n){if(xr(i.app))return Promise.reject(qr(i,"operation-not-supported-in-this-environment"));const r=Xm(i);H4(i,e,fw);const s=JI(r,n);return new xl(r,"signInViaPopup",e,s).executeNotNull()}class xl extends tD{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,xl.currentPopupAction&&xl.currentPopupAction.cancel(),xl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return zt(e,this.auth,"internal-error"),e}async onExecution(){xa(this.filter.length===1,"Popup operations only handle one event");const e=pw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,X6.get())};e()}}xl.currentPopupAction=null;const K6="pendingRedirect",Pg=new Map;class Q6 extends tD{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Pg.get(this.auth._key());if(!e){try{const r=await Z6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Pg.set(this.auth._key(),e)}return this.bypassAuthState||Pg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z6(i,e){const n=e5(e),r=t5(i);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function J6(i,e){Pg.set(i._key(),e)}function t5(i){return ba(i._redirectPersistence)}function e5(i){return Mg(K6,i.config.apiKey,i.name)}async function n5(i,e,n=!1){if(xr(i.app))return Promise.reject(Dl(i));const r=Xm(i),s=JI(r,e),o=await new Q6(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const i5=600*1e3;class r5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!s5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!eD(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(qr(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=i5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fT(e))}saveEventToCache(e){this.cachedEventUids.add(fT(e)),this.lastProcessedEventTime=Date.now()}}function fT(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function eD({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function s5(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eD(i);default:return!1}}async function a5(i,e={}){return Ru(i,"GET","/v1/projects",e)}const o5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l5=/^https?/;async function c5(i){if(i.config.emulator)return;const{authorizedDomains:e}=await a5(i);for(const n of e)try{if(u5(n))return}catch{}Us(i,"unauthorized-domain")}function u5(i){const e=z0(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const o=new URL(i);return o.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!l5.test(n))return!1;if(o5.test(i))return r===i;const s=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const h5=new of(3e4,6e4);function pT(){const i=Ms().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function d5(i){return new Promise((e,n)=>{function r(){pT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pT(),n(qr(i,"network-request-failed"))},timeout:h5.get()})}if(Ms().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ms().gapi?.load)r();else{const s=m6("iframefcb");return Ms()[s]=()=>{gapi.load?r():n(qr(i,"network-request-failed"))},p6(`${g6()}?onload=${s}`).catch(a=>n(a))}}).catch(e=>{throw Og=null,e})}let Og=null;function f5(i){return Og=Og||d5(i),Og}const p5=new of(5e3,15e3),g5="__/auth/iframe",m5="emulator/auth/iframe",y5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},b5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v5(i){const e=i.config;zt(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?lw(e,m5):`https://${i.config.authDomain}/${g5}`,r={apiKey:e.apiKey,appName:i.name,v:Wl},s=b5.get(i.config.apiHost);s&&(r.eid=s);const a=i._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${af(r).slice(1)}`}async function _5(i){const e=await f5(i),n=Ms().gapi;return zt(n,i,"internal-error"),e.open({where:document.body,url:v5(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:y5,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=qr(i,"network-request-failed"),u=Ms().setTimeout(()=>{a(o)},p5.get());function h(){Ms().clearTimeout(u),s(r)}r.ping(h).then(h,()=>{a(o)})}))}const w5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},A5=500,x5=600,E5="_blank",S5="http://localhost";class gT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function T5(i,e,n,r=A5,s=x5){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h={...w5,width:r.toString(),height:s.toString(),top:a,left:o},d=ci().toLowerCase();n&&(u=OI(d)?E5:n),MI(d)&&(e=e||S5,h.scrollbars="yes");const p=Object.entries(h).reduce((y,[b,w])=>`${y}${b}=${w},`,"");if(a6(d)&&u!=="_self")return C5(e||"",u),new gT(null);const g=window.open(e||"",u,p);zt(g,i,"popup-blocked");try{g.focus()}catch{}return new gT(g)}function C5(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const R5="__/auth/handler",I5="emulator/auth/handler",D5=encodeURIComponent("fac");async function mT(i,e,n,r,s,a){zt(i.config.authDomain,i,"auth-domain-config-required"),zt(i.config.apiKey,i,"invalid-api-key");const o={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:Wl,eventId:s};if(e instanceof fw){e.setDefaultLanguage(i.languageCode),o.providerId=e.providerId||"",C3(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))o[p]=g}if(e instanceof lf){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(o.scopes=p.join(","))}i.tenantId&&(o.tid=i.tenantId);const u=o;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const h=await i._getAppCheckToken(),d=h?`#${D5}=${encodeURIComponent(h)}`:"";return`${k5(i)}?${af(u).slice(1)}${d}`}function k5({config:i}){return i.emulator?lw(i,I5):`https://${i.authDomain}/${R5}`}const qv="webStorageSupport";class N5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=XI,this._completeRedirectFn=n5,this._overrideRedirectResult=J6}async _openPopup(e,n,r,s){xa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await mT(e,n,r,z0(),s);return T5(e,a,pw())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await mT(e,n,r,z0(),s);return O6(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(xa(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _5(e),r=new r5(e);return n.register("authEvent",s=>(zt(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qv,{type:qv},s=>{const a=s?.[0]?.[qv];a!==void 0&&n(!!a),Us(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=c5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VI()||PI()||hw()}}const M5=N5;var yT="@firebase/auth",bT="1.11.1";class P5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){zt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function O5(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L5(i){Bl(new Ro("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;zt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:o,authDomain:u,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jI(i)},d=new d6(r,s,a,h);return b6(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Bl(new Ro("auth-internal",e=>{const n=Xm(e.getProvider("auth").getImmediate());return(r=>new P5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ns(yT,bT,O5(i)),Ns(yT,bT,"esm2020")}const B5=300,F5=vI("authIdTokenMaxAge")||B5;let vT=null;const U5=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>F5)return;const s=n?.token;vT!==s&&(vT=s,await fetch(i,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function V5(i=sw()){const e=Wm(i,"auth");if(e.isInitialized())return e.getImmediate();const n=y6(i,{popupRedirectResolver:M5,persistence:[$6,N6,XI]}),r=vI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=U5(a.toString());C6(n,o,()=>o(n.currentUser)),T6(n,u=>o(u))}}const s=mI("auth");return s&&v6(n,`http://${s}`),n}function j5(){return document.getElementsByTagName("head")?.[0]??document}f6({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=s=>{const a=qr("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",j5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L5("Browser");var _T=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ao,nD;(function(){var i;function e(C,R){function L(){}L.prototype=R.prototype,C.F=R.prototype,C.prototype=new L,C.prototype.constructor=C,C.D=function(F,U,$){for(var V=Array(arguments.length-2),G=2;G<arguments.length;G++)V[G-2]=arguments[G];return R.prototype[U].apply(F,V)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,R,L){L||(L=0);const F=Array(16);if(typeof R=="string")for(var U=0;U<16;++U)F[U]=R.charCodeAt(L++)|R.charCodeAt(L++)<<8|R.charCodeAt(L++)<<16|R.charCodeAt(L++)<<24;else for(U=0;U<16;++U)F[U]=R[L++]|R[L++]<<8|R[L++]<<16|R[L++]<<24;R=C.g[0],L=C.g[1],U=C.g[2];let $=C.g[3],V;V=R+($^L&(U^$))+F[0]+3614090360&4294967295,R=L+(V<<7&4294967295|V>>>25),V=$+(U^R&(L^U))+F[1]+3905402710&4294967295,$=R+(V<<12&4294967295|V>>>20),V=U+(L^$&(R^L))+F[2]+606105819&4294967295,U=$+(V<<17&4294967295|V>>>15),V=L+(R^U&($^R))+F[3]+3250441966&4294967295,L=U+(V<<22&4294967295|V>>>10),V=R+($^L&(U^$))+F[4]+4118548399&4294967295,R=L+(V<<7&4294967295|V>>>25),V=$+(U^R&(L^U))+F[5]+1200080426&4294967295,$=R+(V<<12&4294967295|V>>>20),V=U+(L^$&(R^L))+F[6]+2821735955&4294967295,U=$+(V<<17&4294967295|V>>>15),V=L+(R^U&($^R))+F[7]+4249261313&4294967295,L=U+(V<<22&4294967295|V>>>10),V=R+($^L&(U^$))+F[8]+1770035416&4294967295,R=L+(V<<7&4294967295|V>>>25),V=$+(U^R&(L^U))+F[9]+2336552879&4294967295,$=R+(V<<12&4294967295|V>>>20),V=U+(L^$&(R^L))+F[10]+4294925233&4294967295,U=$+(V<<17&4294967295|V>>>15),V=L+(R^U&($^R))+F[11]+2304563134&4294967295,L=U+(V<<22&4294967295|V>>>10),V=R+($^L&(U^$))+F[12]+1804603682&4294967295,R=L+(V<<7&4294967295|V>>>25),V=$+(U^R&(L^U))+F[13]+4254626195&4294967295,$=R+(V<<12&4294967295|V>>>20),V=U+(L^$&(R^L))+F[14]+2792965006&4294967295,U=$+(V<<17&4294967295|V>>>15),V=L+(R^U&($^R))+F[15]+1236535329&4294967295,L=U+(V<<22&4294967295|V>>>10),V=R+(U^$&(L^U))+F[1]+4129170786&4294967295,R=L+(V<<5&4294967295|V>>>27),V=$+(L^U&(R^L))+F[6]+3225465664&4294967295,$=R+(V<<9&4294967295|V>>>23),V=U+(R^L&($^R))+F[11]+643717713&4294967295,U=$+(V<<14&4294967295|V>>>18),V=L+($^R&(U^$))+F[0]+3921069994&4294967295,L=U+(V<<20&4294967295|V>>>12),V=R+(U^$&(L^U))+F[5]+3593408605&4294967295,R=L+(V<<5&4294967295|V>>>27),V=$+(L^U&(R^L))+F[10]+38016083&4294967295,$=R+(V<<9&4294967295|V>>>23),V=U+(R^L&($^R))+F[15]+3634488961&4294967295,U=$+(V<<14&4294967295|V>>>18),V=L+($^R&(U^$))+F[4]+3889429448&4294967295,L=U+(V<<20&4294967295|V>>>12),V=R+(U^$&(L^U))+F[9]+568446438&4294967295,R=L+(V<<5&4294967295|V>>>27),V=$+(L^U&(R^L))+F[14]+3275163606&4294967295,$=R+(V<<9&4294967295|V>>>23),V=U+(R^L&($^R))+F[3]+4107603335&4294967295,U=$+(V<<14&4294967295|V>>>18),V=L+($^R&(U^$))+F[8]+1163531501&4294967295,L=U+(V<<20&4294967295|V>>>12),V=R+(U^$&(L^U))+F[13]+2850285829&4294967295,R=L+(V<<5&4294967295|V>>>27),V=$+(L^U&(R^L))+F[2]+4243563512&4294967295,$=R+(V<<9&4294967295|V>>>23),V=U+(R^L&($^R))+F[7]+1735328473&4294967295,U=$+(V<<14&4294967295|V>>>18),V=L+($^R&(U^$))+F[12]+2368359562&4294967295,L=U+(V<<20&4294967295|V>>>12),V=R+(L^U^$)+F[5]+4294588738&4294967295,R=L+(V<<4&4294967295|V>>>28),V=$+(R^L^U)+F[8]+2272392833&4294967295,$=R+(V<<11&4294967295|V>>>21),V=U+($^R^L)+F[11]+1839030562&4294967295,U=$+(V<<16&4294967295|V>>>16),V=L+(U^$^R)+F[14]+4259657740&4294967295,L=U+(V<<23&4294967295|V>>>9),V=R+(L^U^$)+F[1]+2763975236&4294967295,R=L+(V<<4&4294967295|V>>>28),V=$+(R^L^U)+F[4]+1272893353&4294967295,$=R+(V<<11&4294967295|V>>>21),V=U+($^R^L)+F[7]+4139469664&4294967295,U=$+(V<<16&4294967295|V>>>16),V=L+(U^$^R)+F[10]+3200236656&4294967295,L=U+(V<<23&4294967295|V>>>9),V=R+(L^U^$)+F[13]+681279174&4294967295,R=L+(V<<4&4294967295|V>>>28),V=$+(R^L^U)+F[0]+3936430074&4294967295,$=R+(V<<11&4294967295|V>>>21),V=U+($^R^L)+F[3]+3572445317&4294967295,U=$+(V<<16&4294967295|V>>>16),V=L+(U^$^R)+F[6]+76029189&4294967295,L=U+(V<<23&4294967295|V>>>9),V=R+(L^U^$)+F[9]+3654602809&4294967295,R=L+(V<<4&4294967295|V>>>28),V=$+(R^L^U)+F[12]+3873151461&4294967295,$=R+(V<<11&4294967295|V>>>21),V=U+($^R^L)+F[15]+530742520&4294967295,U=$+(V<<16&4294967295|V>>>16),V=L+(U^$^R)+F[2]+3299628645&4294967295,L=U+(V<<23&4294967295|V>>>9),V=R+(U^(L|~$))+F[0]+4096336452&4294967295,R=L+(V<<6&4294967295|V>>>26),V=$+(L^(R|~U))+F[7]+1126891415&4294967295,$=R+(V<<10&4294967295|V>>>22),V=U+(R^($|~L))+F[14]+2878612391&4294967295,U=$+(V<<15&4294967295|V>>>17),V=L+($^(U|~R))+F[5]+4237533241&4294967295,L=U+(V<<21&4294967295|V>>>11),V=R+(U^(L|~$))+F[12]+1700485571&4294967295,R=L+(V<<6&4294967295|V>>>26),V=$+(L^(R|~U))+F[3]+2399980690&4294967295,$=R+(V<<10&4294967295|V>>>22),V=U+(R^($|~L))+F[10]+4293915773&4294967295,U=$+(V<<15&4294967295|V>>>17),V=L+($^(U|~R))+F[1]+2240044497&4294967295,L=U+(V<<21&4294967295|V>>>11),V=R+(U^(L|~$))+F[8]+1873313359&4294967295,R=L+(V<<6&4294967295|V>>>26),V=$+(L^(R|~U))+F[15]+4264355552&4294967295,$=R+(V<<10&4294967295|V>>>22),V=U+(R^($|~L))+F[6]+2734768916&4294967295,U=$+(V<<15&4294967295|V>>>17),V=L+($^(U|~R))+F[13]+1309151649&4294967295,L=U+(V<<21&4294967295|V>>>11),V=R+(U^(L|~$))+F[4]+4149444226&4294967295,R=L+(V<<6&4294967295|V>>>26),V=$+(L^(R|~U))+F[11]+3174756917&4294967295,$=R+(V<<10&4294967295|V>>>22),V=U+(R^($|~L))+F[2]+718787259&4294967295,U=$+(V<<15&4294967295|V>>>17),V=L+($^(U|~R))+F[9]+3951481745&4294967295,C.g[0]=C.g[0]+R&4294967295,C.g[1]=C.g[1]+(U+(V<<21&4294967295|V>>>11))&4294967295,C.g[2]=C.g[2]+U&4294967295,C.g[3]=C.g[3]+$&4294967295}r.prototype.v=function(C,R){R===void 0&&(R=C.length);const L=R-this.blockSize,F=this.C;let U=this.h,$=0;for(;$<R;){if(U==0)for(;$<=L;)s(this,C,$),$+=this.blockSize;if(typeof C=="string"){for(;$<R;)if(F[U++]=C.charCodeAt($++),U==this.blockSize){s(this,F),U=0;break}}else for(;$<R;)if(F[U++]=C[$++],U==this.blockSize){s(this,F),U=0;break}}this.h=U,this.o+=R},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var R=1;R<C.length-8;++R)C[R]=0;R=this.o*8;for(var L=C.length-8;L<C.length;++L)C[L]=R&255,R/=256;for(this.v(C),C=Array(16),R=0,L=0;L<4;++L)for(let F=0;F<32;F+=8)C[R++]=this.g[L]>>>F&255;return C};function a(C,R){var L=u;return Object.prototype.hasOwnProperty.call(L,C)?L[C]:L[C]=R(C)}function o(C,R){this.h=R;const L=[];let F=!0;for(let U=C.length-1;U>=0;U--){const $=C[U]|0;F&&$==R||(L[U]=$,F=!1)}this.g=L}var u={};function h(C){return-128<=C&&C<128?a(C,function(R){return new o([R|0],R<0?-1:0)}):new o([C|0],C<0?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return g;if(C<0)return S(d(-C));const R=[];let L=1;for(let F=0;C>=L;F++)R[F]=C/L|0,L*=4294967296;return new o(R,0)}function p(C,R){if(C.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(C.charAt(0)=="-")return S(p(C.substring(1),R));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=d(Math.pow(R,8));let F=g;for(let $=0;$<C.length;$+=8){var U=Math.min(8,C.length-$);const V=parseInt(C.substring($,$+U),R);U<8?(U=d(Math.pow(R,U)),F=F.j(U).add(d(V))):(F=F.j(L),F=F.add(d(V)))}return F}var g=h(0),y=h(1),b=h(16777216);i=o.prototype,i.m=function(){if(x(this))return-S(this).m();let C=0,R=1;for(let L=0;L<this.g.length;L++){const F=this.i(L);C+=(F>=0?F:4294967296+F)*R,R*=4294967296}return C},i.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(w(this))return"0";if(x(this))return"-"+S(this).toString(C);const R=d(Math.pow(C,6));var L=this;let F="";for(;;){const U=M(L,R).g;L=E(L,U.j(R));let $=((L.g.length>0?L.g[0]:L.h)>>>0).toString(C);if(L=U,w(L))return $+F;for(;$.length<6;)$="0"+$;F=$+F}},i.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function w(C){if(C.h!=0)return!1;for(let R=0;R<C.g.length;R++)if(C.g[R]!=0)return!1;return!0}function x(C){return C.h==-1}i.l=function(C){return C=E(this,C),x(C)?-1:w(C)?0:1};function S(C){const R=C.g.length,L=[];for(let F=0;F<R;F++)L[F]=~C.g[F];return new o(L,~C.h).add(y)}i.abs=function(){return x(this)?S(this):this},i.add=function(C){const R=Math.max(this.g.length,C.g.length),L=[];let F=0;for(let U=0;U<=R;U++){let $=F+(this.i(U)&65535)+(C.i(U)&65535),V=($>>>16)+(this.i(U)>>>16)+(C.i(U)>>>16);F=V>>>16,$&=65535,V&=65535,L[U]=V<<16|$}return new o(L,L[L.length-1]&-2147483648?-1:0)};function E(C,R){return C.add(S(R))}i.j=function(C){if(w(this)||w(C))return g;if(x(this))return x(C)?S(this).j(S(C)):S(S(this).j(C));if(x(C))return S(this.j(S(C)));if(this.l(b)<0&&C.l(b)<0)return d(this.m()*C.m());const R=this.g.length+C.g.length,L=[];for(var F=0;F<2*R;F++)L[F]=0;for(F=0;F<this.g.length;F++)for(let U=0;U<C.g.length;U++){const $=this.i(F)>>>16,V=this.i(F)&65535,G=C.i(U)>>>16,et=C.i(U)&65535;L[2*F+2*U]+=V*et,k(L,2*F+2*U),L[2*F+2*U+1]+=$*et,k(L,2*F+2*U+1),L[2*F+2*U+1]+=V*G,k(L,2*F+2*U+1),L[2*F+2*U+2]+=$*G,k(L,2*F+2*U+2)}for(C=0;C<R;C++)L[C]=L[2*C+1]<<16|L[2*C];for(C=R;C<2*R;C++)L[C]=0;return new o(L,0)};function k(C,R){for(;(C[R]&65535)!=C[R];)C[R+1]+=C[R]>>>16,C[R]&=65535,R++}function N(C,R){this.g=C,this.h=R}function M(C,R){if(w(R))throw Error("division by zero");if(w(C))return new N(g,g);if(x(C))return R=M(S(C),R),new N(S(R.g),S(R.h));if(x(R))return R=M(C,S(R)),new N(S(R.g),R.h);if(C.g.length>30){if(x(C)||x(R))throw Error("slowDivide_ only works with positive integers.");for(var L=y,F=R;F.l(C)<=0;)L=O(L),F=O(F);var U=B(L,1),$=B(F,1);for(F=B(F,2),L=B(L,2);!w(F);){var V=$.add(F);V.l(C)<=0&&(U=U.add(L),$=V),F=B(F,1),L=B(L,1)}return R=E(C,U.j(R)),new N(U,R)}for(U=g;C.l(R)>=0;){for(L=Math.max(1,Math.floor(C.m()/R.m())),F=Math.ceil(Math.log(L)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),$=d(L),V=$.j(R);x(V)||V.l(C)>0;)L-=F,$=d(L),V=$.j(R);w($)&&($=y),U=U.add($),C=E(C,V)}return new N(U,C)}i.B=function(C){return M(this,C).h},i.and=function(C){const R=Math.max(this.g.length,C.g.length),L=[];for(let F=0;F<R;F++)L[F]=this.i(F)&C.i(F);return new o(L,this.h&C.h)},i.or=function(C){const R=Math.max(this.g.length,C.g.length),L=[];for(let F=0;F<R;F++)L[F]=this.i(F)|C.i(F);return new o(L,this.h|C.h)},i.xor=function(C){const R=Math.max(this.g.length,C.g.length),L=[];for(let F=0;F<R;F++)L[F]=this.i(F)^C.i(F);return new o(L,this.h^C.h)};function O(C){const R=C.g.length+1,L=[];for(let F=0;F<R;F++)L[F]=C.i(F)<<1|C.i(F-1)>>>31;return new o(L,C.h)}function B(C,R){const L=R>>5;R%=32;const F=C.g.length-L,U=[];for(let $=0;$<F;$++)U[$]=R>0?C.i($+L)>>>R|C.i($+L+1)<<32-R:C.i($+L);return new o(U,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,nD=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,Ao=o}).apply(typeof _T<"u"?_T:typeof self<"u"?self:typeof window<"u"?window:{});var rg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var iD,rd,rD,Lg,G0,sD,aD,oD;(function(){var i,e=Object.defineProperty;function n(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof rg=="object"&&rg];for(var T=0;T<v.length;++T){var P=v[T];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=n(this);function s(v,T){if(T)t:{var P=r;v=v.split(".");for(var H=0;H<v.length-1;H++){var tt=v[H];if(!(tt in P))break t;P=P[tt]}v=v[v.length-1],H=P[v],T=T(H),T!=H&&T!=null&&e(P,v,{configurable:!0,writable:!0,value:T})}}s("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(v){return v||function(T){var P=[],H;for(H in T)Object.prototype.hasOwnProperty.call(T,H)&&P.push([H,T[H]]);return P}});var a=a||{},o=this||self;function u(v){var T=typeof v;return T=="object"&&v!=null||T=="function"}function h(v,T,P){return v.call.apply(v.bind,arguments)}function d(v,T,P){return d=h,d.apply(null,arguments)}function p(v,T){var P=Array.prototype.slice.call(arguments,1);return function(){var H=P.slice();return H.push.apply(H,arguments),v.apply(this,H)}}function g(v,T){function P(){}P.prototype=T.prototype,v.Z=T.prototype,v.prototype=new P,v.prototype.constructor=v,v.Ob=function(H,tt,at){for(var xt=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)xt[Kt-2]=arguments[Kt];return T.prototype[tt].apply(H,xt)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function b(v){const T=v.length;if(T>0){const P=Array(T);for(let H=0;H<T;H++)P[H]=v[H];return P}return[]}function w(v,T){for(let H=1;H<arguments.length;H++){const tt=arguments[H];var P=typeof tt;if(P=P!="object"?P:tt?Array.isArray(tt)?"array":P:"null",P=="array"||P=="object"&&typeof tt.length=="number"){P=v.length||0;const at=tt.length||0;v.length=P+at;for(let xt=0;xt<at;xt++)v[P+xt]=tt[xt]}else v.push(tt)}}class x{constructor(T,P){this.i=T,this.j=P,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function S(v){o.setTimeout(()=>{throw v},0)}function E(){var v=C;let T=null;return v.g&&(T=v.g,v.g=v.g.next,v.g||(v.h=null),T.next=null),T}class k{constructor(){this.h=this.g=null}add(T,P){const H=N.get();H.set(T,P),this.h?this.h.next=H:this.g=H,this.h=H}}var N=new x(()=>new M,v=>v.reset());class M{constructor(){this.next=this.g=this.h=null}set(T,P){this.h=T,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let O,B=!1,C=new k,R=()=>{const v=Promise.resolve(void 0);O=()=>{v.then(L)}};function L(){for(var v;v=E();){try{v.h.call(v.g)}catch(P){S(P)}var T=N;T.j(v),T.h<100&&(T.h++,v.next=T.g,T.g=v)}B=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(v,T){this.type=v,this.g=this.target=T,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var $=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var v=!1,T=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const P=()=>{};o.addEventListener("test",P,T),o.removeEventListener("test",P,T)}catch{}return v})();function V(v){return/^[\s\xa0]*$/.test(v)}function G(v,T){U.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,T)}g(G,U),G.prototype.init=function(v,T){const P=this.type=v.type,H=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=T,T=v.relatedTarget,T||(P=="mouseover"?T=v.fromElement:P=="mouseout"&&(T=v.toElement)),this.relatedTarget=T,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var et="closure_listenable_"+(Math.random()*1e6|0),z=0;function Y(v,T,P,H,tt){this.listener=v,this.proxy=null,this.src=T,this.type=P,this.capture=!!H,this.ha=tt,this.key=++z,this.da=this.fa=!1}function nt(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function mt(v,T,P){for(const H in v)T.call(P,v[H],H,v)}function bt(v,T){for(const P in v)T.call(void 0,v[P],P,v)}function q(v){const T={};for(const P in v)T[P]=v[P];return T}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(v,T){let P,H;for(let tt=1;tt<arguments.length;tt++){H=arguments[tt];for(P in H)v[P]=H[P];for(let at=0;at<Z.length;at++)P=Z[at],Object.prototype.hasOwnProperty.call(H,P)&&(v[P]=H[P])}}function ct(v){this.src=v,this.g={},this.h=0}ct.prototype.add=function(v,T,P,H,tt){const at=v.toString();v=this.g[at],v||(v=this.g[at]=[],this.h++);const xt=ht(v,T,H,tt);return xt>-1?(T=v[xt],P||(T.fa=!1)):(T=new Y(T,this.src,at,!!H,tt),T.fa=P,v.push(T)),T};function At(v,T){const P=T.type;if(P in v.g){var H=v.g[P],tt=Array.prototype.indexOf.call(H,T,void 0),at;(at=tt>=0)&&Array.prototype.splice.call(H,tt,1),at&&(nt(T),v.g[P].length==0&&(delete v.g[P],v.h--))}}function ht(v,T,P,H){for(let tt=0;tt<v.length;++tt){const at=v[tt];if(!at.da&&at.listener==T&&at.capture==!!P&&at.ha==H)return tt}return-1}var yt="closure_lm_"+(Math.random()*1e6|0),Pt={};function kt(v,T,P,H,tt){if(Array.isArray(T)){for(let at=0;at<T.length;at++)kt(v,T[at],P,H,tt);return null}return P=Bi(P),v&&v[et]?v.J(T,P,u(H)?!!H.capture:!1,tt):Gt(v,T,P,!1,H,tt)}function Gt(v,T,P,H,tt,at){if(!T)throw Error("Invalid event type");const xt=u(tt)?!!tt.capture:!!tt;let Kt=Ie(v);if(Kt||(v[yt]=Kt=new ct(v)),P=Kt.add(T,P,H,xt,at),P.proxy)return P;if(H=We(),P.proxy=H,H.src=v,H.listener=P,v.addEventListener)$||(tt=xt),tt===void 0&&(tt=!1),v.addEventListener(T.toString(),H,tt);else if(v.attachEvent)v.attachEvent(ee(T.toString()),H);else if(v.addListener&&v.removeListener)v.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return P}function We(){function v(P){return T.call(v.src,v.listener,P)}const T=Ee;return v}function ne(v,T,P,H,tt){if(Array.isArray(T))for(var at=0;at<T.length;at++)ne(v,T[at],P,H,tt);else H=u(H)?!!H.capture:!!H,P=Bi(P),v&&v[et]?(v=v.i,at=String(T).toString(),at in v.g&&(T=v.g[at],P=ht(T,P,H,tt),P>-1&&(nt(T[P]),Array.prototype.splice.call(T,P,1),T.length==0&&(delete v.g[at],v.h--)))):v&&(v=Ie(v))&&(T=v.g[T.toString()],v=-1,T&&(v=ht(T,P,H,tt)),(P=v>-1?T[v]:null)&&jt(P))}function jt(v){if(typeof v!="number"&&v&&!v.da){var T=v.src;if(T&&T[et])At(T.i,v);else{var P=v.type,H=v.proxy;T.removeEventListener?T.removeEventListener(P,H,v.capture):T.detachEvent?T.detachEvent(ee(P),H):T.addListener&&T.removeListener&&T.removeListener(H),(P=Ie(T))?(At(P,v),P.h==0&&(P.src=null,T[yt]=null)):nt(v)}}}function ee(v){return v in Pt?Pt[v]:Pt[v]="on"+v}function Ee(v,T){if(v.da)v=!0;else{T=new G(T,this);const P=v.listener,H=v.ha||v.src;v.fa&&jt(v),v=P.call(H,T)}return v}function Ie(v){return v=v[yt],v instanceof ct?v:null}var Ai="__closure_events_fn_"+(Math.random()*1e9>>>0);function Bi(v){return typeof v=="function"?v:(v[Ai]||(v[Ai]=function(T){return v.handleEvent(T)}),v[Ai])}function Ue(){F.call(this),this.i=new ct(this),this.M=this,this.G=null}g(Ue,F),Ue.prototype[et]=!0,Ue.prototype.removeEventListener=function(v,T,P,H){ne(this,v,T,P,H)};function Ve(v,T){var P,H=v.G;if(H)for(P=[];H;H=H.G)P.push(H);if(v=v.M,H=T.type||T,typeof T=="string")T=new U(T,v);else if(T instanceof U)T.target=T.target||v;else{var tt=T;T=new U(H,v),lt(T,tt)}tt=!0;let at,xt;if(P)for(xt=P.length-1;xt>=0;xt--)at=T.g=P[xt],tt=vt(at,H,!0,T)&&tt;if(at=T.g=v,tt=vt(at,H,!0,T)&&tt,tt=vt(at,H,!1,T)&&tt,P)for(xt=0;xt<P.length;xt++)at=T.g=P[xt],tt=vt(at,H,!1,T)&&tt}Ue.prototype.N=function(){if(Ue.Z.N.call(this),this.i){var v=this.i;for(const T in v.g){const P=v.g[T];for(let H=0;H<P.length;H++)nt(P[H]);delete v.g[T],v.h--}}this.G=null},Ue.prototype.J=function(v,T,P,H){return this.i.add(String(v),T,!1,P,H)},Ue.prototype.K=function(v,T,P,H){return this.i.add(String(v),T,!0,P,H)};function vt(v,T,P,H){if(T=v.i.g[String(T)],!T)return!0;T=T.concat();let tt=!0;for(let at=0;at<T.length;++at){const xt=T[at];if(xt&&!xt.da&&xt.capture==P){const Kt=xt.listener,dn=xt.ha||xt.src;xt.fa&&At(v.i,xt),tt=Kt.call(dn,H)!==!1&&tt}}return tt&&!H.defaultPrevented}function Dt(v,T){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=d(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:o.setTimeout(v,T||0)}function pe(v){v.g=Dt(()=>{v.g=null,v.i&&(v.i=!1,pe(v))},v.l);const T=v.h;v.h=null,v.m.apply(null,T)}class Ht extends F{constructor(T,P){super(),this.m=T,this.l=P,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:pe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function an(v){F.call(this),this.h=v,this.g={}}g(an,F);var Fi=[];function ui(v){mt(v.g,function(T,P){this.g.hasOwnProperty(P)&&jt(T)},v),v.g={}}an.prototype.N=function(){an.Z.N.call(this),ui(this)},an.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zn=o.JSON.stringify,ei=o.JSON.parse,hi=class{stringify(v){return o.JSON.stringify(v,void 0)}parse(v){return o.JSON.parse(v,void 0)}};function Ia(){}function Vo(){}var di={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ze(){U.call(this,"d")}g(ze,U);function se(){U.call(this,"c")}g(se,U);var Se={},Da=null;function ka(){return Da=Da||new Ue}Se.Ia="serverreachability";function Mf(v){U.call(this,Se.Ia,v)}g(Mf,U);function Qr(v){const T=ka();Ve(T,new Mf(T))}Se.STAT_EVENT="statevent";function jo(v,T){U.call(this,Se.STAT_EVENT,v),this.stat=T}g(jo,U);function bn(v){const T=ka();Ve(T,new jo(T,v))}Se.Ja="timingevent";function Zr(v,T){U.call(this,Se.Ja,v),this.size=T}g(Zr,U);function Jr(v,T){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){v()},T)}function Ir(){this.g=!0}Ir.prototype.ua=function(){this.g=!1};function By(v,T,P,H,tt,at){v.info(function(){if(v.g)if(at){var xt="",Kt=at.split("&");for(let ve=0;ve<Kt.length;ve++){var dn=Kt[ve].split("=");if(dn.length>1){const Xe=dn[0];dn=dn[1];const lr=Xe.split("_");xt=lr.length>=2&&lr[1]=="type"?xt+(Xe+"="+dn+"&"):xt+(Xe+"=redacted&")}}}else xt=null;else xt=at;return"XMLHTTP REQ ("+H+") [attempt "+tt+"]: "+T+`
`+P+`
`+xt})}function Pf(v,T,P,H,tt,at,xt){v.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+tt+"]: "+T+`
`+P+`
`+at+" "+xt})}function ts(v,T,P,H){v.info(function(){return"XMLHTTP TEXT ("+T+"): "+Fy(v,P)+(H?" "+H:"")})}function zo(v,T){v.info(function(){return"TIMEOUT: "+T})}Ir.prototype.info=function(){};function Fy(v,T){if(!v.g)return T;if(!T)return null;try{const at=JSON.parse(T);if(at){for(v=0;v<at.length;v++)if(Array.isArray(at[v])){var P=at[v];if(!(P.length<2)){var H=P[1];if(Array.isArray(H)&&!(H.length<1)){var tt=H[0];if(tt!="noop"&&tt!="stop"&&tt!="close")for(let xt=1;xt<H.length;xt++)H[xt]=""}}}}return zn(at)}catch{return T}}var Ho={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Uu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vu;function $o(){}g($o,Ia),$o.prototype.g=function(){return new XMLHttpRequest},Vu=new $o;function $s(v){return encodeURIComponent(String(v))}function Of(v){var T=1;v=v.split(":");const P=[];for(;T>0&&v.length;)P.push(v.shift()),T--;return v.length&&P.push(v.join(":")),P}function Dr(v,T,P,H){this.j=v,this.i=T,this.l=P,this.S=H||1,this.V=new an(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new kr}function kr(){this.i=null,this.g="",this.h=!1}var vn={},Mn={};function es(v,T,P){v.M=1,v.A=Go(wn(T)),v.u=P,v.R=!0,Jl(v,null)}function Jl(v,T){v.F=Date.now(),ns(v),v.B=wn(v.A);var P=v.B,H=v.S;Array.isArray(H)||(H=[String(H)]),ic(P.i,"t",H),v.C=0,P=v.j.L,v.h=new kr,v.g=Kf(v.j,P?T:null,!v.u),v.P>0&&(v.O=new Ht(d(v.Y,v,v.g),v.P)),T=v.V,P=v.g,H=v.ba;var tt="readystatechange";Array.isArray(tt)||(tt&&(Fi[0]=tt.toString()),tt=Fi);for(let at=0;at<tt.length;at++){const xt=kt(P,tt[at],H||T.handleEvent,!1,T.h||T);if(!xt)break;T.g[xt.key]=xt}T=v.J?q(v.J):{},v.u?(v.v||(v.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,T)):(v.v="GET",v.g.ea(v.B,v.v,null,T)),Qr(),By(v.i,v.v,v.B,v.l,v.S,v.u)}Dr.prototype.ba=function(v){v=v.target;const T=this.O;T&&Pr(v)==3?T.j():this.Y(v)},Dr.prototype.Y=function(v){try{if(v==this.g)t:{const Kt=Pr(this.g),dn=this.g.ya(),ve=this.g.ca();if(!(Kt<3)&&(Kt!=3||this.g&&(this.h.h||this.g.la()||Hn(this.g)))){this.K||Kt!=4||dn==7||(dn==8||ve<=0?Qr(3):Qr(2)),is(this);var T=this.g.ca();this.X=T;var P=Uy(this);if(this.o=T==200,Pf(this.i,this.v,this.B,this.l,this.S,Kt,T),this.o){if(this.U&&!this.L){e:{if(this.g){var H,tt=this.g;if((H=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(H)){var at=H;break e}}at=null}if(v=at)ts(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rs(this,v);else{this.o=!1,this.m=3,bn(12),Ui(this),sr(this);break t}}if(this.R){v=!0;let Xe;for(;!this.K&&this.C<P.length;)if(Xe=Bf(this,P),Xe==Mn){Kt==4&&(this.m=4,bn(14),v=!1),ts(this.i,this.l,null,"[Incomplete Response]");break}else if(Xe==vn){this.m=4,bn(15),ts(this.i,this.l,P,"[Invalid Chunk]"),v=!1;break}else ts(this.i,this.l,Xe,null),rs(this,Xe);if(Lf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||P.length!=0||this.h.h||(this.m=1,bn(16),v=!1),this.o=this.o&&v,!v)ts(this.i,this.l,P,"[Invalid Chunked Response]"),Ui(this),sr(this);else if(P.length>0&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.aa&&!xt.P&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),eh(xt),xt.P=!0,bn(11))}}else ts(this.i,this.l,P,null),rs(this,P);Kt==4&&Ui(this),this.o&&!this.K&&(Kt==4?qf(this.j,this):(this.o=!1,ns(this)))}else qs(this.g),T==400&&P.indexOf("Unknown SID")>0?(this.m=3,bn(12)):(this.m=0,bn(13)),Ui(this),sr(this)}}}catch{}finally{}};function Uy(v){if(!Lf(v))return v.g.la();const T=Hn(v.g);if(T==="")return"";let P="";const H=T.length,tt=Pr(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return Ui(v),sr(v),"";v.h.i=new o.TextDecoder}for(let at=0;at<H;at++)v.h.h=!0,P+=v.h.i.decode(T[at],{stream:!(tt&&at==H-1)});return T.length=0,v.h.g+=P,v.C=0,v.h.g}function Lf(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function Bf(v,T){var P=v.C,H=T.indexOf(`
`,P);return H==-1?Mn:(P=Number(T.substring(P,H)),isNaN(P)?vn:(H+=1,H+P>T.length?Mn:(T=T.slice(H,H+P),v.C=H+P,T)))}Dr.prototype.cancel=function(){this.K=!0,Ui(this)};function ns(v){v.T=Date.now()+v.H,tc(v,v.H)}function tc(v,T){if(v.D!=null)throw Error("WatchDog timer not null");v.D=Jr(d(v.aa,v),T)}function is(v){v.D&&(o.clearTimeout(v.D),v.D=null)}Dr.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(zo(this.i,this.B),this.M!=2&&(Qr(),bn(17)),Ui(this),this.m=2,sr(this)):tc(this,this.T-v)};function sr(v){v.j.I==0||v.K||qf(v.j,v)}function Ui(v){is(v);var T=v.O;T&&typeof T.dispose=="function"&&T.dispose(),v.O=null,ui(v.V),v.g&&(T=v.g,v.g=null,T.abort(),T.dispose())}function rs(v,T){try{var P=v.j;if(P.I!=0&&(P.g==v||as(P.h,v))){if(!v.L&&as(P.h,v)&&P.I==3){try{var H=P.Ba.g.parse(T)}catch{H=null}if(Array.isArray(H)&&H.length==3){var tt=H;if(tt[0]==0){t:if(!P.v){if(P.g)if(P.g.F+3e3<v.F)lc(P),Ua(P);else break t;Zo(P),bn(18)}}else P.xa=tt[1],0<P.xa-P.K&&tt[2]<37500&&P.F&&P.A==0&&!P.C&&(P.C=Jr(d(P.Va,P),6e3));ss(P.h)<=1&&P.ta&&(P.ta=void 0)}else ds(P,11)}else if((v.L||P.g==v)&&lc(P),!V(T))for(tt=P.Ba.g.parse(T),T=0;T<tt.length;T++){let ve=tt[T];const Xe=ve[0];if(!(Xe<=P.K))if(P.K=Xe,ve=ve[1],P.I==2)if(ve[0]=="c"){P.M=ve[1],P.ba=ve[2];const lr=ve[3];lr!=null&&(P.ka=lr,P.j.info("VER="+P.ka));const fs=ve[4];fs!=null&&(P.za=fs,P.j.info("SVER="+P.za));const Or=ve[5];Or!=null&&typeof Or=="number"&&Or>0&&(H=1.5*Or,P.O=H,P.j.info("backChannelRequestTimeoutMs_="+H)),H=P;const Lr=v.g;if(Lr){const Jo=Lr.g?Lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jo){var at=H.h;at.g||Jo.indexOf("spdy")==-1&&Jo.indexOf("quic")==-1&&Jo.indexOf("h2")==-1||(at.j=at.l,at.g=new Set,at.h&&(Hu(at,at.h),at.h=null))}if(H.G){const cc=Lr.g?Lr.g.getResponseHeader("X-HTTP-Session-Id"):null;cc&&(H.wa=cc,Te(H.J,H.G,cc))}}P.I=3,P.l&&P.l.ra(),P.aa&&(P.T=Date.now()-v.F,P.j.info("Handshake RTT: "+P.T+"ms")),H=P;var xt=v;if(H.na=Yf(H,H.L?H.ba:null,H.W),xt.L){$u(H.h,xt);var Kt=xt,dn=H.O;dn&&(Kt.H=dn),Kt.D&&(is(Kt),ns(Kt)),H.g=xt}else $f(H);P.i.length>0&&hs(P)}else ve[0]!="stop"&&ve[0]!="close"||ds(P,7);else P.I==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?ds(P,7):Ju(P):ve[0]!="noop"&&P.l&&P.l.qa(ve),P.A=0)}}Qr(4)}catch{}}var _n=class{constructor(v,T){this.g=v,this.map=T}};function ju(v){this.l=v||10,o.PerformanceNavigationTiming?(v=o.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zu(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function ss(v){return v.h?1:v.g?v.g.size:0}function as(v,T){return v.h?v.h==T:v.g?v.g.has(T):!1}function Hu(v,T){v.g?v.g.add(T):v.h=T}function $u(v,T){v.h&&v.h==T?v.h=null:v.g&&v.g.has(T)&&v.g.delete(T)}ju.prototype.cancel=function(){if(this.i=Gu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Gu(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let T=v.i;for(const P of v.g.values())T=T.concat(P.G);return T}return b(v.i)}var Ff=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ec(v,T){if(v){v=v.split("&");for(let P=0;P<v.length;P++){const H=v[P].indexOf("=");let tt,at=null;H>=0?(tt=v[P].substring(0,H),at=v[P].substring(H+1)):tt=v[P],T(tt,at?decodeURIComponent(at.replace(/\+/g," ")):"")}}}function Vi(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;v instanceof Vi?(this.l=v.l,Pn(this,v.j),this.o=v.o,this.g=v.g,Na(this,v.u),this.h=v.h,qu(this,zf(v.i)),this.m=v.m):v&&(T=String(v).match(Ff))?(this.l=!1,Pn(this,T[1]||"",!0),this.o=os(T[2]||""),this.g=os(T[3]||"",!0),Na(this,T[4]),this.h=os(T[5]||"",!0),qu(this,T[6]||"",!0),this.m=os(T[7]||"")):(this.l=!1,this.i=new Pa(null,this.l))}Vi.prototype.toString=function(){const v=[];var T=this.j;T&&v.push(qo(T,nc,!0),":");var P=this.g;return(P||T=="file")&&(v.push("//"),(T=this.o)&&v.push(qo(T,nc,!0),"@"),v.push($s(P).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.u,P!=null&&v.push(":",String(P))),(P=this.h)&&(this.g&&P.charAt(0)!="/"&&v.push("/"),v.push(qo(P,P.charAt(0)=="/"?Wu:Uf,!0))),(P=this.i.toString())&&v.push("?",P),(P=this.m)&&v.push("#",qo(P,Vf)),v.join("")},Vi.prototype.resolve=function(v){const T=wn(this);let P=!!v.j;P?Pn(T,v.j):P=!!v.o,P?T.o=v.o:P=!!v.g,P?T.g=v.g:P=v.u!=null;var H=v.h;if(P)Na(T,v.u);else if(P=!!v.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var tt=T.h.lastIndexOf("/");tt!=-1&&(H=T.h.slice(0,tt+1)+H)}if(tt=H,tt==".."||tt==".")H="";else if(tt.indexOf("./")!=-1||tt.indexOf("/.")!=-1){H=tt.lastIndexOf("/",0)==0,tt=tt.split("/");const at=[];for(let xt=0;xt<tt.length;){const Kt=tt[xt++];Kt=="."?H&&xt==tt.length&&at.push(""):Kt==".."?((at.length>1||at.length==1&&at[0]!="")&&at.pop(),H&&xt==tt.length&&at.push("")):(at.push(Kt),H=!0)}H=at.join("/")}else H=tt}return P?T.h=H:P=v.i.toString()!=="",P?qu(T,zf(v.i)):P=!!v.m,P&&(T.m=v.m),T};function wn(v){return new Vi(v)}function Pn(v,T,P){v.j=P?os(T,!0):T,v.j&&(v.j=v.j.replace(/:$/,""))}function Na(v,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);v.u=T}else v.u=null}function qu(v,T,P){T instanceof Pa?(v.i=T,rc(v.i,v.l)):(P||(T=qo(T,Ma)),v.i=new Pa(T,v.l))}function Te(v,T,P){v.i.set(T,P)}function Go(v){return Te(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function os(v,T){return v?T?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function qo(v,T,P){return typeof v=="string"?(v=encodeURI(v).replace(T,xi),P&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function xi(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var nc=/[#\/\?@]/g,Uf=/[#\?:]/g,Wu=/[#\?]/g,Ma=/[#\?@]/g,Vf=/#/g;function Pa(v,T){this.h=this.g=null,this.i=v||null,this.j=!!T}function Ei(v){v.g||(v.g=new Map,v.h=0,v.i&&ec(v.i,function(T,P){v.add(decodeURIComponent(T.replace(/\+/g," ")),P)}))}i=Pa.prototype,i.add=function(v,T){Ei(this),this.i=null,v=Oa(this,v);let P=this.g.get(v);return P||this.g.set(v,P=[]),P.push(T),this.h+=1,this};function jf(v,T){Ei(v),T=Oa(v,T),v.g.has(T)&&(v.i=null,v.h-=v.g.get(T).length,v.g.delete(T))}function Xu(v,T){return Ei(v),T=Oa(v,T),v.g.has(T)}i.forEach=function(v,T){Ei(this),this.g.forEach(function(P,H){P.forEach(function(tt){v.call(T,tt,H,this)},this)},this)};function Yu(v,T){Ei(v);let P=[];if(typeof T=="string")Xu(v,T)&&(P=P.concat(v.g.get(Oa(v,T))));else for(v=Array.from(v.g.values()),T=0;T<v.length;T++)P=P.concat(v[T]);return P}i.set=function(v,T){return Ei(this),this.i=null,v=Oa(this,v),Xu(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[T]),this.h+=1,this},i.get=function(v,T){return v?(v=Yu(this,v),v.length>0?String(v[0]):T):T};function ic(v,T,P){jf(v,T),P.length>0&&(v.i=null,v.g.set(Oa(v,T),b(P)),v.h+=P.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],T=Array.from(this.g.keys());for(let H=0;H<T.length;H++){var P=T[H];const tt=$s(P);P=Yu(this,P);for(let at=0;at<P.length;at++){let xt=tt;P[at]!==""&&(xt+="="+$s(P[at])),v.push(xt)}}return this.i=v.join("&")};function zf(v){const T=new Pa;return T.i=v.i,v.g&&(T.g=new Map(v.g),T.h=v.h),T}function Oa(v,T){return T=String(T),v.j&&(T=T.toLowerCase()),T}function rc(v,T){T&&!v.j&&(Ei(v),v.i=null,v.g.forEach(function(P,H){const tt=H.toLowerCase();H!=tt&&(jf(this,H),ic(this,tt,P))},v)),v.j=T}function Nr(v,T){const P=new Ir;if(o.Image){const H=new Image;H.onload=p(ar,P,"TestLoadImage: loaded",!0,T,H),H.onerror=p(ar,P,"TestLoadImage: error",!1,T,H),H.onabort=p(ar,P,"TestLoadImage: abort",!1,T,H),H.ontimeout=p(ar,P,"TestLoadImage: timeout",!1,T,H),o.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=v}else T(!1)}function Ku(v,T){const P=new Ir,H=new AbortController,tt=setTimeout(()=>{H.abort(),ar(P,"TestPingServer: timeout",!1,T)},1e4);fetch(v,{signal:H.signal}).then(at=>{clearTimeout(tt),at.ok?ar(P,"TestPingServer: ok",!0,T):ar(P,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(tt),ar(P,"TestPingServer: error",!1,T)})}function ar(v,T,P,H,tt){try{tt&&(tt.onload=null,tt.onerror=null,tt.onabort=null,tt.ontimeout=null),H(P)}catch{}}function La(){this.g=new hi}function ls(v){this.i=v.Sb||null,this.h=v.ab||!1}g(ls,Ia),ls.prototype.g=function(){return new Wo(this.i,this.h)};function Wo(v,T){Ue.call(this),this.H=v,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Wo,Ue),i=Wo.prototype,i.open=function(v,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=T,this.readyState=1,Mr(this)},i.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(T.body=v),(this.H||o).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ba(this)),this.readyState=0},i.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Mr(this)),this.g&&(this.readyState=3,Mr(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;sc(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function sc(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}i.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var T=v.value?v.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!v.done}))&&(this.response=this.responseText+=T)}v.done?Ba(this):Mr(this),this.readyState==3&&sc(this)}},i.Oa=function(v){this.g&&(this.response=this.responseText=v,Ba(this))},i.Na=function(v){this.g&&(this.response=v,Ba(this))},i.ga=function(){this.g&&Ba(this)};function Ba(v){v.readyState=4,v.l=null,v.j=null,v.B=null,Mr(v)}i.setRequestHeader=function(v,T){this.A.append(v,T)},i.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],T=this.h.entries();for(var P=T.next();!P.done;)P=P.value,v.push(P[0]+": "+P[1]),P=T.next();return v.join(`\r
`)};function Mr(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(Wo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function or(v){let T="";return mt(v,function(P,H){T+=H,T+=":",T+=P,T+=`\r
`}),T}function Xo(v,T,P){t:{for(H in P){var H=!1;break t}H=!0}H||(P=or(P),typeof v=="string"?P!=null&&$s(P):Te(v,T,P))}function De(v){Ue.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(De,Ue);var cs=/^https?$/i,Qu=["POST","PUT"];i=De.prototype,i.Fa=function(v){this.H=v},i.ea=function(v,T,P,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);T=T?T.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vu.g(),this.g.onreadystatechange=y(d(this.Ca,this));try{this.B=!0,this.g.open(T,String(v),!0),this.B=!1}catch(at){Yo(this,at);return}if(v=P||"",P=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var tt in H)P.set(tt,H[tt]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const at of H.keys())P.set(at,H.get(at));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(P.keys()).find(at=>at.toLowerCase()=="content-type"),tt=o.FormData&&v instanceof o.FormData,!(Array.prototype.indexOf.call(Qu,T,void 0)>=0)||H||tt||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[at,xt]of P)this.g.setRequestHeader(at,xt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(at){Yo(this,at)}};function Yo(v,T){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=T,v.o=5,Zu(v),Gs(v)}function Zu(v){v.A||(v.A=!0,Ve(v,"complete"),Ve(v,"error"))}i.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,Ve(this,"complete"),Ve(this,"abort"),Gs(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gs(this,!0)),De.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Ko(this):this.Xa())},i.Xa=function(){Ko(this)};function Ko(v){if(v.h&&typeof a<"u"){if(v.v&&Pr(v)==4)setTimeout(v.Ca.bind(v),0);else if(Ve(v,"readystatechange"),Pr(v)==4){v.h=!1;try{const at=v.ca();t:switch(at){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break t;default:T=!1}var P;if(!(P=T)){var H;if(H=at===0){let xt=String(v.D).match(Ff)[1]||null;!xt&&o.self&&o.self.location&&(xt=o.self.location.protocol.slice(0,-1)),H=!cs.test(xt?xt.toLowerCase():"")}P=H}if(P)Ve(v,"complete"),Ve(v,"success");else{v.o=6;try{var tt=Pr(v)>2?v.g.statusText:""}catch{tt=""}v.l=tt+" ["+v.ca()+"]",Zu(v)}}finally{Gs(v)}}}}function Gs(v,T){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const P=v.g;v.g=null,T||Ve(v,"ready");try{P.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Pr(v){return v.g?v.g.readyState:0}i.ca=function(){try{return Pr(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(v){if(this.g){var T=this.g.responseText;return v&&T.indexOf(v)==0&&(T=T.substring(v.length)),ei(T)}};function Hn(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function qs(v){const T={};v=(v.g&&Pr(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<v.length;H++){if(V(v[H]))continue;var P=Of(v[H]);const tt=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const at=T[tt]||[];T[tt]=at,at.push(P)}bt(T,function(H){return H.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function us(v,T,P){return P&&P.internalChannelParams&&P.internalChannelParams[v]||T}function Fa(v){this.za=0,this.i=[],this.j=new Ir,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=us("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=us("baseRetryDelayMs",5e3,v),this.Za=us("retryDelaySeedMs",1e4,v),this.Ta=us("forwardChannelMaxRetries",2,v),this.va=us("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new ju(v&&v.concurrentRequestLimit),this.Ba=new La,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Fa.prototype,i.ka=8,i.I=1,i.connect=function(v,T,P,H){bn(0),this.W=v,this.H=T||{},P&&H!==void 0&&(this.H.OSID=P,this.H.OAID=H),this.F=this.X,this.J=Yf(this,null,this.W),hs(this)};function Ju(v){if(ac(v),v.I==3){var T=v.V++,P=wn(v.J);if(Te(P,"SID",v.M),Te(P,"RID",T),Te(P,"TYPE","terminate"),Qo(v,P),T=new Dr(v,v.j,T),T.M=2,T.A=Go(wn(P)),P=!1,o.navigator&&o.navigator.sendBeacon)try{P=o.navigator.sendBeacon(T.A.toString(),"")}catch{}!P&&o.Image&&(new Image().src=T.A,P=!0),P||(T.g=Kf(T.j,null),T.g.ea(T.A)),T.F=Date.now(),ns(T)}Xf(v)}function Ua(v){v.g&&(eh(v),v.g.cancel(),v.g=null)}function ac(v){Ua(v),v.v&&(o.clearTimeout(v.v),v.v=null),lc(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&o.clearTimeout(v.m),v.m=null)}function hs(v){if(!zu(v.h)&&!v.m){v.m=!0;var T=v.Ea;O||R(),B||(O(),B=!0),C.add(T,v),v.D=0}}function oc(v,T){return ss(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=T.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=Jr(d(v.Ea,v,T),Wf(v,v.D)),v.D++,!0)}i.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const tt=new Dr(this,this.j,v);let at=this.o;if(this.U&&(at?(at=q(at),lt(at,this.U)):at=this.U),this.u!==null||this.R||(tt.J=at,at=null),this.S)t:{for(var T=0,P=0;P<this.i.length;P++){e:{var H=this.i[P];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break e}H=void 0}if(H===void 0)break;if(T+=H,T>4096){T=P;break t}if(T===4096||P===this.i.length-1){T=P+1;break t}}T=1e3}else T=1e3;T=Hf(this,tt,T),P=wn(this.J),Te(P,"RID",v),Te(P,"CVER",22),this.G&&Te(P,"X-HTTP-Session-Id",this.G),Qo(this,P),at&&(this.R?T="headers="+$s(or(at))+"&"+T:this.u&&Xo(P,this.u,at)),Hu(this.h,tt),this.Ra&&Te(P,"TYPE","init"),this.S?(Te(P,"$req",T),Te(P,"SID","null"),tt.U=!0,es(tt,P,null)):es(tt,P,T),this.I=2}}else this.I==3&&(v?th(this,v):this.i.length==0||zu(this.h)||th(this))};function th(v,T){var P;T?P=T.l:P=v.V++;const H=wn(v.J);Te(H,"SID",v.M),Te(H,"RID",P),Te(H,"AID",v.K),Qo(v,H),v.u&&v.o&&Xo(H,v.u,v.o),P=new Dr(v,v.j,P,v.D+1),v.u===null&&(P.J=v.o),T&&(v.i=T.G.concat(v.i)),T=Hf(v,P,1e3),P.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),Hu(v.h,P),es(P,H,T)}function Qo(v,T){v.H&&mt(v.H,function(P,H){Te(T,H,P)}),v.l&&mt({},function(P,H){Te(T,H,P)})}function Hf(v,T,P){P=Math.min(v.i.length,P);const H=v.l?d(v.l.Ka,v.l,v):null;t:{var tt=v.i;let Kt=-1;for(;;){const dn=["count="+P];Kt==-1?P>0?(Kt=tt[0].g,dn.push("ofs="+Kt)):Kt=0:dn.push("ofs="+Kt);let ve=!0;for(let Xe=0;Xe<P;Xe++){var at=tt[Xe].g;const lr=tt[Xe].map;if(at-=Kt,at<0)Kt=Math.max(0,tt[Xe].g-100),ve=!1;else try{at="req"+at+"_"||"";try{var xt=lr instanceof Map?lr:Object.entries(lr);for(const[fs,Or]of xt){let Lr=Or;u(Or)&&(Lr=zn(Or)),dn.push(at+fs+"="+encodeURIComponent(Lr))}}catch(fs){throw dn.push(at+"type="+encodeURIComponent("_badmap")),fs}}catch{H&&H(lr)}}if(ve){xt=dn.join("&");break t}}xt=void 0}return v=v.i.splice(0,P),T.G=v,xt}function $f(v){if(!v.g&&!v.v){v.Y=1;var T=v.Da;O||R(),B||(O(),B=!0),C.add(T,v),v.A=0}}function Zo(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=Jr(d(v.Da,v),Wf(v,v.A)),v.A++,!0)}i.Da=function(){if(this.v=null,Gf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=Jr(d(this.Wa,this),v)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bn(10),Ua(this),Gf(this))};function eh(v){v.B!=null&&(o.clearTimeout(v.B),v.B=null)}function Gf(v){v.g=new Dr(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var T=wn(v.na);Te(T,"RID","rpc"),Te(T,"SID",v.M),Te(T,"AID",v.K),Te(T,"CI",v.F?"0":"1"),!v.F&&v.ia&&Te(T,"TO",v.ia),Te(T,"TYPE","xmlhttp"),Qo(v,T),v.u&&v.o&&Xo(T,v.u,v.o),v.O&&(v.g.H=v.O);var P=v.g;v=v.ba,P.M=1,P.A=Go(wn(T)),P.u=null,P.R=!0,Jl(P,v)}i.Va=function(){this.C!=null&&(this.C=null,Ua(this),Zo(this),bn(19))};function lc(v){v.C!=null&&(o.clearTimeout(v.C),v.C=null)}function qf(v,T){var P=null;if(v.g==T){lc(v),eh(v),v.g=null;var H=2}else if(as(v.h,T))P=T.G,$u(v.h,T),H=1;else return;if(v.I!=0){if(T.o)if(H==1){P=T.u?T.u.length:0,T=Date.now()-T.F;var tt=v.D;H=ka(),Ve(H,new Zr(H,P)),hs(v)}else $f(v);else if(tt=T.m,tt==3||tt==0&&T.X>0||!(H==1&&oc(v,T)||H==2&&Zo(v)))switch(P&&P.length>0&&(T=v.h,T.i=T.i.concat(P)),tt){case 1:ds(v,5);break;case 4:ds(v,10);break;case 3:ds(v,6);break;default:ds(v,2)}}}function Wf(v,T){let P=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(P*=2),P*T}function ds(v,T){if(v.j.info("Error code "+T),T==2){var P=d(v.bb,v),H=v.Ua;const tt=!H;H=new Vi(H||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Pn(H,"https"),Go(H),tt?Nr(H.toString(),P):Ku(H.toString(),P)}else bn(2);v.I=0,v.l&&v.l.pa(T),Xf(v),ac(v)}i.bb=function(v){v?(this.j.info("Successfully pinged google.com"),bn(2)):(this.j.info("Failed to ping google.com"),bn(1))};function Xf(v){if(v.I=0,v.ja=[],v.l){const T=Gu(v.h);(T.length!=0||v.i.length!=0)&&(w(v.ja,T),w(v.ja,v.i),v.h.i.length=0,b(v.i),v.i.length=0),v.l.oa()}}function Yf(v,T,P){var H=P instanceof Vi?wn(P):new Vi(P);if(H.g!="")T&&(H.g=T+"."+H.g),Na(H,H.u);else{var tt=o.location;H=tt.protocol,T=T?T+"."+tt.hostname:tt.hostname,tt=+tt.port;const at=new Vi(null);H&&Pn(at,H),T&&(at.g=T),tt&&Na(at,tt),P&&(at.h=P),H=at}return P=v.G,T=v.wa,P&&T&&Te(H,P,T),Te(H,"VER",v.ka),Qo(v,H),H}function Kf(v,T,P){if(T&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=v.Aa&&!v.ma?new De(new ls({ab:P})):new De(v.ma),T.Fa(v.L),T}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qf(){}i=Qf.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Va(){}Va.prototype.g=function(v,T){return new fi(v,T)};function fi(v,T){Ue.call(this),this.g=new Fa(T),this.l=v,this.h=T&&T.messageUrlParams||null,v=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(v?v["X-WebChannel-Content-Type"]=T.messageContentType:v={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(v?v["X-WebChannel-Client-Profile"]=T.sa:v={"X-WebChannel-Client-Profile":T.sa}),this.g.U=v,(v=T&&T.Qb)&&!V(v)&&(this.g.u=v),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!V(T)&&(this.g.G=T,v=this.h,v!==null&&T in v&&(v=this.h,T in v&&delete v[T])),this.j=new Ws(this)}g(fi,Ue),fi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fi.prototype.close=function(){Ju(this.g)},fi.prototype.o=function(v){var T=this.g;if(typeof v=="string"){var P={};P.__data__=v,v=P}else this.v&&(P={},P.__data__=zn(v),v=P);T.i.push(new _n(T.Ya++,v)),T.I==3&&hs(T)},fi.prototype.N=function(){this.g.l=null,delete this.j,Ju(this.g),delete this.g,fi.Z.N.call(this)};function Zf(v){ze.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var T=v.__sm__;if(T){t:{for(const P in T){v=P;break t}v=void 0}(this.i=v)&&(v=this.i,T=T!==null&&v in T?T[v]:void 0),this.data=T}else this.data=v}g(Zf,ze);function Jf(){se.call(this),this.status=1}g(Jf,se);function Ws(v){this.g=v}g(Ws,Qf),Ws.prototype.ra=function(){Ve(this.g,"a")},Ws.prototype.qa=function(v){Ve(this.g,new Zf(v))},Ws.prototype.pa=function(v){Ve(this.g,new Jf)},Ws.prototype.oa=function(){Ve(this.g,"b")},Va.prototype.createWebChannel=Va.prototype.g,fi.prototype.send=fi.prototype.o,fi.prototype.open=fi.prototype.m,fi.prototype.close=fi.prototype.close,oD=function(){return new Va},aD=function(){return ka()},sD=Se,G0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ho.NO_ERROR=0,Ho.TIMEOUT=8,Ho.HTTP_ERROR=6,Lg=Ho,Uu.COMPLETE="complete",rD=Uu,Vo.EventType=di,di.OPEN="a",di.CLOSE="b",di.ERROR="c",di.MESSAGE="d",Ue.prototype.listen=Ue.prototype.J,rd=Vo,De.prototype.listenOnce=De.prototype.K,De.prototype.getLastError=De.prototype.Ha,De.prototype.getLastErrorCode=De.prototype.ya,De.prototype.getStatus=De.prototype.ca,De.prototype.getResponseJson=De.prototype.La,De.prototype.getResponseText=De.prototype.la,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Fa,iD=De}).apply(typeof rg<"u"?rg:typeof self<"u"?self:typeof window<"u"?window:{});const wT="@firebase/firestore",AT="4.9.2";let ai=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ai.UNAUTHENTICATED=new ai(null),ai.GOOGLE_CREDENTIALS=new ai("google-credentials-uid"),ai.FIRST_PARTY=new ai("first-party-uid"),ai.MOCK_USER=new ai("mock-user");let Iu="12.3.0";const Ul=new iw("@firebase/firestore");function zc(){return Ul.logLevel}function Et(i,...e){if(Ul.logLevel<=le.DEBUG){const n=e.map(mw);Ul.debug(`Firestore (${Iu}): ${i}`,...n)}}function Ea(i,...e){if(Ul.logLevel<=le.ERROR){const n=e.map(mw);Ul.error(`Firestore (${Iu}): ${i}`,...n)}}function hu(i,...e){if(Ul.logLevel<=le.WARN){const n=e.map(mw);Ul.warn(`Firestore (${Iu}): ${i}`,...n)}}function mw(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function Vt(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,lD(i,r,n)}function lD(i,e,n){let r=`FIRESTORE (${Iu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ea(r),new Error(r)}function xe(i,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,i||lD(e,s,r)}function Yt(i,e){return i}const pt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class St extends zs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class kl{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class cD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class z5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ai.UNAUTHENTICATED)))}shutdown(){}}class H5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class $5{constructor(e){this.t=e,this.currentUser=ai.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let a=new kl;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new kl,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const h=a;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},u=h=>{Et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Et("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new kl)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new cD(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new ai(e)}}class G5{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ai.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class q5{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new G5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ai.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){xe(this.o===void 0,3512);const r=a=>{a.error!=null&&Et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Et("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{Et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new xT(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function X5(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}class yw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=X5(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function ue(i,e){return i<e?-1:i>e?1:0}function q0(i,e){const n=Math.min(i.length,e.length);for(let r=0;r<n;r++){const s=i.charAt(r),a=e.charAt(r);if(s!==a)return Wv(s)===Wv(a)?ue(s,a):Wv(s)?1:-1}return ue(i.length,e.length)}const Y5=55296,K5=57343;function Wv(i){const e=i.charCodeAt(0);return e>=Y5&&e<=K5}function du(i,e,n){return i.length===e.length&&i.every(((r,s)=>n(r,e[s])))}const ET="__name__";class Ss{constructor(e,n,r){n===void 0?n=0:n>e.length&&Vt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Vt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ss.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ss?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=Ss.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return ue(e.length,n.length)}static compareSegments(e,n){const r=Ss.isNumericId(e),s=Ss.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ss.extractNumericId(e).compare(Ss.extractNumericId(n)):q0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ao.fromString(e.substring(4,e.length-2))}}class je extends Ss{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new St(pt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new je(n)}static emptyPath(){return new je([])}}const Q5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends Ss{construct(e,n,r){return new Qn(e,n,r)}static isValidIdentifier(e){return Q5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ET}static keyField(){return new Qn([ET])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new St(pt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new St(pt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new St(pt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(a(),s++)}if(a(),o)throw new St(pt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(n)}static emptyPath(){return new Qn([])}}class Bt{constructor(e){this.path=e}static fromPath(e){return new Bt(je.fromString(e))}static fromName(e){return new Bt(je.fromString(e).popFirst(5))}static empty(){return new Bt(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Bt(new je(e.slice()))}}function uD(i,e,n){if(!n)throw new St(pt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Z5(i,e,n,r){if(e===!0&&r===!0)throw new St(pt.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function ST(i){if(!Bt.isDocumentKey(i))throw new St(pt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function TT(i){if(Bt.isDocumentKey(i))throw new St(pt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function hD(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Qm(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Vt(12329,{type:typeof i})}function xo(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new St(pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qm(i);throw new St(pt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function In(i,e){const n={typeString:i};return e&&(n.value=e),n}function uf(i,e){if(!hD(i))throw new St(pt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const o=i[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new St(pt.INVALID_ARGUMENT,n);return!0}const CT=-62135596800,RT=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*RT);return new qe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new St(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new St(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<CT)throw new St(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new St(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/RT}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uf(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-CT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:In("string",qe._jsonSchemaVersion),seconds:In("number"),nanoseconds:In("number")};class $t{static fromTimestamp(e){return new $t(e)}static min(){return new $t(new qe(0,0))}static max(){return new $t(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const kd=-1;function J5(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,s=$t.fromTimestamp(r===1e9?new qe(n+1,0):new qe(n,r));return new Io(s,Bt.empty(),e)}function tB(i){return new Io(i.readTime,i.key,kd)}class Io{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Io($t.min(),Bt.empty(),kd)}static max(){return new Io($t.max(),Bt.empty(),kd)}}function eB(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Bt.comparator(i.documentKey,e.documentKey),n!==0?n:ue(i.largestBatchId,e.largestBatchId))}const nB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Du(i){if(i.code!==pt.FAILED_PRECONDITION||i.message!==nB)throw i;Et("LocalStore","Unexpectedly lost primary lease")}class gt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new gt(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof gt?n:gt.resolve(n)}catch(n){return gt.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):gt.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):gt.reject(n)}static resolve(e){return new gt(((n,r)=>{n(e)}))}static reject(e){return new gt(((n,r)=>{r(e)}))}static waitFor(e){return new gt(((n,r)=>{let s=0,a=0,o=!1;e.forEach((u=>{++s,u.next((()=>{++a,o&&a===s&&n()}),(h=>r(h)))})),o=!0,a===s&&n()}))}static or(e){let n=gt.resolve(!1);for(const r of e)n=n.next((s=>s?gt.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,a)=>{r.push(n.call(this,s,a))})),this.waitFor(r)}static mapArray(e,n){return new gt(((r,s)=>{const a=e.length,o=new Array(a);let u=0;for(let h=0;h<a;h++){const d=h;n(e[d]).next((p=>{o[d]=p,++u,u===a&&r(o)}),(p=>s(p)))}}))}static doWhile(e,n){return new gt(((r,s)=>{const a=()=>{e()===!0?n().next((()=>{a()}),s):r()};a()}))}}function rB(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ku(i){return i.name==="IndexedDbTransactionError"}class Zm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zm.ce=-1;const bw=-1;function Jm(i){return i==null}function rm(i){return i===0&&1/i==-1/0}function sB(i){return typeof i=="number"&&Number.isInteger(i)&&!rm(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const dD="";function aB(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=IT(e)),e=oB(i.get(n),e);return IT(e)}function oB(i,e){let n=e;const r=i.length;for(let s=0;s<r;s++){const a=i.charAt(s);switch(a){case"\0":n+="";break;case dD:n+="";break;default:n+=a}}return n}function IT(i){return i+dD+""}function DT(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Fo(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function fD(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class sn{constructor(e,n){this.comparator=e,this.root=n||Yn.EMPTY}insert(e,n){return new sn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yn.BLACK,null,null))}remove(e){return new sn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sg(this.root,e,this.comparator,!1)}getReverseIterator(){return new sg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sg(this.root,e,this.comparator,!0)}}class sg{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yn{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Yn.RED,this.left=s??Yn.EMPTY,this.right=a??Yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Yn(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Yn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Vt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Vt(27949);return e+(this.isRed()?0:1)}}Yn.EMPTY=null,Yn.RED=!0,Yn.BLACK=!1;Yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Vt(57766)}get value(){throw Vt(16141)}get color(){throw Vt(16727)}get left(){throw Vt(29726)}get right(){throw Vt(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new Yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nn{constructor(e){this.comparator=e,this.data=new sn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kT(this.data.getIterator())}getIteratorFrom(e){return new kT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Nn(this.comparator);return n.data=e,n}}class kT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Zi{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new Zi([])}unionWith(e){let n=new Nn(Qn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return du(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class pD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Jn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new pD("Invalid base64 string: "+a):a}})(e);return new Jn(n)}static fromUint8Array(e){const n=(function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a})(e);return new Jn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jn.EMPTY_BYTE_STRING=new Jn("");const lB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Do(i){if(xe(!!i,39018),typeof i=="string"){let e=0;const n=lB.exec(i);if(xe(!!n,46558,{timestamp:i}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yn(i.seconds),nanos:yn(i.nanos)}}function yn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ko(i){return typeof i=="string"?Jn.fromBase64String(i):Jn.fromUint8Array(i)}const gD="server_timestamp",mD="__type__",yD="__previous_value__",bD="__local_write_time__";function vw(i){return(i?.mapValue?.fields||{})[mD]?.stringValue===gD}function ty(i){const e=i.mapValue.fields[yD];return vw(e)?ty(e):e}function Nd(i){const e=Do(i.mapValue.fields[bD].timestampValue);return new qe(e.seconds,e.nanos)}class cB{constructor(e,n,r,s,a,o,u,h,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=d,this.isUsingEmulator=p}}const sm="(default)";class Md{constructor(e,n){this.projectId=e,this.database=n||sm}static empty(){return new Md("","")}get isDefaultDatabase(){return this.database===sm}isEqual(e){return e instanceof Md&&e.projectId===this.projectId&&e.database===this.database}}const vD="__type__",uB="__max__",ag={mapValue:{}},_D="__vector__",am="value";function No(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?vw(i)?4:dB(i)?9007199254740991:hB(i)?10:11:Vt(28295,{value:i})}function Vs(i,e){if(i===e)return!0;const n=No(i);if(n!==No(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Nd(i).isEqual(Nd(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=Do(s.timestampValue),u=Do(a.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(s,a){return ko(s.bytesValue).isEqual(ko(a.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(s,a){return yn(s.geoPointValue.latitude)===yn(a.geoPointValue.latitude)&&yn(s.geoPointValue.longitude)===yn(a.geoPointValue.longitude)})(i,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return yn(s.integerValue)===yn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=yn(s.doubleValue),u=yn(a.doubleValue);return o===u?rm(o)===rm(u):isNaN(o)&&isNaN(u)}return!1})(i,e);case 9:return du(i.arrayValue.values||[],e.arrayValue.values||[],Vs);case 10:case 11:return(function(s,a){const o=s.mapValue.fields||{},u=a.mapValue.fields||{};if(DT(o)!==DT(u))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(u[h]===void 0||!Vs(o[h],u[h])))return!1;return!0})(i,e);default:return Vt(52216,{left:i})}}function Pd(i,e){return(i.values||[]).find((n=>Vs(n,e)))!==void 0}function fu(i,e){if(i===e)return 0;const n=No(i),r=No(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(i.booleanValue,e.booleanValue);case 2:return(function(a,o){const u=yn(a.integerValue||a.doubleValue),h=yn(o.integerValue||o.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(i,e);case 3:return NT(i.timestampValue,e.timestampValue);case 4:return NT(Nd(i),Nd(e));case 5:return q0(i.stringValue,e.stringValue);case 6:return(function(a,o){const u=ko(a),h=ko(o);return u.compareTo(h)})(i.bytesValue,e.bytesValue);case 7:return(function(a,o){const u=a.split("/"),h=o.split("/");for(let d=0;d<u.length&&d<h.length;d++){const p=ue(u[d],h[d]);if(p!==0)return p}return ue(u.length,h.length)})(i.referenceValue,e.referenceValue);case 8:return(function(a,o){const u=ue(yn(a.latitude),yn(o.latitude));return u!==0?u:ue(yn(a.longitude),yn(o.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return MT(i.arrayValue,e.arrayValue);case 10:return(function(a,o){const u=a.fields||{},h=o.fields||{},d=u[am]?.arrayValue,p=h[am]?.arrayValue,g=ue(d?.values?.length||0,p?.values?.length||0);return g!==0?g:MT(d,p)})(i.mapValue,e.mapValue);case 11:return(function(a,o){if(a===ag.mapValue&&o===ag.mapValue)return 0;if(a===ag.mapValue)return 1;if(o===ag.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),d=o.fields||{},p=Object.keys(d);h.sort(),p.sort();for(let g=0;g<h.length&&g<p.length;++g){const y=q0(h[g],p[g]);if(y!==0)return y;const b=fu(u[h[g]],d[p[g]]);if(b!==0)return b}return ue(h.length,p.length)})(i.mapValue,e.mapValue);default:throw Vt(23264,{he:n})}}function NT(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ue(i,e);const n=Do(i),r=Do(e),s=ue(n.seconds,r.seconds);return s!==0?s:ue(n.nanos,r.nanos)}function MT(i,e){const n=i.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=fu(n[s],r[s]);if(a)return a}return ue(n.length,r.length)}function pu(i){return W0(i)}function W0(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const r=Do(n);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return ko(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Bt.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=W0(a);return r+"]"})(i.arrayValue):"mapValue"in i?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${W0(n.fields[o])}`;return s+"}"})(i.mapValue):Vt(61005,{value:i})}function Bg(i){switch(No(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ty(i);return e?16+Bg(e):16;case 5:return 2*i.stringValue.length;case 6:return ko(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+Bg(a)),0)})(i.arrayValue);case 10:case 11:return(function(r){let s=0;return Fo(r.fields,((a,o)=>{s+=a.length+Bg(o)})),s})(i.mapValue);default:throw Vt(13486,{value:i})}}function PT(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function X0(i){return!!i&&"integerValue"in i}function _w(i){return!!i&&"arrayValue"in i}function OT(i){return!!i&&"nullValue"in i}function LT(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Fg(i){return!!i&&"mapValue"in i}function hB(i){return(i?.mapValue?.fields||{})[vD]?.stringValue===_D}function yd(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Fo(i.mapValue.fields,((n,r)=>e.mapValue.fields[n]=yd(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yd(i.arrayValue.values[n]);return e}return{...i}}function dB(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===uB}class Pi{constructor(e){this.value=e}static empty(){return new Pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yd(n)}setAll(e){let n=Qn.emptyPath(),r={},s=[];e.forEach(((o,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=yd(o):s.push(u.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Fg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Fg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Fo(n,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new Pi(yd(this.value))}}function wD(i){const e=[];return Fo(i.fields,((n,r)=>{const s=new Qn([n]);if(Fg(r)){const a=wD(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)})),new Zi(e)}class oi{constructor(e,n,r,s,a,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=u}static newInvalidDocument(e){return new oi(e,0,$t.min(),$t.min(),$t.min(),Pi.empty(),0)}static newFoundDocument(e,n,r,s){return new oi(e,1,n,$t.min(),r,s,0)}static newNoDocument(e,n){return new oi(e,2,n,$t.min(),$t.min(),Pi.empty(),0)}static newUnknownDocument(e,n){return new oi(e,3,n,$t.min(),$t.min(),Pi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual($t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof oi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new oi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class om{constructor(e,n){this.position=e,this.inclusive=n}}function BT(i,e,n){let r=0;for(let s=0;s<i.position.length;s++){const a=e[s],o=i.position[s];if(a.field.isKeyField()?r=Bt.comparator(Bt.fromName(o.referenceValue),n.key):r=fu(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function FT(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Vs(i.position[n],e.position[n]))return!1;return!0}class lm{constructor(e,n="asc"){this.field=e,this.dir=n}}function fB(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class AD{}class Rn extends AD{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gB(e,n,r):n==="array-contains"?new bB(e,r):n==="in"?new vB(e,r):n==="not-in"?new _B(e,r):n==="array-contains-any"?new wB(e,r):new Rn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new mB(e,r):new yB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fu(n,this.value)):n!==null&&No(this.value)===No(n)&&this.matchesComparison(fu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xr extends AD{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xr(e,n)}matches(e){return xD(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xD(i){return i.op==="and"}function ED(i){return pB(i)&&xD(i)}function pB(i){for(const e of i.filters)if(e instanceof Xr)return!1;return!0}function Y0(i){if(i instanceof Rn)return i.field.canonicalString()+i.op.toString()+pu(i.value);if(ED(i))return i.filters.map((e=>Y0(e))).join(",");{const e=i.filters.map((n=>Y0(n))).join(",");return`${i.op}(${e})`}}function SD(i,e){return i instanceof Rn?(function(r,s){return s instanceof Rn&&r.op===s.op&&r.field.isEqual(s.field)&&Vs(r.value,s.value)})(i,e):i instanceof Xr?(function(r,s){return s instanceof Xr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,o,u)=>a&&SD(o,s.filters[u])),!0):!1})(i,e):void Vt(19439)}function TD(i){return i instanceof Rn?(function(n){return`${n.field.canonicalString()} ${n.op} ${pu(n.value)}`})(i):i instanceof Xr?(function(n){return n.op.toString()+" {"+n.getFilters().map(TD).join(" ,")+"}"})(i):"Filter"}class gB extends Rn{constructor(e,n,r){super(e,n,r),this.key=Bt.fromName(r.referenceValue)}matches(e){const n=Bt.comparator(e.key,this.key);return this.matchesComparison(n)}}class mB extends Rn{constructor(e,n){super(e,"in",n),this.keys=CD("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class yB extends Rn{constructor(e,n){super(e,"not-in",n),this.keys=CD("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function CD(i,e){return(e.arrayValue?.values||[]).map((n=>Bt.fromName(n.referenceValue)))}class bB extends Rn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _w(n)&&Pd(n.arrayValue,this.value)}}class vB extends Rn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pd(this.value.arrayValue,n)}}class _B extends Rn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Pd(this.value.arrayValue,n)}}class wB extends Rn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_w(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Pd(this.value.arrayValue,r)))}}class AB{constructor(e,n=null,r=[],s=[],a=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=u,this.Te=null}}function UT(i,e=null,n=[],r=[],s=null,a=null,o=null){return new AB(i,e,n,r,s,a,o)}function ww(i){const e=Yt(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Y0(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Jm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>pu(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>pu(r))).join(",")),e.Te=n}return e.Te}function Aw(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!fB(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!SD(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!FT(i.startAt,e.startAt)&&FT(i.endAt,e.endAt)}function K0(i){return Bt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class hf{constructor(e,n=null,r=[],s=[],a=null,o="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xB(i,e,n,r,s,a,o,u){return new hf(i,e,n,r,s,a,o,u)}function xw(i){return new hf(i)}function VT(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function RD(i){return i.collectionGroup!==null}function bd(i){const e=Yt(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Nn(Qn.comparator);return o.filters.forEach((h=>{h.getFlattenedFilters().forEach((d=>{d.isInequality()&&(u=u.add(d.field))}))})),u})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new lm(a,r))})),n.has(Qn.keyField().canonicalString())||e.Ie.push(new lm(Qn.keyField(),r))}return e.Ie}function Ps(i){const e=Yt(i);return e.Ee||(e.Ee=EB(e,bd(i))),e.Ee}function EB(i,e){if(i.limitType==="F")return UT(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new lm(s.field,a)}));const n=i.endAt?new om(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new om(i.startAt.position,i.startAt.inclusive):null;return UT(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function Q0(i,e){const n=i.filters.concat([e]);return new hf(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Z0(i,e,n){return new hf(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function ey(i,e){return Aw(Ps(i),Ps(e))&&i.limitType===e.limitType}function ID(i){return`${ww(Ps(i))}|lt:${i.limitType}`}function Hc(i){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>TD(s))).join(", ")}]`),Jm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>pu(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>pu(s))).join(",")),`Target(${r})`})(Ps(i))}; limitType=${i.limitType})`}function ny(i,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Bt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(i,e)&&(function(r,s){for(const a of bd(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(i,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(i,e)&&(function(r,s){return!(r.startAt&&!(function(o,u,h){const d=BT(o,u,h);return o.inclusive?d<=0:d<0})(r.startAt,bd(r),s)||r.endAt&&!(function(o,u,h){const d=BT(o,u,h);return o.inclusive?d>=0:d>0})(r.endAt,bd(r),s))})(i,e)}function SB(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function DD(i){return(e,n)=>{let r=!1;for(const s of bd(i)){const a=TB(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function TB(i,e,n){const r=i.field.isKeyField()?Bt.comparator(e.key,n.key):(function(a,o,u){const h=o.data.field(a),d=u.data.field(a);return h!==null&&d!==null?fu(h,d):Vt(42886)})(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Vt(19790,{direction:i.dir})}}class Xl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Fo(this.inner,((n,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return fD(this.inner)}size(){return this.innerSize}}const CB=new sn(Bt.comparator);function Sa(){return CB}const kD=new sn(Bt.comparator);function sd(...i){let e=kD;for(const n of i)e=e.insert(n.key,n);return e}function ND(i){let e=kD;return i.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function El(){return vd()}function MD(){return vd()}function vd(){return new Xl((i=>i.toString()),((i,e)=>i.isEqual(e)))}const RB=new sn(Bt.comparator),IB=new Nn(Bt.comparator);function he(...i){let e=IB;for(const n of i)e=e.add(n);return e}const DB=new Nn(ue);function kB(){return DB}function Ew(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rm(e)?"-0":e}}function PD(i){return{integerValue:""+i}}function NB(i,e){return sB(e)?PD(e):Ew(i,e)}class iy{constructor(){this._=void 0}}function MB(i,e,n){return i instanceof cm?(function(s,a){const o={fields:{[mD]:{stringValue:gD},[bD]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&vw(a)&&(a=ty(a)),a&&(o.fields[yD]=a),{mapValue:o}})(n,e):i instanceof Od?LD(i,e):i instanceof Ld?BD(i,e):(function(s,a){const o=OD(s,a),u=jT(o)+jT(s.Ae);return X0(o)&&X0(s.Ae)?PD(u):Ew(s.serializer,u)})(i,e)}function PB(i,e,n){return i instanceof Od?LD(i,e):i instanceof Ld?BD(i,e):n}function OD(i,e){return i instanceof um?(function(r){return X0(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class cm extends iy{}class Od extends iy{constructor(e){super(),this.elements=e}}function LD(i,e){const n=FD(e);for(const r of i.elements)n.some((s=>Vs(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Ld extends iy{constructor(e){super(),this.elements=e}}function BD(i,e){let n=FD(e);for(const r of i.elements)n=n.filter((s=>!Vs(s,r)));return{arrayValue:{values:n}}}class um extends iy{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function jT(i){return yn(i.integerValue||i.doubleValue)}function FD(i){return _w(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function OB(i,e){return i.field.isEqual(e.field)&&(function(r,s){return r instanceof Od&&s instanceof Od||r instanceof Ld&&s instanceof Ld?du(r.elements,s.elements,Vs):r instanceof um&&s instanceof um?Vs(r.Ae,s.Ae):r instanceof cm&&s instanceof cm})(i.transform,e.transform)}class LB{constructor(e,n){this.version=e,this.transformResults=n}}class Wr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wr}static exists(e){return new Wr(void 0,e)}static updateTime(e){return new Wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ug(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class ry{}function UD(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Sw(i.key,Wr.none()):new df(i.key,i.data,Wr.none());{const n=i.data,r=Pi.empty();let s=new Nn(Qn.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new Uo(i.key,r,new Zi(s.toArray()),Wr.none())}}function BB(i,e,n){i instanceof df?(function(s,a,o){const u=s.value.clone(),h=HT(s.fieldTransforms,a,o.transformResults);u.setAll(h),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(i,e,n):i instanceof Uo?(function(s,a,o){if(!Ug(s.precondition,a))return void a.convertToUnknownDocument(o.version);const u=HT(s.fieldTransforms,a,o.transformResults),h=a.data;h.setAll(VD(s)),h.setAll(u),a.convertToFoundDocument(o.version,h).setHasCommittedMutations()})(i,e,n):(function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function _d(i,e,n,r){return i instanceof df?(function(a,o,u,h){if(!Ug(a.precondition,o))return u;const d=a.value.clone(),p=$T(a.fieldTransforms,h,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(i,e,n,r):i instanceof Uo?(function(a,o,u,h){if(!Ug(a.precondition,o))return u;const d=$T(a.fieldTransforms,h,o),p=o.data;return p.setAll(VD(a)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(i,e,n,r):(function(a,o,u){return Ug(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u})(i,e,n)}function FB(i,e){let n=null;for(const r of i.fieldTransforms){const s=e.data.field(r.field),a=OD(r.transform,s||null);a!=null&&(n===null&&(n=Pi.empty()),n.set(r.field,a))}return n||null}function zT(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&du(r,s,((a,o)=>OB(a,o)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class df extends ry{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Uo extends ry{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function VD(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}})),e}function HT(i,e,n){const r=new Map;xe(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let s=0;s<n.length;s++){const a=i[s],o=a.transform,u=e.data.field(a.field);r.set(a.field,PB(o,u,n[s]))}return r}function $T(i,e,n){const r=new Map;for(const s of i){const a=s.transform,o=n.data.field(s.field);r.set(s.field,MB(a,o,e))}return r}class Sw extends ry{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UB extends ry{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class VB{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&BB(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_d(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_d(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=MD();return this.mutations.forEach((s=>{const a=e.get(s.key),o=a.overlayedDocument;let u=this.applyToLocalView(o,a.mutatedFields);u=n.has(s.key)?null:u;const h=UD(o,u);h!==null&&r.set(s.key,h),o.isValidDocument()||o.convertToNoDocument($t.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),he())}isEqual(e){return this.batchId===e.batchId&&du(this.mutations,e.mutations,((n,r)=>zT(n,r)))&&du(this.baseMutations,e.baseMutations,((n,r)=>zT(n,r)))}}class Tw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return RB})();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new Tw(e,n,r,s)}}class jB{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class zB{constructor(e,n){this.count=e,this.unchangedNames=n}}var Cn,ge;function HB(i){switch(i){case pt.OK:return Vt(64938);case pt.CANCELLED:case pt.UNKNOWN:case pt.DEADLINE_EXCEEDED:case pt.RESOURCE_EXHAUSTED:case pt.INTERNAL:case pt.UNAVAILABLE:case pt.UNAUTHENTICATED:return!1;case pt.INVALID_ARGUMENT:case pt.NOT_FOUND:case pt.ALREADY_EXISTS:case pt.PERMISSION_DENIED:case pt.FAILED_PRECONDITION:case pt.ABORTED:case pt.OUT_OF_RANGE:case pt.UNIMPLEMENTED:case pt.DATA_LOSS:return!0;default:return Vt(15467,{code:i})}}function jD(i){if(i===void 0)return Ea("GRPC error has no .code"),pt.UNKNOWN;switch(i){case Cn.OK:return pt.OK;case Cn.CANCELLED:return pt.CANCELLED;case Cn.UNKNOWN:return pt.UNKNOWN;case Cn.DEADLINE_EXCEEDED:return pt.DEADLINE_EXCEEDED;case Cn.RESOURCE_EXHAUSTED:return pt.RESOURCE_EXHAUSTED;case Cn.INTERNAL:return pt.INTERNAL;case Cn.UNAVAILABLE:return pt.UNAVAILABLE;case Cn.UNAUTHENTICATED:return pt.UNAUTHENTICATED;case Cn.INVALID_ARGUMENT:return pt.INVALID_ARGUMENT;case Cn.NOT_FOUND:return pt.NOT_FOUND;case Cn.ALREADY_EXISTS:return pt.ALREADY_EXISTS;case Cn.PERMISSION_DENIED:return pt.PERMISSION_DENIED;case Cn.FAILED_PRECONDITION:return pt.FAILED_PRECONDITION;case Cn.ABORTED:return pt.ABORTED;case Cn.OUT_OF_RANGE:return pt.OUT_OF_RANGE;case Cn.UNIMPLEMENTED:return pt.UNIMPLEMENTED;case Cn.DATA_LOSS:return pt.DATA_LOSS;default:return Vt(39323,{code:i})}}(ge=Cn||(Cn={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";function $B(){return new TextEncoder}const GB=new Ao([4294967295,4294967295],0);function GT(i){const e=$B().encode(i),n=new nD;return n.update(e),new Uint8Array(n.digest())}function qT(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ao([n,r],0),new Ao([s,a],0)]}class Cw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ad(`Invalid padding: ${n}`);if(r<0)throw new ad(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ad(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ad(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ao.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ao.fromNumber(r)));return s.compare(GB)===1&&(s=new Ao([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=GT(e),[r,s]=qT(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Cw(a,s,n);return r.forEach((u=>o.insert(u))),o}insert(e){if(this.ge===0)return;const n=GT(e),[r,s]=qT(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ad extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sy{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ff.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new sy($t.min(),s,new sn(ue),Sa(),he())}}class ff{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ff(r,n,he(),he(),he())}}class Vg{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class zD{constructor(e,n){this.targetId=e,this.Ce=n}}class HD{constructor(e,n,r=Jn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class WT{constructor(){this.ve=0,this.Fe=XT(),this.Me=Jn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=he(),n=he(),r=he();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Vt(38017,{changeType:a})}})),new ff(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=XT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qB{constructor(e){this.Ge=e,this.ze=new Map,this.je=Sa(),this.Je=og(),this.He=og(),this.Ye=new sn(ue)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Vt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(K0(a))if(r===0){const o=new Bt(a.path);this.et(n,o,oi.newNoDocument(o,$t.min()))}else xe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const u=this.ut(e),h=u?this.ct(u,e,o):1;if(h!==0){this.it(n);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,u;try{o=ko(r).toUint8Array()}catch(h){if(h instanceof pD)return hu("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new Cw(o,s,a)}catch(h){return hu(h instanceof ad?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((a=>{const o=this.Ge.ht(),u=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.et(n,a,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((a,o)=>{const u=this.ot(o);if(u){if(a.current&&K0(u.target)){const h=new Bt(u.target.path);this.It(h).has(o)||this.Et(o,h)||this.et(o,h,oi.newNoDocument(h,e))}a.Be&&(n.set(o,a.ke()),a.qe())}}));let r=he();this.He.forEach(((a,o)=>{let u=!0;o.forEachWhile((h=>{const d=this.ot(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const s=new sy(e,n,this.Ye,this.je,r);return this.je=Sa(),this.Je=og(),this.He=og(),this.Ye=new sn(ue),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new WT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Nn(ue),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Nn(ue),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Et("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new WT),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function og(){return new sn(Bt.comparator)}function XT(){return new sn(Bt.comparator)}const WB={asc:"ASCENDING",desc:"DESCENDING"},XB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YB={and:"AND",or:"OR"};class KB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function J0(i,e){return i.useProto3Json||Jm(e)?e:{value:e}}function hm(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $D(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function QB(i,e){return hm(i,e.toTimestamp())}function Os(i){return xe(!!i,49232),$t.fromTimestamp((function(n){const r=Do(n);return new qe(r.seconds,r.nanos)})(i))}function Rw(i,e){return t_(i,e).canonicalString()}function t_(i,e){const n=(function(s){return new je(["projects",s.projectId,"databases",s.database])})(i).child("documents");return e===void 0?n:n.child(e)}function GD(i){const e=je.fromString(i);return xe(KD(e),10190,{key:e.toString()}),e}function e_(i,e){return Rw(i.databaseId,e.path)}function Xv(i,e){const n=GD(e);if(n.get(1)!==i.databaseId.projectId)throw new St(pt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new St(pt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Bt(WD(n))}function qD(i,e){return Rw(i.databaseId,e)}function ZB(i){const e=GD(i);return e.length===4?je.emptyPath():WD(e)}function n_(i){return new je(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function WD(i){return xe(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function YT(i,e,n){return{name:e_(i,e),fields:n.value.mapValue.fields}}function JB(i,e){let n;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Vt(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(d,p){return d.useProto3Json?(xe(p===void 0||typeof p=="string",58123),Jn.fromBase64String(p||"")):(xe(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Jn.fromUint8Array(p||new Uint8Array))})(i,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&(function(d){const p=d.code===void 0?pt.UNKNOWN:jD(d.code);return new St(p,d.message||"")})(o);n=new HD(r,s,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Xv(i,r.document.name),a=Os(r.document.updateTime),o=r.document.createTime?Os(r.document.createTime):$t.min(),u=new Pi({mapValue:{fields:r.document.fields}}),h=oi.newFoundDocument(s,a,o,u),d=r.targetIds||[],p=r.removedTargetIds||[];n=new Vg(d,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Xv(i,r.document),a=r.readTime?Os(r.readTime):$t.min(),o=oi.newNoDocument(s,a),u=r.removedTargetIds||[];n=new Vg([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Xv(i,r.document),a=r.removedTargetIds||[];n=new Vg([],a,s,null)}else{if(!("filter"in e))return Vt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new zB(s,a),u=r.targetId;n=new zD(u,o)}}return n}function tF(i,e){let n;if(e instanceof df)n={update:YT(i,e.key,e.value)};else if(e instanceof Sw)n={delete:e_(i,e.key)};else if(e instanceof Uo)n={update:YT(i,e.key,e.data),updateMask:cF(e.fieldMask)};else{if(!(e instanceof UB))return Vt(16599,{Vt:e.type});n={verify:e_(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const u=o.transform;if(u instanceof cm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Od)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ld)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof um)return{fieldPath:o.field.canonicalString(),increment:u.Ae};throw Vt(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:QB(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Vt(27497)})(i,e.precondition)),n}function eF(i,e){return i&&i.length>0?(xe(e!==void 0,14353),i.map((n=>(function(s,a){let o=s.updateTime?Os(s.updateTime):Os(a);return o.isEqual($t.min())&&(o=Os(a)),new LB(o,s.transformResults||[])})(n,e)))):[]}function nF(i,e){return{documents:[qD(i,e.path)]}}function iF(i,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qD(i,s);const a=(function(d){if(d.length!==0)return YD(Xr.create(d,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const o=(function(d){if(d.length!==0)return d.map((p=>(function(y){return{field:$c(y.field),direction:aF(y.dir)}})(p)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=J0(i,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:s}}function rF(i){let e=ZB(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){xe(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let a=[];n.where&&(a=(function(g){const y=XD(g);return y instanceof Xr&&ED(y)?y.getFilters():[y]})(n.where));let o=[];n.orderBy&&(o=(function(g){return g.map((y=>(function(w){return new lm(Gc(w.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(y)))})(n.orderBy));let u=null;n.limit&&(u=(function(g){let y;return y=typeof g=="object"?g.value:g,Jm(y)?null:y})(n.limit));let h=null;n.startAt&&(h=(function(g){const y=!!g.before,b=g.values||[];return new om(b,y)})(n.startAt));let d=null;return n.endAt&&(d=(function(g){const y=!g.before,b=g.values||[];return new om(b,y)})(n.endAt)),xB(e,s,o,a,u,"F",h,d)}function sF(i,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Vt(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XD(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Gc(n.unaryFilter.field);return Rn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Gc(n.unaryFilter.field);return Rn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Gc(n.unaryFilter.field);return Rn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Gc(n.unaryFilter.field);return Rn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Vt(61313);default:return Vt(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Rn.create(Gc(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Vt(58110);default:return Vt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Xr.create(n.compositeFilter.filters.map((r=>XD(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Vt(1026)}})(n.compositeFilter.op))})(i):Vt(30097,{filter:i})}function aF(i){return WB[i]}function oF(i){return XB[i]}function lF(i){return YB[i]}function $c(i){return{fieldPath:i.canonicalString()}}function Gc(i){return Qn.fromServerFormat(i.fieldPath)}function YD(i){return i instanceof Rn?(function(n){if(n.op==="=="){if(LT(n.value))return{unaryFilter:{field:$c(n.field),op:"IS_NAN"}};if(OT(n.value))return{unaryFilter:{field:$c(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(LT(n.value))return{unaryFilter:{field:$c(n.field),op:"IS_NOT_NAN"}};if(OT(n.value))return{unaryFilter:{field:$c(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$c(n.field),op:oF(n.op),value:n.value}}})(i):i instanceof Xr?(function(n){const r=n.getFilters().map((s=>YD(s)));return r.length===1?r[0]:{compositeFilter:{op:lF(n.op),filters:r}}})(i):Vt(54877,{filter:i})}function cF(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function KD(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class vo{constructor(e,n,r,s,a=$t.min(),o=$t.min(),u=Jn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new vo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class uF{constructor(e){this.yt=e}}function hF(i){const e=rF({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Z0(e,e.limit,"L"):e}class dF{constructor(){this.Cn=new fF}addToCollectionParentIndex(e,n){return this.Cn.add(n),gt.resolve()}getCollectionParents(e,n){return gt.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return gt.resolve()}deleteFieldIndex(e,n){return gt.resolve()}deleteAllFieldIndexes(e){return gt.resolve()}createTargetIndexes(e,n){return gt.resolve()}getDocumentsMatchingTarget(e,n){return gt.resolve(null)}getIndexType(e,n){return gt.resolve(0)}getFieldIndexes(e,n){return gt.resolve([])}getNextCollectionGroupToUpdate(e){return gt.resolve(null)}getMinOffset(e,n){return gt.resolve(Io.min())}getMinOffsetFromCollectionGroup(e,n){return gt.resolve(Io.min())}updateCollectionGroup(e,n,r){return gt.resolve()}updateIndexEntries(e,n){return gt.resolve()}}class fF{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Nn(je.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Nn(je.comparator)).toArray()}}const KT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QD=41943040;class Mi{static withCacheSize(e){return new Mi(e,Mi.DEFAULT_COLLECTION_PERCENTILE,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Mi.DEFAULT_COLLECTION_PERCENTILE=10,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mi.DEFAULT=new Mi(QD,Mi.DEFAULT_COLLECTION_PERCENTILE,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mi.DISABLED=new Mi(-1,0,0);class gu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new gu(0)}static cr(){return new gu(-1)}}const QT="LruGarbageCollector",pF=1048576;function ZT([i,e],[n,r]){const s=ue(i,n);return s===0?ue(e,r):s}class gF{constructor(e){this.Ir=e,this.buffer=new Nn(ZT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ZT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mF{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Et(QT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ku(n)?Et(QT,"Ignoring IndexedDB error during garbage collection: ",n):await Du(n)}await this.Vr(3e5)}))}}class yF{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return gt.resolve(Zm.ce);const r=new gF(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Et("LruGarbageCollector","Garbage collection skipped; disabled"),gt.resolve(KT)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Et("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KT):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,a,o,u,h,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,o=Date.now(),this.nthSequenceNumber(e,s)))).next((g=>(r=g,u=Date.now(),this.removeTargets(e,r,n)))).next((g=>(a=g,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(d=Date.now(),zc()<=le.DEBUG&&Et("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${s} in `+(u-o)+`ms
	Removed ${a} targets in `+(h-u)+`ms
	Removed ${g} documents in `+(d-h)+`ms
Total Duration: ${d-p}ms`),gt.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:g}))))}}function bF(i,e){return new yF(i,e)}class vF{constructor(){this.changes=new Xl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,oi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?gt.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _F{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class wF{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&_d(r.mutation,s,Zi.empty(),qe.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,he()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=he()){const s=El();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((a=>{let o=sd();return a.forEach(((u,h)=>{o=o.insert(u,h.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=El();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,he())))}populateOverlays(e,n,r){const s=[];return r.forEach((a=>{n.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((o,u)=>{n.set(o,u)}))}))}computeViews(e,n,r,s){let a=Sa();const o=vd(),u=(function(){return vd()})();return n.forEach(((h,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof Uo)?a=a.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),_d(p.mutation,d,p.mutation.getFieldMask(),qe.now())):o.set(d.key,Zi.empty())})),this.recalculateAndSaveOverlays(e,a).next((h=>(h.forEach(((d,p)=>o.set(d,p))),n.forEach(((d,p)=>u.set(d,new _F(p,o.get(d)??null)))),u)))}recalculateAndSaveOverlays(e,n){const r=vd();let s=new sn(((o,u)=>o-u)),a=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const u of o)u.keys().forEach((h=>{const d=n.get(h);if(d===null)return;let p=r.get(h)||Zi.empty();p=u.applyToLocalView(d,p),r.set(h,p);const g=(s.get(u.batchId)||he()).add(h);s=s.insert(u.batchId,g)}))})).next((()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),d=h.key,p=h.value,g=MD();p.forEach((y=>{if(!a.has(y)){const b=UD(n.get(y),r.get(y));b!==null&&g.set(y,b),a=a.add(y)}})),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return gt.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return Bt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):RD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):gt.resolve(El());let u=kd,h=a;return o.next((d=>gt.forEach(d,((p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),a.get(p)?gt.resolve():this.remoteDocumentCache.getEntry(e,p).next((y=>{h=h.insert(p,y)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,h,d,he()))).next((p=>({batchId:u,changes:ND(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Bt(n)).next((r=>{let s=sd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=sd();return this.indexManager.getCollectionParents(e,a).next((u=>gt.forEach(u,(h=>{const d=(function(g,y){return new hf(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next((p=>{p.forEach(((g,y)=>{o=o.insert(g,y)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s)))).next((o=>{a.forEach(((h,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,oi.newInvalidDocument(p)))}));let u=sd();return o.forEach(((h,d)=>{const p=a.get(h);p!==void 0&&_d(p.mutation,d,Zi.empty(),qe.now()),ny(n,d)&&(u=u.insert(h,d))})),u}))}}class AF{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return gt.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Os(s.createTime)}})(n)),gt.resolve()}getNamedQuery(e,n){return gt.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:hF(s.bundledQuery),readTime:Os(s.readTime)}})(n)),gt.resolve()}}class xF{constructor(){this.overlays=new sn(Bt.comparator),this.qr=new Map}getOverlay(e,n){return gt.resolve(this.overlays.get(n))}getOverlays(e,n){const r=El();return gt.forEach(n,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,a)=>{this.St(e,n,a)})),gt.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),gt.resolve()}getOverlaysForCollection(e,n,r){const s=El(),a=n.length+1,o=new Bt(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const h=u.getNext().value,d=h.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&h.largestBatchId>r&&s.set(h.getKey(),h)}return gt.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new sn(((d,p)=>d-p));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=a.get(d.largestBatchId);p===null&&(p=El(),a=a.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const u=El(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((d,p)=>u.set(d,p))),!(u.size()>=s)););return gt.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new jB(n,r));let a=this.qr.get(n);a===void 0&&(a=he(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}class EF{constructor(){this.sessionToken=Jn.EMPTY_BYTE_STRING}getSessionToken(e){return gt.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,gt.resolve()}}class Iw{constructor(){this.Qr=new Nn(Fn.$r),this.Ur=new Nn(Fn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Fn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Fn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Bt(new je([])),r=new Fn(n,e),s=new Fn(n,e+1),a=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Bt(new je([])),r=new Fn(n,e),s=new Fn(n,e+1);let a=he();return this.Ur.forEachInRange([r,s],(o=>{a=a.add(o.key)})),a}containsKey(e){const n=new Fn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Fn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Bt.comparator(e.key,n.key)||ue(e.Yr,n.Yr)}static Kr(e,n){return ue(e.Yr,n.Yr)||Bt.comparator(e.key,n.key)}}class SF{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Nn(Fn.$r)}checkEmpty(e){return gt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new VB(a,n,r,s);this.mutationQueue.push(o);for(const u of s)this.Zr=this.Zr.add(new Fn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return gt.resolve(o)}lookupMutationBatch(e,n){return gt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),a=s<0?0:s;return gt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return gt.resolve(this.mutationQueue.length===0?bw:this.tr-1)}getAllMutationBatches(e){return gt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Fn(n,0),s=new Fn(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,s],(o=>{const u=this.Xr(o.Yr);a.push(u)})),gt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nn(ue);return n.forEach((s=>{const a=new Fn(s,0),o=new Fn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(u=>{r=r.add(u.Yr)}))})),gt.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;Bt.isDocumentKey(a)||(a=a.child(""));const o=new Fn(new Bt(a),0);let u=new Nn(ue);return this.Zr.forEachWhile((h=>{const d=h.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(u=u.add(h.Yr)),!0)}),o),gt.resolve(this.ti(u))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){xe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return gt.forEach(n.mutations,(s=>{const a=new Fn(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Fn(n,0),s=this.Zr.firstAfterOrEqual(r);return gt.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,gt.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class TF{constructor(e){this.ri=e,this.docs=(function(){return new sn(Bt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return gt.resolve(r?r.document.mutableCopy():oi.newInvalidDocument(n))}getEntries(e,n){let r=Sa();return n.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():oi.newInvalidDocument(s))})),gt.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Sa();const o=n.path,u=new Bt(o.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:d,value:{document:p}}=h.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||eB(tB(p),r)<=0||(s.has(p.key)||ny(n,p))&&(a=a.insert(p.key,p.mutableCopy()))}return gt.resolve(a)}getAllFromCollectionGroup(e,n,r,s){Vt(9500)}ii(e,n){return gt.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new CF(this)}getSize(e){return gt.resolve(this.size)}}class CF extends vF{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),gt.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class RF{constructor(e){this.persistence=e,this.si=new Xl((n=>ww(n)),Aw),this.lastRemoteSnapshotVersion=$t.min(),this.highestTargetId=0,this.oi=0,this._i=new Iw,this.targetCount=0,this.ai=gu.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),gt.resolve()}getLastRemoteSnapshotVersion(e){return gt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return gt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),gt.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),gt.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new gu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,gt.resolve()}updateTargetData(e,n){return this.Pr(n),gt.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,gt.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.si.forEach(((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),gt.waitFor(a).next((()=>s))}getTargetCount(e){return gt.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return gt.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),gt.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach((o=>{a.push(s.markPotentiallyOrphaned(e,o))})),gt.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),gt.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return gt.resolve(r)}containsKey(e,n){return gt.resolve(this._i.containsKey(n))}}class ZD{constructor(e,n){this.ui={},this.overlays={},this.ci=new Zm(0),this.li=!1,this.li=!0,this.hi=new EF,this.referenceDelegate=e(this),this.Pi=new RF(this),this.indexManager=new dF,this.remoteDocumentCache=(function(s){return new TF(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new uF(n),this.Ii=new AF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xF,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new SF(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Et("MemoryPersistence","Starting transaction:",e);const s=new IF(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ai(e,n){return gt.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class IF extends iB{constructor(e){super(),this.currentSequenceNumber=e}}class Dw{constructor(e){this.persistence=e,this.Ri=new Iw,this.Vi=null}static mi(e){return new Dw(e)}get fi(){if(this.Vi)return this.Vi;throw Vt(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),gt.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),gt.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),gt.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gt.forEach(this.fi,(r=>{const s=Bt.fromPath(r);return this.gi(e,s).next((a=>{a||n.removeEntry(s,$t.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return gt.or([()=>gt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class dm{constructor(e,n){this.persistence=e,this.pi=new Xl((r=>aB(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=bF(this,n)}static mi(e,n){return new dm(e,n)}Ei(){}di(e){return gt.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return gt.forEach(this.pi,((r,s)=>this.br(e,r,s).next((a=>a?gt.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((u=>{u||(r++,a.removeEntry(o,$t.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),gt.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),gt.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),gt.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),gt.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Bg(e.data.value)),n}br(e,n,r){return gt.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return gt.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class kw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=he(),s=he();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new kw(e,n.fromCache,r,s)}}class DF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class kF{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return w3()?8:rB(ci())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ys(e,n).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,n,s,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new DF;return this.Ss(e,n,o).next((u=>{if(a.result=u,this.Vs)return this.bs(e,n,o,u.size)}))})).next((()=>a.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(zc()<=le.DEBUG&&Et("QueryEngine","SDK will not create cache indexes for query:",Hc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),gt.resolve()):(zc()<=le.DEBUG&&Et("QueryEngine","Query:",Hc(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(zc()<=le.DEBUG&&Et("QueryEngine","The SDK decides to create cache indexes for query:",Hc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ps(n))):gt.resolve())}ys(e,n){if(VT(n))return gt.resolve(null);let r=Ps(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Z0(n,null,"F"),r=Ps(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=he(...a);return this.ps.getDocuments(e,o).next((u=>this.indexManager.getMinOffset(e,r).next((h=>{const d=this.Ds(n,u);return this.Cs(n,d,o,h.readTime)?this.ys(e,Z0(n,null,"F")):this.vs(e,d,n,h)}))))})))))}ws(e,n,r,s){return VT(n)||s.isEqual($t.min())?gt.resolve(null):this.ps.getDocuments(e,r).next((a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,s)?gt.resolve(null):(zc()<=le.DEBUG&&Et("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Hc(n)),this.vs(e,o,n,J5(s,kd)).next((u=>u)))}))}Ds(e,n){let r=new Nn(DD(e));return n.forEach(((s,a)=>{ny(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return zc()<=le.DEBUG&&Et("QueryEngine","Using full collection scan to execute query:",Hc(n)),this.ps.getDocumentsMatchingQuery(e,n,Io.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((a=>(n.forEach((o=>{a=a.insert(o.key,o)})),a)))}}const Nw="LocalStore",NF=3e8;class MF{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new sn(ue),this.xs=new Xl((a=>ww(a)),Aw),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wF(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function PF(i,e,n,r){return new MF(i,e,n,r)}async function JD(i,e){const n=Yt(i);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],u=[];let h=he();for(const d of s){o.push(d.batchId);for(const p of d.mutations)h=h.add(p.key)}for(const d of a){u.push(d.batchId);for(const p of d.mutations)h=h.add(p.key)}return n.localDocuments.getDocuments(r,h).next((d=>({Ls:d,removedBatchIds:o,addedBatchIds:u})))}))}))}function OF(i,e){const n=Yt(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,h,d,p){const g=d.batch,y=g.keys();let b=gt.resolve();return y.forEach((w=>{b=b.next((()=>p.getEntry(h,w))).next((x=>{const S=d.docVersions.get(w);xe(S!==null,48541),x.version.compareTo(S)<0&&(g.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),p.addEntry(x)))}))})),b.next((()=>u.mutationQueue.removeMutationBatch(h,g)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let h=he();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(h=h.add(u.batch.mutations[d].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function tk(i){const e=Yt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function LF(i,e){const n=Yt(i),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const u=[];e.targetChanges.forEach(((p,g)=>{const y=s.get(g);if(!y)return;u.push(n.Pi.removeMatchingKeys(a,p.removedDocuments,g).next((()=>n.Pi.addMatchingKeys(a,p.addedDocuments,g))));let b=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(Jn.EMPTY_BYTE_STRING,$t.min()).withLastLimboFreeSnapshotVersion($t.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),s=s.insert(g,b),(function(x,S,E){return x.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=NF?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0})(y,b,p)&&u.push(n.Pi.updateTargetData(a,b))}));let h=Sa(),d=he();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,p))})),u.push(BF(a,o,e.documentUpdates).next((p=>{h=p.ks,d=p.qs}))),!r.isEqual($t.min())){const p=n.Pi.getLastRemoteSnapshotVersion(a).next((g=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));u.push(p)}return gt.waitFor(u).next((()=>o.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,h,d))).next((()=>h))})).then((a=>(n.Ms=s,a)))}function BF(i,e,n){let r=he(),s=he();return n.forEach((a=>r=r.add(a))),e.getEntries(i,r).next((a=>{let o=Sa();return n.forEach(((u,h)=>{const d=a.get(u);h.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual($t.min())?(e.removeEntry(u,h.readTime),o=o.insert(u,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),o=o.insert(u,h)):Et(Nw,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",h.version)})),{ks:o,qs:s}}))}function FF(i,e){const n=Yt(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=bw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function UF(i,e){const n=Yt(i);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((a=>a?(s=a,gt.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new vo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function i_(i,e,n){const r=Yt(i),s=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!ku(o))throw o;Et(Nw,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function JT(i,e,n){const r=Yt(i);let s=$t.min(),a=he();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(h,d,p){const g=Yt(h),y=g.xs.get(p);return y!==void 0?gt.resolve(g.Ms.get(y)):g.Pi.getTargetData(d,p)})(r,o,Ps(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,u.targetId).next((h=>{a=h}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:$t.min(),n?a:he()))).next((u=>(VF(r,SB(e),u),{documents:u,Qs:a})))))}function VF(i,e,n){let r=i.Os.get(e)||$t.min();n.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),i.Os.set(e,r)}class tC{constructor(){this.activeTargetIds=kB()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jF{constructor(){this.Mo=new tC,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new tC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zF{Oo(e){}shutdown(){}}const eC="ConnectivityMonitor";class nC{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Et(eC,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Et(eC,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let lg=null;function r_(){return lg===null?lg=(function(){return 268435456+Math.round(2147483648*Math.random())})():lg++,"0x"+lg.toString(16)}const Yv="RestConnection",HF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $F{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===sm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,a){const o=r_(),u=this.zo(e,n.toUriEncodedString());Et(Yv,`Sending RPC '${e}' ${o}:`,u,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,s,a);const{host:d}=new URL(u),p=Bo(d);return this.Jo(e,u,h,r,p).then((g=>(Et(Yv,`Received RPC '${e}' ${o}: `,g),g)),(g=>{throw hu(Yv,`RPC '${e}' ${o} failed with error: `,g,"url: ",u,"request:",r),g}))}Ho(e,n,r,s,a,o){return this.Go(e,n,r,s,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Iu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}zo(e,n){const r=HF[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class GF{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ii="WebChannelConnection";class qF extends $F{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const o=r_();return new Promise(((u,h)=>{const d=new iD;d.setWithCredentials(!0),d.listenOnce(rD.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Lg.NO_ERROR:const g=d.getResponseJson();Et(ii,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),u(g);break;case Lg.TIMEOUT:Et(ii,`RPC '${e}' ${o} timed out`),h(new St(pt.DEADLINE_EXCEEDED,"Request time out"));break;case Lg.HTTP_ERROR:const y=d.getStatus();if(Et(ii,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const w=b?.error;if(w&&w.status&&w.message){const x=(function(E){const k=E.toLowerCase().replace(/_/g,"-");return Object.values(pt).indexOf(k)>=0?k:pt.UNKNOWN})(w.status);h(new St(x,w.message))}else h(new St(pt.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new St(pt.UNAVAILABLE,"Connection failed."));break;default:Vt(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Et(ii,`RPC '${e}' ${o} completed.`)}}));const p=JSON.stringify(s);Et(ii,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",p,r,15)}))}T_(e,n,r){const s=r_(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=oD(),u=aD(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const p=a.join("");Et(ii,`Creating RPC '${e}' stream ${s}: ${p}`,h);const g=o.createWebChannel(p,h);this.I_(g);let y=!1,b=!1;const w=new GF({Yo:S=>{b?Et(ii,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(y||(Et(ii,`Opening RPC '${e}' stream ${s} transport.`),g.open(),y=!0),Et(ii,`RPC '${e}' stream ${s} sending:`,S),g.send(S))},Zo:()=>g.close()}),x=(S,E,k)=>{S.listen(E,(N=>{try{k(N)}catch(M){setTimeout((()=>{throw M}),0)}}))};return x(g,rd.EventType.OPEN,(()=>{b||(Et(ii,`RPC '${e}' stream ${s} transport opened.`),w.o_())})),x(g,rd.EventType.CLOSE,(()=>{b||(b=!0,Et(ii,`RPC '${e}' stream ${s} transport closed`),w.a_(),this.E_(g))})),x(g,rd.EventType.ERROR,(S=>{b||(b=!0,hu(ii,`RPC '${e}' stream ${s} transport errored. Name:`,S.name,"Message:",S.message),w.a_(new St(pt.UNAVAILABLE,"The operation could not be completed")))})),x(g,rd.EventType.MESSAGE,(S=>{if(!b){const E=S.data[0];xe(!!E,16349);const k=E,N=k?.error||k[0]?.error;if(N){Et(ii,`RPC '${e}' stream ${s} received error:`,N);const M=N.status;let O=(function(R){const L=Cn[R];if(L!==void 0)return jD(L)})(M),B=N.message;O===void 0&&(O=pt.INTERNAL,B="Unknown error status: "+M+" with message "+N.message),b=!0,w.a_(new St(O,B)),g.close()}else Et(ii,`RPC '${e}' stream ${s} received:`,E),w.u_(E)}})),x(u,sD.STAT_EVENT,(S=>{S.stat===G0.PROXY?Et(ii,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===G0.NOPROXY&&Et(ii,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{w.__()}),0),w}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Kv(){return typeof document<"u"?document:null}function ay(i){return new KB(i,!0)}class ek{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Et("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const iC="PersistentStream";class nk{constructor(e,n,r,s,a,o,u,h){this.Mi=e,this.S_=r,this.b_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ek(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===pt.RESOURCE_EXHAUSTED?(Ea(n.toString()),Ea("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===pt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new St(pt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Et(iC,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Et(iC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class WF extends nk{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=JB(this.serializer,e),r=(function(a){if(!("targetChange"in a))return $t.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?$t.min():o.readTime?Os(o.readTime):$t.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=n_(this.serializer),n.addTarget=(function(a,o){let u;const h=o.target;if(u=K0(h)?{documents:nF(a,h)}:{query:iF(a,h).ft},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=$D(a,o.resumeToken);const d=J0(a,o.expectedCount);d!==null&&(u.expectedCount=d)}else if(o.snapshotVersion.compareTo($t.min())>0){u.readTime=hm(a,o.snapshotVersion.toTimestamp());const d=J0(a,o.expectedCount);d!==null&&(u.expectedCount=d)}return u})(this.serializer,e);const r=sF(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=n_(this.serializer),n.removeTarget=e,this.q_(n)}}class XF extends nk{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=eF(e.writeResults,e.commitTime),r=Os(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=n_(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>tF(this.serializer,r)))};this.q_(n)}}class YF{}class KF extends YF{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new St(pt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,t_(n,r),s,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new St(pt.UNKNOWN,a.toString())}))}Ho(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Ho(e,t_(n,r),s,o,u,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new St(pt.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class QF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ea(n),this.aa=!1):Et("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Vl="RemoteStore";class ZF{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{Yl(this)&&(Et(Vl,"Restarting streams for network reachability change."),await(async function(h){const d=Yt(h);d.Ea.add(4),await pf(d),d.Ra.set("Unknown"),d.Ea.delete(4),await oy(d)})(this))}))})),this.Ra=new QF(r,s)}}async function oy(i){if(Yl(i))for(const e of i.da)await e(!0)}async function pf(i){for(const e of i.da)await e(!1)}function ik(i,e){const n=Yt(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Lw(n)?Ow(n):Nu(n).O_()&&Pw(n,e))}function Mw(i,e){const n=Yt(i),r=Nu(n);n.Ia.delete(e),r.O_()&&rk(n,e),n.Ia.size===0&&(r.O_()?r.L_():Yl(n)&&n.Ra.set("Unknown"))}function Pw(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($t.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Nu(i).Y_(e)}function rk(i,e){i.Va.Ue(e),Nu(i).Z_(e)}function Ow(i){i.Va=new qB({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Nu(i).start(),i.Ra.ua()}function Lw(i){return Yl(i)&&!Nu(i).x_()&&i.Ia.size>0}function Yl(i){return Yt(i).Ea.size===0}function sk(i){i.Va=void 0}async function JF(i){i.Ra.set("Online")}async function tU(i){i.Ia.forEach(((e,n)=>{Pw(i,e)}))}async function eU(i,e){sk(i),Lw(i)?(i.Ra.ha(e),Ow(i)):i.Ra.set("Unknown")}async function nU(i,e,n){if(i.Ra.set("Online"),e instanceof HD&&e.state===2&&e.cause)try{await(async function(s,a){const o=a.cause;for(const u of a.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.Ia.delete(u),s.Va.removeTarget(u))})(i,e)}catch(r){Et(Vl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await fm(i,r)}else if(e instanceof Vg?i.Va.Ze(e):e instanceof zD?i.Va.st(e):i.Va.tt(e),!n.isEqual($t.min()))try{const r=await tk(i.localStore);n.compareTo(r)>=0&&await(function(a,o){const u=a.Va.Tt(o);return u.targetChanges.forEach(((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const p=a.Ia.get(d);p&&a.Ia.set(d,p.withResumeToken(h.resumeToken,o))}})),u.targetMismatches.forEach(((h,d)=>{const p=a.Ia.get(h);if(!p)return;a.Ia.set(h,p.withResumeToken(Jn.EMPTY_BYTE_STRING,p.snapshotVersion)),rk(a,h);const g=new vo(p.target,h,d,p.sequenceNumber);Pw(a,g)})),a.remoteSyncer.applyRemoteEvent(u)})(i,n)}catch(r){Et(Vl,"Failed to raise snapshot:",r),await fm(i,r)}}async function fm(i,e,n){if(!ku(e))throw e;i.Ea.add(1),await pf(i),i.Ra.set("Offline"),n||(n=()=>tk(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Et(Vl,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await oy(i)}))}function ak(i,e){return e().catch((n=>fm(i,n,e)))}async function ly(i){const e=Yt(i),n=Mo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bw;for(;iU(e);)try{const s=await FF(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,rU(e,s)}catch(s){await fm(e,s)}ok(e)&&lk(e)}function iU(i){return Yl(i)&&i.Ta.length<10}function rU(i,e){i.Ta.push(e);const n=Mo(i);n.O_()&&n.X_&&n.ea(e.mutations)}function ok(i){return Yl(i)&&!Mo(i).x_()&&i.Ta.length>0}function lk(i){Mo(i).start()}async function sU(i){Mo(i).ra()}async function aU(i){const e=Mo(i);for(const n of i.Ta)e.ea(n.mutations)}async function oU(i,e,n){const r=i.Ta.shift(),s=Tw.from(r,e,n);await ak(i,(()=>i.remoteSyncer.applySuccessfulWrite(s))),await ly(i)}async function lU(i,e){e&&Mo(i).X_&&await(async function(r,s){if((function(o){return HB(o)&&o!==pt.ABORTED})(s.code)){const a=r.Ta.shift();Mo(r).B_(),await ak(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await ly(r)}})(i,e),ok(i)&&lk(i)}async function rC(i,e){const n=Yt(i);n.asyncQueue.verifyOperationInProgress(),Et(Vl,"RemoteStore received new credentials");const r=Yl(n);n.Ea.add(3),await pf(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await oy(n)}async function cU(i,e){const n=Yt(i);e?(n.Ea.delete(2),await oy(n)):e||(n.Ea.add(2),await pf(n),n.Ra.set("Unknown"))}function Nu(i){return i.ma||(i.ma=(function(n,r,s){const a=Yt(n);return a.sa(),new WF(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(i.datastore,i.asyncQueue,{Xo:JF.bind(null,i),t_:tU.bind(null,i),r_:eU.bind(null,i),H_:nU.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Lw(i)?Ow(i):i.Ra.set("Unknown")):(await i.ma.stop(),sk(i))}))),i.ma}function Mo(i){return i.fa||(i.fa=(function(n,r,s){const a=Yt(n);return a.sa(),new XF(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:sU.bind(null,i),r_:lU.bind(null,i),ta:aU.bind(null,i),na:oU.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await ly(i)):(await i.fa.stop(),i.Ta.length>0&&(Et(Vl,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Bw{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new kl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,u=new Bw(e,n,o,s,a);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new St(pt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fw(i,e){if(Ea("AsyncQueue",`${e}: ${i}`),ku(i))return new St(pt.UNAVAILABLE,`${e}: ${i}`);throw i}class tu{static emptySet(e){return new tu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Bt.comparator(n.key,r.key):(n,r)=>Bt.comparator(n.key,r.key),this.keyedMap=sd(),this.sortedSet=new sn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof tu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new tu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class sC{constructor(){this.ga=new sn(Bt.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Vt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class mu{constructor(e,n,r,s,a,o,u,h,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach((u=>{o.push({type:0,doc:u})})),new mu(e,n,tu.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ey(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class uU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class hU{constructor(){this.queries=aC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Yt(n),a=s.queries;s.queries=aC(),a.forEach(((o,u)=>{for(const h of u.Sa)h.onError(r)}))})(this,new St(pt.ABORTED,"Firestore shutting down"))}}function aC(){return new Xl((i=>ID(i)),ey)}async function dU(i,e){const n=Yt(i);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(r=2):(a=new uU,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=Fw(o,`Initialization of query '${Hc(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&Uw(n)}async function fU(i,e){const n=Yt(i),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function pU(i,e){const n=Yt(i);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const u of o.Sa)u.Fa(s)&&(r=!0);o.wa=s}}r&&Uw(n)}function gU(i,e,n){const r=Yt(i),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function Uw(i){i.Ca.forEach((e=>{e.next()}))}var s_,oC;(oC=s_||(s_={})).Ma="default",oC.Cache="cache";class mU{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new mu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=mu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==s_.Cache}}class ck{constructor(e){this.key=e}}class uk{constructor(e){this.key=e}}class yU{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=he(),this.mutatedKeys=he(),this.eu=DD(e),this.tu=new tu(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new sC,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((p,g)=>{const y=s.get(p),b=ny(this.query,g)?g:null,w=!!y&&this.mutatedKeys.has(y.key),x=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let S=!1;y&&b?y.data.isEqual(b.data)?w!==x&&(r.track({type:3,doc:b}),S=!0):this.su(y,b)||(r.track({type:2,doc:b}),S=!0,(h&&this.eu(b,h)>0||d&&this.eu(b,d)<0)&&(u=!0)):!y&&b?(r.track({type:0,doc:b}),S=!0):y&&!b&&(r.track({type:1,doc:y}),S=!0,(h||d)&&(u=!0)),S&&(b?(o=o.add(b),a=x?a.add(p):a.delete(p)):(o=o.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{tu:o,iu:r,Cs:u,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((p,g)=>(function(b,w){const x=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vt(20277,{Rt:S})}};return x(b)-x(w)})(p.type,g.type)||this.eu(p.doc,g.doc))),this.ou(r),s=s??!1;const u=n&&!s?this._u():[],h=this.Xa.size===0&&this.current&&!s?1:0,d=h!==this.Za;return this.Za=h,o.length!==0||d?{snapshot:new mu(this.query,e.tu,a,o,e.mutatedKeys,h===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sC,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=he(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new uk(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new ck(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=he();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return mu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Vw="SyncEngine";class bU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vU{constructor(e){this.key=e,this.hu=!1}}class _U{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Xl((u=>ID(u)),ey),this.Iu=new Map,this.Eu=new Set,this.du=new sn(Bt.comparator),this.Au=new Map,this.Ru=new Iw,this.Vu={},this.mu=new Map,this.fu=gu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wU(i,e,n=!0){const r=mk(i);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await hk(r,e,n,!0),s}async function AU(i,e){const n=mk(i);await hk(n,e,!0,!1)}async function hk(i,e,n,r){const s=await UF(i.localStore,Ps(e)),a=s.targetId,o=i.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await xU(i,e,a,o==="current",s.resumeToken)),i.isPrimaryClient&&n&&ik(i.remoteStore,s),u}async function xU(i,e,n,r,s){i.pu=(g,y,b)=>(async function(x,S,E,k){let N=S.view.ru(E);N.Cs&&(N=await JT(x.localStore,S.query,!1).then((({documents:C})=>S.view.ru(C,N))));const M=k&&k.targetChanges.get(S.targetId),O=k&&k.targetMismatches.get(S.targetId)!=null,B=S.view.applyChanges(N,x.isPrimaryClient,M,O);return cC(x,S.targetId,B.au),B.snapshot})(i,g,y,b);const a=await JT(i.localStore,e,!0),o=new yU(e,a.Qs),u=o.ru(a.documents),h=ff.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",s),d=o.applyChanges(u,i.isPrimaryClient,h);cC(i,n,d.au);const p=new bU(e,n,o);return i.Tu.set(e,p),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),d.snapshot}async function EU(i,e,n){const r=Yt(i),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter((o=>!ey(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await i_(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Mw(r.remoteStore,s.targetId),a_(r,s.targetId)})).catch(Du)):(a_(r,s.targetId),await i_(r.localStore,s.targetId,!0))}async function SU(i,e){const n=Yt(i),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mw(n.remoteStore,r.targetId))}async function TU(i,e,n){const r=MU(i);try{const s=await(function(o,u){const h=Yt(o),d=qe.now(),p=u.reduce(((b,w)=>b.add(w.key)),he());let g,y;return h.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let w=Sa(),x=he();return h.Ns.getEntries(b,p).next((S=>{w=S,w.forEach(((E,k)=>{k.isValidDocument()||(x=x.add(E))}))})).next((()=>h.localDocuments.getOverlayedDocuments(b,w))).next((S=>{g=S;const E=[];for(const k of u){const N=FB(k,g.get(k.key).overlayedDocument);N!=null&&E.push(new Uo(k.key,N,wD(N.value.mapValue),Wr.exists(!0)))}return h.mutationQueue.addMutationBatch(b,d,E,u)})).next((S=>{y=S;const E=S.applyToLocalDocumentSet(g,x);return h.documentOverlayCache.saveOverlays(b,S.batchId,E)}))})).then((()=>({batchId:y.batchId,changes:ND(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,u,h){let d=o.Vu[o.currentUser.toKey()];d||(d=new sn(ue)),d=d.insert(u,h),o.Vu[o.currentUser.toKey()]=d})(r,s.batchId,n),await gf(r,s.changes),await ly(r.remoteStore)}catch(s){const a=Fw(s,"Failed to persist write");n.reject(a)}}async function dk(i,e){const n=Yt(i);try{const r=await LF(n.localStore,e);e.targetChanges.forEach(((s,a)=>{const o=n.Au.get(a);o&&(xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?xe(o.hu,14607):s.removedDocuments.size>0&&(xe(o.hu,42227),o.hu=!1))})),await gf(n,r,e)}catch(r){await Du(r)}}function lC(i,e,n){const r=Yt(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((a,o)=>{const u=o.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(o,u){const h=Yt(o);h.onlineState=u;let d=!1;h.queries.forEach(((p,g)=>{for(const y of g.Sa)y.va(u)&&(d=!0)})),d&&Uw(h)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CU(i,e,n){const r=Yt(i);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let o=new sn(Bt.comparator);o=o.insert(a,oi.newNoDocument(a,$t.min()));const u=he().add(a),h=new sy($t.min(),new Map,new sn(ue),o,u);await dk(r,h),r.du=r.du.remove(a),r.Au.delete(e),jw(r)}else await i_(r.localStore,e,!1).then((()=>a_(r,e,n))).catch(Du)}async function RU(i,e){const n=Yt(i),r=e.batch.batchId;try{const s=await OF(n.localStore,e);pk(n,r,null),fk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gf(n,s)}catch(s){await Du(s)}}async function IU(i,e,n){const r=Yt(i);try{const s=await(function(o,u){const h=Yt(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let p;return h.mutationQueue.lookupMutationBatch(d,u).next((g=>(xe(g!==null,37113),p=g.keys(),h.mutationQueue.removeMutationBatch(d,g)))).next((()=>h.mutationQueue.performConsistencyCheck(d))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(d,p,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p))).next((()=>h.localDocuments.getDocuments(d,p)))}))})(r.localStore,e);pk(r,e,n),fk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gf(r,s)}catch(s){await Du(s)}}function fk(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function pk(i,e,n){const r=Yt(i);let s=r.Vu[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function a_(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),n&&i.Pu.yu(r,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||gk(i,r)}))}function gk(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Mw(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),jw(i))}function cC(i,e,n){for(const r of n)r instanceof ck?(i.Ru.addReference(r.key,e),DU(i,r)):r instanceof uk?(Et(Vw,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||gk(i,r.key)):Vt(19791,{wu:r})}function DU(i,e){const n=e.key,r=n.path.canonicalString();i.du.get(n)||i.Eu.has(r)||(Et(Vw,"New document in limbo: "+n),i.Eu.add(r),jw(i))}function jw(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Bt(je.fromString(e)),r=i.fu.next();i.Au.set(r,new vU(n)),i.du=i.du.insert(n,r),ik(i.remoteStore,new vo(Ps(xw(n.path)),r,"TargetPurposeLimboResolution",Zm.ce))}}async function gf(i,e,n){const r=Yt(i),s=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,h)=>{o.push(r.pu(h,e,n).then((d=>{if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:n?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,p?"current":"not-current")}if(d){s.push(d);const p=kw.As(h.targetId,d);a.push(p)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(h,d){const p=Yt(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>gt.forEach(d,(y=>gt.forEach(y.Es,(b=>p.persistence.referenceDelegate.addReference(g,y.targetId,b))).next((()=>gt.forEach(y.ds,(b=>p.persistence.referenceDelegate.removeReference(g,y.targetId,b)))))))))}catch(g){if(!ku(g))throw g;Et(Nw,"Failed to update sequence numbers: "+g)}for(const g of d){const y=g.targetId;if(!g.fromCache){const b=p.Ms.get(y),w=b.snapshotVersion,x=b.withLastLimboFreeSnapshotVersion(w);p.Ms=p.Ms.insert(y,x)}}})(r.localStore,a))}async function kU(i,e){const n=Yt(i);if(!n.currentUser.isEqual(e)){Et(Vw,"User change. New user:",e.toKey());const r=await JD(n.localStore,e);n.currentUser=e,(function(a,o){a.mu.forEach((u=>{u.forEach((h=>{h.reject(new St(pt.CANCELLED,o))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gf(n,r.Ls)}}function NU(i,e){const n=Yt(i),r=n.Au.get(e);if(r&&r.hu)return he().add(r.key);{let s=he();const a=n.Iu.get(e);if(!a)return s;for(const o of a){const u=n.Tu.get(o);s=s.unionWith(u.view.nu)}return s}}function mk(i){const e=Yt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=dk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CU.bind(null,e),e.Pu.H_=pU.bind(null,e.eventManager),e.Pu.yu=gU.bind(null,e.eventManager),e}function MU(i){const e=Yt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IU.bind(null,e),e}class pm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ay(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return PF(this.persistence,new kF,e.initialUser,this.serializer)}Cu(e){return new ZD(Dw.mi,this.serializer)}Du(e){return new jF}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pm.provider={build:()=>new pm};class PU extends pm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){xe(this.persistence.referenceDelegate instanceof dm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new mF(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Mi.withCacheSize(this.cacheSizeBytes):Mi.DEFAULT;return new ZD((r=>dm.mi(r,n)),this.serializer)}}class o_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kU.bind(null,this.syncEngine),await cU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new hU})()}createDatastore(e){const n=ay(e.databaseInfo.databaseId),r=(function(a){return new qF(a)})(e.databaseInfo);return(function(a,o,u,h){return new KF(a,o,u,h)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,a,o,u){return new ZF(r,s,a,o,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>lC(this.syncEngine,n,0)),(function(){return nC.v()?new nC:new zF})())}createSyncEngine(e,n){return(function(s,a,o,u,h,d,p){const g=new _U(s,a,o,u,h,d);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Yt(n);Et(Vl,"RemoteStore shutting down."),r.Ea.add(5),await pf(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}o_.provider={build:()=>new o_};class OU{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ea("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Po="FirestoreClient";class LU{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ai.UNAUTHENTICATED,this.clientId=yw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{Et(Po,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Et(Po,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Fw(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Qv(i,e){i.asyncQueue.verifyOperationInProgress(),Et(Po,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener((async s=>{r.isEqual(s)||(await JD(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function uC(i,e){i.asyncQueue.verifyOperationInProgress();const n=await BU(i);Et(Po,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((r=>rC(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,s)=>rC(e.remoteStore,s))),i._onlineComponents=e}async function BU(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Et(Po,"Using user provided OfflineComponentProvider");try{await Qv(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===pt.FAILED_PRECONDITION||s.code===pt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;hu("Error using user provided cache. Falling back to memory cache: "+n),await Qv(i,new pm)}}else Et(Po,"Using default OfflineComponentProvider"),await Qv(i,new PU(void 0));return i._offlineComponents}async function yk(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Et(Po,"Using user provided OnlineComponentProvider"),await uC(i,i._uninitializedComponentsProvider._online)):(Et(Po,"Using default OnlineComponentProvider"),await uC(i,new o_))),i._onlineComponents}function FU(i){return yk(i).then((e=>e.syncEngine))}async function hC(i){const e=await yk(i),n=e.eventManager;return n.onListen=wU.bind(null,e.syncEngine),n.onUnlisten=EU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=AU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SU.bind(null,e.syncEngine),n}function bk(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const dC=new Map;const vk="firestore.googleapis.com",fC=!0;class pC{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new St(pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vk,this.ssl=fC}else this.host=e.host,this.ssl=e.ssl??fC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pF)throw new St(pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Z5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bk(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new St(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new St(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new St(pt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cy{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new St(pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new St(pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new z5;switch(r.type){case"firstParty":return new q5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new St(pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=dC.get(n);r&&(Et("ComponentProvider","Removing Datastore"),dC.delete(n),r.terminate())})(this),Promise.resolve()}}function UU(i,e,n,r={}){i=xo(i,cy);const s=Bo(e),a=i._getSettings(),o={...a,emulatorOptions:i._getEmulatorOptions()},u=`${e}:${n}`;s&&(ew(`https://${u}`),nw("Firestore",!0)),a.host!==vk&&a.host!==u&&hu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...a,host:u,ssl:s,emulatorOptions:r};if(!Ll(h,o)&&(i._setSettings(h),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=ai.MOCK_USER;else{d=_I(r.mockUserToken,i._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new St(pt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ai(g)}i._authCredentials=new H5(new cD(d,p))}}class Mu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mu(this.firestore,e,this._query)}}class Dn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dn(this.firestore,e,this._key)}toJSON(){return{type:Dn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(uf(n,Dn._jsonSchema))return new Dn(e,r||null,new Bt(je.fromString(n.referencePath)))}}Dn._jsonSchemaVersion="firestore/documentReference/1.0",Dn._jsonSchema={type:In("string",Dn._jsonSchemaVersion),referencePath:In("string")};class Eo extends Mu{constructor(e,n,r){super(e,n,xw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dn(this.firestore,null,new Bt(e))}withConverter(e){return new Eo(this.firestore,e,this._path)}}function cg(i,e,...n){if(i=cn(i),uD("collection","path",e),i instanceof cy){const r=je.fromString(e,...n);return TT(r),new Eo(i,null,r)}{if(!(i instanceof Dn||i instanceof Eo))throw new St(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(je.fromString(e,...n));return TT(r),new Eo(i.firestore,null,r)}}function vl(i,e,...n){if(i=cn(i),arguments.length===1&&(e=yw.newId()),uD("doc","path",e),i instanceof cy){const r=je.fromString(e,...n);return ST(r),new Dn(i,null,new Bt(r))}{if(!(i instanceof Dn||i instanceof Eo))throw new St(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(je.fromString(e,...n));return ST(r),new Dn(i.firestore,i instanceof Eo?i.converter:null,new Bt(r))}}const gC="AsyncQueue";class mC{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ek(this,"async_queue_retry"),this._c=()=>{const r=Kv();r&&Et(gC,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Kv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Kv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new kl;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ku(e))throw e;Et(gC,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ea("INTERNAL UNHANDLED ERROR: ",yC(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Bw.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&Vt(47125,{Pc:yC(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function yC(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}function bC(i){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1})(i,["next","error","complete"])}class yu extends cy{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new mC,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mC(e),this._firestoreClient=void 0,await e}}}function VU(i,e){const n=typeof i=="object"?i:sw(),r=typeof i=="string"?i:sm,s=Wm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=yI("firestore");a&&UU(s,...a)}return s}function _k(i){if(i._terminated)throw new St(pt.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||jU(i),i._firestoreClient}function jU(i){const e=i._freezeSettings(),n=(function(s,a,o,u){return new cB(s,a,o,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,bk(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new LU(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(s){const a=s?._online.build();return{_offline:s?._offline.build(a),_online:a}})(i._componentsProvider))}class Er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Er(Jn.fromBase64String(e))}catch(n){throw new St(pt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Er(Jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Er._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uf(e,Er._jsonSchema))return Er.fromBase64String(e.bytes)}}Er._jsonSchemaVersion="firestore/bytes/1.0",Er._jsonSchema={type:In("string",Er._jsonSchemaVersion),bytes:In("string")};class uy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new St(pt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zw{constructor(e){this._methodName=e}}class Ls{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new St(pt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new St(pt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ls._jsonSchemaVersion}}static fromJSON(e){if(uf(e,Ls._jsonSchema))return new Ls(e.latitude,e.longitude)}}Ls._jsonSchemaVersion="firestore/geoPoint/1.0",Ls._jsonSchema={type:In("string",Ls._jsonSchemaVersion),latitude:In("number"),longitude:In("number")};class Bs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Bs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uf(e,Bs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Bs(e.vectorValues);throw new St(pt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Bs._jsonSchemaVersion="firestore/vectorValue/1.0",Bs._jsonSchema={type:In("string",Bs._jsonSchemaVersion),vectorValues:In("object")};const zU=/^__.*__$/;class HU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Uo(e,this.data,this.fieldMask,n,this.fieldTransforms):new df(e,this.data,n,this.fieldTransforms)}}class wk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Uo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ak(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vt(40011,{Ac:i})}}class Hw{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Hw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return gm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Ak(this.Ac)&&zU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $U{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ay(e)}Cc(e,n,r,s=!1){return new Hw({Ac:e,methodName:n,Dc:r,path:Qn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $w(i){const e=i._freezeSettings(),n=ay(i._databaseId);return new $U(i._databaseId,!!e.ignoreUndefinedProperties,n)}function GU(i,e,n,r,s,a={}){const o=i.Cc(a.merge||a.mergeFields?2:0,e,n,s);Gw("Data must be an object, but it was:",o,r);const u=xk(r,o);let h,d;if(a.merge)h=new Zi(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const p=[];for(const g of a.mergeFields){const y=l_(e,g,n);if(!o.contains(y))throw new St(pt.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);Sk(p,y)||p.push(y)}h=new Zi(p),d=o.fieldTransforms.filter((g=>h.covers(g.field)))}else h=null,d=o.fieldTransforms;return new HU(new Pi(u),h,d)}class hy extends zw{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hy}}function qU(i,e,n,r){const s=i.Cc(1,e,n);Gw("Data must be an object, but it was:",s,r);const a=[],o=Pi.empty();Fo(r,((h,d)=>{const p=qw(e,h,n);d=cn(d);const g=s.yc(p);if(d instanceof hy)a.push(p);else{const y=mf(d,g);y!=null&&(a.push(p),o.set(p,y))}}));const u=new Zi(a);return new wk(o,u,s.fieldTransforms)}function WU(i,e,n,r,s,a){const o=i.Cc(1,e,n),u=[l_(e,r,n)],h=[s];if(a.length%2!=0)throw new St(pt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)u.push(l_(e,a[y])),h.push(a[y+1]);const d=[],p=Pi.empty();for(let y=u.length-1;y>=0;--y)if(!Sk(d,u[y])){const b=u[y];let w=h[y];w=cn(w);const x=o.yc(b);if(w instanceof hy)d.push(b);else{const S=mf(w,x);S!=null&&(d.push(b),p.set(b,S))}}const g=new Zi(d);return new wk(p,g,o.fieldTransforms)}function XU(i,e,n,r=!1){return mf(n,i.Cc(r?4:3,e))}function mf(i,e){if(Ek(i=cn(i)))return Gw("Unsupported field value:",e,i),xk(i,e);if(i instanceof zw)return(function(r,s){if(!Ak(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const a=[];let o=0;for(const u of r){let h=mf(u,s.wc(o));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),o++}return{arrayValue:{values:a}}})(i,e)}return(function(r,s){if((r=cn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NB(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=qe.fromDate(r);return{timestampValue:hm(s.serializer,a)}}if(r instanceof qe){const a=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hm(s.serializer,a)}}if(r instanceof Ls)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Er)return{bytesValue:$D(s.serializer,r._byteString)};if(r instanceof Dn){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Rw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Bs)return(function(o,u){return{mapValue:{fields:{[vD]:{stringValue:_D},[am]:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw u.Sc("VectorValues must only contain numeric values.");return Ew(u.serializer,d)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Qm(r)}`)})(i,e)}function xk(i,e){const n={};return fD(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fo(i,((r,s)=>{const a=mf(s,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function Ek(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof qe||i instanceof Ls||i instanceof Er||i instanceof Dn||i instanceof zw||i instanceof Bs)}function Gw(i,e,n){if(!Ek(n)||!hD(n)){const r=Qm(n);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function l_(i,e,n){if((e=cn(e))instanceof uy)return e._internalPath;if(typeof e=="string")return qw(i,e);throw gm("Field path arguments must be of type string or ",i,!1,void 0,n)}const YU=new RegExp("[~\\*/\\[\\]]");function qw(i,e,n){if(e.search(YU)>=0)throw gm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new uy(...e.split("."))._internalPath}catch{throw gm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function gm(i,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||o)&&(h+=" (found",a&&(h+=` in field ${r}`),o&&(h+=` in document ${s}`),h+=")"),new St(pt.INVALID_ARGUMENT,u+i+h)}function Sk(i,e){return i.some((n=>n.isEqual(e)))}class Tk{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ww("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KU extends Tk{data(){return super.data()}}function Ww(i,e){return typeof e=="string"?qw(i,e):e instanceof uy?e._internalPath:e._delegate._internalPath}function QU(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new St(pt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xw{}class ZU extends Xw{}function JU(i,e,...n){let r=[];e instanceof Xw&&r.push(e),r=r.concat(n),(function(a){const o=a.filter((h=>h instanceof Yw)).length,u=a.filter((h=>h instanceof dy)).length;if(o>1||o>0&&u>0)throw new St(pt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)i=s._apply(i);return i}class dy extends ZU{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new dy(e,n,r)}_apply(e){const n=this._parse(e);return Ck(e._query,n),new Mu(e.firestore,e.converter,Q0(e._query,n))}_parse(e){const n=$w(e.firestore);return(function(a,o,u,h,d,p,g){let y;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new St(pt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){_C(g,p);const w=[];for(const x of g)w.push(vC(h,a,x));y={arrayValue:{values:w}}}else y=vC(h,a,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||_C(g,p),y=XU(u,o,g,p==="in"||p==="not-in");return Rn.create(d,p,y)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function tV(i,e,n){const r=e,s=Ww("where",i);return dy._create(s,r,n)}class Yw extends Xw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yw(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Xr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,a){let o=s;const u=a.getFlattenedFilters();for(const h of u)Ck(o,h),o=Q0(o,h)})(e._query,n),new Mu(e.firestore,e.converter,Q0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function vC(i,e,n){if(typeof(n=cn(n))=="string"){if(n==="")throw new St(pt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RD(e)&&n.indexOf("/")!==-1)throw new St(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!Bt.isDocumentKey(r))throw new St(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return PT(i,new Bt(r))}if(n instanceof Dn)return PT(i,n._key);throw new St(pt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qm(n)}.`)}function _C(i,e){if(!Array.isArray(i)||i.length===0)throw new St(pt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ck(i,e){const n=(function(s,a){for(const o of s)for(const u of o.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null})(i.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new St(pt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new St(pt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class eV{convertValue(e,n="none"){switch(No(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ko(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Vt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fo(e,((s,a)=>{r[s]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[am].arrayValue?.values?.map((r=>yn(r.doubleValue)));return new Bs(n)}convertGeoPoint(e){return new Ls(yn(e.latitude),yn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ty(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Nd(e));default:return null}}convertTimestamp(e){const n=Do(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);xe(KD(r),9688,{name:e});const s=new Md(r.get(1),r.get(3)),a=new Bt(r.popFirst(5));return s.isEqual(n)||Ea(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}function nV(i,e,n){let r;return r=i?i.toFirestore(e):e,r}class od{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nl extends Tk{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ww("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new St(pt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Nl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Nl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Nl._jsonSchema={type:In("string",Nl._jsonSchemaVersion),bundleSource:In("string","DocumentSnapshot"),bundleName:In("string"),bundle:In("string")};class jg extends Nl{data(e={}){return super.data(e)}}class eu{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new od(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new jg(this._firestore,this._userDataWriter,r.key,r,new od(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new St(pt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((u=>{const h=new jg(s._firestore,s._userDataWriter,u.doc.key,u.doc,new od(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>a||u.type!==3)).map((u=>{const h=new jg(s._firestore,s._userDataWriter,u.doc.key,u.doc,new od(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return u.type!==0&&(d=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),p=o.indexOf(u.doc.key)),{type:iV(u.type),doc:h,oldIndex:d,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new St(pt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=eu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iV(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vt(61501,{type:i})}}eu._jsonSchemaVersion="firestore/querySnapshot/1.0",eu._jsonSchema={type:In("string",eu._jsonSchemaVersion),bundleSource:In("string","QuerySnapshot"),bundleName:In("string"),bundle:In("string")};class Rk extends eV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Er(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,n)}}function Vh(i,e,n,...r){i=xo(i,Dn);const s=xo(i.firestore,yu),a=$w(s);let o;return o=typeof(e=cn(e))=="string"||e instanceof uy?WU(a,"updateDoc",i._key,e,n,r):qU(a,"updateDoc",i._key,e),Kw(s,[o.toMutation(i._key,Wr.exists(!0))])}function rV(i){return Kw(xo(i.firestore,yu),[new Sw(i._key,Wr.none())])}function Zv(i,e){const n=xo(i.firestore,yu),r=vl(i),s=nV(i.converter,e);return Kw(n,[GU($w(i.firestore),"addDoc",r._key,s,i.converter!==null,{}).toMutation(r._key,Wr.exists(!1))]).then((()=>r))}function sV(i,...e){i=cn(i);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||bC(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(bC(e[r])){const h=e[r];e[r]=h.next?.bind(h),e[r+1]=h.error?.bind(h),e[r+2]=h.complete?.bind(h)}let a,o,u;if(i instanceof Dn)o=xo(i.firestore,yu),u=xw(i._key.path),a={next:h=>{e[r]&&e[r](aV(o,i,h))},error:e[r+1],complete:e[r+2]};else{const h=xo(i,Mu);o=xo(h.firestore,yu),u=h._query;const d=new Rk(o);a={next:p=>{e[r]&&e[r](new eu(o,d,h,p))},error:e[r+1],complete:e[r+2]},QU(i._query)}return(function(d,p,g,y){const b=new OU(y),w=new mU(p,b,g);return d.asyncQueue.enqueueAndForget((async()=>dU(await hC(d),w))),()=>{b.Nu(),d.asyncQueue.enqueueAndForget((async()=>fU(await hC(d),w)))}})(_k(o),u,s,a)}function Kw(i,e){return(function(r,s){const a=new kl;return r.asyncQueue.enqueueAndForget((async()=>TU(await FU(r),s,a))),a.promise})(_k(i),e)}function aV(i,e,n){const r=n.docs.get(e._key),s=new Rk(i);return new Nl(i,s,e._key,r,new od(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Iu=s})(Wl),Bl(new Ro("firestore",((r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),u=new yu(new $5(r.getProvider("auth-internal")),new W5(o,r.getProvider("app-check-internal")),(function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new St(pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Md(d.options.projectId,p)})(o,s),o);return a={useFetchStreams:n,...a},u._setSettings(a),u}),"PUBLIC").setMultipleInstances(!0)),Ns(wT,AT,e),Ns(wT,AT,"esm2020")})();const Ik="firebasestorage.googleapis.com",Dk="storageBucket",oV=120*1e3,lV=600*1e3;class hn extends zs{constructor(e,n,r=0){super(Jv(e),`Firebase Storage: ${n} (${Jv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var un;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(un||(un={}));function Jv(i){return"storage/"+i}function Qw(){const i="An unknown error occurred, please check the error payload for server response.";return new hn(un.UNKNOWN,i)}function cV(i){return new hn(un.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function uV(i){return new hn(un.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hV(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new hn(un.UNAUTHENTICATED,i)}function dV(){return new hn(un.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fV(i){return new hn(un.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function pV(){return new hn(un.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gV(){return new hn(un.CANCELED,"User canceled the upload/download.")}function mV(i){return new hn(un.INVALID_URL,"Invalid URL '"+i+"'.")}function yV(i){return new hn(un.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function bV(){return new hn(un.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Dk+"' property when initializing the app?")}function vV(){return new hn(un.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _V(){return new hn(un.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function wV(i){return new hn(un.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function c_(i){return new hn(un.INVALID_ARGUMENT,i)}function kk(){return new hn(un.APP_DELETED,"The Firebase app was deleted.")}function AV(i){return new hn(un.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wd(i,e){return new hn(un.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function jh(i){throw new hn(un.INTERNAL_ERROR,"Internal error: "+i)}class Ji{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ji.makeFromUrl(e,n)}catch{return new Ji(e,"")}if(r.path==="")return r;throw yV(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const o="(/(.*))?$",u=new RegExp("^gs://"+s+o,"i"),h={bucket:1,path:3};function d(M){M.path_=decodeURIComponent(M.path)}const p="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",b=new RegExp(`^https?://${g}/${p}/b/${s}/o${y}`,"i"),w={bucket:1,path:3},x=n===Ik?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",E=new RegExp(`^https?://${x}/${s}/${S}`,"i"),N=[{regex:u,indices:h,postModify:a},{regex:b,indices:w,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let M=0;M<N.length;M++){const O=N[M],B=O.regex.exec(e);if(B){const C=B[O.indices.bucket];let R=B[O.indices.path];R||(R=""),r=new Ji(C,R),O.postModify(r);break}}if(r==null)throw mV(e);return r}}class xV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function EV(i,e,n){let r=1,s=null,a=null,o=!1,u=0;function h(){return u===2}let d=!1;function p(...S){d||(d=!0,e.apply(null,S))}function g(S){s=setTimeout(()=>{s=null,i(b,h())},S)}function y(){a&&clearTimeout(a)}function b(S,...E){if(d){y();return}if(S){y(),p.call(null,S,...E);return}if(h()||o){y(),p.call(null,S,...E);return}r<64&&(r*=2);let N;u===1?(u=2,N=0):N=(r+Math.random())*1e3,g(N)}let w=!1;function x(S){w||(w=!0,y(),!d&&(s!==null?(S||(u=2),clearTimeout(s),g(0)):S||(u=1)))}return g(0),a=setTimeout(()=>{o=!0,x(!0)},n),x}function SV(i){i(!1)}function TV(i){return i!==void 0}function CV(i){return typeof i=="object"&&!Array.isArray(i)}function Zw(i){return typeof i=="string"||i instanceof String}function wC(i){return Jw()&&i instanceof Blob}function Jw(){return typeof Blob<"u"}function AC(i,e,n,r){if(r<e)throw c_(`Invalid value for '${i}'. Expected ${e} or greater.`);if(r>n)throw c_(`Invalid value for '${i}'. Expected ${n} or less.`)}function t1(i,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${i}`}function Nk(i){const e=encodeURIComponent;let n="?";for(const r in i)if(i.hasOwnProperty(r)){const s=e(r)+"="+e(i[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ml;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Ml||(Ml={}));function RV(i,e){const n=i>=500&&i<600,s=[408,429].indexOf(i)!==-1,a=e.indexOf(i)!==-1;return n||s||a}class IV{constructor(e,n,r,s,a,o,u,h,d,p,g,y=!0,b=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=h,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=g,this.retry=y,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,x)=>{this.resolve_=w,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ug(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=u=>{const h=u.loaded,d=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const u=a.getErrorCode()===Ml.NO_ERROR,h=a.getStatus();if(!u||RV(h,this.additionalRetryCodes_)&&this.retry){const p=a.getErrorCode()===Ml.ABORT;r(!1,new ug(!1,null,p));return}const d=this.successCodes_.indexOf(h)!==-1;r(!0,new ug(d,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());TV(h)?a(h):a()}catch(h){o(h)}else if(u!==null){const h=Qw();h.serverResponse=u.getErrorText(),this.errorCallback_?o(this.errorCallback_(u,h)):o(h)}else if(s.canceled){const h=this.appDelete_?kk():gV();o(h)}else{const h=pV();o(h)}};this.canceled_?n(!1,new ug(!1,null,!0)):this.backoffId_=EV(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&SV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ug{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function DV(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function kV(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function NV(i,e){e&&(i["X-Firebase-GMPID"]=e)}function MV(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function PV(i,e,n,r,s,a,o=!0,u=!1){const h=Nk(i.urlParams),d=i.url+h,p=Object.assign({},i.headers);return NV(p,e),DV(p,n),kV(p,a),MV(p,r),new IV(d,i.method,p,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,s,o,u)}function OV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function LV(...i){const e=OV();if(e!==void 0){const n=new e;for(let r=0;r<i.length;r++)n.append(i[r]);return n.getBlob()}else{if(Jw())return new Blob(i);throw new hn(un.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function BV(i,e,n){return i.webkitSlice?i.webkitSlice(e,n):i.mozSlice?i.mozSlice(e,n):i.slice?i.slice(e,n):null}function FV(i){if(typeof atob>"u")throw wV("base-64");return atob(i)}const Ds={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class t0{constructor(e,n){this.data=e,this.contentType=n||null}}function UV(i,e){switch(i){case Ds.RAW:return new t0(Mk(e));case Ds.BASE64:case Ds.BASE64URL:return new t0(Pk(i,e));case Ds.DATA_URL:return new t0(jV(e),zV(e))}throw Qw()}function Mk(i){const e=[];for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<i.length-1&&(i.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=i.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function VV(i){let e;try{e=decodeURIComponent(i)}catch{throw wd(Ds.DATA_URL,"Malformed data URL.")}return Mk(e)}function Pk(i,e){switch(i){case Ds.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw wd(i,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ds.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw wd(i,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=FV(e)}catch(s){throw s.message.includes("polyfill")?s:wd(i,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Ok{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw wd(Ds.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=HV(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function jV(i){const e=new Ok(i);return e.base64?Pk(Ds.BASE64,e.rest):VV(e.rest)}function zV(i){return new Ok(i).contentType}function HV(i,e){return i.length>=e.length?i.substring(i.length-e.length)===e:!1}class yo{constructor(e,n){let r=0,s="";wC(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(wC(this.data_)){const r=this.data_,s=BV(r,e,n);return s===null?null:new yo(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new yo(r,!0)}}static getBlob(...e){if(Jw()){const n=e.map(r=>r instanceof yo?r.data_:r);return new yo(LV.apply(null,n))}else{const n=e.map(o=>Zw(o)?UV(Ds.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let u=0;u<o.length;u++)s[a++]=o[u]}),new yo(s,!0)}}uploadData(){return this.data_}}function Lk(i){let e;try{e=JSON.parse(i)}catch{return null}return CV(e)?e:null}function $V(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function GV(i,e){const n=e.split("/").filter(r=>r.length>0).join("/");return i.length===0?n:i+"/"+n}function Bk(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}function qV(i,e){return e}class gi{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||qV}}let hg=null;function WV(i){return!Zw(i)||i.length<2?i:Bk(i)}function Fk(){if(hg)return hg;const i=[];i.push(new gi("bucket")),i.push(new gi("generation")),i.push(new gi("metageneration")),i.push(new gi("name","fullPath",!0));function e(a,o){return WV(o)}const n=new gi("name");n.xform=e,i.push(n);function r(a,o){return o!==void 0?Number(o):o}const s=new gi("size");return s.xform=r,i.push(s),i.push(new gi("timeCreated")),i.push(new gi("updated")),i.push(new gi("md5Hash",null,!0)),i.push(new gi("cacheControl",null,!0)),i.push(new gi("contentDisposition",null,!0)),i.push(new gi("contentEncoding",null,!0)),i.push(new gi("contentLanguage",null,!0)),i.push(new gi("contentType",null,!0)),i.push(new gi("metadata","customMetadata",!0)),hg=i,hg}function XV(i,e){function n(){const r=i.bucket,s=i.fullPath,a=new Ji(r,s);return e._makeStorageReference(a)}Object.defineProperty(i,"ref",{get:n})}function YV(i,e,n){const r={};r.type="file";const s=n.length;for(let a=0;a<s;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return XV(r,i),r}function Uk(i,e,n){const r=Lk(e);return r===null?null:YV(i,r,n)}function KV(i,e,n,r){const s=Lk(e);if(s===null||!Zw(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(d=>{const p=i.bucket,g=i.fullPath,y="/b/"+o(p)+"/o/"+o(g),b=t1(y,n,r),w=Nk({alt:"media",token:d});return b+w})[0]}function QV(i,e){const n={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(n[a.server]=i[a.local])}return JSON.stringify(n)}class Vk{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function jk(i){if(!i)throw Qw()}function ZV(i,e){function n(r,s){const a=Uk(i,s,e);return jk(a!==null),a}return n}function JV(i,e){function n(r,s){const a=Uk(i,s,e);return jk(a!==null),KV(a,s,i.host,i._protocol)}return n}function zk(i){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=dV():s=hV():n.getStatus()===402?s=uV(i.bucket):n.getStatus()===403?s=fV(i.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function tj(i){const e=zk(i);function n(r,s){let a=e(r,s);return r.getStatus()===404&&(a=cV(i.path)),a.serverResponse=s.serverResponse,a}return n}function ej(i,e,n){const r=e.fullServerUrl(),s=t1(r,i.host,i._protocol),a="GET",o=i.maxOperationRetryTime,u=new Vk(s,a,JV(i,n),o);return u.errorHandler=tj(e),u}function nj(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}function ij(i,e,n){const r=Object.assign({},n);return r.fullPath=i.path,r.size=e.size(),r.contentType||(r.contentType=nj(null,e)),r}function rj(i,e,n,r,s){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function u(){let N="";for(let M=0;M<2;M++)N=N+Math.random().toString().slice(2);return N}const h=u();o["Content-Type"]="multipart/related; boundary="+h;const d=ij(e,r,s),p=QV(d,n),g="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+h+`\r
Content-Type: `+d.contentType+`\r
\r
`,y=`\r
--`+h+"--",b=yo.getBlob(g,r,y);if(b===null)throw vV();const w={name:d.fullPath},x=t1(a,i.host,i._protocol),S="POST",E=i.maxUploadRetryTime,k=new Vk(x,S,ZV(i,n),E);return k.urlParams=w,k.headers=o,k.body=b.uploadData(),k.errorHandler=zk(e),k}class sj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ml.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ml.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ml.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,a){if(this.sent_)throw jh("cannot .send() more than once");if(Bo(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const o in a)a.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,a[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw jh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw jh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw jh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw jh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class aj extends sj{initXhr(){this.xhr_.responseType="text"}}function Hk(){return new aj}class jl{constructor(e,n){this._service=e,n instanceof Ji?this._location=n:this._location=Ji.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new jl(e,n)}get root(){const e=new Ji(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Bk(this._location.path)}get storage(){return this._service}get parent(){const e=$V(this._location.path);if(e===null)return null;const n=new Ji(this._location.bucket,e);return new jl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw AV(e)}}function oj(i,e,n){i._throwIfRoot("uploadBytes");const r=rj(i.storage,i._location,Fk(),new yo(e,!0),n);return i.storage.makeRequestWithTokens(r,Hk).then(s=>({metadata:s,ref:i}))}function lj(i){i._throwIfRoot("getDownloadURL");const e=ej(i.storage,i._location,Fk());return i.storage.makeRequestWithTokens(e,Hk).then(n=>{if(n===null)throw _V();return n})}function cj(i,e){const n=GV(i._location.path,e),r=new Ji(i._location.bucket,n);return new jl(i.storage,r)}function uj(i){return/^[A-Za-z]+:\/\//.test(i)}function hj(i,e){return new jl(i,e)}function $k(i,e){if(i instanceof e1){const n=i;if(n._bucket==null)throw bV();const r=new jl(n,n._bucket);return e!=null?$k(r,e):r}else return e!==void 0?cj(i,e):i}function dj(i,e){if(e&&uj(e)){if(i instanceof e1)return hj(i,e);throw c_("To use ref(service, url), the first argument must be a Storage instance.")}else return $k(i,e)}function xC(i,e){const n=e?.[Dk];return n==null?null:Ji.makeFromBucketSpec(n,i)}function fj(i,e,n,r={}){i.host=`${e}:${n}`;const s=Bo(e);s&&(ew(`https://${i.host}/b`),nw("Storage",!0)),i._isUsingEmulator=!0,i._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(i._overrideAuthToken=typeof a=="string"?a:_I(a,i.app.options.projectId))}class e1{constructor(e,n,r,s,a,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=Ik,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oV,this._maxUploadRetryTime=lV,this._requests=new Set,s!=null?this._bucket=Ji.makeFromBucketSpec(s,this._host):this._bucket=xC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ji.makeFromBucketSpec(this._url,e):this._bucket=xC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){AC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){AC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(xr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new jl(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new xV(kk());{const o=PV(e,this._appId,r,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const EC="@firebase/storage",SC="0.14.0";const Gk="storage";function pj(i,e,n){return i=cn(i),oj(i,e,n)}function gj(i){return i=cn(i),lj(i)}function mj(i,e){return i=cn(i),dj(i,e)}function yj(i=sw(),e){i=cn(i);const r=Wm(i,Gk).getImmediate({identifier:e}),s=yI("storage");return s&&bj(r,...s),r}function bj(i,e,n,r={}){fj(i,e,n,r)}function vj(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),r=i.getProvider("auth-internal"),s=i.getProvider("app-check-internal");return new e1(n,r,s,e,Wl)}function _j(){Bl(new Ro(Gk,vj,"PUBLIC").setMultipleInstances(!0)),Ns(EC,SC,""),Ns(EC,SC,"esm2020")}_j();const wj={apiKey:"AIzaSyA_R00b-7CWm3g_1xk8dBUHG8UyULUJgEs",authDomain:"paper-vault-d4ba1.firebaseapp.com",projectId:"paper-vault-d4ba1",storageBucket:"paper-vault-d4ba1.firebasestorage.app",messagingSenderId:void 0,appId:"1:137615673960:web:cfc32ce078d9ba3933c9dd"},n1=xI(wj),i1=V5(n1),Aj=new ma,_s=VU(n1),xj=yj(n1),Ej=()=>Y6(i1,Aj),Sj=()=>I6(i1);function Tj(i,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function u(p){try{d(r.next(p))}catch(g){o(g)}}function h(p){try{d(r.throw(p))}catch(g){o(g)}}function d(p){p.done?a(p.value):s(p.value).then(u,h)}d((r=r.apply(i,[])).next())})}function Cj(i,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(d){return function(p){return h([d,p])}}function h(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(a=d[0]&2?s.return:d[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,d[1])).done)return a;switch(s=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,s=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){n.label=d[1];break}if(d[0]===6&&n.label<a[1]){n.label=a[1],a=d;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(d);break}a[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(i,n)}catch(p){d=[6,p],s=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Xc=function(){return Xc=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xc.apply(this,arguments)},qk=function(i){return{loading:i==null,value:i}},Rj=function(){return function(i,e){switch(e.type){case"error":return Xc(Xc({},i),{error:e.error,loading:!1,value:void 0});case"reset":return qk(e.defaultValue);case"value":return Xc(Xc({},i),{error:void 0,loading:!1,value:e.value});default:return i}}},Ij=(function(i){var e=i?i():void 0,n=X.useReducer(Rj(),qk(e)),r=n[0],s=n[1],a=X.useCallback(function(){var h=i?i():void 0;s({type:"reset",defaultValue:h})},[i]),o=X.useCallback(function(h){s({type:"error",error:h})},[]),u=X.useCallback(function(h){s({type:"value",value:h})},[]);return X.useMemo(function(){return{error:r.error,loading:r.loading,reset:a,setError:o,setValue:u,value:r.value}},[r.error,r.loading,a,o,u,r.value])}),Dj=(function(i,e){var n=Ij(function(){return i.currentUser}),r=n.error,s=n.loading,a=n.setError,o=n.setValue,u=n.value;return X.useEffect(function(){var h=R6(i,function(d){return Tj(void 0,void 0,void 0,function(){var p;return Cj(this,function(g){switch(g.label){case 0:return[3,4];case 1:return g.trys.push([1,3,,4]),[4,e.onUserChanged(d)];case 2:return g.sent(),[3,4];case 3:return p=g.sent(),a(p),[3,4];case 4:return o(d),[2]}})})},a);return function(){h()}},[i]),[u,s,r]});const kj=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Nj=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),TC=i=>{const e=Nj(i);return e.charAt(0).toUpperCase()+e.slice(1)},Wk=(...i)=>i.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Mj=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Pj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Oj=X.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...u},h)=>X.createElement("svg",{ref:h,...Pj,width:e,height:e,stroke:i,strokeWidth:r?Number(n)*24/Number(e):n,className:Wk("lucide",s),...!a&&!Mj(u)&&{"aria-hidden":"true"},...u},[...o.map(([d,p])=>X.createElement(d,p)),...Array.isArray(a)?a:[a]]));const te=(i,e)=>{const n=X.forwardRef(({className:r,...s},a)=>X.createElement(Oj,{ref:a,iconNode:e,className:Wk(`lucide-${kj(TC(i))}`,`lucide-${i}`,r),...s}));return n.displayName=TC(i),n};const Lj=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Bj=te("award",Lj);const Fj=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],u_=te("book-open",Fj);const Uj=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Vj=te("book",Uj);const jj=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],zj=te("brain",jj);const Hj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],$j=te("calendar",Hj);const Gj=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],qj=te("chart-column",Gj);const Wj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],mm=te("check",Wj);const Xj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Xk=te("chevron-down",Xj);const Yj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Bd=te("chevron-left",Yj);const Kj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Yk=te("chevron-right",Kj);const Qj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Zj=te("chevron-up",Qj);const Jj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CC=te("circle-alert",Jj);const tz=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ez=te("copy",tz);const nz=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],iz=te("download",nz);const rz=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],sz=te("external-link",rz);const az=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],oz=te("eye",az);const lz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Kk=te("file-text",lz);const cz=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],uz=te("grip-vertical",cz);const hz=[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]],RC=te("highlighter",hz);const dz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],fz=te("info",dz);const pz=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],gz=te("library",pz);const mz=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],IC=te("list",mz);const yz=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],bu=te("loader-circle",yz);const bz=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],vz=te("lock",bz);const _z=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],wz=te("log-out",_z);const Az=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],xz=te("network",Az);const Ez=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Sz=te("pen",Ez);const Tz=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Cz=te("pencil",Tz);const Rz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Qk=te("plus",Rz);const Iz=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Zk=te("refresh-cw",Iz);const Dz=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],kz=te("save",Dz);const Nz=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],r1=te("search",Nz);const Mz=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],h_=te("sparkles",Mz);const Pz=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Jk=te("star",Pz);const Oz=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],tN=te("sticky-note",Oz);const Lz=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],d_=te("trash-2",Lz);const Bz=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Fz=te("user",Bz);const Uz=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],ym=te("wand-sparkles",Uz);const Vz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yf=te("x",Vz);const jz=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],zz=te("zoom-in",jz);const Hz=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],$z=te("zoom-out",Hz);function Gz(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var r,s,a,o,u=[],h=!0,d=!1;try{if(a=(n=n.call(i)).next,e===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(p){d=!0,s=p}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return u}}function qz(i,e,n){return e=t8(e),e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function DC(i,e){return Yz(i)||Gz(i,e)||eN(i,e)||Zz()}function Wz(i){return Xz(i)||Kz(i)||eN(i)||Qz()}function Xz(i){if(Array.isArray(i))return f_(i)}function Yz(i){if(Array.isArray(i))return i}function Kz(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function eN(i,e){if(i){if(typeof i=="string")return f_(i,e);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f_(i,e)}}function f_(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=i[n];return r}function Qz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jz(i,e){if(typeof i!="object"||i===null)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var r=n.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function t8(i){var e=Jz(i,"string");return typeof e=="symbol"?e:String(e)}var e8=function(e,n){var r=new Set(n);return Object.assign.apply(Object,[{}].concat(Wz(Object.entries(e).filter(function(s){var a=DC(s,1),o=a[0];return!r.has(o)}).map(function(s){var a=DC(s,2),o=a[0],u=a[1];return qz({},o,u)}))))};function p_(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=Array(e);n<e;n++)r[n]=i[n];return r}function n8(i){if(Array.isArray(i))return i}function i8(i){if(Array.isArray(i))return p_(i)}function r8(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function s8(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var r,s,a,o,u=[],h=!0,d=!1;try{if(a=(n=n.call(i)).next,e!==0)for(;!(h=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(p){d=!0,s=p}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return u}}function a8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l8(i,e){return n8(i)||s8(i,e)||nN(i,e)||a8()}function kC(i){return i8(i)||r8(i)||nN(i)||o8()}function nN(i,e){if(i){if(typeof i=="string")return p_(i,e);var n={}.toString.call(i).slice(8,-1);return n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set"?Array.from(i):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p_(i,e):void 0}}function c8(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.wrapperElementType,r=n===void 0?"div":n,s=e.nodeMapper,a=s===void 0?function(p){return p}:s,o=e.methodNames,u=o===void 0?[]:o,h=e.initPropNames,d=h===void 0?[]:h;return X.forwardRef(function(p,g){var y=X.useRef(),b=X.useMemo(function(){var S=Object.fromEntries(d.filter(function(E){return p.hasOwnProperty(E)}).map(function(E){return[E,p[E]]}));return i(S)},[]);NC(function(){b(a(y.current))},X.useLayoutEffect),NC(function(){return b._destructor instanceof Function?b._destructor:void 0});var w=X.useCallback(function(S){for(var E=arguments.length,k=new Array(E>1?E-1:0),N=1;N<E;N++)k[N-1]=arguments[N];return b[S]instanceof Function?b[S].apply(b,k):void 0},[b]),x=X.useRef({});return Object.keys(e8(p,[].concat(kC(u),kC(d)))).filter(function(S){return x.current[S]!==p[S]}).forEach(function(S){return w(S,p[S])}),x.current=p,X.useImperativeHandle(g,function(){return Object.fromEntries(u.map(function(S){return[S,function(){for(var E=arguments.length,k=new Array(E),N=0;N<E;N++)k[N]=arguments[N];return w.apply(void 0,[S].concat(k))}]}))},[w]),nn.createElement(r,{ref:y})})}function NC(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:X.useEffect,n=X.useRef(),r=X.useRef(!1),s=X.useRef(!1),a=X.useState(0),o=l8(a,2);o[0];var u=o[1];r.current&&(s.current=!0),e(function(){return r.current||(n.current=i(),r.current=!0),u(function(h){return h+1}),function(){s.current&&n.current&&n.current()}},[])}var g_="http://www.w3.org/1999/xhtml";const MC={svg:"http://www.w3.org/2000/svg",xhtml:g_,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fy(i){var e=i+="",n=e.indexOf(":");return n>=0&&(e=i.slice(0,n))!=="xmlns"&&(i=i.slice(n+1)),MC.hasOwnProperty(e)?{space:MC[e],local:i}:i}function u8(i){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===g_&&e.documentElement.namespaceURI===g_?e.createElement(i):e.createElementNS(n,i)}}function h8(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function iN(i){var e=fy(i);return(e.local?h8:u8)(e)}function d8(){}function s1(i){return i==null?d8:function(){return this.querySelector(i)}}function f8(i){typeof i!="function"&&(i=s1(i));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],o=a.length,u=r[s]=new Array(o),h,d,p=0;p<o;++p)(h=a[p])&&(d=i.call(h,h.__data__,p,a))&&("__data__"in h&&(d.__data__=h.__data__),u[p]=d);return new ir(r,this._parents)}function p8(i){return i==null?[]:Array.isArray(i)?i:Array.from(i)}function g8(){return[]}function rN(i){return i==null?g8:function(){return this.querySelectorAll(i)}}function m8(i){return function(){return p8(i.apply(this,arguments))}}function y8(i){typeof i=="function"?i=m8(i):i=rN(i);for(var e=this._groups,n=e.length,r=[],s=[],a=0;a<n;++a)for(var o=e[a],u=o.length,h,d=0;d<u;++d)(h=o[d])&&(r.push(i.call(h,h.__data__,d,o)),s.push(h));return new ir(r,s)}function sN(i){return function(){return this.matches(i)}}function aN(i){return function(e){return e.matches(i)}}var b8=Array.prototype.find;function v8(i){return function(){return b8.call(this.children,i)}}function _8(){return this.firstElementChild}function w8(i){return this.select(i==null?_8:v8(typeof i=="function"?i:aN(i)))}var A8=Array.prototype.filter;function x8(){return Array.from(this.children)}function E8(i){return function(){return A8.call(this.children,i)}}function S8(i){return this.selectAll(i==null?x8:E8(typeof i=="function"?i:aN(i)))}function T8(i){typeof i!="function"&&(i=sN(i));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],o=a.length,u=r[s]=[],h,d=0;d<o;++d)(h=a[d])&&i.call(h,h.__data__,d,a)&&u.push(h);return new ir(r,this._parents)}function oN(i){return new Array(i.length)}function C8(){return new ir(this._enter||this._groups.map(oN),this._parents)}function bm(i,e){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=e}bm.prototype={constructor:bm,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,e){return this._parent.insertBefore(i,e)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};function R8(i){return function(){return i}}function I8(i,e,n,r,s,a){for(var o=0,u,h=e.length,d=a.length;o<d;++o)(u=e[o])?(u.__data__=a[o],r[o]=u):n[o]=new bm(i,a[o]);for(;o<h;++o)(u=e[o])&&(s[o]=u)}function D8(i,e,n,r,s,a,o){var u,h,d=new Map,p=e.length,g=a.length,y=new Array(p),b;for(u=0;u<p;++u)(h=e[u])&&(y[u]=b=o.call(h,h.__data__,u,e)+"",d.has(b)?s[u]=h:d.set(b,h));for(u=0;u<g;++u)b=o.call(i,a[u],u,a)+"",(h=d.get(b))?(r[u]=h,h.__data__=a[u],d.delete(b)):n[u]=new bm(i,a[u]);for(u=0;u<p;++u)(h=e[u])&&d.get(y[u])===h&&(s[u]=h)}function k8(i){return i.__data__}function N8(i,e){if(!arguments.length)return Array.from(this,k8);var n=e?D8:I8,r=this._parents,s=this._groups;typeof i!="function"&&(i=R8(i));for(var a=s.length,o=new Array(a),u=new Array(a),h=new Array(a),d=0;d<a;++d){var p=r[d],g=s[d],y=g.length,b=M8(i.call(p,p&&p.__data__,d,r)),w=b.length,x=u[d]=new Array(w),S=o[d]=new Array(w),E=h[d]=new Array(y);n(p,g,x,S,E,b,e);for(var k=0,N=0,M,O;k<w;++k)if(M=x[k]){for(k>=N&&(N=k+1);!(O=S[N])&&++N<w;);M._next=O||null}}return o=new ir(o,r),o._enter=u,o._exit=h,o}function M8(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function P8(){return new ir(this._exit||this._groups.map(oN),this._parents)}function O8(i,e,n){var r=this.enter(),s=this,a=this.exit();return typeof i=="function"?(r=i(r),r&&(r=r.selection())):r=r.append(i+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?a.remove():n(a),r&&s?r.merge(s).order():s}function L8(i){for(var e=i.selection?i.selection():i,n=this._groups,r=e._groups,s=n.length,a=r.length,o=Math.min(s,a),u=new Array(s),h=0;h<o;++h)for(var d=n[h],p=r[h],g=d.length,y=u[h]=new Array(g),b,w=0;w<g;++w)(b=d[w]||p[w])&&(y[w]=b);for(;h<s;++h)u[h]=n[h];return new ir(u,this._parents)}function B8(){for(var i=this._groups,e=-1,n=i.length;++e<n;)for(var r=i[e],s=r.length-1,a=r[s],o;--s>=0;)(o=r[s])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function F8(i){i||(i=U8);function e(g,y){return g&&y?i(g.__data__,y.__data__):!g-!y}for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,h=s[a]=new Array(u),d,p=0;p<u;++p)(d=o[p])&&(h[p]=d);h.sort(e)}return new ir(s,this._parents).order()}function U8(i,e){return i<e?-1:i>e?1:i>=e?0:NaN}function V8(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this}function j8(){return Array.from(this)}function z8(){for(var i=this._groups,e=0,n=i.length;e<n;++e)for(var r=i[e],s=0,a=r.length;s<a;++s){var o=r[s];if(o)return o}return null}function H8(){let i=0;for(const e of this)++i;return i}function $8(){return!this.node()}function G8(i){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],a=0,o=s.length,u;a<o;++a)(u=s[a])&&i.call(u,u.__data__,a,s);return this}function q8(i){return function(){this.removeAttribute(i)}}function W8(i){return function(){this.removeAttributeNS(i.space,i.local)}}function X8(i,e){return function(){this.setAttribute(i,e)}}function Y8(i,e){return function(){this.setAttributeNS(i.space,i.local,e)}}function K8(i,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(i):this.setAttribute(i,n)}}function Q8(i,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,n)}}function Z8(i,e){var n=fy(i);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?W8:q8:typeof e=="function"?n.local?Q8:K8:n.local?Y8:X8)(n,e))}function lN(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function J8(i){return function(){this.style.removeProperty(i)}}function t9(i,e,n){return function(){this.style.setProperty(i,e,n)}}function e9(i,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(i):this.style.setProperty(i,r,n)}}function n9(i,e,n){return arguments.length>1?this.each((e==null?J8:typeof e=="function"?e9:t9)(i,e,n??"")):vu(this.node(),i)}function vu(i,e){return i.style.getPropertyValue(e)||lN(i).getComputedStyle(i,null).getPropertyValue(e)}function i9(i){return function(){delete this[i]}}function r9(i,e){return function(){this[i]=e}}function s9(i,e){return function(){var n=e.apply(this,arguments);n==null?delete this[i]:this[i]=n}}function a9(i,e){return arguments.length>1?this.each((e==null?i9:typeof e=="function"?s9:r9)(i,e)):this.node()[i]}function cN(i){return i.trim().split(/^|\s+/)}function a1(i){return i.classList||new uN(i)}function uN(i){this._node=i,this._names=cN(i.getAttribute("class")||"")}uN.prototype={add:function(i){var e=this._names.indexOf(i);e<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var e=this._names.indexOf(i);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};function hN(i,e){for(var n=a1(i),r=-1,s=e.length;++r<s;)n.add(e[r])}function dN(i,e){for(var n=a1(i),r=-1,s=e.length;++r<s;)n.remove(e[r])}function o9(i){return function(){hN(this,i)}}function l9(i){return function(){dN(this,i)}}function c9(i,e){return function(){(e.apply(this,arguments)?hN:dN)(this,i)}}function u9(i,e){var n=cN(i+"");if(arguments.length<2){for(var r=a1(this.node()),s=-1,a=n.length;++s<a;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?c9:e?o9:l9)(n,e))}function h9(){this.textContent=""}function d9(i){return function(){this.textContent=i}}function f9(i){return function(){var e=i.apply(this,arguments);this.textContent=e??""}}function p9(i){return arguments.length?this.each(i==null?h9:(typeof i=="function"?f9:d9)(i)):this.node().textContent}function g9(){this.innerHTML=""}function m9(i){return function(){this.innerHTML=i}}function y9(i){return function(){var e=i.apply(this,arguments);this.innerHTML=e??""}}function b9(i){return arguments.length?this.each(i==null?g9:(typeof i=="function"?y9:m9)(i)):this.node().innerHTML}function v9(){this.nextSibling&&this.parentNode.appendChild(this)}function _9(){return this.each(v9)}function w9(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function A9(){return this.each(w9)}function x9(i){var e=typeof i=="function"?i:iN(i);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function E9(){return null}function S9(i,e){var n=typeof i=="function"?i:iN(i),r=e==null?E9:typeof e=="function"?e:s1(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function T9(){var i=this.parentNode;i&&i.removeChild(this)}function C9(){return this.each(T9)}function R9(){var i=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function I9(){var i=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function D9(i){return this.select(i?I9:R9)}function k9(i){return arguments.length?this.property("__data__",i):this.node().__data__}function N9(i){return function(e){i.call(this,e,this.__data__)}}function M9(i){return i.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function P9(i){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,a;n<s;++n)a=e[n],(!i.type||a.type===i.type)&&a.name===i.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function O9(i,e,n){return function(){var r=this.__on,s,a=N9(e);if(r){for(var o=0,u=r.length;o<u;++o)if((s=r[o]).type===i.type&&s.name===i.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=e;return}}this.addEventListener(i.type,a,n),s={type:i.type,name:i.name,value:e,listener:a,options:n},r?r.push(s):this.__on=[s]}}function L9(i,e,n){var r=M9(i+""),s,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var h=0,d=u.length,p;h<d;++h)for(s=0,p=u[h];s<a;++s)if((o=r[s]).type===p.type&&o.name===p.name)return p.value}return}for(u=e?O9:P9,s=0;s<a;++s)this.each(u(r[s],e,n));return this}function fN(i,e,n){var r=lN(i),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),i.dispatchEvent(s)}function B9(i,e){return function(){return fN(this,i,e)}}function F9(i,e){return function(){return fN(this,i,e.apply(this,arguments))}}function U9(i,e){return this.each((typeof e=="function"?F9:B9)(i,e))}function*V9(){for(var i=this._groups,e=0,n=i.length;e<n;++e)for(var r=i[e],s=0,a=r.length,o;s<a;++s)(o=r[s])&&(yield o)}var pN=[null];function ir(i,e){this._groups=i,this._parents=e}function bf(){return new ir([[document.documentElement]],pN)}function j9(){return this}ir.prototype=bf.prototype={constructor:ir,select:f8,selectAll:y8,selectChild:w8,selectChildren:S8,filter:T8,data:N8,enter:C8,exit:P8,join:O8,merge:L8,selection:j9,order:B8,sort:F8,call:V8,nodes:j8,node:z8,size:H8,empty:$8,each:G8,attr:Z8,style:n9,property:a9,classed:u9,text:p9,html:b9,raise:_9,lower:A9,append:x9,insert:S9,remove:C9,clone:D9,datum:k9,on:L9,dispatch:U9,[Symbol.iterator]:V9};function Sr(i){return typeof i=="string"?new ir([[document.querySelector(i)]],[document.documentElement]):new ir([[i]],pN)}function z9(i){let e;for(;e=i.sourceEvent;)i=e;return i}function Ts(i,e){if(i=z9(i),e===void 0&&(e=i.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=i.clientX,r.y=i.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[i.clientX-s.left-e.clientLeft,i.clientY-s.top-e.clientTop]}}return[i.pageX,i.pageY]}var H9={value:()=>{}};function vf(){for(var i=0,e=arguments.length,n={},r;i<e;++i){if(!(r=arguments[i]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new zg(n)}function zg(i){this._=i}function $9(i,e){return i.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}zg.prototype=vf.prototype={constructor:zg,on:function(i,e){var n=this._,r=$9(i+"",n),s,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((s=(i=r[a]).type)&&(s=G9(n[s],i.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(s=(i=r[a]).type)n[s]=PC(n[s],i.name,e);else if(e==null)for(s in n)n[s]=PC(n[s],i.name,null);return this},copy:function(){var i={},e=this._;for(var n in e)i[n]=e[n].slice();return new zg(i)},call:function(i,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(a=this._[i],r=0,s=a.length;r<s;++r)a[r].value.apply(e,n)},apply:function(i,e,n){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var r=this._[i],s=0,a=r.length;s<a;++s)r[s].value.apply(e,n)}};function G9(i,e){for(var n=0,r=i.length,s;n<r;++n)if((s=i[n]).name===e)return s.value}function PC(i,e,n){for(var r=0,s=i.length;r<s;++r)if(i[r].name===e){i[r]=H9,i=i.slice(0,r).concat(i.slice(r+1));break}return n!=null&&i.push({name:e,value:n}),i}const q9={passive:!1},Fd={capture:!0,passive:!1};function e0(i){i.stopImmediatePropagation()}function nu(i){i.preventDefault(),i.stopImmediatePropagation()}function gN(i){var e=i.document.documentElement,n=Sr(i).on("dragstart.drag",nu,Fd);"onselectstart"in e?n.on("selectstart.drag",nu,Fd):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function mN(i,e){var n=i.document.documentElement,r=Sr(i).on("dragstart.drag",null);e&&(r.on("click.drag",nu,Fd),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const dg=i=>()=>i;function m_(i,{sourceEvent:e,subject:n,target:r,identifier:s,active:a,x:o,y:u,dx:h,dy:d,dispatch:p}){Object.defineProperties(this,{type:{value:i,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:p}})}m_.prototype.on=function(){var i=this._.on.apply(this._,arguments);return i===this._?this:i};function W9(i){return!i.ctrlKey&&!i.button}function X9(){return this.parentNode}function Y9(i,e){return e??{x:i.x,y:i.y}}function K9(){return navigator.maxTouchPoints||"ontouchstart"in this}function Q9(){var i=W9,e=X9,n=Y9,r=K9,s={},a=vf("start","drag","end"),o=0,u,h,d,p,g=0;function y(M){M.on("mousedown.drag",b).filter(r).on("touchstart.drag",S).on("touchmove.drag",E,q9).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(M,O){if(!(p||!i.call(this,M,O))){var B=N(this,e.call(this,M,O),M,O,"mouse");B&&(Sr(M.view).on("mousemove.drag",w,Fd).on("mouseup.drag",x,Fd),gN(M.view),e0(M),d=!1,u=M.clientX,h=M.clientY,B("start",M))}}function w(M){if(nu(M),!d){var O=M.clientX-u,B=M.clientY-h;d=O*O+B*B>g}s.mouse("drag",M)}function x(M){Sr(M.view).on("mousemove.drag mouseup.drag",null),mN(M.view,d),nu(M),s.mouse("end",M)}function S(M,O){if(i.call(this,M,O)){var B=M.changedTouches,C=e.call(this,M,O),R=B.length,L,F;for(L=0;L<R;++L)(F=N(this,C,M,O,B[L].identifier,B[L]))&&(e0(M),F("start",M,B[L]))}}function E(M){var O=M.changedTouches,B=O.length,C,R;for(C=0;C<B;++C)(R=s[O[C].identifier])&&(nu(M),R("drag",M,O[C]))}function k(M){var O=M.changedTouches,B=O.length,C,R;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),C=0;C<B;++C)(R=s[O[C].identifier])&&(e0(M),R("end",M,O[C]))}function N(M,O,B,C,R,L){var F=a.copy(),U=Ts(L||B,O),$,V,G;if((G=n.call(M,new m_("beforestart",{sourceEvent:B,target:y,identifier:R,active:o,x:U[0],y:U[1],dx:0,dy:0,dispatch:F}),C))!=null)return $=G.x-U[0]||0,V=G.y-U[1]||0,function et(z,Y,nt){var mt=U,bt;switch(z){case"start":s[R]=et,bt=o++;break;case"end":delete s[R],--o;case"drag":U=Ts(nt||Y,O),bt=o;break}F.call(z,M,new m_(z,{sourceEvent:Y,subject:G,target:y,identifier:R,active:bt,x:U[0]+$,y:U[1]+V,dx:U[0]-mt[0],dy:U[1]-mt[1],dispatch:F}),C)}}return y.filter=function(M){return arguments.length?(i=typeof M=="function"?M:dg(!!M),y):i},y.container=function(M){return arguments.length?(e=typeof M=="function"?M:dg(M),y):e},y.subject=function(M){return arguments.length?(n=typeof M=="function"?M:dg(M),y):n},y.touchable=function(M){return arguments.length?(r=typeof M=="function"?M:dg(!!M),y):r},y.on=function(){var M=a.on.apply(a,arguments);return M===a?y:M},y.clickDistance=function(M){return arguments.length?(g=(M=+M)*M,y):Math.sqrt(g)},y}function o1(i,e,n){i.prototype=e.prototype=n,n.constructor=i}function yN(i,e){var n=Object.create(i.prototype);for(var r in e)n[r]=e[r];return n}function _f(){}var Ud=.7,vm=1/Ud,iu="\\s*([+-]?\\d+)\\s*",Vd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Z9=/^#([0-9a-f]{3,8})$/,J9=new RegExp(`^rgb\\(${iu},${iu},${iu}\\)$`),tH=new RegExp(`^rgb\\(${Fs},${Fs},${Fs}\\)$`),eH=new RegExp(`^rgba\\(${iu},${iu},${iu},${Vd}\\)$`),nH=new RegExp(`^rgba\\(${Fs},${Fs},${Fs},${Vd}\\)$`),iH=new RegExp(`^hsl\\(${Vd},${Fs},${Fs}\\)$`),rH=new RegExp(`^hsla\\(${Vd},${Fs},${Fs},${Vd}\\)$`),OC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};o1(_f,jd,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:LC,formatHex:LC,formatHex8:sH,formatHsl:aH,formatRgb:BC,toString:BC});function LC(){return this.rgb().formatHex()}function sH(){return this.rgb().formatHex8()}function aH(){return bN(this).formatHsl()}function BC(){return this.rgb().formatRgb()}function jd(i){var e,n;return i=(i+"").trim().toLowerCase(),(e=Z9.exec(i))?(n=e[1].length,e=parseInt(e[1],16),n===6?FC(e):n===3?new Oi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?fg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?fg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=J9.exec(i))?new Oi(e[1],e[2],e[3],1):(e=tH.exec(i))?new Oi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=eH.exec(i))?fg(e[1],e[2],e[3],e[4]):(e=nH.exec(i))?fg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=iH.exec(i))?jC(e[1],e[2]/100,e[3]/100,1):(e=rH.exec(i))?jC(e[1],e[2]/100,e[3]/100,e[4]):OC.hasOwnProperty(i)?FC(OC[i]):i==="transparent"?new Oi(NaN,NaN,NaN,0):null}function FC(i){return new Oi(i>>16&255,i>>8&255,i&255,1)}function fg(i,e,n,r){return r<=0&&(i=e=n=NaN),new Oi(i,e,n,r)}function oH(i){return i instanceof _f||(i=jd(i)),i?(i=i.rgb(),new Oi(i.r,i.g,i.b,i.opacity)):new Oi}function y_(i,e,n,r){return arguments.length===1?oH(i):new Oi(i,e,n,r??1)}function Oi(i,e,n,r){this.r=+i,this.g=+e,this.b=+n,this.opacity=+r}o1(Oi,y_,yN(_f,{brighter(i){return i=i==null?vm:Math.pow(vm,i),new Oi(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?Ud:Math.pow(Ud,i),new Oi(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new Oi(Pl(this.r),Pl(this.g),Pl(this.b),_m(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:UC,formatHex:UC,formatHex8:lH,formatRgb:VC,toString:VC}));function UC(){return`#${Sl(this.r)}${Sl(this.g)}${Sl(this.b)}`}function lH(){return`#${Sl(this.r)}${Sl(this.g)}${Sl(this.b)}${Sl((isNaN(this.opacity)?1:this.opacity)*255)}`}function VC(){const i=_m(this.opacity);return`${i===1?"rgb(":"rgba("}${Pl(this.r)}, ${Pl(this.g)}, ${Pl(this.b)}${i===1?")":`, ${i})`}`}function _m(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function Pl(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Sl(i){return i=Pl(i),(i<16?"0":"")+i.toString(16)}function jC(i,e,n,r){return r<=0?i=e=n=NaN:n<=0||n>=1?i=e=NaN:e<=0&&(i=NaN),new zr(i,e,n,r)}function bN(i){if(i instanceof zr)return new zr(i.h,i.s,i.l,i.opacity);if(i instanceof _f||(i=jd(i)),!i)return new zr;if(i instanceof zr)return i;i=i.rgb();var e=i.r/255,n=i.g/255,r=i.b/255,s=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,u=a-s,h=(a+s)/2;return u?(e===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-e)/u+2:o=(e-n)/u+4,u/=h<.5?a+s:2-a-s,o*=60):u=h>0&&h<1?0:o,new zr(o,u,h,i.opacity)}function cH(i,e,n,r){return arguments.length===1?bN(i):new zr(i,e,n,r??1)}function zr(i,e,n,r){this.h=+i,this.s=+e,this.l=+n,this.opacity=+r}o1(zr,cH,yN(_f,{brighter(i){return i=i==null?vm:Math.pow(vm,i),new zr(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?Ud:Math.pow(Ud,i),new zr(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Oi(n0(i>=240?i-240:i+120,s,r),n0(i,s,r),n0(i<120?i+240:i-120,s,r),this.opacity)},clamp(){return new zr(zC(this.h),pg(this.s),pg(this.l),_m(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=_m(this.opacity);return`${i===1?"hsl(":"hsla("}${zC(this.h)}, ${pg(this.s)*100}%, ${pg(this.l)*100}%${i===1?")":`, ${i})`}`}}));function zC(i){return i=(i||0)%360,i<0?i+360:i}function pg(i){return Math.max(0,Math.min(1,i||0))}function n0(i,e,n){return(i<60?e+(n-e)*i/60:i<180?n:i<240?e+(n-e)*(240-i)/60:e)*255}const vN=i=>()=>i;function uH(i,e){return function(n){return i+n*e}}function hH(i,e,n){return i=Math.pow(i,n),e=Math.pow(e,n)-i,n=1/n,function(r){return Math.pow(i+r*e,n)}}function dH(i){return(i=+i)==1?_N:function(e,n){return n-e?hH(e,n,i):vN(isNaN(e)?n:e)}}function _N(i,e){var n=e-i;return n?uH(i,n):vN(isNaN(i)?e:i)}const HC=(function i(e){var n=dH(e);function r(s,a){var o=n((s=y_(s)).r,(a=y_(a)).r),u=n(s.g,a.g),h=n(s.b,a.b),d=_N(s.opacity,a.opacity);return function(p){return s.r=o(p),s.g=u(p),s.b=h(p),s.opacity=d(p),s+""}}return r.gamma=i,r})(1);function fo(i,e){return i=+i,e=+e,function(n){return i*(1-n)+e*n}}var b_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,i0=new RegExp(b_.source,"g");function fH(i){return function(){return i}}function pH(i){return function(e){return i(e)+""}}function gH(i,e){var n=b_.lastIndex=i0.lastIndex=0,r,s,a,o=-1,u=[],h=[];for(i=i+"",e=e+"";(r=b_.exec(i))&&(s=i0.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(s=s[0])?u[o]?u[o]+=s:u[++o]=s:(u[++o]=null,h.push({i:o,x:fo(r,s)})),n=i0.lastIndex;return n<e.length&&(a=e.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?h[0]?pH(h[0].x):fH(e):(e=h.length,function(d){for(var p=0,g;p<e;++p)u[(g=h[p]).i]=g.x(d);return u.join("")})}var $C=180/Math.PI,v_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wN(i,e,n,r,s,a){var o,u,h;return(o=Math.sqrt(i*i+e*e))&&(i/=o,e/=o),(h=i*n+e*r)&&(n-=i*h,r-=e*h),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,h/=u),i*r<e*n&&(i=-i,e=-e,h=-h,o=-o),{translateX:s,translateY:a,rotate:Math.atan2(e,i)*$C,skewX:Math.atan(h)*$C,scaleX:o,scaleY:u}}var gg;function mH(i){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(i+"");return e.isIdentity?v_:wN(e.a,e.b,e.c,e.d,e.e,e.f)}function yH(i){return i==null||(gg||(gg=document.createElementNS("http://www.w3.org/2000/svg","g")),gg.setAttribute("transform",i),!(i=gg.transform.baseVal.consolidate()))?v_:(i=i.matrix,wN(i.a,i.b,i.c,i.d,i.e,i.f))}function AN(i,e,n,r){function s(d){return d.length?d.pop()+" ":""}function a(d,p,g,y,b,w){if(d!==g||p!==y){var x=b.push("translate(",null,e,null,n);w.push({i:x-4,x:fo(d,g)},{i:x-2,x:fo(p,y)})}else(g||y)&&b.push("translate("+g+e+y+n)}function o(d,p,g,y){d!==p?(d-p>180?p+=360:p-d>180&&(d+=360),y.push({i:g.push(s(g)+"rotate(",null,r)-2,x:fo(d,p)})):p&&g.push(s(g)+"rotate("+p+r)}function u(d,p,g,y){d!==p?y.push({i:g.push(s(g)+"skewX(",null,r)-2,x:fo(d,p)}):p&&g.push(s(g)+"skewX("+p+r)}function h(d,p,g,y,b,w){if(d!==g||p!==y){var x=b.push(s(b)+"scale(",null,",",null,")");w.push({i:x-4,x:fo(d,g)},{i:x-2,x:fo(p,y)})}else(g!==1||y!==1)&&b.push(s(b)+"scale("+g+","+y+")")}return function(d,p){var g=[],y=[];return d=i(d),p=i(p),a(d.translateX,d.translateY,p.translateX,p.translateY,g,y),o(d.rotate,p.rotate,g,y),u(d.skewX,p.skewX,g,y),h(d.scaleX,d.scaleY,p.scaleX,p.scaleY,g,y),d=p=null,function(b){for(var w=-1,x=y.length,S;++w<x;)g[(S=y[w]).i]=S.x(b);return g.join("")}}}var bH=AN(mH,"px, ","px)","deg)"),vH=AN(yH,", ",")",")"),_H=1e-12;function GC(i){return((i=Math.exp(i))+1/i)/2}function wH(i){return((i=Math.exp(i))-1/i)/2}function AH(i){return((i=Math.exp(2*i))-1)/(i+1)}const xH=(function i(e,n,r){function s(a,o){var u=a[0],h=a[1],d=a[2],p=o[0],g=o[1],y=o[2],b=p-u,w=g-h,x=b*b+w*w,S,E;if(x<_H)E=Math.log(y/d)/e,S=function(C){return[u+C*b,h+C*w,d*Math.exp(e*C*E)]};else{var k=Math.sqrt(x),N=(y*y-d*d+r*x)/(2*d*n*k),M=(y*y-d*d-r*x)/(2*y*n*k),O=Math.log(Math.sqrt(N*N+1)-N),B=Math.log(Math.sqrt(M*M+1)-M);E=(B-O)/e,S=function(C){var R=C*E,L=GC(O),F=d/(n*k)*(L*AH(e*R+O)-wH(O));return[u+F*b,h+F*w,d*L/GC(e*R+O)]}}return S.duration=E*1e3*e/Math.SQRT2,S}return s.rho=function(a){var o=Math.max(.001,+a),u=o*o,h=u*u;return i(o,u,h)},s})(Math.SQRT2,2,4);var _u=0,ld=0,zh=0,xN=1e3,wm,cd,Am=0,zl=0,py=0,zd=typeof performance=="object"&&performance.now?performance:Date,EN=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function l1(){return zl||(EN(EH),zl=zd.now()+py)}function EH(){zl=0}function xm(){this._call=this._time=this._next=null}xm.prototype=c1.prototype={constructor:xm,restart:function(i,e,n){if(typeof i!="function")throw new TypeError("callback is not a function");n=(n==null?l1():+n)+(e==null?0:+e),!this._next&&cd!==this&&(cd?cd._next=this:wm=this,cd=this),this._call=i,this._time=n,__()},stop:function(){this._call&&(this._call=null,this._time=1/0,__())}};function c1(i,e,n){var r=new xm;return r.restart(i,e,n),r}function SH(){l1(),++_u;for(var i=wm,e;i;)(e=zl-i._time)>=0&&i._call.call(void 0,e),i=i._next;--_u}function qC(){zl=(Am=zd.now())+py,_u=ld=0;try{SH()}finally{_u=0,CH(),zl=0}}function TH(){var i=zd.now(),e=i-Am;e>xN&&(py-=e,Am=i)}function CH(){for(var i,e=wm,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),i=e,e=e._next):(n=e._next,e._next=null,e=i?i._next=n:wm=n);cd=i,__(r)}function __(i){if(!_u){ld&&(ld=clearTimeout(ld));var e=i-zl;e>24?(i<1/0&&(ld=setTimeout(qC,i-zd.now()-py)),zh&&(zh=clearInterval(zh))):(zh||(Am=zd.now(),zh=setInterval(TH,xN)),_u=1,EN(qC))}}function WC(i,e,n){var r=new xm;return e=e==null?0:+e,r.restart(s=>{r.stop(),i(s+e)},e,n),r}var RH=vf("start","end","cancel","interrupt"),IH=[],SN=0,XC=1,w_=2,Hg=3,YC=4,A_=5,$g=6;function gy(i,e,n,r,s,a){var o=i.__transition;if(!o)i.__transition={};else if(n in o)return;DH(i,n,{name:e,index:r,group:s,on:RH,tween:IH,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:SN})}function u1(i,e){var n=Kr(i,e);if(n.state>SN)throw new Error("too late; already scheduled");return n}function Hs(i,e){var n=Kr(i,e);if(n.state>Hg)throw new Error("too late; already running");return n}function Kr(i,e){var n=i.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function DH(i,e,n){var r=i.__transition,s;r[e]=n,n.timer=c1(a,0,n.time);function a(d){n.state=XC,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var p,g,y,b;if(n.state!==XC)return h();for(p in r)if(b=r[p],b.name===n.name){if(b.state===Hg)return WC(o);b.state===YC?(b.state=$g,b.timer.stop(),b.on.call("interrupt",i,i.__data__,b.index,b.group),delete r[p]):+p<e&&(b.state=$g,b.timer.stop(),b.on.call("cancel",i,i.__data__,b.index,b.group),delete r[p])}if(WC(function(){n.state===Hg&&(n.state=YC,n.timer.restart(u,n.delay,n.time),u(d))}),n.state=w_,n.on.call("start",i,i.__data__,n.index,n.group),n.state===w_){for(n.state=Hg,s=new Array(y=n.tween.length),p=0,g=-1;p<y;++p)(b=n.tween[p].value.call(i,i.__data__,n.index,n.group))&&(s[++g]=b);s.length=g+1}}function u(d){for(var p=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(h),n.state=A_,1),g=-1,y=s.length;++g<y;)s[g].call(i,p);n.state===A_&&(n.on.call("end",i,i.__data__,n.index,n.group),h())}function h(){n.state=$g,n.timer.stop(),delete r[e];for(var d in r)return;delete i.__transition}}function Gg(i,e){var n=i.__transition,r,s,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}s=r.state>w_&&r.state<A_,r.state=$g,r.timer.stop(),r.on.call(s?"interrupt":"cancel",i,i.__data__,r.index,r.group),delete n[o]}a&&delete i.__transition}}function kH(i){return this.each(function(){Gg(this,i)})}function NH(i,e){var n,r;return function(){var s=Hs(this,i),a=s.tween;if(a!==n){r=n=a;for(var o=0,u=r.length;o<u;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}s.tween=r}}function MH(i,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var a=Hs(this,i),o=a.tween;if(o!==r){s=(r=o).slice();for(var u={name:e,value:n},h=0,d=s.length;h<d;++h)if(s[h].name===e){s[h]=u;break}h===d&&s.push(u)}a.tween=s}}function PH(i,e){var n=this._id;if(i+="",arguments.length<2){for(var r=Kr(this.node(),n).tween,s=0,a=r.length,o;s<a;++s)if((o=r[s]).name===i)return o.value;return null}return this.each((e==null?NH:MH)(n,i,e))}function h1(i,e,n){var r=i._id;return i.each(function(){var s=Hs(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return Kr(s,r).value[e]}}function TN(i,e){var n;return(typeof e=="number"?fo:e instanceof jd?HC:(n=jd(e))?(e=n,HC):gH)(i,e)}function OH(i){return function(){this.removeAttribute(i)}}function LH(i){return function(){this.removeAttributeNS(i.space,i.local)}}function BH(i,e,n){var r,s=n+"",a;return function(){var o=this.getAttribute(i);return o===s?null:o===r?a:a=e(r=o,n)}}function FH(i,e,n){var r,s=n+"",a;return function(){var o=this.getAttributeNS(i.space,i.local);return o===s?null:o===r?a:a=e(r=o,n)}}function UH(i,e,n){var r,s,a;return function(){var o,u=n(this),h;return u==null?void this.removeAttribute(i):(o=this.getAttribute(i),h=u+"",o===h?null:o===r&&h===s?a:(s=h,a=e(r=o,u)))}}function VH(i,e,n){var r,s,a;return function(){var o,u=n(this),h;return u==null?void this.removeAttributeNS(i.space,i.local):(o=this.getAttributeNS(i.space,i.local),h=u+"",o===h?null:o===r&&h===s?a:(s=h,a=e(r=o,u)))}}function jH(i,e){var n=fy(i),r=n==="transform"?vH:TN;return this.attrTween(i,typeof e=="function"?(n.local?VH:UH)(n,r,h1(this,"attr."+i,e)):e==null?(n.local?LH:OH)(n):(n.local?FH:BH)(n,r,e))}function zH(i,e){return function(n){this.setAttribute(i,e.call(this,n))}}function HH(i,e){return function(n){this.setAttributeNS(i.space,i.local,e.call(this,n))}}function $H(i,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&HH(i,a)),n}return s._value=e,s}function GH(i,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&zH(i,a)),n}return s._value=e,s}function qH(i,e){var n="attr."+i;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=fy(i);return this.tween(n,(r.local?$H:GH)(r,e))}function WH(i,e){return function(){u1(this,i).delay=+e.apply(this,arguments)}}function XH(i,e){return e=+e,function(){u1(this,i).delay=e}}function YH(i){var e=this._id;return arguments.length?this.each((typeof i=="function"?WH:XH)(e,i)):Kr(this.node(),e).delay}function KH(i,e){return function(){Hs(this,i).duration=+e.apply(this,arguments)}}function QH(i,e){return e=+e,function(){Hs(this,i).duration=e}}function ZH(i){var e=this._id;return arguments.length?this.each((typeof i=="function"?KH:QH)(e,i)):Kr(this.node(),e).duration}function JH(i,e){if(typeof e!="function")throw new Error;return function(){Hs(this,i).ease=e}}function t7(i){var e=this._id;return arguments.length?this.each(JH(e,i)):Kr(this.node(),e).ease}function e7(i,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Hs(this,i).ease=n}}function n7(i){if(typeof i!="function")throw new Error;return this.each(e7(this._id,i))}function i7(i){typeof i!="function"&&(i=sN(i));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],o=a.length,u=r[s]=[],h,d=0;d<o;++d)(h=a[d])&&i.call(h,h.__data__,d,a)&&u.push(h);return new Ta(r,this._parents,this._name,this._id)}function r7(i){if(i._id!==this._id)throw new Error;for(var e=this._groups,n=i._groups,r=e.length,s=n.length,a=Math.min(r,s),o=new Array(r),u=0;u<a;++u)for(var h=e[u],d=n[u],p=h.length,g=o[u]=new Array(p),y,b=0;b<p;++b)(y=h[b]||d[b])&&(g[b]=y);for(;u<r;++u)o[u]=e[u];return new Ta(o,this._parents,this._name,this._id)}function s7(i){return(i+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function a7(i,e,n){var r,s,a=s7(e)?u1:Hs;return function(){var o=a(this,i),u=o.on;u!==r&&(s=(r=u).copy()).on(e,n),o.on=s}}function o7(i,e){var n=this._id;return arguments.length<2?Kr(this.node(),n).on.on(i):this.each(a7(n,i,e))}function l7(i){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==i)return;e&&e.removeChild(this)}}function c7(){return this.on("end.remove",l7(this._id))}function u7(i){var e=this._name,n=this._id;typeof i!="function"&&(i=s1(i));for(var r=this._groups,s=r.length,a=new Array(s),o=0;o<s;++o)for(var u=r[o],h=u.length,d=a[o]=new Array(h),p,g,y=0;y<h;++y)(p=u[y])&&(g=i.call(p,p.__data__,y,u))&&("__data__"in p&&(g.__data__=p.__data__),d[y]=g,gy(d[y],e,n,y,d,Kr(p,n)));return new Ta(a,this._parents,e,n)}function h7(i){var e=this._name,n=this._id;typeof i!="function"&&(i=rN(i));for(var r=this._groups,s=r.length,a=[],o=[],u=0;u<s;++u)for(var h=r[u],d=h.length,p,g=0;g<d;++g)if(p=h[g]){for(var y=i.call(p,p.__data__,g,h),b,w=Kr(p,n),x=0,S=y.length;x<S;++x)(b=y[x])&&gy(b,e,n,x,y,w);a.push(y),o.push(p)}return new Ta(a,o,e,n)}var d7=bf.prototype.constructor;function f7(){return new d7(this._groups,this._parents)}function p7(i,e){var n,r,s;return function(){var a=vu(this,i),o=(this.style.removeProperty(i),vu(this,i));return a===o?null:a===n&&o===r?s:s=e(n=a,r=o)}}function CN(i){return function(){this.style.removeProperty(i)}}function g7(i,e,n){var r,s=n+"",a;return function(){var o=vu(this,i);return o===s?null:o===r?a:a=e(r=o,n)}}function m7(i,e,n){var r,s,a;return function(){var o=vu(this,i),u=n(this),h=u+"";return u==null&&(h=u=(this.style.removeProperty(i),vu(this,i))),o===h?null:o===r&&h===s?a:(s=h,a=e(r=o,u))}}function y7(i,e){var n,r,s,a="style."+e,o="end."+a,u;return function(){var h=Hs(this,i),d=h.on,p=h.value[a]==null?u||(u=CN(e)):void 0;(d!==n||s!==p)&&(r=(n=d).copy()).on(o,s=p),h.on=r}}function b7(i,e,n){var r=(i+="")=="transform"?bH:TN;return e==null?this.styleTween(i,p7(i,r)).on("end.style."+i,CN(i)):typeof e=="function"?this.styleTween(i,m7(i,r,h1(this,"style."+i,e))).each(y7(this._id,i)):this.styleTween(i,g7(i,r,e),n).on("end.style."+i,null)}function v7(i,e,n){return function(r){this.style.setProperty(i,e.call(this,r),n)}}function _7(i,e,n){var r,s;function a(){var o=e.apply(this,arguments);return o!==s&&(r=(s=o)&&v7(i,o,n)),r}return a._value=e,a}function w7(i,e,n){var r="style."+(i+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,_7(i,e,n??""))}function A7(i){return function(){this.textContent=i}}function x7(i){return function(){var e=i(this);this.textContent=e??""}}function E7(i){return this.tween("text",typeof i=="function"?x7(h1(this,"text",i)):A7(i==null?"":i+""))}function S7(i){return function(e){this.textContent=i.call(this,e)}}function T7(i){var e,n;function r(){var s=i.apply(this,arguments);return s!==n&&(e=(n=s)&&S7(s)),e}return r._value=i,r}function C7(i){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(i==null)return this.tween(e,null);if(typeof i!="function")throw new Error;return this.tween(e,T7(i))}function R7(){for(var i=this._name,e=this._id,n=RN(),r=this._groups,s=r.length,a=0;a<s;++a)for(var o=r[a],u=o.length,h,d=0;d<u;++d)if(h=o[d]){var p=Kr(h,e);gy(h,i,n,d,o,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Ta(r,this._parents,i,n)}function I7(){var i,e,n=this,r=n._id,s=n.size();return new Promise(function(a,o){var u={value:o},h={value:function(){--s===0&&a()}};n.each(function(){var d=Hs(this,r),p=d.on;p!==i&&(e=(i=p).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(h)),d.on=e}),s===0&&a()})}var D7=0;function Ta(i,e,n,r){this._groups=i,this._parents=e,this._name=n,this._id=r}function RN(){return++D7}var ca=bf.prototype;Ta.prototype={constructor:Ta,select:u7,selectAll:h7,selectChild:ca.selectChild,selectChildren:ca.selectChildren,filter:i7,merge:r7,selection:f7,transition:R7,call:ca.call,nodes:ca.nodes,node:ca.node,size:ca.size,empty:ca.empty,each:ca.each,on:o7,attr:jH,attrTween:qH,style:b7,styleTween:w7,text:E7,textTween:C7,remove:c7,tween:PH,delay:YH,duration:ZH,ease:t7,easeVarying:n7,end:I7,[Symbol.iterator]:ca[Symbol.iterator]};function k7(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var N7={time:null,delay:0,duration:250,ease:k7};function M7(i,e){for(var n;!(n=i.__transition)||!(n=n[e]);)if(!(i=i.parentNode))throw new Error(`transition ${e} not found`);return n}function P7(i){var e,n;i instanceof Ta?(e=i._id,i=i._name):(e=RN(),(n=N7).time=l1(),i=i==null?null:i+"");for(var r=this._groups,s=r.length,a=0;a<s;++a)for(var o=r[a],u=o.length,h,d=0;d<u;++d)(h=o[d])&&gy(h,i,e,d,o,n||M7(h,e));return new Ta(r,this._parents,i,e)}bf.prototype.interrupt=kH;bf.prototype.transition=P7;const mg=i=>()=>i;function O7(i,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:i,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function va(i,e,n){this.k=i,this.x=e,this.y=n}va.prototype={constructor:va,scale:function(i){return i===1?this:new va(this.k*i,this.x,this.y)},translate:function(i,e){return i===0&e===0?this:new va(this.k,this.x+this.k*i,this.y+this.k*e)},apply:function(i){return[i[0]*this.k+this.x,i[1]*this.k+this.y]},applyX:function(i){return i*this.k+this.x},applyY:function(i){return i*this.k+this.y},invert:function(i){return[(i[0]-this.x)/this.k,(i[1]-this.y)/this.k]},invertX:function(i){return(i-this.x)/this.k},invertY:function(i){return(i-this.y)/this.k},rescaleX:function(i){return i.copy().domain(i.range().map(this.invertX,this).map(i.invert,i))},rescaleY:function(i){return i.copy().domain(i.range().map(this.invertY,this).map(i.invert,i))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var d1=new va(1,0,0);xs.prototype=va.prototype;function xs(i){for(;!i.__zoom;)if(!(i=i.parentNode))return d1;return i.__zoom}function r0(i){i.stopImmediatePropagation()}function Hh(i){i.preventDefault(),i.stopImmediatePropagation()}function L7(i){return(!i.ctrlKey||i.type==="wheel")&&!i.button}function B7(){var i=this;return i instanceof SVGElement?(i=i.ownerSVGElement||i,i.hasAttribute("viewBox")?(i=i.viewBox.baseVal,[[i.x,i.y],[i.x+i.width,i.y+i.height]]):[[0,0],[i.width.baseVal.value,i.height.baseVal.value]]):[[0,0],[i.clientWidth,i.clientHeight]]}function KC(){return this.__zoom||d1}function F7(i){return-i.deltaY*(i.deltaMode===1?.05:i.deltaMode?1:.002)*(i.ctrlKey?10:1)}function U7(){return navigator.maxTouchPoints||"ontouchstart"in this}function V7(i,e,n){var r=i.invertX(e[0][0])-n[0][0],s=i.invertX(e[1][0])-n[1][0],a=i.invertY(e[0][1])-n[0][1],o=i.invertY(e[1][1])-n[1][1];return i.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function j7(){var i=L7,e=B7,n=V7,r=F7,s=U7,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],u=250,h=xH,d=vf("start","zoom","end"),p,g,y,b=500,w=150,x=0,S=10;function E(G){G.property("__zoom",KC).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",F).filter(s).on("touchstart.zoom",U).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(G,et,z,Y){var nt=G.selection?G.selection():G;nt.property("__zoom",KC),G!==nt?O(G,et,z,Y):nt.interrupt().each(function(){B(this,arguments).event(Y).start().zoom(null,typeof et=="function"?et.apply(this,arguments):et).end()})},E.scaleBy=function(G,et,z,Y){E.scaleTo(G,function(){var nt=this.__zoom.k,mt=typeof et=="function"?et.apply(this,arguments):et;return nt*mt},z,Y)},E.scaleTo=function(G,et,z,Y){E.transform(G,function(){var nt=e.apply(this,arguments),mt=this.__zoom,bt=z==null?M(nt):typeof z=="function"?z.apply(this,arguments):z,q=mt.invert(bt),Z=typeof et=="function"?et.apply(this,arguments):et;return n(N(k(mt,Z),bt,q),nt,o)},z,Y)},E.translateBy=function(G,et,z,Y){E.transform(G,function(){return n(this.__zoom.translate(typeof et=="function"?et.apply(this,arguments):et,typeof z=="function"?z.apply(this,arguments):z),e.apply(this,arguments),o)},null,Y)},E.translateTo=function(G,et,z,Y,nt){E.transform(G,function(){var mt=e.apply(this,arguments),bt=this.__zoom,q=Y==null?M(mt):typeof Y=="function"?Y.apply(this,arguments):Y;return n(d1.translate(q[0],q[1]).scale(bt.k).translate(typeof et=="function"?-et.apply(this,arguments):-et,typeof z=="function"?-z.apply(this,arguments):-z),mt,o)},Y,nt)};function k(G,et){return et=Math.max(a[0],Math.min(a[1],et)),et===G.k?G:new va(et,G.x,G.y)}function N(G,et,z){var Y=et[0]-z[0]*G.k,nt=et[1]-z[1]*G.k;return Y===G.x&&nt===G.y?G:new va(G.k,Y,nt)}function M(G){return[(+G[0][0]+ +G[1][0])/2,(+G[0][1]+ +G[1][1])/2]}function O(G,et,z,Y){G.on("start.zoom",function(){B(this,arguments).event(Y).start()}).on("interrupt.zoom end.zoom",function(){B(this,arguments).event(Y).end()}).tween("zoom",function(){var nt=this,mt=arguments,bt=B(nt,mt).event(Y),q=e.apply(nt,mt),Z=z==null?M(q):typeof z=="function"?z.apply(nt,mt):z,lt=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),ct=nt.__zoom,At=typeof et=="function"?et.apply(nt,mt):et,ht=h(ct.invert(Z).concat(lt/ct.k),At.invert(Z).concat(lt/At.k));return function(yt){if(yt===1)yt=At;else{var Pt=ht(yt),kt=lt/Pt[2];yt=new va(kt,Z[0]-Pt[0]*kt,Z[1]-Pt[1]*kt)}bt.zoom(null,yt)}})}function B(G,et,z){return!z&&G.__zooming||new C(G,et)}function C(G,et){this.that=G,this.args=et,this.active=0,this.sourceEvent=null,this.extent=e.apply(G,et),this.taps=0}C.prototype={event:function(G){return G&&(this.sourceEvent=G),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(G,et){return this.mouse&&G!=="mouse"&&(this.mouse[1]=et.invert(this.mouse[0])),this.touch0&&G!=="touch"&&(this.touch0[1]=et.invert(this.touch0[0])),this.touch1&&G!=="touch"&&(this.touch1[1]=et.invert(this.touch1[0])),this.that.__zoom=et,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(G){var et=Sr(this.that).datum();d.call(G,this.that,new O7(G,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:d}),et)}};function R(G,...et){if(!i.apply(this,arguments))return;var z=B(this,et).event(G),Y=this.__zoom,nt=Math.max(a[0],Math.min(a[1],Y.k*Math.pow(2,r.apply(this,arguments)))),mt=Ts(G);if(z.wheel)(z.mouse[0][0]!==mt[0]||z.mouse[0][1]!==mt[1])&&(z.mouse[1]=Y.invert(z.mouse[0]=mt)),clearTimeout(z.wheel);else{if(Y.k===nt)return;z.mouse=[mt,Y.invert(mt)],Gg(this),z.start()}Hh(G),z.wheel=setTimeout(bt,w),z.zoom("mouse",n(N(k(Y,nt),z.mouse[0],z.mouse[1]),z.extent,o));function bt(){z.wheel=null,z.end()}}function L(G,...et){if(y||!i.apply(this,arguments))return;var z=G.currentTarget,Y=B(this,et,!0).event(G),nt=Sr(G.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",lt,!0),mt=Ts(G,z),bt=G.clientX,q=G.clientY;gN(G.view),r0(G),Y.mouse=[mt,this.__zoom.invert(mt)],Gg(this),Y.start();function Z(ct){if(Hh(ct),!Y.moved){var At=ct.clientX-bt,ht=ct.clientY-q;Y.moved=At*At+ht*ht>x}Y.event(ct).zoom("mouse",n(N(Y.that.__zoom,Y.mouse[0]=Ts(ct,z),Y.mouse[1]),Y.extent,o))}function lt(ct){nt.on("mousemove.zoom mouseup.zoom",null),mN(ct.view,Y.moved),Hh(ct),Y.event(ct).end()}}function F(G,...et){if(i.apply(this,arguments)){var z=this.__zoom,Y=Ts(G.changedTouches?G.changedTouches[0]:G,this),nt=z.invert(Y),mt=z.k*(G.shiftKey?.5:2),bt=n(N(k(z,mt),Y,nt),e.apply(this,et),o);Hh(G),u>0?Sr(this).transition().duration(u).call(O,bt,Y,G):Sr(this).call(E.transform,bt,Y,G)}}function U(G,...et){if(i.apply(this,arguments)){var z=G.touches,Y=z.length,nt=B(this,et,G.changedTouches.length===Y).event(G),mt,bt,q,Z;for(r0(G),bt=0;bt<Y;++bt)q=z[bt],Z=Ts(q,this),Z=[Z,this.__zoom.invert(Z),q.identifier],nt.touch0?!nt.touch1&&nt.touch0[2]!==Z[2]&&(nt.touch1=Z,nt.taps=0):(nt.touch0=Z,mt=!0,nt.taps=1+!!p);p&&(p=clearTimeout(p)),mt&&(nt.taps<2&&(g=Z[0],p=setTimeout(function(){p=null},b)),Gg(this),nt.start())}}function $(G,...et){if(this.__zooming){var z=B(this,et).event(G),Y=G.changedTouches,nt=Y.length,mt,bt,q,Z;for(Hh(G),mt=0;mt<nt;++mt)bt=Y[mt],q=Ts(bt,this),z.touch0&&z.touch0[2]===bt.identifier?z.touch0[0]=q:z.touch1&&z.touch1[2]===bt.identifier&&(z.touch1[0]=q);if(bt=z.that.__zoom,z.touch1){var lt=z.touch0[0],ct=z.touch0[1],At=z.touch1[0],ht=z.touch1[1],yt=(yt=At[0]-lt[0])*yt+(yt=At[1]-lt[1])*yt,Pt=(Pt=ht[0]-ct[0])*Pt+(Pt=ht[1]-ct[1])*Pt;bt=k(bt,Math.sqrt(yt/Pt)),q=[(lt[0]+At[0])/2,(lt[1]+At[1])/2],Z=[(ct[0]+ht[0])/2,(ct[1]+ht[1])/2]}else if(z.touch0)q=z.touch0[0],Z=z.touch0[1];else return;z.zoom("touch",n(N(bt,q,Z),z.extent,o))}}function V(G,...et){if(this.__zooming){var z=B(this,et).event(G),Y=G.changedTouches,nt=Y.length,mt,bt;for(r0(G),y&&clearTimeout(y),y=setTimeout(function(){y=null},b),mt=0;mt<nt;++mt)bt=Y[mt],z.touch0&&z.touch0[2]===bt.identifier?delete z.touch0:z.touch1&&z.touch1[2]===bt.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(bt=Ts(bt,this),Math.hypot(g[0]-bt[0],g[1]-bt[1])<S)){var q=Sr(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return E.wheelDelta=function(G){return arguments.length?(r=typeof G=="function"?G:mg(+G),E):r},E.filter=function(G){return arguments.length?(i=typeof G=="function"?G:mg(!!G),E):i},E.touchable=function(G){return arguments.length?(s=typeof G=="function"?G:mg(!!G),E):s},E.extent=function(G){return arguments.length?(e=typeof G=="function"?G:mg([[+G[0][0],+G[0][1]],[+G[1][0],+G[1][1]]]),E):e},E.scaleExtent=function(G){return arguments.length?(a[0]=+G[0],a[1]=+G[1],E):[a[0],a[1]]},E.translateExtent=function(G){return arguments.length?(o[0][0]=+G[0][0],o[1][0]=+G[1][0],o[0][1]=+G[0][1],o[1][1]=+G[1][1],E):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},E.constrain=function(G){return arguments.length?(n=G,E):n},E.duration=function(G){return arguments.length?(u=+G,E):u},E.interpolate=function(G){return arguments.length?(h=G,E):h},E.on=function(){var G=d.on.apply(d,arguments);return G===d?E:G},E.clickDistance=function(G){return arguments.length?(x=(G=+G)*G,E):Math.sqrt(x)},E.tapDistance=function(G){return arguments.length?(S=+G,E):S},E}class QC extends Map{constructor(e,n=$7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(ZC(this,e))}has(e){return super.has(ZC(this,e))}set(e,n){return super.set(z7(this,e),n)}delete(e){return super.delete(H7(this,e))}}function ZC({_intern:i,_key:e},n){const r=e(n);return i.has(r)?i.get(r):n}function z7({_intern:i,_key:e},n){const r=e(n);return i.has(r)?i.get(r):(i.set(r,n),n)}function H7({_intern:i,_key:e},n){const r=e(n);return i.has(r)&&(n=i.get(r),i.delete(r)),n}function $7(i){return i!==null&&typeof i=="object"?i.valueOf():i}function JC(i,e){let n;if(e===void 0)for(const r of i)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let s of i)(s=e(s,++r,i))!=null&&(n<s||n===void 0&&s>=s)&&(n=s)}return n}function t2(i,e){let n;if(e===void 0)for(const r of i)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let s of i)(s=e(s,++r,i))!=null&&(n>s||n===void 0&&s>=s)&&(n=s)}return n}function G7(i,e){let n=0;for(let r of i)(r=+r)&&(n+=r);return n}var q7=typeof global=="object"&&global&&global.Object===Object&&global,W7=typeof self=="object"&&self&&self.Object===Object&&self,IN=q7||W7||Function("return this")(),Em=IN.Symbol,DN=Object.prototype,X7=DN.hasOwnProperty,Y7=DN.toString,$h=Em?Em.toStringTag:void 0;function K7(i){var e=X7.call(i,$h),n=i[$h];try{i[$h]=void 0;var r=!0}catch{}var s=Y7.call(i);return r&&(e?i[$h]=n:delete i[$h]),s}var Q7=Object.prototype,Z7=Q7.toString;function J7(i){return Z7.call(i)}var t$="[object Null]",e$="[object Undefined]",e2=Em?Em.toStringTag:void 0;function n$(i){return i==null?i===void 0?e$:t$:e2&&e2 in Object(i)?K7(i):J7(i)}function i$(i){return i!=null&&typeof i=="object"}var r$="[object Symbol]";function s$(i){return typeof i=="symbol"||i$(i)&&n$(i)==r$}var a$=/\s/;function o$(i){for(var e=i.length;e--&&a$.test(i.charAt(e)););return e}var l$=/^\s+/;function c$(i){return i&&i.slice(0,o$(i)+1).replace(l$,"")}function Sm(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var n2=NaN,u$=/^[-+]0x[0-9a-f]+$/i,h$=/^0b[01]+$/i,d$=/^0o[0-7]+$/i,f$=parseInt;function i2(i){if(typeof i=="number")return i;if(s$(i))return n2;if(Sm(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=Sm(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=c$(i);var n=h$.test(i);return n||d$.test(i)?f$(i.slice(2),n?2:8):u$.test(i)?n2:+i}var s0=function(){return IN.Date.now()},p$="Expected a function",g$=Math.max,m$=Math.min;function kN(i,e,n){var r,s,a,o,u,h,d=0,p=!1,g=!1,y=!0;if(typeof i!="function")throw new TypeError(p$);e=i2(e)||0,Sm(n)&&(p=!!n.leading,g="maxWait"in n,a=g?g$(i2(n.maxWait)||0,e):a,y="trailing"in n?!!n.trailing:y);function b(B){var C=r,R=s;return r=s=void 0,d=B,o=i.apply(R,C),o}function w(B){return d=B,u=setTimeout(E,e),p?b(B):o}function x(B){var C=B-h,R=B-d,L=e-C;return g?m$(L,a-R):L}function S(B){var C=B-h,R=B-d;return h===void 0||C>=e||C<0||g&&R>=a}function E(){var B=s0();if(S(B))return k(B);u=setTimeout(E,x(B))}function k(B){return u=void 0,y&&r?b(B):(r=s=void 0,o)}function N(){u!==void 0&&clearTimeout(u),d=0,r=h=s=u=void 0}function M(){return u===void 0?o:k(s0())}function O(){var B=s0(),C=S(B);if(r=arguments,s=this,h=B,C){if(u===void 0)return w(h);if(g)return clearTimeout(u),u=setTimeout(E,e),b(h)}return u===void 0&&(u=setTimeout(E,e)),o}return O.cancel=N,O.flush=M,O}var y$="Expected a function";function b$(i,e,n){var r=!0,s=!0;if(typeof i!="function")throw new TypeError(y$);return Sm(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),kN(i,e,{leading:r,maxWait:e,trailing:s})}var Ol=Object.freeze({Linear:Object.freeze({None:function(i){return i},In:function(i){return i},Out:function(i){return i},InOut:function(i){return i}}),Quadratic:Object.freeze({In:function(i){return i*i},Out:function(i){return i*(2-i)},InOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}}),Cubic:Object.freeze({In:function(i){return i*i*i},Out:function(i){return--i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}}),Quartic:Object.freeze({In:function(i){return i*i*i*i},Out:function(i){return 1- --i*i*i*i},InOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}}),Quintic:Object.freeze({In:function(i){return i*i*i*i*i},Out:function(i){return--i*i*i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)}}),Sinusoidal:Object.freeze({In:function(i){return 1-Math.sin((1-i)*Math.PI/2)},Out:function(i){return Math.sin(i*Math.PI/2)},InOut:function(i){return .5*(1-Math.sin(Math.PI*(.5-i)))}}),Exponential:Object.freeze({In:function(i){return i===0?0:Math.pow(1024,i-1)},Out:function(i){return i===1?1:1-Math.pow(2,-10*i)},InOut:function(i){return i===0?0:i===1?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(-Math.pow(2,-10*(i-1))+2)}}),Circular:Object.freeze({In:function(i){return 1-Math.sqrt(1-i*i)},Out:function(i){return Math.sqrt(1- --i*i)},InOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)}}),Elastic:Object.freeze({In:function(i){return i===0?0:i===1?1:-Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI)},Out:function(i){return i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i-.1)*5*Math.PI)+1},InOut:function(i){return i===0?0:i===1?1:(i*=2,i<1?-.5*Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI):.5*Math.pow(2,-10*(i-1))*Math.sin((i-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(i){var e=1.70158;return i===1?1:i*i*((e+1)*i-e)},Out:function(i){var e=1.70158;return i===0?0:--i*i*((e+1)*i+e)+1},InOut:function(i){var e=2.5949095;return(i*=2)<1?.5*(i*i*((e+1)*i-e)):.5*((i-=2)*i*((e+1)*i+e)+2)}}),Bounce:Object.freeze({In:function(i){return 1-Ol.Bounce.Out(1-i)},Out:function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},InOut:function(i){return i<.5?Ol.Bounce.In(i*2)*.5:Ol.Bounce.Out(i*2-1)*.5+.5}}),generatePow:function(i){return i===void 0&&(i=4),i=i<Number.EPSILON?Number.EPSILON:i,i=i>1e4?1e4:i,{In:function(e){return Math.pow(e,i)},Out:function(e){return 1-Math.pow(1-e,i)},InOut:function(e){return e<.5?Math.pow(e*2,i)/2:(1-Math.pow(2-e*2,i))/2+.5}}}}),ud=function(){return performance.now()},NN=(function(){function i(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return i.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},i.prototype.removeAll=function(){this._tweens={}},i.prototype.add=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var s=0,a=n;s<a.length;s++){var o=a[s];(e=o._group)===null||e===void 0||e.remove(o),o._group=this,this._tweens[o.getId()]=o,this._tweensAddedDuringUpdate[o.getId()]=o}},i.prototype.remove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=0,s=e;r<s.length;r++){var a=s[r];a._group=void 0,delete this._tweens[a.getId()],delete this._tweensAddedDuringUpdate[a.getId()]}},i.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},i.prototype.update=function(e,n){e===void 0&&(e=ud()),n===void 0&&(n=!0);var r=Object.keys(this._tweens);if(r.length!==0)for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<r.length;s++){var a=this._tweens[r[s]],o=!n;a&&a.update(e,o)===!1&&!n&&this.remove(a)}r=Object.keys(this._tweensAddedDuringUpdate)}},i})(),x_={Linear:function(i,e){var n=i.length-1,r=n*e,s=Math.floor(r),a=x_.Utils.Linear;return e<0?a(i[0],i[1],r):e>1?a(i[n],i[n-1],n-r):a(i[s],i[s+1>n?n:s+1],r-s)},Utils:{Linear:function(i,e,n){return(e-i)*n+i}}},MN=(function(){function i(){}return i.nextId=function(){return i._nextId++},i._nextId=0,i})(),E_=new NN,r2=(function(){function i(e,n){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Ol.Linear.None,this._interpolationFunction=x_.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=MN.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof n=="object"?(this._group=n,n.add(this)):n===!0&&(this._group=E_,E_.add(this))}return i.prototype.getId=function(){return this._id},i.prototype.isPlaying=function(){return this._isPlaying},i.prototype.isPaused=function(){return this._isPaused},i.prototype.getDuration=function(){return this._duration},i.prototype.to=function(e,n){if(n===void 0&&(n=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=n<0?0:n,this},i.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},i.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},i.prototype.start=function(e,n){if(e===void 0&&(e=ud()),n===void 0&&(n=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var r in this._valuesStartRepeat)this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||n){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var a in this._valuesEnd)s[a]=this._valuesEnd[a];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n)}return this},i.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},i.prototype._setupProperties=function(e,n,r,s,a){for(var o in r){var u=e[o],h=Array.isArray(u),d=h?"array":typeof u,p=!h&&Array.isArray(r[o]);if(!(d==="undefined"||d==="function")){if(p){var g=r[o];if(g.length===0)continue;for(var y=[u],b=0,w=g.length;b<w;b+=1){var x=this._handleRelativeValue(u,g[b]);if(isNaN(x)){p=!1,console.warn("Found invalid interpolation list. Skipping.");break}y.push(x)}p&&(r[o]=y)}if((d==="object"||h)&&u&&!p){n[o]=h?[]:{};var S=u;for(var E in S)n[o][E]=S[E];s[o]=h?[]:{};var g=r[o];if(!this._isDynamic){var k={};for(var E in g)k[E]=g[E];r[o]=g=k}this._setupProperties(S,n[o],g,s[o],a)}else(typeof n[o]>"u"||a)&&(n[o]=u),h||(n[o]*=1),p?s[o]=r[o].slice().reverse():s[o]=n[o]||0}}},i.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},i.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},i.prototype.pause=function(e){return e===void 0&&(e=ud()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},i.prototype.resume=function(e){return e===void 0&&(e=ud()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},i.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},i.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},i.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},i.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},i.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},i.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},i.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},i.prototype.easing=function(e){return e===void 0&&(e=Ol.Linear.None),this._easingFunction=e,this},i.prototype.interpolation=function(e){return e===void 0&&(e=x_.Linear),this._interpolationFunction=e,this},i.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},i.prototype.onStart=function(e){return this._onStartCallback=e,this},i.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},i.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},i.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},i.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},i.prototype.onStop=function(e){return this._onStopCallback=e,this},i.prototype.update=function(e,n){var r=this,s;if(e===void 0&&(e=ud()),n===void 0&&(n=i.autoStartOnUpdate),this._isPaused)return!0;var a;if(!this._goToEnd&&!this._isPlaying)if(n)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var o=e-this._startTime,u=this._duration+((s=this._repeatDelayTime)!==null&&s!==void 0?s:this._delayTime),h=this._duration+this._repeat*u,d=function(){if(r._duration===0||o>h)return 1;var x=Math.trunc(o/u),S=o-x*u,E=Math.min(S/r._duration,1);return E===0&&o===r._duration?1:E},p=d(),g=this._easingFunction(p);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,g),this._onUpdateCallback&&this._onUpdateCallback(this._object,p),this._duration===0||o>=this._duration)if(this._repeat>0){var y=Math.min(Math.trunc((o-this._duration)/u)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=y);for(a in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[a]=="string"&&(this._valuesStartRepeat[a]=this._valuesStartRepeat[a]+parseFloat(this._valuesEnd[a])),this._yoyo&&this._swapEndStartRepeatValues(a),this._valuesStart[a]=this._valuesStartRepeat[a];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=u*y,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var b=0,w=this._chainedTweens.length;b<w;b++)this._chainedTweens[b].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},i.prototype._updateProperties=function(e,n,r,s){for(var a in r)if(n[a]!==void 0){var o=n[a]||0,u=r[a],h=Array.isArray(e[a]),d=Array.isArray(u),p=!h&&d;p?e[a]=this._interpolationFunction(u,s):typeof u=="object"&&u?this._updateProperties(e[a],o,u,s):(u=this._handleRelativeValue(o,u),typeof u=="number"&&(e[a]=o+(u-o)*s))}},i.prototype._handleRelativeValue=function(e,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?e+parseFloat(n):parseFloat(n)},i.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],r=this._valuesEnd[e];typeof r=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},i.autoStartOnUpdate=!1,i})();MN.nextId;var js=E_;js.getAll.bind(js);js.removeAll.bind(js);js.add.bind(js);js.remove.bind(js);js.update.bind(js);function s2(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=Array(e);n<e;n++)r[n]=i[n];return r}function v$(i){if(Array.isArray(i))return i}function _$(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function w$(i,e,n){return Object.defineProperty(i,"prototype",{writable:!1}),i}function A$(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var r,s,a,o,u=[],h=!0,d=!1;try{if(a=(n=n.call(i)).next,e!==0)for(;!(h=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(p){d=!0,s=p}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return u}}function x$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E$(i,e){return v$(i)||A$(i,e)||S$(i,e)||x$()}function S$(i,e){if(i){if(typeof i=="string")return s2(i,e);var n={}.toString.call(i).slice(8,-1);return n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set"?Array.from(i):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s2(i,e):void 0}}var T$=w$(function i(e,n){var r=n.default,s=r===void 0?null:r,a=n.triggerUpdate,o=a===void 0?!0:a,u=n.onChange,h=u===void 0?function(d,p){}:u;_$(this,i),this.name=e,this.defaultVal=s,this.triggerUpdate=o,this.onChange=h});function f1(i){var e=i.stateInit,n=e===void 0?function(){return{}}:e,r=i.props,s=r===void 0?{}:r,a=i.methods,o=a===void 0?{}:a,u=i.aliases,h=u===void 0?{}:u,d=i.init,p=d===void 0?function(){}:d,g=i.update,y=g===void 0?function(){}:g,b=Object.keys(s).map(function(w){return new T$(w,s[w])});return function w(){for(var x=arguments.length,S=new Array(x),E=0;E<x;E++)S[E]=arguments[E];var k=!!(this instanceof w&&this.constructor),N=k?S.shift():void 0,M=S[0],O=M===void 0?{}:M,B=Object.assign({},n instanceof Function?n(O):n,{initialised:!1}),C={};function R(U){return L(U,O),F(),R}var L=function($,V){p.call(R,$,B,V),B.initialised=!0},F=kN(function(){B.initialised&&(y.call(R,B,C),C={})},1);return b.forEach(function(U){R[U.name]=$(U);function $(V){var G=V.name,et=V.triggerUpdate,z=et===void 0?!1:et,Y=V.onChange,nt=Y===void 0?function(q,Z){}:Y,mt=V.defaultVal,bt=mt===void 0?null:mt;return function(q){var Z=B[G];if(!arguments.length)return Z;var lt=q===void 0?bt:q;return B[G]=lt,nt.call(R,lt,B,Z),!C.hasOwnProperty(G)&&(C[G]=Z),z&&F(),R}}}),Object.keys(o).forEach(function(U){R[U]=function(){for(var $,V=arguments.length,G=new Array(V),et=0;et<V;et++)G[et]=arguments[et];return($=o[U]).call.apply($,[R,B].concat(G))}}),Object.entries(h).forEach(function(U){var $=E$(U,2),V=$[0],G=$[1];return R[V]=R[G]}),R.resetProps=function(){return b.forEach(function(U){R[U.name](U.defaultVal)}),R},R.resetProps(),B._rerender=F,k&&N&&R(N),R}}var we=(function(i){return typeof i=="function"?i:typeof i=="string"?function(e){return e[i]}:function(e){return i}});function Tm(i){"@babel/helpers - typeof";return Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tm(i)}var C$=/^\s+/,R$=/\s+$/;function Mt(i,e){if(i=i||"",e=e||{},i instanceof Mt)return i;if(!(this instanceof Mt))return new Mt(i,e);var n=I$(i);this._originalInput=i,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}Mt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),n,r,s,a,o,u;return n=e.r/255,r=e.g/255,s=e.b/255,n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),s<=.03928?u=s/12.92:u=Math.pow((s+.055)/1.055,2.4),.2126*a+.7152*o+.0722*u},setAlpha:function(e){return this._a=PN(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=o2(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o2(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),s=Math.round(e.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+s+"%)":"hsva("+n+", "+r+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var e=a2(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=a2(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),s=Math.round(e.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+s+"%)":"hsla("+n+", "+r+"%, "+s+"%, "+this._roundA+")"},toHex:function(e){return l2(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return M$(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Ze(this._r,255)*100)+"%",g:Math.round(Ze(this._g,255)*100)+"%",b:Math.round(Ze(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Ze(this._r,255)*100)+"%, "+Math.round(Ze(this._g,255)*100)+"%, "+Math.round(Ze(this._b,255)*100)+"%)":"rgba("+Math.round(Ze(this._r,255)*100)+"%, "+Math.round(Ze(this._g,255)*100)+"%, "+Math.round(Ze(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:G$[l2(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var n="#"+c2(this._r,this._g,this._b,this._a),r=n,s=this._gradientType?"GradientType = 1, ":"";if(e){var a=Mt(e);r="#"+c2(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+n+",endColorstr="+r+")"},toString:function(e){var n=!!e;e=e||this._format;var r=!1,s=this._a<1&&this._a>=0,a=!n&&s&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return a?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return Mt(this.toString())},_applyModification:function(e,n){var r=e.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(B$,arguments)},brighten:function(){return this._applyModification(F$,arguments)},darken:function(){return this._applyModification(U$,arguments)},desaturate:function(){return this._applyModification(P$,arguments)},saturate:function(){return this._applyModification(O$,arguments)},greyscale:function(){return this._applyModification(L$,arguments)},spin:function(){return this._applyModification(V$,arguments)},_applyCombination:function(e,n){return e.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(H$,arguments)},complement:function(){return this._applyCombination(j$,arguments)},monochromatic:function(){return this._applyCombination($$,arguments)},splitcomplement:function(){return this._applyCombination(z$,arguments)},triad:function(){return this._applyCombination(u2,[3])},tetrad:function(){return this._applyCombination(u2,[4])}};Mt.fromRatio=function(i,e){if(Tm(i)=="object"){var n={};for(var r in i)i.hasOwnProperty(r)&&(r==="a"?n[r]=i[r]:n[r]=hd(i[r]));i=n}return Mt(i,e)};function I$(i){var e={r:0,g:0,b:0},n=1,r=null,s=null,a=null,o=!1,u=!1;return typeof i=="string"&&(i=Y$(i)),Tm(i)=="object"&&(ua(i.r)&&ua(i.g)&&ua(i.b)?(e=D$(i.r,i.g,i.b),o=!0,u=String(i.r).substr(-1)==="%"?"prgb":"rgb"):ua(i.h)&&ua(i.s)&&ua(i.v)?(r=hd(i.s),s=hd(i.v),e=N$(i.h,r,s),o=!0,u="hsv"):ua(i.h)&&ua(i.s)&&ua(i.l)&&(r=hd(i.s),a=hd(i.l),e=k$(i.h,r,a),o=!0,u="hsl"),i.hasOwnProperty("a")&&(n=i.a)),n=PN(n),{ok:o,format:i.format||u,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}function D$(i,e,n){return{r:Ze(i,255)*255,g:Ze(e,255)*255,b:Ze(n,255)*255}}function a2(i,e,n){i=Ze(i,255),e=Ze(e,255),n=Ze(n,255);var r=Math.max(i,e,n),s=Math.min(i,e,n),a,o,u=(r+s)/2;if(r==s)a=o=0;else{var h=r-s;switch(o=u>.5?h/(2-r-s):h/(r+s),r){case i:a=(e-n)/h+(e<n?6:0);break;case e:a=(n-i)/h+2;break;case n:a=(i-e)/h+4;break}a/=6}return{h:a,s:o,l:u}}function k$(i,e,n){var r,s,a;i=Ze(i,360),e=Ze(e,100),n=Ze(n,100);function o(d,p,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?d+(p-d)*6*g:g<1/2?p:g<2/3?d+(p-d)*(2/3-g)*6:d}if(e===0)r=s=a=n;else{var u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=o(h,u,i+1/3),s=o(h,u,i),a=o(h,u,i-1/3)}return{r:r*255,g:s*255,b:a*255}}function o2(i,e,n){i=Ze(i,255),e=Ze(e,255),n=Ze(n,255);var r=Math.max(i,e,n),s=Math.min(i,e,n),a,o,u=r,h=r-s;if(o=r===0?0:h/r,r==s)a=0;else{switch(r){case i:a=(e-n)/h+(e<n?6:0);break;case e:a=(n-i)/h+2;break;case n:a=(i-e)/h+4;break}a/=6}return{h:a,s:o,v:u}}function N$(i,e,n){i=Ze(i,360)*6,e=Ze(e,100),n=Ze(n,100);var r=Math.floor(i),s=i-r,a=n*(1-e),o=n*(1-s*e),u=n*(1-(1-s)*e),h=r%6,d=[n,o,a,a,u,n][h],p=[u,n,n,o,a,a][h],g=[a,a,u,n,n,o][h];return{r:d*255,g:p*255,b:g*255}}function l2(i,e,n,r){var s=[$r(Math.round(i).toString(16)),$r(Math.round(e).toString(16)),$r(Math.round(n).toString(16))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function M$(i,e,n,r,s){var a=[$r(Math.round(i).toString(16)),$r(Math.round(e).toString(16)),$r(Math.round(n).toString(16)),$r(ON(r))];return s&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function c2(i,e,n,r){var s=[$r(ON(r)),$r(Math.round(i).toString(16)),$r(Math.round(e).toString(16)),$r(Math.round(n).toString(16))];return s.join("")}Mt.equals=function(i,e){return!i||!e?!1:Mt(i).toRgbString()==Mt(e).toRgbString()};Mt.random=function(){return Mt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function P$(i,e){e=e===0?0:e||10;var n=Mt(i).toHsl();return n.s-=e/100,n.s=my(n.s),Mt(n)}function O$(i,e){e=e===0?0:e||10;var n=Mt(i).toHsl();return n.s+=e/100,n.s=my(n.s),Mt(n)}function L$(i){return Mt(i).desaturate(100)}function B$(i,e){e=e===0?0:e||10;var n=Mt(i).toHsl();return n.l+=e/100,n.l=my(n.l),Mt(n)}function F$(i,e){e=e===0?0:e||10;var n=Mt(i).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),Mt(n)}function U$(i,e){e=e===0?0:e||10;var n=Mt(i).toHsl();return n.l-=e/100,n.l=my(n.l),Mt(n)}function V$(i,e){var n=Mt(i).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,Mt(n)}function j$(i){var e=Mt(i).toHsl();return e.h=(e.h+180)%360,Mt(e)}function u2(i,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Mt(i).toHsl(),r=[Mt(i)],s=360/e,a=1;a<e;a++)r.push(Mt({h:(n.h+a*s)%360,s:n.s,l:n.l}));return r}function z$(i){var e=Mt(i).toHsl(),n=e.h;return[Mt(i),Mt({h:(n+72)%360,s:e.s,l:e.l}),Mt({h:(n+216)%360,s:e.s,l:e.l})]}function H$(i,e,n){e=e||6,n=n||30;var r=Mt(i).toHsl(),s=360/n,a=[Mt(i)];for(r.h=(r.h-(s*e>>1)+720)%360;--e;)r.h=(r.h+s)%360,a.push(Mt(r));return a}function $$(i,e){e=e||6;for(var n=Mt(i).toHsv(),r=n.h,s=n.s,a=n.v,o=[],u=1/e;e--;)o.push(Mt({h:r,s,v:a})),a=(a+u)%1;return o}Mt.mix=function(i,e,n){n=n===0?0:n||50;var r=Mt(i).toRgb(),s=Mt(e).toRgb(),a=n/100,o={r:(s.r-r.r)*a+r.r,g:(s.g-r.g)*a+r.g,b:(s.b-r.b)*a+r.b,a:(s.a-r.a)*a+r.a};return Mt(o)};Mt.readability=function(i,e){var n=Mt(i),r=Mt(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};Mt.isReadable=function(i,e,n){var r=Mt.readability(i,e),s,a;switch(a=!1,s=K$(n),s.level+s.size){case"AAsmall":case"AAAlarge":a=r>=4.5;break;case"AAlarge":a=r>=3;break;case"AAAsmall":a=r>=7;break}return a};Mt.mostReadable=function(i,e,n){var r=null,s=0,a,o,u,h;n=n||{},o=n.includeFallbackColors,u=n.level,h=n.size;for(var d=0;d<e.length;d++)a=Mt.readability(i,e[d]),a>s&&(s=a,r=Mt(e[d]));return Mt.isReadable(i,r,{level:u,size:h})||!o?r:(n.includeFallbackColors=!1,Mt.mostReadable(i,["#fff","#000"],n))};var S_=Mt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},G$=Mt.hexNames=q$(S_);function q$(i){var e={};for(var n in i)i.hasOwnProperty(n)&&(e[i[n]]=n);return e}function PN(i){return i=parseFloat(i),(isNaN(i)||i<0||i>1)&&(i=1),i}function Ze(i,e){W$(i)&&(i="100%");var n=X$(i);return i=Math.min(e,Math.max(0,parseFloat(i))),n&&(i=parseInt(i*e,10)/100),Math.abs(i-e)<1e-6?1:i%e/parseFloat(e)}function my(i){return Math.min(1,Math.max(0,i))}function Xi(i){return parseInt(i,16)}function W$(i){return typeof i=="string"&&i.indexOf(".")!=-1&&parseFloat(i)===1}function X$(i){return typeof i=="string"&&i.indexOf("%")!=-1}function $r(i){return i.length==1?"0"+i:""+i}function hd(i){return i<=1&&(i=i*100+"%"),i}function ON(i){return Math.round(parseFloat(i)*255).toString(16)}function h2(i){return Xi(i)/255}var Vr=(function(){var i="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+i+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",s="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function ua(i){return!!Vr.CSS_UNIT.exec(i)}function Y$(i){i=i.replace(C$,"").replace(R$,"").toLowerCase();var e=!1;if(S_[i])i=S_[i],e=!0;else if(i=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Vr.rgb.exec(i))?{r:n[1],g:n[2],b:n[3]}:(n=Vr.rgba.exec(i))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Vr.hsl.exec(i))?{h:n[1],s:n[2],l:n[3]}:(n=Vr.hsla.exec(i))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Vr.hsv.exec(i))?{h:n[1],s:n[2],v:n[3]}:(n=Vr.hsva.exec(i))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Vr.hex8.exec(i))?{r:Xi(n[1]),g:Xi(n[2]),b:Xi(n[3]),a:h2(n[4]),format:e?"name":"hex8"}:(n=Vr.hex6.exec(i))?{r:Xi(n[1]),g:Xi(n[2]),b:Xi(n[3]),format:e?"name":"hex"}:(n=Vr.hex4.exec(i))?{r:Xi(n[1]+""+n[1]),g:Xi(n[2]+""+n[2]),b:Xi(n[3]+""+n[3]),a:h2(n[4]+""+n[4]),format:e?"name":"hex8"}:(n=Vr.hex3.exec(i))?{r:Xi(n[1]+""+n[1]),g:Xi(n[2]+""+n[2]),b:Xi(n[3]+""+n[3]),format:e?"name":"hex"}:!1}function K$(i){var e,n;return i=i||{level:"AA",size:"small"},e=(i.level||"AA").toUpperCase(),n=(i.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:e,size:n}}function T_(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=Array(e);n<e;n++)r[n]=i[n];return r}function Q$(i){if(Array.isArray(i))return T_(i)}function LN(i,e,n){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function Z$(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function J$(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function yr(i,e){return i.get(LN(i,e))}function d2(i,e,n){Z$(i,e),e.set(i,n)}function f2(i,e,n){return i.set(LN(i,e),n),n}function tG(i,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,aG(r.key),r)}}function eG(i,e,n){return e&&tG(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function nG(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function iG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rG(i){return Q$(i)||nG(i)||oG(i)||iG()}function sG(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var r=n.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function aG(i){var e=sG(i,"string");return typeof e=="symbol"?e:e+""}function oG(i,e){if(i){if(typeof i=="string")return T_(i,e);var n={}.toString.call(i).slice(8,-1);return n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set"?Array.from(i):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T_(i,e):void 0}}var lG=123,cG=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},BN=function(e,n,r){return(e<<16)+(n<<8)+r},uG=function(e){var n=Mt(e).toRgb(),r=n.r,s=n.g,a=n.b;return BN(r,s,a)},p2=function(e,n){return e*lG%Math.pow(2,n)},gl=new WeakMap,ha=new WeakMap,hG=(function(){function i(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;J$(this,i),d2(this,gl,void 0),d2(this,ha,void 0),f2(ha,this,e),this.reset()}return eG(i,[{key:"reset",value:function(){f2(gl,this,["__reserved for background__"])}},{key:"register",value:function(n){if(yr(gl,this).length>=Math.pow(2,24-yr(ha,this)))return null;var r=yr(gl,this).length,s=p2(r,yr(ha,this)),a=cG(r+(s<<24-yr(ha,this)));return yr(gl,this).push(n),a}},{key:"lookup",value:function(n){if(!n)return null;var r=typeof n=="string"?uG(n):BN.apply(void 0,rG(n));if(!r)return null;var s=r&Math.pow(2,24-yr(ha,this))-1,a=r>>24-yr(ha,this)&Math.pow(2,yr(ha,this))-1;return p2(s,yr(ha,this))!==a||s>=yr(gl,this).length?null:yr(gl,this)[s]}}])})(),wf,Je,FN,UN,wl,g2,VN,jN,zN,p1,C_,R_,Hd={},HN=[],dG=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,yy=Array.isArray;function ks(i,e){for(var n in e)i[n]=e[n];return i}function g1(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function fG(i,e,n){var r,s,a,o={};for(a in e)a=="key"?r=e[a]:a=="ref"?s=e[a]:o[a]=e[a];if(arguments.length>2&&(o.children=arguments.length>3?wf.call(arguments,2):n),typeof i=="function"&&i.defaultProps!=null)for(a in i.defaultProps)o[a]===void 0&&(o[a]=i.defaultProps[a]);return Ad(i,o,r,s,null)}function Ad(i,e,n,r,s){var a={type:i,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++FN,__i:-1,__u:0};return s==null&&Je.vnode!=null&&Je.vnode(a),a}function by(i){return i.children}function qg(i,e){this.props=i,this.context=e}function wu(i,e){if(e==null)return i.__?wu(i.__,i.__i+1):null;for(var n;e<i.__k.length;e++)if((n=i.__k[e])!=null&&n.__e!=null)return n.__e;return typeof i.type=="function"?wu(i):null}function $N(i){var e,n;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,e=0;e<i.__k.length;e++)if((n=i.__k[e])!=null&&n.__e!=null){i.__e=i.__c.base=n.__e;break}return $N(i)}}function m2(i){(!i.__d&&(i.__d=!0)&&wl.push(i)&&!Cm.__r++||g2!=Je.debounceRendering)&&((g2=Je.debounceRendering)||VN)(Cm)}function Cm(){for(var i,e,n,r,s,a,o,u=1;wl.length;)wl.length>u&&wl.sort(jN),i=wl.shift(),u=wl.length,i.__d&&(n=void 0,r=void 0,s=(r=(e=i).__v).__e,a=[],o=[],e.__P&&((n=ks({},r)).__v=r.__v+1,Je.vnode&&Je.vnode(n),m1(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[s]:null,a,s??wu(r),!!(32&r.__u),o),n.__v=r.__v,n.__.__k[n.__i]=n,WN(a,n,o),r.__e=r.__=null,n.__e!=s&&$N(n)));Cm.__r=0}function GN(i,e,n,r,s,a,o,u,h,d,p){var g,y,b,w,x,S,E,k=r&&r.__k||HN,N=e.length;for(h=pG(n,e,k,h,N),g=0;g<N;g++)(b=n.__k[g])!=null&&(y=b.__i==-1?Hd:k[b.__i]||Hd,b.__i=g,S=m1(i,b,y,s,a,o,u,h,d,p),w=b.__e,b.ref&&y.ref!=b.ref&&(y.ref&&y1(y.ref,null,b),p.push(b.ref,b.__c||w,b)),x==null&&w!=null&&(x=w),(E=!!(4&b.__u))||y.__k===b.__k?h=qN(b,h,i,E):typeof b.type=="function"&&S!==void 0?h=S:w&&(h=w.nextSibling),b.__u&=-7);return n.__e=x,h}function pG(i,e,n,r,s){var a,o,u,h,d,p=n.length,g=p,y=0;for(i.__k=new Array(s),a=0;a<s;a++)(o=e[a])!=null&&typeof o!="boolean"&&typeof o!="function"?(h=a+y,(o=i.__k[a]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Ad(null,o,null,null,null):yy(o)?Ad(by,{children:o},null,null,null):o.constructor==null&&o.__b>0?Ad(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=i,o.__b=i.__b+1,u=null,(d=o.__i=gG(o,n,h,g))!=-1&&(g--,(u=n[d])&&(u.__u|=2)),u==null||u.__v==null?(d==-1&&(s>p?y--:s<p&&y++),typeof o.type!="function"&&(o.__u|=4)):d!=h&&(d==h-1?y--:d==h+1?y++:(d>h?y--:y++,o.__u|=4))):i.__k[a]=null;if(g)for(a=0;a<p;a++)(u=n[a])!=null&&(2&u.__u)==0&&(u.__e==r&&(r=wu(u)),YN(u,u));return r}function qN(i,e,n,r){var s,a;if(typeof i.type=="function"){for(s=i.__k,a=0;s&&a<s.length;a++)s[a]&&(s[a].__=i,e=qN(s[a],e,n,r));return e}i.__e!=e&&(r&&(e&&i.type&&!e.parentNode&&(e=wu(i)),n.insertBefore(i.__e,e||null)),e=i.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function gG(i,e,n,r){var s,a,o,u=i.key,h=i.type,d=e[n],p=d!=null&&(2&d.__u)==0;if(d===null&&i.key==null||p&&u==d.key&&h==d.type)return n;if(r>(p?1:0)){for(s=n-1,a=n+1;s>=0||a<e.length;)if((d=e[o=s>=0?s--:a++])!=null&&(2&d.__u)==0&&u==d.key&&h==d.type)return o}return-1}function y2(i,e,n){e[0]=="-"?i.setProperty(e,n??""):i[e]=n==null?"":typeof n!="number"||dG.test(e)?n:n+"px"}function yg(i,e,n,r,s){var a,o;t:if(e=="style")if(typeof n=="string")i.style.cssText=n;else{if(typeof r=="string"&&(i.style.cssText=r=""),r)for(e in r)n&&e in n||y2(i.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||y2(i.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")a=e!=(e=e.replace(zN,"$1")),o=e.toLowerCase(),e=o in i||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),i.l||(i.l={}),i.l[e+a]=n,n?r?n.u=r.u:(n.u=p1,i.addEventListener(e,a?R_:C_,a)):i.removeEventListener(e,a?R_:C_,a);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in i)try{i[e]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?i.removeAttribute(e):i.setAttribute(e,e=="popover"&&n==1?"":n))}}function b2(i){return function(e){if(this.l){var n=this.l[e.type+i];if(e.t==null)e.t=p1++;else if(e.t<n.u)return;return n(Je.event?Je.event(e):e)}}}function m1(i,e,n,r,s,a,o,u,h,d){var p,g,y,b,w,x,S,E,k,N,M,O,B,C,R,L,F,U=e.type;if(e.constructor!=null)return null;128&n.__u&&(h=!!(32&n.__u),a=[u=e.__e=n.__e]),(p=Je.__b)&&p(e);t:if(typeof U=="function")try{if(E=e.props,k="prototype"in U&&U.prototype.render,N=(p=U.contextType)&&r[p.__c],M=p?N?N.props.value:p.__:r,n.__c?S=(g=e.__c=n.__c).__=g.__E:(k?e.__c=g=new U(E,M):(e.__c=g=new qg(E,M),g.constructor=U,g.render=yG),N&&N.sub(g),g.props=E,g.state||(g.state={}),g.context=M,g.__n=r,y=g.__d=!0,g.__h=[],g._sb=[]),k&&g.__s==null&&(g.__s=g.state),k&&U.getDerivedStateFromProps!=null&&(g.__s==g.state&&(g.__s=ks({},g.__s)),ks(g.__s,U.getDerivedStateFromProps(E,g.__s))),b=g.props,w=g.state,g.__v=e,y)k&&U.getDerivedStateFromProps==null&&g.componentWillMount!=null&&g.componentWillMount(),k&&g.componentDidMount!=null&&g.__h.push(g.componentDidMount);else{if(k&&U.getDerivedStateFromProps==null&&E!==b&&g.componentWillReceiveProps!=null&&g.componentWillReceiveProps(E,M),!g.__e&&g.shouldComponentUpdate!=null&&g.shouldComponentUpdate(E,g.__s,M)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(g.props=E,g.state=g.__s,g.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function($){$&&($.__=e)}),O=0;O<g._sb.length;O++)g.__h.push(g._sb[O]);g._sb=[],g.__h.length&&o.push(g);break t}g.componentWillUpdate!=null&&g.componentWillUpdate(E,g.__s,M),k&&g.componentDidUpdate!=null&&g.__h.push(function(){g.componentDidUpdate(b,w,x)})}if(g.context=M,g.props=E,g.__P=i,g.__e=!1,B=Je.__r,C=0,k){for(g.state=g.__s,g.__d=!1,B&&B(e),p=g.render(g.props,g.state,g.context),R=0;R<g._sb.length;R++)g.__h.push(g._sb[R]);g._sb=[]}else do g.__d=!1,B&&B(e),p=g.render(g.props,g.state,g.context),g.state=g.__s;while(g.__d&&++C<25);g.state=g.__s,g.getChildContext!=null&&(r=ks(ks({},r),g.getChildContext())),k&&!y&&g.getSnapshotBeforeUpdate!=null&&(x=g.getSnapshotBeforeUpdate(b,w)),L=p,p!=null&&p.type===by&&p.key==null&&(L=XN(p.props.children)),u=GN(i,yy(L)?L:[L],e,n,r,s,a,o,u,h,d),g.base=e.__e,e.__u&=-161,g.__h.length&&o.push(g),S&&(g.__E=g.__=null)}catch($){if(e.__v=null,h||a!=null)if($.then){for(e.__u|=h?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;a[a.indexOf(u)]=null,e.__e=u}else{for(F=a.length;F--;)g1(a[F]);I_(e)}else e.__e=n.__e,e.__k=n.__k,$.then||I_(e);Je.__e($,e,n)}else a==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):u=e.__e=mG(n.__e,e,n,r,s,a,o,h,d);return(p=Je.diffed)&&p(e),128&e.__u?void 0:u}function I_(i){i&&i.__c&&(i.__c.__e=!0),i&&i.__k&&i.__k.forEach(I_)}function WN(i,e,n){for(var r=0;r<n.length;r++)y1(n[r],n[++r],n[++r]);Je.__c&&Je.__c(e,i),i.some(function(s){try{i=s.__h,s.__h=[],i.some(function(a){a.call(s)})}catch(a){Je.__e(a,s.__v)}})}function XN(i){return typeof i!="object"||i==null||i.__b&&i.__b>0?i:yy(i)?i.map(XN):ks({},i)}function mG(i,e,n,r,s,a,o,u,h){var d,p,g,y,b,w,x,S=n.props,E=e.props,k=e.type;if(k=="svg"?s="http://www.w3.org/2000/svg":k=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),a!=null){for(d=0;d<a.length;d++)if((b=a[d])&&"setAttribute"in b==!!k&&(k?b.localName==k:b.nodeType==3)){i=b,a[d]=null;break}}if(i==null){if(k==null)return document.createTextNode(E);i=document.createElementNS(s,k,E.is&&E),u&&(Je.__m&&Je.__m(e,a),u=!1),a=null}if(k==null)S===E||u&&i.data==E||(i.data=E);else{if(a=a&&wf.call(i.childNodes),S=n.props||Hd,!u&&a!=null)for(S={},d=0;d<i.attributes.length;d++)S[(b=i.attributes[d]).name]=b.value;for(d in S)if(b=S[d],d!="children"){if(d=="dangerouslySetInnerHTML")g=b;else if(!(d in E)){if(d=="value"&&"defaultValue"in E||d=="checked"&&"defaultChecked"in E)continue;yg(i,d,null,b,s)}}for(d in E)b=E[d],d=="children"?y=b:d=="dangerouslySetInnerHTML"?p=b:d=="value"?w=b:d=="checked"?x=b:u&&typeof b!="function"||S[d]===b||yg(i,d,b,S[d],s);if(p)u||g&&(p.__html==g.__html||p.__html==i.innerHTML)||(i.innerHTML=p.__html),e.__k=[];else if(g&&(i.innerHTML=""),GN(e.type=="template"?i.content:i,yy(y)?y:[y],e,n,r,k=="foreignObject"?"http://www.w3.org/1999/xhtml":s,a,o,a?a[0]:n.__k&&wu(n,0),u,h),a!=null)for(d=a.length;d--;)g1(a[d]);u||(d="value",k=="progress"&&w==null?i.removeAttribute("value"):w!=null&&(w!==i[d]||k=="progress"&&!w||k=="option"&&w!=S[d])&&yg(i,d,w,S[d],s),d="checked",x!=null&&x!=i[d]&&yg(i,d,x,S[d],s))}return i}function y1(i,e,n){try{if(typeof i=="function"){var r=typeof i.__u=="function";r&&i.__u(),r&&e==null||(i.__u=i(e))}else i.current=e}catch(s){Je.__e(s,n)}}function YN(i,e,n){var r,s;if(Je.unmount&&Je.unmount(i),(r=i.ref)&&(r.current&&r.current!=i.__e||y1(r,null,e)),(r=i.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){Je.__e(a,e)}r.base=r.__P=null}if(r=i.__k)for(s=0;s<r.length;s++)r[s]&&YN(r[s],e,n||typeof i.type!="function");n||g1(i.__e),i.__c=i.__=i.__e=void 0}function yG(i,e,n){return this.constructor(i,n)}function bG(i,e,n){var r,s,a,o;e==document&&(e=document.documentElement),Je.__&&Je.__(i,e),s=(r=!1)?null:e.__k,a=[],o=[],m1(e,i=e.__k=fG(by,null,[i]),s||Hd,Hd,e.namespaceURI,s?null:e.firstChild?wf.call(e.childNodes):null,a,s?s.__e:e.firstChild,r,o),WN(a,i,o)}function KN(i,e,n){var r,s,a,o,u=ks({},i.props);for(a in i.type&&i.type.defaultProps&&(o=i.type.defaultProps),e)a=="key"?r=e[a]:a=="ref"?s=e[a]:u[a]=e[a]===void 0&&o!=null?o[a]:e[a];return arguments.length>2&&(u.children=arguments.length>3?wf.call(arguments,2):n),Ad(i.type,u,r||i.key,s||i.ref,null)}wf=HN.slice,Je={__e:function(i,e,n,r){for(var s,a,o;e=e.__;)if((s=e.__c)&&!s.__)try{if((a=s.constructor)&&a.getDerivedStateFromError!=null&&(s.setState(a.getDerivedStateFromError(i)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(i,r||{}),o=s.__d),o)return s.__E=s}catch(u){i=u}throw i}},FN=0,UN=function(i){return i!=null&&i.constructor==null},qg.prototype.setState=function(i,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ks({},this.state),typeof i=="function"&&(i=i(ks({},n),this.props)),i&&ks(n,i),i!=null&&this.__v&&(e&&this._sb.push(e),m2(this))},qg.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),m2(this))},qg.prototype.render=by,wl=[],VN=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,jN=function(i,e){return i.__v.__b-e.__v.__b},Cm.__r=0,zN=/(PointerCapture)$|Capture$/i,p1=0,C_=b2(!1),R_=b2(!0);function v2(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=Array(e);n<e;n++)r[n]=i[n];return r}function vG(i){if(Array.isArray(i))return i}function _G(i,e,n){return(e=TG(e))in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function wG(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var r,s,a,o,u=[],h=!0,d=!1;try{if(a=(n=n.call(i)).next,e!==0)for(;!(h=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(p){d=!0,s=p}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return u}}function AG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _2(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),n.push.apply(n,r)}return n}function xG(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_2(Object(n),!0).forEach(function(r){_G(i,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):_2(Object(n)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))})}return i}function EG(i,e){return vG(i)||wG(i,e)||CG(i,e)||AG()}function SG(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var r=n.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function TG(i){var e=SG(i,"string");return typeof e=="symbol"?e:e+""}function Rm(i){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rm(i)}function CG(i,e){if(i){if(typeof i=="string")return v2(i,e);var n={}.toString.call(i).slice(8,-1);return n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set"?Array.from(i):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v2(i,e):void 0}}var D_=function(e){if(Rm(e)!=="object")return e;var n=KN(e);if(n.props){var r;n.props=xG({},n.props),n!=null&&(r=n.props)!==null&&r!==void 0&&r.children&&(n.props.children=Array.isArray(n.props.children)?n.props.children.map(D_):D_(n.props.children))}return n},RG=function(e){return UN(KN(e))},IG=function(e,n){delete n.__k,bG(D_(e),n)};function DG(i,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=i:s.appendChild(document.createTextNode(i))}}var kG=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;DG(kG);var NG=f1({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.style,a=s===void 0?{}:s,o=!!e&&Rm(e)==="object"&&!!e.node&&typeof e.node=="function",u=Sr(o?e.node():e);u.style("position")==="static"&&u.style("position","relative"),n.tooltipEl=u.append("div").attr("class","float-tooltip-kap"),Object.entries(a).forEach(function(d){var p=EG(d,2),g=p[0],y=p[1];return n.tooltipEl.style(g,y)}),n.tooltipEl.style("left","-10000px").style("display","none");var h="tooltip-".concat(Math.round(Math.random()*1e12));n.mouseInside=!1,u.on("mousemove.".concat(h),function(d){n.mouseInside=!0;var p=Ts(d),g=u.node(),y=g.offsetWidth,b=g.offsetHeight,w=[n.offsetX===null||n.offsetX===void 0?"-".concat(p[0]/y*100,"%"):typeof n.offsetX=="number"?"calc(-50% + ".concat(n.offsetX,"px)"):n.offsetX,n.offsetY===null||n.offsetY===void 0?b>130&&b-p[1]<100?"calc(-100% - 6px)":"21px":typeof n.offsetY=="number"?n.offsetY<0?"calc(-100% - ".concat(Math.abs(n.offsetY),"px)"):"".concat(n.offsetY,"px"):n.offsetY];n.tooltipEl.style("left",p[0]+"px").style("top",p[1]+"px").style("transform","translate(".concat(w.join(","),")")),n.content&&n.tooltipEl.style("display","inline")}),u.on("mouseover.".concat(h),function(){n.mouseInside=!0,n.content&&n.tooltipEl.style("display","inline")}),u.on("mouseout.".concat(h),function(){n.mouseInside=!1,n.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):RG(e.content)?(e.tooltipEl.text(""),IG(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function MG(i,e,n){var r,s=1;i==null&&(i=0),e==null&&(e=0),n==null&&(n=0);function a(){var o,u=r.length,h,d=0,p=0,g=0;for(o=0;o<u;++o)h=r[o],d+=h.x||0,p+=h.y||0,g+=h.z||0;for(d=(d/u-i)*s,p=(p/u-e)*s,g=(g/u-n)*s,o=0;o<u;++o)h=r[o],d&&(h.x-=d),p&&(h.y-=p),g&&(h.z-=g)}return a.initialize=function(o){r=o},a.x=function(o){return arguments.length?(i=+o,a):i},a.y=function(o){return arguments.length?(e=+o,a):e},a.z=function(o){return arguments.length?(n=+o,a):n},a.strength=function(o){return arguments.length?(s=+o,a):s},a}function PG(i){const e=+this._x.call(null,i);return QN(this.cover(e),e,i)}function QN(i,e,n){if(isNaN(e))return i;var r,s=i._root,a={data:n},o=i._x0,u=i._x1,h,d,p,g,y;if(!s)return i._root=a,i;for(;s.length;)if((p=e>=(h=(o+u)/2))?o=h:u=h,r=s,!(s=s[g=+p]))return r[g]=a,i;if(d=+i._x.call(null,s.data),e===d)return a.next=s,r?r[g]=a:i._root=a,i;do r=r?r[g]=new Array(2):i._root=new Array(2),(p=e>=(h=(o+u)/2))?o=h:u=h;while((g=+p)==(y=+(d>=h)));return r[y]=s,r[g]=a,i}function OG(i){Array.isArray(i)||(i=Array.from(i));const e=i.length,n=new Float64Array(e);let r=1/0,s=-1/0;for(let a=0,o;a<e;++a)isNaN(o=+this._x.call(null,i[a]))||(n[a]=o,o<r&&(r=o),o>s&&(s=o));if(r>s)return this;this.cover(r).cover(s);for(let a=0;a<e;++a)QN(this,n[a],i[a]);return this}function LG(i){if(isNaN(i=+i))return this;var e=this._x0,n=this._x1;if(isNaN(e))n=(e=Math.floor(i))+1;else{for(var r=n-e||1,s=this._root,a,o;e>i||i>=n;)switch(o=+(i<e),a=new Array(2),a[o]=s,s=a,r*=2,o){case 0:n=e+r;break;case 1:e=n-r;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._x1=n,this}function BG(){var i=[];return this.visit(function(e){if(!e.length)do i.push(e.data);while(e=e.next)}),i}function FG(i){return arguments.length?this.cover(+i[0][0]).cover(+i[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function wa(i,e,n){this.node=i,this.x0=e,this.x1=n}function UG(i,e){var n,r=this._x0,s,a,o=this._x1,u=[],h=this._root,d,p;for(h&&u.push(new wa(h,r,o)),e==null?e=1/0:(r=i-e,o=i+e);d=u.pop();)if(!(!(h=d.node)||(s=d.x0)>o||(a=d.x1)<r))if(h.length){var g=(s+a)/2;u.push(new wa(h[1],g,a),new wa(h[0],s,g)),(p=+(i>=g))&&(d=u[u.length-1],u[u.length-1]=u[u.length-1-p],u[u.length-1-p]=d)}else{var y=Math.abs(i-+this._x.call(null,h.data));y<e&&(e=y,r=i-y,o=i+y,n=h.data)}return n}function VG(i){if(isNaN(h=+this._x.call(null,i)))return this;var e,n=this._root,r,s,a,o=this._x0,u=this._x1,h,d,p,g,y;if(!n)return this;if(n.length)for(;;){if((p=h>=(d=(o+u)/2))?o=d:u=d,e=n,!(n=n[g=+p]))return this;if(!n.length)break;e[g+1&1]&&(r=e,y=g)}for(;n.data!==i;)if(s=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,s?(a?s.next=a:delete s.next,this):e?(a?e[g]=a:delete e[g],(n=e[0]||e[1])&&n===(e[1]||e[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=a,this)}function jG(i){for(var e=0,n=i.length;e<n;++e)this.remove(i[e]);return this}function zG(){return this._root}function HG(){var i=0;return this.visit(function(e){if(!e.length)do++i;while(e=e.next)}),i}function $G(i){var e=[],n,r=this._root,s,a,o;for(r&&e.push(new wa(r,this._x0,this._x1));n=e.pop();)if(!i(r=n.node,a=n.x0,o=n.x1)&&r.length){var u=(a+o)/2;(s=r[1])&&e.push(new wa(s,u,o)),(s=r[0])&&e.push(new wa(s,a,u))}return this}function GG(i){var e=[],n=[],r;for(this._root&&e.push(new wa(this._root,this._x0,this._x1));r=e.pop();){var s=r.node;if(s.length){var a,o=r.x0,u=r.x1,h=(o+u)/2;(a=s[0])&&e.push(new wa(a,o,h)),(a=s[1])&&e.push(new wa(a,h,u))}n.push(r)}for(;r=n.pop();)i(r.node,r.x0,r.x1);return this}function qG(i){return i[0]}function WG(i){return arguments.length?(this._x=i,this):this._x}function ZN(i,e){var n=new b1(e??qG,NaN,NaN);return i==null?n:n.addAll(i)}function b1(i,e,n){this._x=i,this._x0=e,this._x1=n,this._root=void 0}function w2(i){for(var e={data:i.data},n=e;i=i.next;)n=n.next={data:i.data};return e}var Li=ZN.prototype=b1.prototype;Li.copy=function(){var i=new b1(this._x,this._x0,this._x1),e=this._root,n,r;if(!e)return i;if(!e.length)return i._root=w2(e),i;for(n=[{source:e,target:i._root=new Array(2)}];e=n.pop();)for(var s=0;s<2;++s)(r=e.source[s])&&(r.length?n.push({source:r,target:e.target[s]=new Array(2)}):e.target[s]=w2(r));return i};Li.add=PG;Li.addAll=OG;Li.cover=LG;Li.data=BG;Li.extent=FG;Li.find=UG;Li.remove=VG;Li.removeAll=jG;Li.root=zG;Li.size=HG;Li.visit=$G;Li.visitAfter=GG;Li.x=WG;function XG(i){const e=+this._x.call(null,i),n=+this._y.call(null,i);return JN(this.cover(e,n),e,n,i)}function JN(i,e,n,r){if(isNaN(e)||isNaN(n))return i;var s,a=i._root,o={data:r},u=i._x0,h=i._y0,d=i._x1,p=i._y1,g,y,b,w,x,S,E,k;if(!a)return i._root=o,i;for(;a.length;)if((x=e>=(g=(u+d)/2))?u=g:d=g,(S=n>=(y=(h+p)/2))?h=y:p=y,s=a,!(a=a[E=S<<1|x]))return s[E]=o,i;if(b=+i._x.call(null,a.data),w=+i._y.call(null,a.data),e===b&&n===w)return o.next=a,s?s[E]=o:i._root=o,i;do s=s?s[E]=new Array(4):i._root=new Array(4),(x=e>=(g=(u+d)/2))?u=g:d=g,(S=n>=(y=(h+p)/2))?h=y:p=y;while((E=S<<1|x)===(k=(w>=y)<<1|b>=g));return s[k]=a,s[E]=o,i}function YG(i){var e,n,r=i.length,s,a,o=new Array(r),u=new Array(r),h=1/0,d=1/0,p=-1/0,g=-1/0;for(n=0;n<r;++n)isNaN(s=+this._x.call(null,e=i[n]))||isNaN(a=+this._y.call(null,e))||(o[n]=s,u[n]=a,s<h&&(h=s),s>p&&(p=s),a<d&&(d=a),a>g&&(g=a));if(h>p||d>g)return this;for(this.cover(h,d).cover(p,g),n=0;n<r;++n)JN(this,o[n],u[n],i[n]);return this}function KG(i,e){if(isNaN(i=+i)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,s=this._x1,a=this._y1;if(isNaN(n))s=(n=Math.floor(i))+1,a=(r=Math.floor(e))+1;else{for(var o=s-n||1,u=this._root,h,d;n>i||i>=s||r>e||e>=a;)switch(d=(e<r)<<1|i<n,h=new Array(4),h[d]=u,u=h,o*=2,d){case 0:s=n+o,a=r+o;break;case 1:n=s-o,a=r+o;break;case 2:s=n+o,r=a-o;break;case 3:n=s-o,r=a-o;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=s,this._y1=a,this}function QG(){var i=[];return this.visit(function(e){if(!e.length)do i.push(e.data);while(e=e.next)}),i}function ZG(i){return arguments.length?this.cover(+i[0][0],+i[0][1]).cover(+i[1][0],+i[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function vi(i,e,n,r,s){this.node=i,this.x0=e,this.y0=n,this.x1=r,this.y1=s}function JG(i,e,n){var r,s=this._x0,a=this._y0,o,u,h,d,p=this._x1,g=this._y1,y=[],b=this._root,w,x;for(b&&y.push(new vi(b,s,a,p,g)),n==null?n=1/0:(s=i-n,a=e-n,p=i+n,g=e+n,n*=n);w=y.pop();)if(!(!(b=w.node)||(o=w.x0)>p||(u=w.y0)>g||(h=w.x1)<s||(d=w.y1)<a))if(b.length){var S=(o+h)/2,E=(u+d)/2;y.push(new vi(b[3],S,E,h,d),new vi(b[2],o,E,S,d),new vi(b[1],S,u,h,E),new vi(b[0],o,u,S,E)),(x=(e>=E)<<1|i>=S)&&(w=y[y.length-1],y[y.length-1]=y[y.length-1-x],y[y.length-1-x]=w)}else{var k=i-+this._x.call(null,b.data),N=e-+this._y.call(null,b.data),M=k*k+N*N;if(M<n){var O=Math.sqrt(n=M);s=i-O,a=e-O,p=i+O,g=e+O,r=b.data}}return r}function tq(i){if(isNaN(p=+this._x.call(null,i))||isNaN(g=+this._y.call(null,i)))return this;var e,n=this._root,r,s,a,o=this._x0,u=this._y0,h=this._x1,d=this._y1,p,g,y,b,w,x,S,E;if(!n)return this;if(n.length)for(;;){if((w=p>=(y=(o+h)/2))?o=y:h=y,(x=g>=(b=(u+d)/2))?u=b:d=b,e=n,!(n=n[S=x<<1|w]))return this;if(!n.length)break;(e[S+1&3]||e[S+2&3]||e[S+3&3])&&(r=e,E=S)}for(;n.data!==i;)if(s=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,s?(a?s.next=a:delete s.next,this):e?(a?e[S]=a:delete e[S],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[E]=n:this._root=n),this):(this._root=a,this)}function eq(i){for(var e=0,n=i.length;e<n;++e)this.remove(i[e]);return this}function nq(){return this._root}function iq(){var i=0;return this.visit(function(e){if(!e.length)do++i;while(e=e.next)}),i}function rq(i){var e=[],n,r=this._root,s,a,o,u,h;for(r&&e.push(new vi(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!i(r=n.node,a=n.x0,o=n.y0,u=n.x1,h=n.y1)&&r.length){var d=(a+u)/2,p=(o+h)/2;(s=r[3])&&e.push(new vi(s,d,p,u,h)),(s=r[2])&&e.push(new vi(s,a,p,d,h)),(s=r[1])&&e.push(new vi(s,d,o,u,p)),(s=r[0])&&e.push(new vi(s,a,o,d,p))}return this}function sq(i){var e=[],n=[],r;for(this._root&&e.push(new vi(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var s=r.node;if(s.length){var a,o=r.x0,u=r.y0,h=r.x1,d=r.y1,p=(o+h)/2,g=(u+d)/2;(a=s[0])&&e.push(new vi(a,o,u,p,g)),(a=s[1])&&e.push(new vi(a,p,u,h,g)),(a=s[2])&&e.push(new vi(a,o,g,p,d)),(a=s[3])&&e.push(new vi(a,p,g,h,d))}n.push(r)}for(;r=n.pop();)i(r.node,r.x0,r.y0,r.x1,r.y1);return this}function aq(i){return i[0]}function oq(i){return arguments.length?(this._x=i,this):this._x}function lq(i){return i[1]}function cq(i){return arguments.length?(this._y=i,this):this._y}function tM(i,e,n){var r=new v1(e??aq,n??lq,NaN,NaN,NaN,NaN);return i==null?r:r.addAll(i)}function v1(i,e,n,r,s,a){this._x=i,this._y=e,this._x0=n,this._y0=r,this._x1=s,this._y1=a,this._root=void 0}function A2(i){for(var e={data:i.data},n=e;i=i.next;)n=n.next={data:i.data};return e}var wi=tM.prototype=v1.prototype;wi.copy=function(){var i=new v1(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return i;if(!e.length)return i._root=A2(e),i;for(n=[{source:e,target:i._root=new Array(4)}];e=n.pop();)for(var s=0;s<4;++s)(r=e.source[s])&&(r.length?n.push({source:r,target:e.target[s]=new Array(4)}):e.target[s]=A2(r));return i};wi.add=XG;wi.addAll=YG;wi.cover=KG;wi.data=QG;wi.extent=ZG;wi.find=JG;wi.remove=tq;wi.removeAll=eq;wi.root=nq;wi.size=iq;wi.visit=rq;wi.visitAfter=sq;wi.x=oq;wi.y=cq;function uq(i){const e=+this._x.call(null,i),n=+this._y.call(null,i),r=+this._z.call(null,i);return eM(this.cover(e,n,r),e,n,r,i)}function eM(i,e,n,r,s){if(isNaN(e)||isNaN(n)||isNaN(r))return i;var a,o=i._root,u={data:s},h=i._x0,d=i._y0,p=i._z0,g=i._x1,y=i._y1,b=i._z1,w,x,S,E,k,N,M,O,B,C,R;if(!o)return i._root=u,i;for(;o.length;)if((M=e>=(w=(h+g)/2))?h=w:g=w,(O=n>=(x=(d+y)/2))?d=x:y=x,(B=r>=(S=(p+b)/2))?p=S:b=S,a=o,!(o=o[C=B<<2|O<<1|M]))return a[C]=u,i;if(E=+i._x.call(null,o.data),k=+i._y.call(null,o.data),N=+i._z.call(null,o.data),e===E&&n===k&&r===N)return u.next=o,a?a[C]=u:i._root=u,i;do a=a?a[C]=new Array(8):i._root=new Array(8),(M=e>=(w=(h+g)/2))?h=w:g=w,(O=n>=(x=(d+y)/2))?d=x:y=x,(B=r>=(S=(p+b)/2))?p=S:b=S;while((C=B<<2|O<<1|M)===(R=(N>=S)<<2|(k>=x)<<1|E>=w));return a[R]=o,a[C]=u,i}function hq(i){Array.isArray(i)||(i=Array.from(i));const e=i.length,n=new Float64Array(e),r=new Float64Array(e),s=new Float64Array(e);let a=1/0,o=1/0,u=1/0,h=-1/0,d=-1/0,p=-1/0;for(let g=0,y,b,w,x;g<e;++g)isNaN(b=+this._x.call(null,y=i[g]))||isNaN(w=+this._y.call(null,y))||isNaN(x=+this._z.call(null,y))||(n[g]=b,r[g]=w,s[g]=x,b<a&&(a=b),b>h&&(h=b),w<o&&(o=w),w>d&&(d=w),x<u&&(u=x),x>p&&(p=x));if(a>h||o>d||u>p)return this;this.cover(a,o,u).cover(h,d,p);for(let g=0;g<e;++g)eM(this,n[g],r[g],s[g],i[g]);return this}function dq(i,e,n){if(isNaN(i=+i)||isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,s=this._y0,a=this._z0,o=this._x1,u=this._y1,h=this._z1;if(isNaN(r))o=(r=Math.floor(i))+1,u=(s=Math.floor(e))+1,h=(a=Math.floor(n))+1;else{for(var d=o-r||1,p=this._root,g,y;r>i||i>=o||s>e||e>=u||a>n||n>=h;)switch(y=(n<a)<<2|(e<s)<<1|i<r,g=new Array(8),g[y]=p,p=g,d*=2,y){case 0:o=r+d,u=s+d,h=a+d;break;case 1:r=o-d,u=s+d,h=a+d;break;case 2:o=r+d,s=u-d,h=a+d;break;case 3:r=o-d,s=u-d,h=a+d;break;case 4:o=r+d,u=s+d,a=h-d;break;case 5:r=o-d,u=s+d,a=h-d;break;case 6:o=r+d,s=u-d,a=h-d;break;case 7:r=o-d,s=u-d,a=h-d;break}this._root&&this._root.length&&(this._root=p)}return this._x0=r,this._y0=s,this._z0=a,this._x1=o,this._y1=u,this._z1=h,this}function fq(){var i=[];return this.visit(function(e){if(!e.length)do i.push(e.data);while(e=e.next)}),i}function pq(i){return arguments.length?this.cover(+i[0][0],+i[0][1],+i[0][2]).cover(+i[1][0],+i[1][1],+i[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Be(i,e,n,r,s,a,o){this.node=i,this.x0=e,this.y0=n,this.z0=r,this.x1=s,this.y1=a,this.z1=o}function gq(i,e,n,r){var s,a=this._x0,o=this._y0,u=this._z0,h,d,p,g,y,b,w=this._x1,x=this._y1,S=this._z1,E=[],k=this._root,N,M;for(k&&E.push(new Be(k,a,o,u,w,x,S)),r==null?r=1/0:(a=i-r,o=e-r,u=n-r,w=i+r,x=e+r,S=n+r,r*=r);N=E.pop();)if(!(!(k=N.node)||(h=N.x0)>w||(d=N.y0)>x||(p=N.z0)>S||(g=N.x1)<a||(y=N.y1)<o||(b=N.z1)<u))if(k.length){var O=(h+g)/2,B=(d+y)/2,C=(p+b)/2;E.push(new Be(k[7],O,B,C,g,y,b),new Be(k[6],h,B,C,O,y,b),new Be(k[5],O,d,C,g,B,b),new Be(k[4],h,d,C,O,B,b),new Be(k[3],O,B,p,g,y,C),new Be(k[2],h,B,p,O,y,C),new Be(k[1],O,d,p,g,B,C),new Be(k[0],h,d,p,O,B,C)),(M=(n>=C)<<2|(e>=B)<<1|i>=O)&&(N=E[E.length-1],E[E.length-1]=E[E.length-1-M],E[E.length-1-M]=N)}else{var R=i-+this._x.call(null,k.data),L=e-+this._y.call(null,k.data),F=n-+this._z.call(null,k.data),U=R*R+L*L+F*F;if(U<r){var $=Math.sqrt(r=U);a=i-$,o=e-$,u=n-$,w=i+$,x=e+$,S=n+$,s=k.data}}return s}const mq=(i,e,n,r,s,a)=>Math.sqrt((i-r)**2+(e-s)**2+(n-a)**2);function yq(i,e,n,r){const s=[],a=i-r,o=e-r,u=n-r,h=i+r,d=e+r,p=n+r;return this.visit((g,y,b,w,x,S,E)=>{if(!g.length)do{const k=g.data;mq(i,e,n,this._x(k),this._y(k),this._z(k))<=r&&s.push(k)}while(g=g.next);return y>h||b>d||w>p||x<a||S<o||E<u}),s}function bq(i){if(isNaN(y=+this._x.call(null,i))||isNaN(b=+this._y.call(null,i))||isNaN(w=+this._z.call(null,i)))return this;var e,n=this._root,r,s,a,o=this._x0,u=this._y0,h=this._z0,d=this._x1,p=this._y1,g=this._z1,y,b,w,x,S,E,k,N,M,O,B;if(!n)return this;if(n.length)for(;;){if((k=y>=(x=(o+d)/2))?o=x:d=x,(N=b>=(S=(u+p)/2))?u=S:p=S,(M=w>=(E=(h+g)/2))?h=E:g=E,e=n,!(n=n[O=M<<2|N<<1|k]))return this;if(!n.length)break;(e[O+1&7]||e[O+2&7]||e[O+3&7]||e[O+4&7]||e[O+5&7]||e[O+6&7]||e[O+7&7])&&(r=e,B=O)}for(;n.data!==i;)if(s=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,s?(a?s.next=a:delete s.next,this):e?(a?e[O]=a:delete e[O],(n=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&n===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[B]=n:this._root=n),this):(this._root=a,this)}function vq(i){for(var e=0,n=i.length;e<n;++e)this.remove(i[e]);return this}function _q(){return this._root}function wq(){var i=0;return this.visit(function(e){if(!e.length)do++i;while(e=e.next)}),i}function Aq(i){var e=[],n,r=this._root,s,a,o,u,h,d,p;for(r&&e.push(new Be(r,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();)if(!i(r=n.node,a=n.x0,o=n.y0,u=n.z0,h=n.x1,d=n.y1,p=n.z1)&&r.length){var g=(a+h)/2,y=(o+d)/2,b=(u+p)/2;(s=r[7])&&e.push(new Be(s,g,y,b,h,d,p)),(s=r[6])&&e.push(new Be(s,a,y,b,g,d,p)),(s=r[5])&&e.push(new Be(s,g,o,b,h,y,p)),(s=r[4])&&e.push(new Be(s,a,o,b,g,y,p)),(s=r[3])&&e.push(new Be(s,g,y,u,h,d,b)),(s=r[2])&&e.push(new Be(s,a,y,u,g,d,b)),(s=r[1])&&e.push(new Be(s,g,o,u,h,y,b)),(s=r[0])&&e.push(new Be(s,a,o,u,g,y,b))}return this}function xq(i){var e=[],n=[],r;for(this._root&&e.push(new Be(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();){var s=r.node;if(s.length){var a,o=r.x0,u=r.y0,h=r.z0,d=r.x1,p=r.y1,g=r.z1,y=(o+d)/2,b=(u+p)/2,w=(h+g)/2;(a=s[0])&&e.push(new Be(a,o,u,h,y,b,w)),(a=s[1])&&e.push(new Be(a,y,u,h,d,b,w)),(a=s[2])&&e.push(new Be(a,o,b,h,y,p,w)),(a=s[3])&&e.push(new Be(a,y,b,h,d,p,w)),(a=s[4])&&e.push(new Be(a,o,u,w,y,b,g)),(a=s[5])&&e.push(new Be(a,y,u,w,d,b,g)),(a=s[6])&&e.push(new Be(a,o,b,w,y,p,g)),(a=s[7])&&e.push(new Be(a,y,b,w,d,p,g))}n.push(r)}for(;r=n.pop();)i(r.node,r.x0,r.y0,r.z0,r.x1,r.y1,r.z1);return this}function Eq(i){return i[0]}function Sq(i){return arguments.length?(this._x=i,this):this._x}function Tq(i){return i[1]}function Cq(i){return arguments.length?(this._y=i,this):this._y}function Rq(i){return i[2]}function Iq(i){return arguments.length?(this._z=i,this):this._z}function nM(i,e,n,r){var s=new _1(e??Eq,n??Tq,r??Rq,NaN,NaN,NaN,NaN,NaN,NaN);return i==null?s:s.addAll(i)}function _1(i,e,n,r,s,a,o,u,h){this._x=i,this._y=e,this._z=n,this._x0=r,this._y0=s,this._z0=a,this._x1=o,this._y1=u,this._z1=h,this._root=void 0}function x2(i){for(var e={data:i.data},n=e;i=i.next;)n=n.next={data:i.data};return e}var ti=nM.prototype=_1.prototype;ti.copy=function(){var i=new _1(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,n,r;if(!e)return i;if(!e.length)return i._root=x2(e),i;for(n=[{source:e,target:i._root=new Array(8)}];e=n.pop();)for(var s=0;s<8;++s)(r=e.source[s])&&(r.length?n.push({source:r,target:e.target[s]=new Array(8)}):e.target[s]=x2(r));return i};ti.add=uq;ti.addAll=hq;ti.cover=dq;ti.data=fq;ti.extent=pq;ti.find=gq;ti.findAllWithinRadius=yq;ti.remove=bq;ti.removeAll=vq;ti.root=_q;ti.size=wq;ti.visit=Aq;ti.visitAfter=xq;ti.x=Sq;ti.y=Cq;ti.z=Iq;function _a(i){return function(){return i}}function pa(i){return(i()-.5)*1e-6}function Dq(i){return i.index}function E2(i,e){var n=i.get(e);if(!n)throw new Error("node not found: "+e);return n}function kq(i){var e=Dq,n=y,r,s=_a(30),a,o,u,h,d,p,g=1;i==null&&(i=[]);function y(E){return 1/Math.min(h[E.source.index],h[E.target.index])}function b(E){for(var k=0,N=i.length;k<g;++k)for(var M=0,O,B,C,R=0,L=0,F=0,U,$;M<N;++M)O=i[M],B=O.source,C=O.target,R=C.x+C.vx-B.x-B.vx||pa(p),u>1&&(L=C.y+C.vy-B.y-B.vy||pa(p)),u>2&&(F=C.z+C.vz-B.z-B.vz||pa(p)),U=Math.sqrt(R*R+L*L+F*F),U=(U-a[M])/U*E*r[M],R*=U,L*=U,F*=U,C.vx-=R*($=d[M]),u>1&&(C.vy-=L*$),u>2&&(C.vz-=F*$),B.vx+=R*($=1-$),u>1&&(B.vy+=L*$),u>2&&(B.vz+=F*$)}function w(){if(o){var E,k=o.length,N=i.length,M=new Map(o.map((B,C)=>[e(B,C,o),B])),O;for(E=0,h=new Array(k);E<N;++E)O=i[E],O.index=E,typeof O.source!="object"&&(O.source=E2(M,O.source)),typeof O.target!="object"&&(O.target=E2(M,O.target)),h[O.source.index]=(h[O.source.index]||0)+1,h[O.target.index]=(h[O.target.index]||0)+1;for(E=0,d=new Array(N);E<N;++E)O=i[E],d[E]=h[O.source.index]/(h[O.source.index]+h[O.target.index]);r=new Array(N),x(),a=new Array(N),S()}}function x(){if(o)for(var E=0,k=i.length;E<k;++E)r[E]=+n(i[E],E,i)}function S(){if(o)for(var E=0,k=i.length;E<k;++E)a[E]=+s(i[E],E,i)}return b.initialize=function(E,...k){o=E,p=k.find(N=>typeof N=="function")||Math.random,u=k.find(N=>[1,2,3].includes(N))||2,w()},b.links=function(E){return arguments.length?(i=E,w(),b):i},b.id=function(E){return arguments.length?(e=E,b):e},b.iterations=function(E){return arguments.length?(g=+E,b):g},b.strength=function(E){return arguments.length?(n=typeof E=="function"?E:_a(+E),x(),b):n},b.distance=function(E){return arguments.length?(s=typeof E=="function"?E:_a(+E),S(),b):s},b}const Nq=1664525,Mq=1013904223,S2=4294967296;function Pq(){let i=1;return()=>(i=(Nq*i+Mq)%S2)/S2}var T2=3;function a0(i){return i.x}function C2(i){return i.y}function Oq(i){return i.z}var Lq=10,Bq=Math.PI*(3-Math.sqrt(5)),Fq=Math.PI*20/(9+Math.sqrt(221));function Uq(i,e){e=e||2;var n=Math.min(T2,Math.max(1,Math.round(e))),r,s=1,a=.001,o=1-Math.pow(a,1/300),u=0,h=.6,d=new Map,p=c1(b),g=vf("tick","end"),y=Pq();i==null&&(i=[]);function b(){w(),g.call("tick",r),s<a&&(p.stop(),g.call("end",r))}function w(E){var k,N=i.length,M;E===void 0&&(E=1);for(var O=0;O<E;++O)for(s+=(u-s)*o,d.forEach(function(B){B(s)}),k=0;k<N;++k)M=i[k],M.fx==null?M.x+=M.vx*=h:(M.x=M.fx,M.vx=0),n>1&&(M.fy==null?M.y+=M.vy*=h:(M.y=M.fy,M.vy=0)),n>2&&(M.fz==null?M.z+=M.vz*=h:(M.z=M.fz,M.vz=0));return r}function x(){for(var E=0,k=i.length,N;E<k;++E){if(N=i[E],N.index=E,N.fx!=null&&(N.x=N.fx),N.fy!=null&&(N.y=N.fy),N.fz!=null&&(N.z=N.fz),isNaN(N.x)||n>1&&isNaN(N.y)||n>2&&isNaN(N.z)){var M=Lq*(n>2?Math.cbrt(.5+E):n>1?Math.sqrt(.5+E):E),O=E*Bq,B=E*Fq;n===1?N.x=M:n===2?(N.x=M*Math.cos(O),N.y=M*Math.sin(O)):(N.x=M*Math.sin(O)*Math.cos(B),N.y=M*Math.cos(O),N.z=M*Math.sin(O)*Math.sin(B))}(isNaN(N.vx)||n>1&&isNaN(N.vy)||n>2&&isNaN(N.vz))&&(N.vx=0,n>1&&(N.vy=0),n>2&&(N.vz=0))}}function S(E){return E.initialize&&E.initialize(i,y,n),E}return x(),r={tick:w,restart:function(){return p.restart(b),r},stop:function(){return p.stop(),r},numDimensions:function(E){return arguments.length?(n=Math.min(T2,Math.max(1,Math.round(E))),d.forEach(S),r):n},nodes:function(E){return arguments.length?(i=E,x(),d.forEach(S),r):i},alpha:function(E){return arguments.length?(s=+E,r):s},alphaMin:function(E){return arguments.length?(a=+E,r):a},alphaDecay:function(E){return arguments.length?(o=+E,r):+o},alphaTarget:function(E){return arguments.length?(u=+E,r):u},velocityDecay:function(E){return arguments.length?(h=1-E,r):1-h},randomSource:function(E){return arguments.length?(y=E,d.forEach(S),r):y},force:function(E,k){return arguments.length>1?(k==null?d.delete(E):d.set(E,S(k)),r):d.get(E)},find:function(){var E=Array.prototype.slice.call(arguments),k=E.shift()||0,N=(n>1?E.shift():null)||0,M=(n>2?E.shift():null)||0,O=E.shift()||1/0,B=0,C=i.length,R,L,F,U,$,V;for(O*=O,B=0;B<C;++B)$=i[B],R=k-$.x,L=N-($.y||0),F=M-($.z||0),U=R*R+L*L+F*F,U<O&&(V=$,O=U);return V},on:function(E,k){return arguments.length>1?(g.on(E,k),r):g.on(E)}}}function Vq(){var i,e,n,r,s,a=_a(-30),o,u=1,h=1/0,d=.81;function p(w){var x,S=i.length,E=(e===1?ZN(i,a0):e===2?tM(i,a0,C2):e===3?nM(i,a0,C2,Oq):null).visitAfter(y);for(s=w,x=0;x<S;++x)n=i[x],E.visit(b)}function g(){if(i){var w,x=i.length,S;for(o=new Array(x),w=0;w<x;++w)S=i[w],o[S.index]=+a(S,w,i)}}function y(w){var x=0,S,E,k=0,N,M,O,B,C=w.length;if(C){for(N=M=O=B=0;B<C;++B)(S=w[B])&&(E=Math.abs(S.value))&&(x+=S.value,k+=E,N+=E*(S.x||0),M+=E*(S.y||0),O+=E*(S.z||0));x*=Math.sqrt(4/C),w.x=N/k,e>1&&(w.y=M/k),e>2&&(w.z=O/k)}else{S=w,S.x=S.data.x,e>1&&(S.y=S.data.y),e>2&&(S.z=S.data.z);do x+=o[S.data.index];while(S=S.next)}w.value=x}function b(w,x,S,E,k){if(!w.value)return!0;var N=[S,E,k][e-1],M=w.x-n.x,O=e>1?w.y-n.y:0,B=e>2?w.z-n.z:0,C=N-x,R=M*M+O*O+B*B;if(C*C/d<R)return R<h&&(M===0&&(M=pa(r),R+=M*M),e>1&&O===0&&(O=pa(r),R+=O*O),e>2&&B===0&&(B=pa(r),R+=B*B),R<u&&(R=Math.sqrt(u*R)),n.vx+=M*w.value*s/R,e>1&&(n.vy+=O*w.value*s/R),e>2&&(n.vz+=B*w.value*s/R)),!0;if(w.length||R>=h)return;(w.data!==n||w.next)&&(M===0&&(M=pa(r),R+=M*M),e>1&&O===0&&(O=pa(r),R+=O*O),e>2&&B===0&&(B=pa(r),R+=B*B),R<u&&(R=Math.sqrt(u*R)));do w.data!==n&&(C=o[w.data.index]*s/R,n.vx+=M*C,e>1&&(n.vy+=O*C),e>2&&(n.vz+=B*C));while(w=w.next)}return p.initialize=function(w,...x){i=w,r=x.find(S=>typeof S=="function")||Math.random,e=x.find(S=>[1,2,3].includes(S))||2,g()},p.strength=function(w){return arguments.length?(a=typeof w=="function"?w:_a(+w),g(),p):a},p.distanceMin=function(w){return arguments.length?(u=w*w,p):Math.sqrt(u)},p.distanceMax=function(w){return arguments.length?(h=w*w,p):Math.sqrt(h)},p.theta=function(w){return arguments.length?(d=w*w,p):Math.sqrt(d)},p}function jq(i,e,n,r){var s,a,o=_a(.1),u,h;typeof i!="function"&&(i=_a(+i)),e==null&&(e=0),n==null&&(n=0),r==null&&(r=0);function d(g){for(var y=0,b=s.length;y<b;++y){var w=s[y],x=w.x-e||1e-6,S=(w.y||0)-n||1e-6,E=(w.z||0)-r||1e-6,k=Math.sqrt(x*x+S*S+E*E),N=(h[y]-k)*u[y]*g/k;w.vx+=x*N,a>1&&(w.vy+=S*N),a>2&&(w.vz+=E*N)}}function p(){if(s){var g,y=s.length;for(u=new Array(y),h=new Array(y),g=0;g<y;++g)h[g]=+i(s[g],g,s),u[g]=isNaN(h[g])?0:+o(s[g],g,s)}}return d.initialize=function(g,...y){s=g,a=y.find(b=>[1,2,3].includes(b))||2,p()},d.strength=function(g){return arguments.length?(o=typeof g=="function"?g:_a(+g),p(),d):o},d.radius=function(g){return arguments.length?(i=typeof g=="function"?g:_a(+g),p(),d):i},d.x=function(g){return arguments.length?(e=+g,d):e},d.y=function(g){return arguments.length?(n=+g,d):n},d.z=function(g){return arguments.length?(r=+g,d):r},d}const{abs:Gh,cos:da,sin:Uc,acos:zq,atan2:qh,sqrt:uo,pow:Ar}=Math;function Wh(i){return i<0?-Ar(-i,1/3):Ar(i,1/3)}const iM=Math.PI,bg=2*iM,ho=iM/2,Hq=1e-6,o0=Number.MAX_SAFE_INTEGER||9007199254740991,l0=Number.MIN_SAFE_INTEGER||-9007199254740991,$q={x:0,y:0,z:0},_t={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(i,e){const n=e(i);let r=n.x*n.x+n.y*n.y;return typeof n.z<"u"&&(r+=n.z*n.z),uo(r)},compute:function(i,e,n){if(i===0)return e[0].t=0,e[0];const r=e.length-1;if(i===1)return e[r].t=1,e[r];const s=1-i;let a=e;if(r===0)return e[0].t=i,e[0];if(r===1){const u={x:s*a[0].x+i*a[1].x,y:s*a[0].y+i*a[1].y,t:i};return n&&(u.z=s*a[0].z+i*a[1].z),u}if(r<4){let u=s*s,h=i*i,d,p,g,y=0;r===2?(a=[a[0],a[1],a[2],$q],d=u,p=s*i*2,g=h):r===3&&(d=u*s,p=u*i*3,g=s*h*3,y=i*h);const b={x:d*a[0].x+p*a[1].x+g*a[2].x+y*a[3].x,y:d*a[0].y+p*a[1].y+g*a[2].y+y*a[3].y,t:i};return n&&(b.z=d*a[0].z+p*a[1].z+g*a[2].z+y*a[3].z),b}const o=JSON.parse(JSON.stringify(e));for(;o.length>1;){for(let u=0;u<o.length-1;u++)o[u]={x:o[u].x+(o[u+1].x-o[u].x)*i,y:o[u].y+(o[u+1].y-o[u].y)*i},typeof o[u].z<"u"&&(o[u].z=o[u].z+(o[u+1].z-o[u].z)*i);o.splice(o.length-1,1)}return o[0].t=i,o[0]},computeWithRatios:function(i,e,n,r){const s=1-i,a=n,o=e;let u=a[0],h=a[1],d=a[2],p=a[3],g;if(u*=s,h*=i,o.length===2)return g=u+h,{x:(u*o[0].x+h*o[1].x)/g,y:(u*o[0].y+h*o[1].y)/g,z:r?(u*o[0].z+h*o[1].z)/g:!1,t:i};if(u*=s,h*=2*s,d*=i*i,o.length===3)return g=u+h+d,{x:(u*o[0].x+h*o[1].x+d*o[2].x)/g,y:(u*o[0].y+h*o[1].y+d*o[2].y)/g,z:r?(u*o[0].z+h*o[1].z+d*o[2].z)/g:!1,t:i};if(u*=s,h*=1.5*s,d*=3*s,p*=i*i*i,o.length===4)return g=u+h+d+p,{x:(u*o[0].x+h*o[1].x+d*o[2].x+p*o[3].x)/g,y:(u*o[0].y+h*o[1].y+d*o[2].y+p*o[3].y)/g,z:r?(u*o[0].z+h*o[1].z+d*o[2].z+p*o[3].z)/g:!1,t:i}},derive:function(i,e){const n=[];for(let r=i,s=r.length,a=s-1;s>1;s--,a--){const o=[];for(let u=0,h;u<a;u++)h={x:a*(r[u+1].x-r[u].x),y:a*(r[u+1].y-r[u].y)},e&&(h.z=a*(r[u+1].z-r[u].z)),o.push(h);n.push(o),r=o}return n},between:function(i,e,n){return e<=i&&i<=n||_t.approximately(i,e)||_t.approximately(i,n)},approximately:function(i,e,n){return Gh(i-e)<=(n||Hq)},length:function(i){const n=_t.Tvalues.length;let r=0;for(let s=0,a;s<n;s++)a=.5*_t.Tvalues[s]+.5,r+=_t.Cvalues[s]*_t.arcfn(a,i);return .5*r},map:function(i,e,n,r,s){const a=n-e,o=s-r,u=i-e,h=u/a;return r+o*h},lerp:function(i,e,n){const r={x:e.x+i*(n.x-e.x),y:e.y+i*(n.y-e.y)};return e.z!==void 0&&n.z!==void 0&&(r.z=e.z+i*(n.z-e.z)),r},pointToString:function(i){let e=i.x+"/"+i.y;return typeof i.z<"u"&&(e+="/"+i.z),e},pointsToString:function(i){return"["+i.map(_t.pointToString).join(", ")+"]"},copy:function(i){return JSON.parse(JSON.stringify(i))},angle:function(i,e,n){const r=e.x-i.x,s=e.y-i.y,a=n.x-i.x,o=n.y-i.y,u=r*o-s*a,h=r*a+s*o;return qh(u,h)},round:function(i,e){const n=""+i,r=n.indexOf(".");return parseFloat(n.substring(0,r+1+e))},dist:function(i,e){const n=i.x-e.x,r=i.y-e.y;return uo(n*n+r*r)},closest:function(i,e){let n=Ar(2,63),r,s;return i.forEach(function(a,o){s=_t.dist(e,a),s<n&&(n=s,r=o)}),{mdist:n,mpos:r}},abcratio:function(i,e){if(e!==2&&e!==3)return!1;if(typeof i>"u")i=.5;else if(i===0||i===1)return i;const n=Ar(i,e)+Ar(1-i,e),r=n-1;return Gh(r/n)},projectionratio:function(i,e){if(e!==2&&e!==3)return!1;if(typeof i>"u")i=.5;else if(i===0||i===1)return i;const n=Ar(1-i,e),r=Ar(i,e)+n;return n/r},lli8:function(i,e,n,r,s,a,o,u){const h=(i*r-e*n)*(s-o)-(i-n)*(s*u-a*o),d=(i*r-e*n)*(a-u)-(e-r)*(s*u-a*o),p=(i-n)*(a-u)-(e-r)*(s-o);return p==0?!1:{x:h/p,y:d/p}},lli4:function(i,e,n,r){const s=i.x,a=i.y,o=e.x,u=e.y,h=n.x,d=n.y,p=r.x,g=r.y;return _t.lli8(s,a,o,u,h,d,p,g)},lli:function(i,e){return _t.lli4(i,i.c,e,e.c)},makeline:function(i,e){return new Ge(i.x,i.y,(i.x+e.x)/2,(i.y+e.y)/2,e.x,e.y)},findbbox:function(i){let e=o0,n=o0,r=l0,s=l0;return i.forEach(function(a){const o=a.bbox();e>o.x.min&&(e=o.x.min),n>o.y.min&&(n=o.y.min),r<o.x.max&&(r=o.x.max),s<o.y.max&&(s=o.y.max)}),{x:{min:e,mid:(e+r)/2,max:r,size:r-e},y:{min:n,mid:(n+s)/2,max:s,size:s-n}}},shapeintersections:function(i,e,n,r,s){if(!_t.bboxoverlap(e,r))return[];const a=[],o=[i.startcap,i.forward,i.back,i.endcap],u=[n.startcap,n.forward,n.back,n.endcap];return o.forEach(function(h){h.virtual||u.forEach(function(d){if(d.virtual)return;const p=h.intersects(d,s);p.length>0&&(p.c1=h,p.c2=d,p.s1=i,p.s2=n,a.push(p))})}),a},makeshape:function(i,e,n){const r=e.points.length,s=i.points.length,a=_t.makeline(e.points[r-1],i.points[0]),o=_t.makeline(i.points[s-1],e.points[0]),u={startcap:a,forward:i,back:e,endcap:o,bbox:_t.findbbox([a,i,e,o])};return u.intersections=function(h){return _t.shapeintersections(u,u.bbox,h,h.bbox,n)},u},getminmax:function(i,e,n){if(!n)return{min:0,max:0};let r=o0,s=l0,a,o;n.indexOf(0)===-1&&(n=[0].concat(n)),n.indexOf(1)===-1&&n.push(1);for(let u=0,h=n.length;u<h;u++)a=n[u],o=i.get(a),o[e]<r&&(r=o[e]),o[e]>s&&(s=o[e]);return{min:r,mid:(r+s)/2,max:s,size:s-r}},align:function(i,e){const n=e.p1.x,r=e.p1.y,s=-qh(e.p2.y-r,e.p2.x-n),a=function(o){return{x:(o.x-n)*da(s)-(o.y-r)*Uc(s),y:(o.x-n)*Uc(s)+(o.y-r)*da(s)}};return i.map(a)},roots:function(i,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=i.length-1,r=_t.align(i,e),s=function(C){return 0<=C&&C<=1};if(n===2){const C=r[0].y,R=r[1].y,L=r[2].y,F=C-2*R+L;if(F!==0){const U=-uo(R*R-C*L),$=-C+R,V=-(U+$)/F,G=-(-U+$)/F;return[V,G].filter(s)}else if(R!==L&&F===0)return[(2*R-L)/(2*R-2*L)].filter(s);return[]}const a=r[0].y,o=r[1].y,u=r[2].y,h=r[3].y;let d=-a+3*o-3*u+h,p=3*a-6*o+3*u,g=-3*a+3*o,y=a;if(_t.approximately(d,0)){if(_t.approximately(p,0))return _t.approximately(g,0)?[]:[-y/g].filter(s);const C=uo(g*g-4*p*y),R=2*p;return[(C-g)/R,(-g-C)/R].filter(s)}p/=d,g/=d,y/=d;const b=(3*g-p*p)/3,w=b/3,x=(2*p*p*p-9*p*g+27*y)/27,S=x/2,E=S*S+w*w*w;let k,N,M,O,B;if(E<0){const C=-b/3,R=C*C*C,L=uo(R),F=-x/(2*L),U=F<-1?-1:F>1?1:F,$=zq(U),V=Wh(L),G=2*V;return M=G*da($/3)-p/3,O=G*da(($+bg)/3)-p/3,B=G*da(($+2*bg)/3)-p/3,[M,O,B].filter(s)}else{if(E===0)return k=S<0?Wh(-S):-Wh(S),M=2*k-p/3,O=-k-p/3,[M,O].filter(s);{const C=uo(E);return k=Wh(-S+C),N=Wh(S+C),[k-N-p/3].filter(s)}}},droots:function(i){if(i.length===3){const e=i[0],n=i[1],r=i[2],s=e-2*n+r;if(s!==0){const a=-uo(n*n-e*r),o=-e+n,u=-(a+o)/s,h=-(-a+o)/s;return[u,h]}else if(n!==r&&s===0)return[(2*n-r)/(2*(n-r))];return[]}if(i.length===2){const e=i[0],n=i[1];return e!==n?[e/(e-n)]:[]}return[]},curvature:function(i,e,n,r,s){let a,o,u,h,d=0,p=0;const g=_t.compute(i,e),y=_t.compute(i,n),b=g.x*g.x+g.y*g.y;if(r?(a=uo(Ar(g.y*y.z-y.y*g.z,2)+Ar(g.z*y.x-y.z*g.x,2)+Ar(g.x*y.y-y.x*g.y,2)),o=Ar(b+g.z*g.z,3/2)):(a=g.x*y.y-g.y*y.x,o=Ar(b,3/2)),a===0||o===0)return{k:0,r:0};if(d=a/o,p=o/a,!s){const w=_t.curvature(i-.001,e,n,r,!0).k,x=_t.curvature(i+.001,e,n,r,!0).k;h=(x-d+(d-w))/2,u=(Gh(x-d)+Gh(d-w))/2}return{k:d,r:p,dk:h,adk:u}},inflections:function(i){if(i.length<4)return[];const e=_t.align(i,{p1:i[0],p2:i.slice(-1)[0]}),n=e[2].x*e[1].y,r=e[3].x*e[1].y,s=e[1].x*e[2].y,a=e[3].x*e[2].y,o=18*(-3*n+2*r+3*s-a),u=18*(3*n-r-3*s),h=18*(s-n);if(_t.approximately(o,0)){if(!_t.approximately(u,0)){let y=-h/u;if(0<=y&&y<=1)return[y]}return[]}const d=2*o;if(_t.approximately(d,0))return[];const p=u*u-4*o*h;if(p<0)return[];const g=Math.sqrt(p);return[(g-u)/d,-(u+g)/d].filter(function(y){return 0<=y&&y<=1})},bboxoverlap:function(i,e){const n=["x","y"],r=n.length;for(let s=0,a,o,u,h;s<r;s++)if(a=n[s],o=i[a].mid,u=e[a].mid,h=(i[a].size+e[a].size)/2,Gh(o-u)>=h)return!1;return!0},expandbox:function(i,e){e.x.min<i.x.min&&(i.x.min=e.x.min),e.y.min<i.y.min&&(i.y.min=e.y.min),e.z&&e.z.min<i.z.min&&(i.z.min=e.z.min),e.x.max>i.x.max&&(i.x.max=e.x.max),e.y.max>i.y.max&&(i.y.max=e.y.max),e.z&&e.z.max>i.z.max&&(i.z.max=e.z.max),i.x.mid=(i.x.min+i.x.max)/2,i.y.mid=(i.y.min+i.y.max)/2,i.z&&(i.z.mid=(i.z.min+i.z.max)/2),i.x.size=i.x.max-i.x.min,i.y.size=i.y.max-i.y.min,i.z&&(i.z.size=i.z.max-i.z.min)},pairiteration:function(i,e,n){const r=i.bbox(),s=e.bbox(),a=1e5,o=n||.5;if(r.x.size+r.y.size<o&&s.x.size+s.y.size<o)return[(a*(i._t1+i._t2)/2|0)/a+"/"+(a*(e._t1+e._t2)/2|0)/a];let u=i.split(.5),h=e.split(.5),d=[{left:u.left,right:h.left},{left:u.left,right:h.right},{left:u.right,right:h.right},{left:u.right,right:h.left}];d=d.filter(function(g){return _t.bboxoverlap(g.left.bbox(),g.right.bbox())});let p=[];return d.length===0||(d.forEach(function(g){p=p.concat(_t.pairiteration(g.left,g.right,o))}),p=p.filter(function(g,y){return p.indexOf(g)===y})),p},getccenter:function(i,e,n){const r=e.x-i.x,s=e.y-i.y,a=n.x-e.x,o=n.y-e.y,u=r*da(ho)-s*Uc(ho),h=r*Uc(ho)+s*da(ho),d=a*da(ho)-o*Uc(ho),p=a*Uc(ho)+o*da(ho),g=(i.x+e.x)/2,y=(i.y+e.y)/2,b=(e.x+n.x)/2,w=(e.y+n.y)/2,x=g+u,S=y+h,E=b+d,k=w+p,N=_t.lli8(g,y,x,S,b,w,E,k),M=_t.dist(N,i);let O=qh(i.y-N.y,i.x-N.x),B=qh(e.y-N.y,e.x-N.x),C=qh(n.y-N.y,n.x-N.x),R;return O<C?((O>B||B>C)&&(O+=bg),O>C&&(R=C,C=O,O=R)):C<B&&B<O?(R=C,C=O,O=R):C+=bg,N.s=O,N.e=C,N.r=M,N},numberSort:function(i,e){return i-e}};class xd{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return _t.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,n){return e+n})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var n=e[0].bbox(),r=1;r<e.length;r++)_t.expandbox(n,e[r].bbox());return n}offset(e){const n=[];return this.curves.forEach(function(r){n.push(...r.offset(e))}),new xd(n)}}const{abs:Xh,min:R2,max:I2,cos:Gq,sin:qq,acos:Wq,sqrt:Yh}=Math,Xq=Math.PI;class Ge{constructor(e){let n=e&&e.forEach?e:Array.from(arguments).slice(),r=!1;if(typeof n[0]=="object"){r=n.length;const b=[];n.forEach(function(w){["x","y","z"].forEach(function(x){typeof w[x]<"u"&&b.push(w[x])})}),n=b}let s=!1;const a=n.length;if(r){if(r>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");s=!0}}else if(a!==6&&a!==8&&a!==9&&a!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const o=this._3d=!s&&(a===9||a===12)||e&&e[0]&&typeof e[0].z<"u",u=this.points=[];for(let b=0,w=o?3:2;b<a;b+=w){var h={x:n[b],y:n[b+1]};o&&(h.z=n[b+2]),u.push(h)}const d=this.order=u.length-1,p=this.dims=["x","y"];o&&p.push("z"),this.dimlen=p.length;const g=_t.align(u,{p1:u[0],p2:u[d]}),y=_t.dist(u[0],u[d]);this._linear=g.reduce((b,w)=>b+Xh(w.y),0)<y/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,n,r,s){if(typeof s>"u"&&(s=.5),s===0)return new Ge(n,n,r);if(s===1)return new Ge(e,n,n);const a=Ge.getABC(2,e,n,r,s);return new Ge(e,a.A,r)}static cubicFromPoints(e,n,r,s,a){typeof s>"u"&&(s=.5);const o=Ge.getABC(3,e,n,r,s);typeof a>"u"&&(a=_t.dist(n,o.C));const u=a*(1-s)/s,h=_t.dist(e,r),d=(r.x-e.x)/h,p=(r.y-e.y)/h,g=a*d,y=a*p,b=u*d,w=u*p,x={x:n.x-g,y:n.y-y},S={x:n.x+b,y:n.y+w},E=o.A,k={x:E.x+(x.x-E.x)/(1-s),y:E.y+(x.y-E.y)/(1-s)},N={x:E.x+(S.x-E.x)/s,y:E.y+(S.y-E.y)/s},M={x:e.x+(k.x-e.x)/s,y:e.y+(k.y-e.y)/s},O={x:r.x+(N.x-r.x)/(1-s),y:r.y+(N.y-r.y)/(1-s)};return new Ge(e,M,O,r)}static getUtils(){return _t}getUtils(){return Ge.getUtils()}static get PolyBezier(){return xd}valueOf(){return this.toString()}toString(){return _t.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,n=e[0].x,r=e[0].y,s=["M",n,r,this.order===2?"Q":"C"];for(let a=1,o=e.length;a<o;a++)s.push(e[a].x),s.push(e[a].y);return s.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,n){return""+n+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=_t.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,n=_t.angle(e[0],e[this.order],e[1]);this.clockwise=n>0}length(){return _t.length(this.derivative.bind(this))}static getABC(e=2,n,r,s,a=.5){const o=_t.projectionratio(a,e),u=1-o,h={x:o*n.x+u*s.x,y:o*n.y+u*s.y},d=_t.abcratio(a,e);return{A:{x:r.x+(r.x-h.x)/d,y:r.y+(r.y-h.y)/d},B:r,C:h,S:n,E:s}}getABC(e,n){n=n||this.get(e);let r=this.points[0],s=this.points[this.order];return Ge.getABC(this.order,r,n,s,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let n=0,r,s;n<e;n++)s=n/(e-1),r=this.compute(s),r.t=s,this._lut.push(r);return this._lut}on(e,n){n=n||5;const r=this.getLUT(),s=[];for(let a=0,o,u=0;a<r.length;a++)o=r[a],_t.dist(o,e)<n&&(s.push(o),u+=a/r.length);return s.length?t/=s.length:!1}project(e){const n=this.getLUT(),r=n.length-1,s=_t.closest(n,e),a=s.mpos,o=(a-1)/r,u=(a+1)/r,h=.1/r;let d=s.mdist,p=o,g=p,y;d+=1;for(let b;p<u+h;p+=h)y=this.compute(p),b=_t.dist(e,y),b<d&&(d=b,g=p);return g=g<0?0:g>1?1:g,y=this.compute(g),y.t=g,y.d=d,y}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?_t.computeWithRatios(e,this.points,this.ratios,this._3d):_t.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,n=[e[0]],r=e.length;for(let s=1,a,o;s<r;s++)a=e[s],o=e[s-1],n[s]={x:(r-s)/r*a.x+s/r*o.x,y:(r-s)/r*a.y+s/r*o.y};return n[r]=e[r-1],new Ge(n)}derivative(e){return _t.compute(e,this.dpoints[0],this._3d)}dderivative(e){return _t.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new Ge(_t.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return _t.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return _t.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const n=this.derivative(e),r=Yh(n.x*n.x+n.y*n.y);return{t:e,x:-n.y/r,y:n.x/r}}__normal3(e){const n=this.derivative(e),r=this.derivative(e+.01),s=Yh(n.x*n.x+n.y*n.y+n.z*n.z),a=Yh(r.x*r.x+r.y*r.y+r.z*r.z);n.x/=s,n.y/=s,n.z/=s,r.x/=a,r.y/=a,r.z/=a;const o={x:r.y*n.z-r.z*n.y,y:r.z*n.x-r.x*n.z,z:r.x*n.y-r.y*n.x},u=Yh(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=u,o.y/=u,o.z/=u;const h=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{t:e,x:h[0]*n.x+h[1]*n.y+h[2]*n.z,y:h[3]*n.x+h[4]*n.y+h[5]*n.z,z:h[6]*n.x+h[7]*n.y+h[8]*n.z}}hull(e){let n=this.points,r=[],s=[],a=0;for(s[a++]=n[0],s[a++]=n[1],s[a++]=n[2],this.order===3&&(s[a++]=n[3]);n.length>1;){r=[];for(let o=0,u,h=n.length-1;o<h;o++)u=_t.lerp(e,n[o],n[o+1]),s[a++]=u,r.push(u);n=r}return s}split(e,n){if(e===0&&n)return this.split(n).left;if(n===1)return this.split(e).right;const r=this.hull(e),s={left:this.order===2?new Ge([r[0],r[3],r[5]]):new Ge([r[0],r[4],r[7],r[9]]),right:this.order===2?new Ge([r[5],r[4],r[2]]):new Ge([r[9],r[8],r[6],r[3]]),span:r};return s.left._t1=_t.map(0,0,1,this._t1,this._t2),s.left._t2=_t.map(e,0,1,this._t1,this._t2),s.right._t1=_t.map(e,0,1,this._t1,this._t2),s.right._t2=_t.map(1,0,1,this._t1,this._t2),n?(n=_t.map(n,e,1,0,1),s.right.split(n).left):s}extrema(){const e={};let n=[];return this.dims.forEach((function(r){let s=function(o){return o[r]},a=this.dpoints[0].map(s);e[r]=_t.droots(a),this.order===3&&(a=this.dpoints[1].map(s),e[r]=e[r].concat(_t.droots(a))),e[r]=e[r].filter(function(o){return o>=0&&o<=1}),n=n.concat(e[r].sort(_t.numberSort))}).bind(this)),e.values=n.sort(_t.numberSort).filter(function(r,s){return n.indexOf(r)===s}),e}bbox(){const e=this.extrema(),n={};return this.dims.forEach((function(r){n[r]=_t.getminmax(this,r,e[r])}).bind(this)),n}overlaps(e){const n=this.bbox(),r=e.bbox();return _t.bboxoverlap(n,r)}offset(e,n){if(typeof n<"u"){const r=this.get(e),s=this.normal(e),a={c:r,n:s,x:r.x+s.x*n,y:r.y+s.y*n};return this._3d&&(a.z=r.z+s.z*n),a}if(this._linear){const r=this.normal(0),s=this.points.map(function(a){const o={x:a.x+e*r.x,y:a.y+e*r.y};return a.z&&r.z&&(o.z=a.z+e*r.z),o});return[new Ge(s)]}return this.reduce().map(function(r){return r._linear?r.offset(e)[0]:r.scale(e)})}simple(){if(this.order===3){const s=_t.angle(this.points[0],this.points[3],this.points[1]),a=_t.angle(this.points[0],this.points[3],this.points[2]);if(s>0&&a<0||s<0&&a>0)return!1}const e=this.normal(0),n=this.normal(1);let r=e.x*n.x+e.y*n.y;return this._3d&&(r+=e.z*n.z),Xh(Wq(r))<Xq/3}reduce(){let e,n=0,r=0,s=.01,a,o=[],u=[],h=this.extrema().values;for(h.indexOf(0)===-1&&(h=[0].concat(h)),h.indexOf(1)===-1&&h.push(1),n=h[0],e=1;e<h.length;e++)r=h[e],a=this.split(n,r),a._t1=n,a._t2=r,o.push(a),n=r;return o.forEach(function(d){for(n=0,r=0;r<=1;)for(r=n+s;r<=1+s;r+=s)if(a=d.split(n,r),!a.simple()){if(r-=s,Xh(n-r)<s)return[];a=d.split(n,r),a._t1=_t.map(n,0,1,d._t1,d._t2),a._t2=_t.map(r,0,1,d._t1,d._t2),u.push(a),n=r;break}n<1&&(a=d.split(n,1),a._t1=_t.map(n,0,1,d._t1,d._t2),a._t2=d._t2,u.push(a))}),u}translate(e,n,r){r=typeof r=="number"?r:n;const s=this.order;let a=this.points.map((o,u)=>(1-u/s)*n+u/s*r);return new Ge(this.points.map((o,u)=>({x:o.x+e.x*a[u],y:o.y+e.y*a[u]})))}scale(e){const n=this.order;let r=!1;if(typeof e=="function"&&(r=e),r&&n===2)return this.raise().scale(r);const s=this.clockwise,a=this.points;if(this._linear)return this.translate(this.normal(0),r?r(0):e,r?r(1):e);const o=r?r(0):e,u=r?r(1):e,h=[this.offset(0,10),this.offset(1,10)],d=[],p=_t.lli4(h[0],h[0].c,h[1],h[1].c);if(!p)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(g){const y=d[g*n]=_t.copy(a[g*n]);y.x+=(g?u:o)*h[g].n.x,y.y+=(g?u:o)*h[g].n.y}),r?([0,1].forEach(function(g){if(!(n===2&&g)){var y=a[g+1],b={x:y.x-p.x,y:y.y-p.y},w=r?r((g+1)/n):e;r&&!s&&(w=-w);var x=Yh(b.x*b.x+b.y*b.y);b.x/=x,b.y/=x,d[g+1]={x:y.x+w*b.x,y:y.y+w*b.y}}}),new Ge(d)):([0,1].forEach(g=>{if(n===2&&g)return;const y=d[g*n],b=this.derivative(g),w={x:y.x+b.x,y:y.y+b.y};d[g+1]=_t.lli4(y,w,p,a[g+1])}),new Ge(d))}outline(e,n,r,s){if(n=n===void 0?e:n,this._linear){const O=this.normal(0),B=this.points[0],C=this.points[this.points.length-1];let R,L,F;r===void 0&&(r=e,s=n),R={x:B.x+O.x*e,y:B.y+O.y*e},F={x:C.x+O.x*r,y:C.y+O.y*r},L={x:(R.x+F.x)/2,y:(R.y+F.y)/2};const U=[R,L,F];R={x:B.x-O.x*n,y:B.y-O.y*n},F={x:C.x-O.x*s,y:C.y-O.y*s},L={x:(R.x+F.x)/2,y:(R.y+F.y)/2};const $=[F,L,R],V=_t.makeline($[2],U[0]),G=_t.makeline(U[2],$[0]),et=[V,new Ge(U),G,new Ge($)];return new xd(et)}const a=this.reduce(),o=a.length,u=[];let h=[],d,p=0,g=this.length();const y=typeof r<"u"&&typeof s<"u";function b(O,B,C,R,L){return function(F){const U=R/C,$=(R+L)/C,V=B-O;return _t.map(F,0,1,O+U*V,O+$*V)}}a.forEach(function(O){const B=O.length();y?(u.push(O.scale(b(e,r,g,p,B))),h.push(O.scale(b(-n,-s,g,p,B)))):(u.push(O.scale(e)),h.push(O.scale(-n))),p+=B}),h=h.map(function(O){return d=O.points,d[3]?O.points=[d[3],d[2],d[1],d[0]]:O.points=[d[2],d[1],d[0]],O}).reverse();const w=u[0].points[0],x=u[o-1].points[u[o-1].points.length-1],S=h[o-1].points[h[o-1].points.length-1],E=h[0].points[0],k=_t.makeline(S,w),N=_t.makeline(x,E),M=[k].concat(u).concat([N]).concat(h);return new xd(M)}outlineshapes(e,n,r){n=n||e;const s=this.outline(e,n).curves,a=[];for(let o=1,u=s.length;o<u/2;o++){const h=_t.makeshape(s[o],s[u-o],r);h.startcap.virtual=o>1,h.endcap.virtual=o<u/2-1,a.push(h)}return a}intersects(e,n){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof Ge&&(e=e.reduce()),this.curveintersects(this.reduce(),e,n)):this.selfintersects(n)}lineIntersects(e){const n=R2(e.p1.x,e.p2.x),r=R2(e.p1.y,e.p2.y),s=I2(e.p1.x,e.p2.x),a=I2(e.p1.y,e.p2.y);return _t.roots(this.points,e).filter(o=>{var u=this.get(o);return _t.between(u.x,n,s)&&_t.between(u.y,r,a)})}selfintersects(e){const n=this.reduce(),r=n.length-2,s=[];for(let a=0,o,u,h;a<r;a++)u=n.slice(a,a+1),h=n.slice(a+2),o=this.curveintersects(u,h,e),s.push(...o);return s}curveintersects(e,n,r){const s=[];e.forEach(function(o){n.forEach(function(u){o.overlaps(u)&&s.push({left:o,right:u})})});let a=[];return s.forEach(function(o){const u=_t.pairiteration(o.left,o.right,r);u.length>0&&(a=a.concat(u))}),a}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,n,r,s){const a=(s-r)/4,o=this.get(r+a),u=this.get(s-a),h=_t.dist(e,n),d=_t.dist(e,o),p=_t.dist(e,u);return Xh(d-h)+Xh(p-h)}_iterate(e,n){let r=0,s=1,a;do{a=0,s=1;let o=this.get(r),u,h,d,p,g=!1,y=!1,b,w=s,x=1;do if(y=g,p=d,w=(r+s)/2,u=this.get(w),h=this.get(s),d=_t.getccenter(o,u,h),d.interval={start:r,end:s},g=this._error(d,o,r,s)<=e,b=y&&!g,b||(x=s),g){if(s>=1){if(d.interval.end=x=1,p=d,s>1){let E={x:d.x+d.r*Gq(d.e),y:d.y+d.r*qq(d.e)};d.e+=_t.angle({x:d.x,y:d.y},E,this.get(1))}break}s=s+(s-r)/2}else s=w;while(!b&&a++<100);if(a>=100)break;p=p||d,n.push(p),r=x}while(s<1);return n}}function k_(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=Array(e);n<e;n++)r[n]=i[n];return r}function Yq(i){if(Array.isArray(i))return i}function Kq(i){if(Array.isArray(i))return k_(i)}function Qq(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Zq(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var r,s,a,o,u=[],h=!0,d=!1;try{if(a=(n=n.call(i)).next,e!==0)for(;!(h=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(p){d=!0,s=p}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return u}}function Jq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eW(i,e){if(i==null)return{};var n,r,s=nW(i,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(r=0;r<a.length;r++)n=a[r],e.includes(n)||{}.propertyIsEnumerable.call(i,n)&&(s[n]=i[n])}return s}function nW(i,e){if(i==null)return{};var n={};for(var r in i)if({}.hasOwnProperty.call(i,r)){if(e.includes(r))continue;n[r]=i[r]}return n}function iW(i,e){return Yq(i)||Zq(i,e)||rM(i,e)||Jq()}function rW(i){return Kq(i)||Qq(i)||rM(i)||tW()}function sW(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var r=n.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function aW(i){var e=sW(i,"string");return typeof e=="symbol"?e:e+""}function rM(i,e){if(i){if(typeof i=="string")return k_(i,e);var n={}.toString.call(i).slice(8,-1);return n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set"?Array.from(i):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k_(i,e):void 0}}var oW=(function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(u){return{keyAccessor:u,isProp:!(u instanceof Function)}}),a=i.reduce(function(u,h){var d=u,p=h;return s.forEach(function(g,y){var b=g.keyAccessor,w=g.isProp,x;if(w){var S=p,E=S[b],k=eW(S,[b].map(aW));x=E,p=k}else x=b(p,y);y+1<s.length?(d.hasOwnProperty(x)||(d[x]={}),d=d[x]):n?(d.hasOwnProperty(x)||(d[x]=[]),d[x].push(p)):d[x]=p}),u},{});n instanceof Function&&(function u(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;d===s.length?Object.keys(h).forEach(function(p){return h[p]=n(h[p])}):Object.values(h).forEach(function(p){return u(p,d+1)})})(a);var o=a;return r&&(o=[],(function u(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];d.length===s.length?o.push({keys:d,vals:h}):Object.entries(h).forEach(function(p){var g=iW(p,2),y=g[0],b=g[1];return u(b,[].concat(rW(d),[y]))})})(a),e instanceof Array&&e.length===0&&o.length===1&&(o[0].keys=[])),o});function lW(i,e){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(e).domain(i);break}return this}const D2=Symbol("implicit");function sM(){var i=new QC,e=[],n=[],r=D2;function s(a){let o=i.get(a);if(o===void 0){if(r!==D2)return r;i.set(a,o=e.push(a)-1)}return n[o%n.length]}return s.domain=function(a){if(!arguments.length)return e.slice();e=[],i=new QC;for(const o of a)i.has(o)||i.set(o,e.push(o)-1);return s},s.range=function(a){return arguments.length?(n=Array.from(a),s):n.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return sM(e,n).unknown(r)},lW.apply(s,arguments),s}function cW(i){for(var e=i.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+i.slice(r*6,++r*6);return n}const uW=cW("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function hW(i,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=i:s.appendChild(document.createTextNode(i))}}var dW=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;hW(dW);function N_(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,r=Array(e);n<e;n++)r[n]=i[n];return r}function fW(i){if(Array.isArray(i))return i}function pW(i){if(Array.isArray(i))return N_(i)}function k2(i,e,n){if(aM())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var s=new(i.bind.apply(i,r));return s}function $d(i,e,n){return(e=_W(e))in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function aM(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aM=function(){return!!i})()}function gW(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function mW(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var r,s,a,o,u=[],h=!0,d=!1;try{if(a=(n=n.call(i)).next,e!==0)for(;!(h=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(p){d=!0,s=p}finally{try{if(!h&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return u}}function yW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N2(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),n.push.apply(n,r)}return n}function Vc(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N2(Object(n),!0).forEach(function(r){$d(i,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):N2(Object(n)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))})}return i}function Ed(i,e){return fW(i)||mW(i,e)||oM(i,e)||yW()}function Tr(i){return pW(i)||gW(i)||oM(i)||bW()}function vW(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var r=n.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function _W(i){var e=vW(i,"string");return typeof e=="symbol"?e:e+""}function M_(i){"@babel/helpers - typeof";return M_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M_(i)}function oM(i,e){if(i){if(typeof i=="string")return N_(i,e);var n={}.toString.call(i).slice(8,-1);return n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set"?Array.from(i):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N_(i,e):void 0}}var wW=sM(uW);function M2(i,e,n){!e||typeof n!="string"||i.filter(function(r){return!r[n]}).forEach(function(r){r[n]=wW(e(r))})}function AW(i,e){var n=i.nodes,r=i.links,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s.nodeFilter,o=a===void 0?function(){return!0}:a,u=s.onLoopError,h=u===void 0?function(b){throw"Invalid DAG structure! Found cycle in node path: ".concat(b.join(" -> "),".")}:u,d={};n.forEach(function(b){return d[e(b)]={data:b,out:[],depth:-1,skip:!o(b)}}),r.forEach(function(b){var w=b.source,x=b.target,S=M(w),E=M(x);if(!d.hasOwnProperty(S))throw"Missing source node with id: ".concat(S);if(!d.hasOwnProperty(E))throw"Missing target node with id: ".concat(E);var k=d[S],N=d[E];k.out.push(N);function M(O){return M_(O)==="object"?e(O):O}});var p=[];y(Object.values(d));var g=Object.assign.apply(Object,[{}].concat(Tr(Object.entries(d).filter(function(b){var w=Ed(b,2),x=w[1];return!x.skip}).map(function(b){var w=Ed(b,2),x=w[0],S=w[1];return $d({},x,S.depth)}))));return g;function y(b){for(var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,S=function(){var M=b[E];if(w.indexOf(M)!==-1){var O=[].concat(Tr(w.slice(w.indexOf(M))),[M]).map(function(B){return e(B.data)});return p.some(function(B){return B.length===O.length&&B.every(function(C,R){return C===O[R]})})||(p.push(O),h(O)),1}x>M.depth&&(M.depth=x,y(M.out,[].concat(Tr(w),[M]),x+(M.skip?0:1)))},E=0,k=b.length;E<k;E++)S()}}var xW=2,ri=function(e,n){return n.onNeedsRedraw&&n.onNeedsRedraw()},P2=function(e,n){if(!n.isShadow){var r=we(n.linkDirectionalParticles);n.graphData.links.forEach(function(s){var a=Math.round(Math.abs(r(s)));a?s.__photons=Tr(Array(a)).map(function(){return{}}):delete s.__photons})}},Im=f1({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,n){n.engineRunning=!1,P2(e,n)}},dagMode:{onChange:function(e,n){!e&&(n.graphData.nodes||[]).forEach(function(r){return r.fx=r.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:ri},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:ri},nodeColor:{default:"color",triggerUpdate:!1,onChange:ri},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:ri},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:ri},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:ri},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:ri},linkColor:{default:"color",triggerUpdate:!1,onChange:ri},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:ri},linkWidth:{default:1,triggerUpdate:!1,onChange:ri},linkCurvature:{default:0,triggerUpdate:!1,onChange:ri},linkCanvasObject:{triggerUpdate:!1,onChange:ri},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:ri},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:ri},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:ri},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:ri},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:P2},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,n,r){return r===void 0?e.forceLayout.force(n):(e.forceLayout.force(n,r),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&n(),s(),!e.isShadow&&a(),!e.isShadow&&o(),r(),this;function n(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function r(){var u=we(e.nodeVisibility),h=we(e.nodeVal),d=we(e.nodeColor),p=we(e.nodeCanvasObjectMode),g=e.ctx,y=e.isShadow/e.globalScale,b=e.graphData.nodes.filter(u);g.save(),b.forEach(function(w){var x=p(w);if(e.nodeCanvasObject&&(x==="before"||x==="replace")&&(e.nodeCanvasObject(w,g,e.globalScale),x==="replace")){g.restore();return}var S=Math.sqrt(Math.max(0,h(w)||1))*e.nodeRelSize+y;g.beginPath(),g.arc(w.x,w.y,S,0,2*Math.PI,!1),g.fillStyle=d(w)||"rgba(31, 120, 180, 0.92)",g.fill(),e.nodeCanvasObject&&x==="after"&&e.nodeCanvasObject(w,e.ctx,e.globalScale)}),g.restore()}function s(){var u=we(e.linkVisibility),h=we(e.linkColor),d=we(e.linkWidth),p=we(e.linkLineDash),g=we(e.linkCurvature),y=we(e.linkCanvasObjectMode),b=e.ctx,w=e.isShadow*2,x=e.graphData.links.filter(u);x.forEach(B);var S=[],E=[],k=x;if(e.linkCanvasObject){var N=[],M=[];x.forEach(function(C){return({before:S,after:E,replace:N}[y(C)]||M).push(C)}),k=[].concat(Tr(S),E,M),S=S.concat(N)}b.save(),S.forEach(function(C){return e.linkCanvasObject(C,b,e.globalScale)}),b.restore();var O=oW(k,[h,d,p]);b.save(),Object.entries(O).forEach(function(C){var R=Ed(C,2),L=R[0],F=R[1],U=!L||L==="undefined"?"rgba(0,0,0,0.15)":L;Object.entries(F).forEach(function($){var V=Ed($,2),G=V[0],et=V[1],z=(G||1)/e.globalScale+w;Object.entries(et).forEach(function(Y){var nt=Ed(Y,2);nt[0];var mt=nt[1],bt=p(mt[0]);b.beginPath(),mt.forEach(function(q){var Z=q.source,lt=q.target;if(!(!Z||!lt||!Z.hasOwnProperty("x")||!lt.hasOwnProperty("x"))){b.moveTo(Z.x,Z.y);var ct=q.__controlPoints;ct?b[ct.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(b,Tr(ct).concat([lt.x,lt.y])):b.lineTo(lt.x,lt.y)}}),b.strokeStyle=U,b.lineWidth=z,b.setLineDash(bt||[]),b.stroke()})})}),b.restore(),b.save(),E.forEach(function(C){return e.linkCanvasObject(C,b,e.globalScale)}),b.restore();function B(C){var R=g(C);if(!R){C.__controlPoints=null;return}var L=C.source,F=C.target;if(!(!L||!F||!L.hasOwnProperty("x")||!F.hasOwnProperty("x"))){var U=Math.sqrt(Math.pow(F.x-L.x,2)+Math.pow(F.y-L.y,2));if(U>0){var $=Math.atan2(F.y-L.y,F.x-L.x),V=U*R,G={x:(L.x+F.x)/2+V*Math.cos($-Math.PI/2),y:(L.y+F.y)/2+V*Math.sin($-Math.PI/2)};C.__controlPoints=[G.x,G.y]}else{var et=R*70;C.__controlPoints=[F.x,F.y-et,F.x+et,F.y]}}}}function a(){var u=1.6,h=.2,d=we(e.linkDirectionalArrowLength),p=we(e.linkDirectionalArrowRelPos),g=we(e.linkVisibility),y=we(e.linkDirectionalArrowColor||e.linkColor),b=we(e.nodeVal),w=e.ctx;w.save(),e.graphData.links.filter(g).forEach(function(x){var S=d(x);if(!(!S||S<0)){var E=x.source,k=x.target;if(!(!E||!k||!E.hasOwnProperty("x")||!k.hasOwnProperty("x"))){var N=Math.sqrt(Math.max(0,b(E)||1))*e.nodeRelSize,M=Math.sqrt(Math.max(0,b(k)||1))*e.nodeRelSize,O=Math.min(1,Math.max(0,p(x))),B=y(x)||"rgba(0,0,0,0.28)",C=S/u/2,R=x.__controlPoints&&k2(Ge,[E.x,E.y].concat(Tr(x.__controlPoints),[k.x,k.y])),L=R?function(z){return R.get(z)}:function(z){return{x:E.x+(k.x-E.x)*z||0,y:E.y+(k.y-E.y)*z||0}},F=R?R.length():Math.sqrt(Math.pow(k.x-E.x,2)+Math.pow(k.y-E.y,2)),U=N+S+(F-N-M-S)*O,$=L(U/F),V=L((U-S)/F),G=L((U-S*(1-h))/F),et=Math.atan2($.y-V.y,$.x-V.x)-Math.PI/2;w.beginPath(),w.moveTo($.x,$.y),w.lineTo(V.x+C*Math.cos(et),V.y+C*Math.sin(et)),w.lineTo(G.x,G.y),w.lineTo(V.x-C*Math.cos(et),V.y-C*Math.sin(et)),w.fillStyle=B,w.fill()}}}),w.restore()}function o(){var u=we(e.linkDirectionalParticles),h=we(e.linkDirectionalParticleSpeed),d=we(e.linkDirectionalParticleOffset),p=we(e.linkDirectionalParticleWidth),g=we(e.linkVisibility),y=we(e.linkDirectionalParticleColor||e.linkColor),b=e.ctx;b.save(),e.graphData.links.filter(g).forEach(function(w){var x=u(w);if(!(!w.hasOwnProperty("__photons")||!w.__photons.length)){var S=w.source,E=w.target;if(!(!S||!E||!S.hasOwnProperty("x")||!E.hasOwnProperty("x"))){var k=h(w),N=Math.abs(d(w)),M=w.__photons||[],O=Math.max(0,p(w)/2)/Math.sqrt(e.globalScale),B=y(w)||"rgba(0,0,0,0.28)";b.fillStyle=B;var C=w.__controlPoints?k2(Ge,[S.x,S.y].concat(Tr(w.__controlPoints),[E.x,E.y])):null,R=0,L=!1;M.forEach(function(F){var U=!!F.__singleHop;if(F.hasOwnProperty("__progressRatio")||(F.__progressRatio=U?0:(R+N)/x),!U&&R++,F.__progressRatio+=k,F.__progressRatio>=1)if(!U)F.__progressRatio=F.__progressRatio%1;else{L=!0;return}var $=F.__progressRatio,V=C?C.get($):{x:S.x+(E.x-S.x)*$||0,y:S.y+(E.y-S.y)*$||0};e.linkDirectionalParticleCanvasObject?e.linkDirectionalParticleCanvasObject(V.x,V.y,w,b,e.globalScale):(b.beginPath(),b.arc(V.x,V.y,O,0,2*Math.PI,!1),b.fill())}),L&&(w.__photons=w.__photons.filter(function(F){return!F.__singleHop||F.__progressRatio<=1}))}}}),b.restore()}},emitParticle:function(e,n){return n&&(!n.__photons&&(n.__photons=[]),n.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:Uq().force("link",kq()).force("charge",Vq()).force("center",MG()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,n){n.ctx=e},update:function(e,n){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&M2(e.graphData.nodes,we(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&M2(e.graphData.links,we(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(y){y.source=y[e.linkSource],y.target=y[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var r=e.forceLayout.force("link");r&&r.id(function(y){return y[e.nodeId]}).links(e.graphData.links);var s=e.dagMode&&AW(e.graphData,function(y){return y[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),a=Math.max.apply(Math,Tr(Object.values(s||[]))),o=e.dagLevelDistance||e.graphData.nodes.length/(a||1)*xW*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(n.dagMode)){var u=["lr","rl"].includes(n.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(y){return delete y[u]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var h=["rl","bu"].includes(e.dagMode),d=function(b){return(s[b[e.nodeId]]-a/2)*o*(h?-1:1)},p=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(y){return y[p]=d(y)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?jq(function(y){var b=s[y[e.nodeId]]||-1;return(e.dagMode==="radialin"?a-b:b)*o}).strength(function(y){return e.dagNodeFilter(y)?1:0}):null);for(var g=0;g<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);g++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function lM(i,e){var n=i instanceof Array?i:[i],r=new e;return r._destructor&&r._destructor(),{linkProp:function(a){return{default:r[a](),onChange:function(u,h){n.forEach(function(d){return h[d][a](u)})},triggerUpdate:!1}},linkMethod:function(a){return function(o){for(var u=arguments.length,h=new Array(u>1?u-1:0),d=1;d<u;d++)h[d-1]=arguments[d];var p=[];return n.forEach(function(g){var y=o[g],b=y[a].apply(y,h);b!==y&&p.push(b)}),p.length?p[0]:this}}}}var EW=800,SW=4,TW=5,cM=lM("forceGraph",Im),CW=lM(["forceGraph","shadowGraph"],Im),RW=Object.assign.apply(Object,Tr(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(i){return $d({},i,cM.linkProp(i))})).concat(Tr(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(i){return $d({},i,CW.linkProp(i))})))),IW=Object.assign.apply(Object,Tr(["d3Force","d3ReheatSimulation","emitParticle"].map(function(i){return $d({},i,cM.linkMethod(i))})));function c0(i){if(i.canvas){var e=i.canvas.width,n=i.canvas.height;e===300&&n===150&&(e=n=0);var r=window.devicePixelRatio;e/=r,n/=r,[i.canvas,i.shadowCanvas].forEach(function(a){a.style.width="".concat(i.width,"px"),a.style.height="".concat(i.height,"px"),a.width=i.width*r,a.height=i.height*r,!e&&!n&&a.getContext("2d").scale(r,r)});var s=xs(i.canvas).k;i.zoom.translateBy(i.zoom.__baseElem,(i.width-e)/2/s,(i.height-n)/2/s),i.needsRedraw=!0}}function uM(i){var e=window.devicePixelRatio;i.setTransform(e,0,0,e,0,0)}function O2(i,e,n){i.save(),uM(i),i.clearRect(0,0,e,n),i.restore()}var DW=f1({props:Vc({width:{default:window.innerWidth,onChange:function(e,n){return c0(n)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,n){return c0(n)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,n){[e.nodes,e.links].every(function(s){return(s||[]).every(function(a){return!a.hasOwnProperty("__indexColor")})})&&n.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(r),n.forceGraph.graphData(e),n.shadowGraph.graphData(e);function r(s){var a=s.type,o=s.objs;o.filter(function(u){if(!u.hasOwnProperty("__indexColor"))return!0;var h=n.colorTracker.lookup(u.__indexColor);return!h||!h.hasOwnProperty("d")||h.d!==u}).forEach(function(u){u.__indexColor=n.colorTracker.register({type:a,d:u})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,n){n.canvas&&e&&(n.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,n){n.shadowGraph.nodeCanvasObject(e?function(r,s,a){return e(r,r.__indexColor,s,a)}:null),n.flushShadowCanvas&&n.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,n){n.shadowGraph.linkCanvasObject(e?function(r,s,a){return e(r,r.__indexColor,s,a)}:null),n.flushShadowCanvas&&n.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,n){n.zoom.scaleExtent([e,n.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,n){n.zoom.scaleExtent([n.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,n){n.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},RW),aliases:{stopAnimation:"pauseAnimation"},methods:Vc({graph2ScreenCoords:function(e,n,r){var s=xs(e.canvas);return{x:n*s.k+s.x,y:r*s.k+s.y}},screen2GraphCoords:function(e,n,r){var s=xs(e.canvas);return{x:(n-s.x)/s.k,y:(r-s.y)/s.k}},centerAt:function(e,n,r,s){if(!e.canvas)return null;if(n!==void 0||r!==void 0){var a=Object.assign({},n!==void 0?{x:n}:{},r!==void 0?{y:r}:{});return s?e.tweenGroup.add(new r2(o()).to(a,s).easing(Ol.Quadratic.Out).onUpdate(u).start()):u(a),this}return o();function o(){var h=xs(e.canvas);return{x:(e.width/2-h.x)/h.k,y:(e.height/2-h.y)/h.k}}function u(h){var d=h.x,p=h.y;e.zoom.translateTo(e.zoom.__baseElem,d===void 0?o().x:d,p===void 0?o().y:p),e.needsRedraw=!0}},zoom:function(e,n,r){if(!e.canvas)return null;if(n!==void 0)return r?e.tweenGroup.add(new r2({k:s()}).to({k:n},r).easing(Ol.Quadratic.Out).onUpdate(function(o){var u=o.k;return a(u)}).start()):a(n),this;return s();function s(){return xs(e.canvas).k}function a(o){e.zoom.scaleTo(e.zoom.__baseElem,o),e.needsRedraw=!0}},zoomToFit:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,s=arguments.length,a=new Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];var u=this.getGraphBbox.apply(this,a);if(u){var h={x:(u.x[0]+u.x[1])/2,y:(u.y[0]+u.y[1])/2},d=Math.max(1e-12,Math.min(1e12,(e.width-r*2)/(u.x[1]-u.x[0]),(e.height-r*2)/(u.y[1]-u.y[0])));this.centerAt(h.x,h.y,n),this.zoom(d,n)}return this},getGraphBbox:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},r=we(e.nodeVal),s=function(u){return Math.sqrt(Math.max(0,r(u)||1))*e.nodeRelSize},a=e.graphData.nodes.filter(n).map(function(o){return{x:o.x,y:o.y,r:s(o)}});return a.length?{x:[t2(a,function(o){return o.x-o.r}),JC(a,function(o){return o.x+o.r})],y:[t2(a,function(o){return o.y-o.r}),JC(a,function(o){return o.y+o.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},IW),stateInit:function(){return{lastSetZoom:1,zoom:j7(),forceGraph:new Im,shadowGraph:new Im().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new hG,tweenGroup:new NN}},init:function(e,n){var r=this;e.innerHTML="";var s=document.createElement("div");s.classList.add("force-graph-container"),s.style.position="relative",e.appendChild(s),n.canvas=document.createElement("canvas"),n.backgroundColor&&(n.canvas.style.background=n.backgroundColor),s.appendChild(n.canvas),n.shadowCanvas=document.createElement("canvas");var a=n.canvas.getContext("2d"),o=n.shadowCanvas.getContext("2d",{willReadFrequently:!0}),u={x:-1e12,y:-1e12},h=function(){var g=null,y=window.devicePixelRatio,b=u.x>0&&u.y>0?o.getImageData(u.x*y,u.y*y,1,1):null;return b&&(g=n.colorTracker.lookup(b.data)),g};Sr(n.canvas).call(Q9().subject(function(){if(!n.enableNodeDrag)return null;var p=h();return p&&p.type==="Node"?p.d:null}).on("start",function(p){var g=p.subject;g.__initialDragPos={x:g.x,y:g.y,fx:g.fx,fy:g.fy},p.active||(g.fx=g.x,g.fy=g.y),n.canvas.classList.add("grabbable")}).on("drag",function(p){var g=p.subject,y=g.__initialDragPos,b=p,w=xs(n.canvas).k,x={x:y.x+(b.x-y.x)/w-g.x,y:y.y+(b.y-y.y)/w-g.y};["x","y"].forEach(function(S){return g["f".concat(S)]=g[S]=y[S]+(b[S]-y[S])/w}),!(!g.__dragged&&TW>=Math.sqrt(G7(["x","y"].map(function(S){return Math.pow(p[S]-y[S],2)}))))&&(n.forceGraph.d3AlphaTarget(.3).resetCountdown(),n.isPointerDragging=!0,g.__dragged=!0,n.onNodeDrag(g,x))}).on("end",function(p){var g=p.subject,y=g.__initialDragPos,b={x:g.x-y.x,y:g.y-y.y};y.fx===void 0&&(g.fx=void 0),y.fy===void 0&&(g.fy=void 0),delete g.__initialDragPos,n.forceGraph.d3AlphaTarget()&&n.forceGraph.d3AlphaTarget(0).resetCountdown(),n.canvas.classList.remove("grabbable"),n.isPointerDragging=!1,g.__dragged&&(delete g.__dragged,n.onNodeDragEnd(g,b))})),n.zoom(n.zoom.__baseElem=Sr(n.canvas)),n.zoom.__baseElem.on("dblclick.zoom",null),n.zoom.filter(function(p){return!p.button&&n.enableZoomPanInteraction&&(p.type!=="wheel"||we(n.enableZoomInteraction)(p))&&(p.type==="wheel"||we(n.enablePanInteraction)(p))}).on("zoom",function(p){var g=p.transform;[a,o].forEach(function(y){uM(y),y.translate(g.x,g.y),y.scale(g.k,g.k)}),n.isPointerDragging=!0,n.onZoom&&n.onZoom(Vc(Vc({},g),r.centerAt())),n.needsRedraw=!0}).on("end",function(p){n.isPointerDragging=!1,n.onZoomEnd&&n.onZoomEnd(Vc(Vc({},p.transform),r.centerAt()))}),c0(n),n.forceGraph.onNeedsRedraw(function(){return n.needsRedraw=!0}).onFinishUpdate(function(){xs(n.canvas).k===n.lastSetZoom&&n.graphData.nodes.length&&(n.zoom.scaleTo(n.zoom.__baseElem,n.lastSetZoom=SW/Math.cbrt(n.graphData.nodes.length)),n.needsRedraw=!0)}),n.tooltip=new NG(s),["pointermove","pointerdown"].forEach(function(p){return s.addEventListener(p,function(g){p==="pointerdown"&&(n.isPointerPressed=!0,n.pointerDownEvent=g),!n.isPointerDragging&&g.type==="pointermove"&&n.onBackgroundClick&&(g.pressure>0||n.isPointerPressed)&&(g.pointerType==="mouse"||g.movementX===void 0||[g.movementX,g.movementY].some(function(w){return Math.abs(w)>1}))&&(n.isPointerDragging=!0);var y=b(s);u.x=g.pageX-y.left,u.y=g.pageY-y.top;function b(w){var x=w.getBoundingClientRect(),S=window.pageXOffset||document.documentElement.scrollLeft,E=window.pageYOffset||document.documentElement.scrollTop;return{top:x.top+E,left:x.left+S}}},{passive:!0})}),s.addEventListener("pointerup",function(p){if(n.isPointerPressed){if(n.isPointerPressed=!1,n.isPointerDragging){n.isPointerDragging=!1;return}var g=[p,n.pointerDownEvent];requestAnimationFrame(function(){if(p.button===0)if(n.hoverObj){var y=n["on".concat(n.hoverObj.type,"Click")];y&&y.apply(void 0,[n.hoverObj.d].concat(g))}else n.onBackgroundClick&&n.onBackgroundClick.apply(n,g);if(p.button===2)if(n.hoverObj){var b=n["on".concat(n.hoverObj.type,"RightClick")];b&&b.apply(void 0,[n.hoverObj.d].concat(g))}else n.onBackgroundRightClick&&n.onBackgroundRightClick.apply(n,g)})}},{passive:!0}),s.addEventListener("contextmenu",function(p){return!n.onBackgroundRightClick&&!n.onNodeRightClick&&!n.onLinkRightClick?!0:(p.preventDefault(),!1)}),n.forceGraph(a),n.shadowGraph(o);var d=b$(function(){O2(o,n.width,n.height),n.shadowGraph.linkWidth(function(g){return we(n.linkWidth)(g)+n.linkHoverPrecision});var p=xs(n.canvas);n.shadowGraph.globalScale(p.k).tickFrame()},EW);n.flushShadowCanvas=d.flush,(this._animationCycle=function p(){var g=!n.autoPauseRedraw||!!n.needsRedraw||n.forceGraph.isEngineRunning()||n.graphData.links.some(function(N){return N.__photons&&N.__photons.length});if(n.needsRedraw=!1,n.enablePointerInteraction){var y=n.isPointerDragging?null:h();if(y!==n.hoverObj){var b=n.hoverObj,w=b?b.type:null,x=y?y.type:null;if(w&&w!==x){var S=n["on".concat(w,"Hover")];S&&S(null,b.d)}if(x){var E=n["on".concat(x,"Hover")];E&&E(y.d,w===x?b.d:null)}n.tooltip.content(y&&we(n["".concat(y.type.toLowerCase(),"Label")])(y.d)||null),n.canvas.classList[(y&&n["on".concat(x,"Click")]||!y&&n.onBackgroundClick)&&we(n.showPointerCursor)(y?.d)?"add":"remove"]("clickable"),n.hoverObj=y}g&&d()}if(g){O2(a,n.width,n.height);var k=xs(n.canvas).k;n.onRenderFramePre&&n.onRenderFramePre(a,k),n.forceGraph.globalScale(k).tickFrame(),n.onRenderFramePost&&n.onRenderFramePost(a,k)}n.tweenGroup.update(),n.animationFrameRequestId=requestAnimationFrame(p)})()},update:function(e){}}),u0={exports:{}},h0,L2;function kW(){if(L2)return h0;L2=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return h0=i,h0}var d0,B2;function NW(){if(B2)return d0;B2=1;var i=kW();function e(){}function n(){}return n.resetWarningCache=e,d0=function(){function r(o,u,h,d,p,g){if(g!==i){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},d0}var F2;function MW(){return F2||(F2=1,u0.exports=NW()()),u0.exports}var PW=MW();const Q=$m(PW),vy={width:Q.number,height:Q.number,graphData:Q.shape({nodes:Q.arrayOf(Q.object).isRequired,links:Q.arrayOf(Q.object).isRequired}),backgroundColor:Q.string,nodeRelSize:Q.number,nodeId:Q.string,nodeLabel:Q.oneOfType([Q.string,Q.func]),nodeVal:Q.oneOfType([Q.number,Q.string,Q.func]),nodeVisibility:Q.oneOfType([Q.bool,Q.string,Q.func]),nodeColor:Q.oneOfType([Q.string,Q.func]),nodeAutoColorBy:Q.oneOfType([Q.string,Q.func]),onNodeHover:Q.func,onNodeClick:Q.func,linkSource:Q.string,linkTarget:Q.string,linkLabel:Q.oneOfType([Q.string,Q.func]),linkVisibility:Q.oneOfType([Q.bool,Q.string,Q.func]),linkColor:Q.oneOfType([Q.string,Q.func]),linkAutoColorBy:Q.oneOfType([Q.string,Q.func]),linkWidth:Q.oneOfType([Q.number,Q.string,Q.func]),linkCurvature:Q.oneOfType([Q.number,Q.string,Q.func]),linkDirectionalArrowLength:Q.oneOfType([Q.number,Q.string,Q.func]),linkDirectionalArrowColor:Q.oneOfType([Q.string,Q.func]),linkDirectionalArrowRelPos:Q.oneOfType([Q.number,Q.string,Q.func]),linkDirectionalParticles:Q.oneOfType([Q.number,Q.string,Q.func]),linkDirectionalParticleSpeed:Q.oneOfType([Q.number,Q.string,Q.func]),linkDirectionalParticleOffset:Q.oneOfType([Q.number,Q.string,Q.func]),linkDirectionalParticleWidth:Q.oneOfType([Q.number,Q.string,Q.func]),linkDirectionalParticleColor:Q.oneOfType([Q.string,Q.func]),onLinkHover:Q.func,onLinkClick:Q.func,dagMode:Q.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:Q.number,dagNodeFilter:Q.func,onDagError:Q.func,d3AlphaMin:Q.number,d3AlphaDecay:Q.number,d3VelocityDecay:Q.number,warmupTicks:Q.number,cooldownTicks:Q.number,cooldownTime:Q.number,onEngineTick:Q.func,onEngineStop:Q.func,getGraphBbox:Q.func},hM={zoomToFit:Q.func,onNodeRightClick:Q.func,onNodeDrag:Q.func,onNodeDragEnd:Q.func,onLinkRightClick:Q.func,linkHoverPrecision:Q.number,onBackgroundClick:Q.func,onBackgroundRightClick:Q.func,showPointerCursor:Q.oneOfType([Q.bool,Q.func]),enablePointerInteraction:Q.bool,enableNodeDrag:Q.bool},w1={showNavInfo:Q.bool,nodeOpacity:Q.number,nodeResolution:Q.number,nodeThreeObject:Q.oneOfType([Q.object,Q.string,Q.func]),nodeThreeObjectExtend:Q.oneOfType([Q.bool,Q.string,Q.func]),nodePositionUpdate:Q.func,linkOpacity:Q.number,linkResolution:Q.number,linkCurveRotation:Q.oneOfType([Q.number,Q.string,Q.func]),linkMaterial:Q.oneOfType([Q.object,Q.string,Q.func]),linkThreeObject:Q.oneOfType([Q.object,Q.string,Q.func]),linkThreeObjectExtend:Q.oneOfType([Q.bool,Q.string,Q.func]),linkPositionUpdate:Q.func,linkDirectionalArrowResolution:Q.number,linkDirectionalParticleResolution:Q.number,linkDirectionalParticleThreeObject:Q.oneOfType([Q.object,Q.string,Q.func]),forceEngine:Q.oneOf(["d3","ngraph"]),ngraphPhysics:Q.object,numDimensions:Q.oneOf([1,2,3])},OW=Object.assign({},vy,hM,{linkLineDash:Q.oneOfType([Q.arrayOf(Q.number),Q.string,Q.func]),nodeCanvasObjectMode:Q.oneOfType([Q.string,Q.func]),nodeCanvasObject:Q.func,nodePointerAreaPaint:Q.func,linkCanvasObjectMode:Q.oneOfType([Q.string,Q.func]),linkCanvasObject:Q.func,linkPointerAreaPaint:Q.func,linkDirectionalParticleCanvasObject:Q.func,autoPauseRedraw:Q.bool,minZoom:Q.number,maxZoom:Q.number,enableZoomInteraction:Q.oneOfType([Q.bool,Q.func]),enablePanInteraction:Q.oneOfType([Q.bool,Q.func]),onZoom:Q.func,onZoomEnd:Q.func,onRenderFramePre:Q.func,onRenderFramePost:Q.func});Object.assign({},vy,hM,w1,{enableNavigationControls:Q.bool,controlType:Q.oneOf(["trackball","orbit","fly"]),rendererConfig:Q.object,extraRenderers:Q.arrayOf(Q.shape({render:Q.func.isRequired}))});Object.assign({},vy,w1,{nodeDesc:Q.oneOfType([Q.string,Q.func]),linkDesc:Q.oneOfType([Q.string,Q.func])});Object.assign({},vy,w1,{markerAttrs:Q.object,yOffset:Q.number,glScale:Q.number});const A1=c8(DW,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});A1.displayName="ForceGraph2D";A1.propTypes=OW;const bi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),P_=[.001,0,0,.001,0,0],f0=1.35,Yi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Is={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Gd="pdfjs_internal_editor_",Wt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ce={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},dM={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Xn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Sd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},gn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},qc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Af={ERRORS:0,WARNINGS:1,INFOS:5},Au={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},vg={moveTo:0,lineTo:1,curveTo:2,closePath:3},fM={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let _y=Af.WARNINGS;function LW(i){Number.isInteger(i)&&(_y=i)}function BW(){return _y}function wy(i){_y>=Af.INFOS&&console.info(`Info: ${i}`)}function Xt(i){_y>=Af.WARNINGS&&console.warn(`Warning: ${i}`)}function Fe(i){throw new Error(i)}function fe(i,e){i||Fe(e)}function FW(i){switch(i?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function x1(i,e=null,n=null){if(!i)return null;if(n&&typeof i=="string"&&(n.addDefaultProtocol&&i.startsWith("www.")&&i.match(/\./g)?.length>=2&&(i=`http://${i}`),n.tryConvertEncoding))try{i=HW(i)}catch{}const r=e?URL.parse(i,e):URL.parse(i);return FW(r)?r:null}function E1(i,e,n=!1){const r=URL.parse(i);return r?(r.hash=e,r.href):n&&x1(i,"http://example.com")?i.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Jt(i,e,n,r=!1){return Object.defineProperty(i,e,{value:n,enumerable:!r,configurable:!0,writable:!1}),n}const Kl=(function(){function e(n,r){this.message=n,this.name=r}return e.prototype=new Error,e.constructor=e,e})();class U2 extends Kl{constructor(e,n){super(e,"PasswordException"),this.code=n}}class p0 extends Kl{constructor(e,n){super(e,"UnknownErrorException"),this.details=n}}class Dm extends Kl{constructor(e){super(e,"InvalidPDFException")}}class qd extends Kl{constructor(e,n,r){super(e,"ResponseException"),this.status=n,this.missing=r}}class UW extends Kl{constructor(e){super(e,"FormatError")}}class Ca extends Kl{constructor(e){super(e,"AbortException")}}function pM(i){(typeof i!="object"||i?.length===void 0)&&Fe("Invalid argument for bytesToString");const e=i.length,n=8192;if(e<n)return String.fromCharCode.apply(null,i);const r=[];for(let s=0;s<e;s+=n){const a=Math.min(s+n,e),o=i.subarray(s,a);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function xf(i){typeof i!="string"&&Fe("Invalid argument for stringToBytes");const e=i.length,n=new Uint8Array(e);for(let r=0;r<e;++r)n[r]=i.charCodeAt(r)&255;return n}function VW(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function jW(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function zW(){try{return new Function(""),!0}catch{return!1}}class Un{static get isLittleEndian(){return Jt(this,"isLittleEndian",jW())}static get isEvalSupported(){return Jt(this,"isEvalSupported",zW())}static get isOffscreenCanvasSupported(){return Jt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Jt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:n}=navigator;return Jt(this,"platform",{isAndroid:n.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:n.includes("Firefox")})}static get isCSSRoundSupported(){return Jt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const g0=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));class Ct{static makeHexColor(e,n,r){return`#${g0[e]}${g0[n]}${g0[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,n){let r;e[0]?(e[0]<0&&(r=n[0],n[0]=n[2],n[2]=r),n[0]*=e[0],n[2]*=e[0],e[3]<0&&(r=n[1],n[1]=n[3],n[3]=r),n[1]*=e[3],n[3]*=e[3]):(r=n[0],n[0]=n[1],n[1]=r,r=n[2],n[2]=n[3],n[3]=r,e[1]<0&&(r=n[1],n[1]=n[3],n[3]=r),n[1]*=e[1],n[3]*=e[1],e[2]<0&&(r=n[0],n[0]=n[2],n[2]=r),n[0]*=e[2],n[2]*=e[2]),n[0]+=e[4],n[1]+=e[5],n[2]+=e[4],n[3]+=e[5]}static transform(e,n){return[e[0]*n[0]+e[2]*n[1],e[1]*n[0]+e[3]*n[1],e[0]*n[2]+e[2]*n[3],e[1]*n[2]+e[3]*n[3],e[0]*n[4]+e[2]*n[5]+e[4],e[1]*n[4]+e[3]*n[5]+e[5]]}static multiplyByDOMMatrix(e,n){return[e[0]*n.a+e[2]*n.b,e[1]*n.a+e[3]*n.b,e[0]*n.c+e[2]*n.d,e[1]*n.c+e[3]*n.d,e[0]*n.e+e[2]*n.f+e[4],e[1]*n.e+e[3]*n.f+e[5]]}static applyTransform(e,n,r=0){const s=e[r],a=e[r+1];e[r]=s*n[0]+a*n[2]+n[4],e[r+1]=s*n[1]+a*n[3]+n[5]}static applyTransformToBezier(e,n,r=0){const s=n[0],a=n[1],o=n[2],u=n[3],h=n[4],d=n[5];for(let p=0;p<6;p+=2){const g=e[r+p],y=e[r+p+1];e[r+p]=g*s+y*o+h,e[r+p+1]=g*a+y*u+d}}static applyInverseTransform(e,n){const r=e[0],s=e[1],a=n[0]*n[3]-n[1]*n[2];e[0]=(r*n[3]-s*n[2]+n[2]*n[5]-n[4]*n[3])/a,e[1]=(-r*n[1]+s*n[0]+n[4]*n[1]-n[5]*n[0])/a}static axialAlignedBoundingBox(e,n,r){const s=n[0],a=n[1],o=n[2],u=n[3],h=n[4],d=n[5],p=e[0],g=e[1],y=e[2],b=e[3];let w=s*p+h,x=w,S=s*y+h,E=S,k=u*g+d,N=k,M=u*b+d,O=M;if(a!==0||o!==0){const B=a*p,C=a*y,R=o*g,L=o*b;w+=R,E+=R,S+=L,x+=L,k+=B,O+=B,M+=C,N+=C}r[0]=Math.min(r[0],w,S,x,E),r[1]=Math.min(r[1],k,M,N,O),r[2]=Math.max(r[2],w,S,x,E),r[3]=Math.max(r[3],k,M,N,O)}static inverseTransform(e){const n=e[0]*e[3]-e[1]*e[2];return[e[3]/n,-e[1]/n,-e[2]/n,e[0]/n,(e[2]*e[5]-e[4]*e[3])/n,(e[4]*e[1]-e[5]*e[0])/n]}static singularValueDecompose2dScale(e,n){const r=e[0],s=e[1],a=e[2],o=e[3],u=r**2+s**2,h=r*a+s*o,d=a**2+o**2,p=(u+d)/2,g=Math.sqrt(p**2-(u*d-h**2));n[0]=Math.sqrt(p+g||1),n[1]=Math.sqrt(p-g||1)}static normalizeRect(e){const n=e.slice(0);return e[0]>e[2]&&(n[0]=e[2],n[2]=e[0]),e[1]>e[3]&&(n[1]=e[3],n[3]=e[1]),n}static intersect(e,n){const r=Math.max(Math.min(e[0],e[2]),Math.min(n[0],n[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(n[0],n[2]));if(r>s)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(n[1],n[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(n[1],n[3]));return a>o?null:[r,a,s,o]}static pointBoundingBox(e,n,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],n),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],n)}static rectBoundingBox(e,n,r,s,a){a[0]=Math.min(a[0],e,r),a[1]=Math.min(a[1],n,s),a[2]=Math.max(a[2],e,r),a[3]=Math.max(a[3],n,s)}static#t(e,n,r,s,a,o,u,h,d,p){if(d<=0||d>=1)return;const g=1-d,y=d*d,b=y*d,w=g*(g*(g*e+3*d*n)+3*y*r)+b*s,x=g*(g*(g*a+3*d*o)+3*y*u)+b*h;p[0]=Math.min(p[0],w),p[1]=Math.min(p[1],x),p[2]=Math.max(p[2],w),p[3]=Math.max(p[3],x)}static#e(e,n,r,s,a,o,u,h,d,p,g,y){if(Math.abs(d)<1e-12){Math.abs(p)>=1e-12&&this.#t(e,n,r,s,a,o,u,h,-g/p,y);return}const b=p**2-4*g*d;if(b<0)return;const w=Math.sqrt(b),x=2*d;this.#t(e,n,r,s,a,o,u,h,(-p+w)/x,y),this.#t(e,n,r,s,a,o,u,h,(-p-w)/x,y)}static bezierBoundingBox(e,n,r,s,a,o,u,h,d){d[0]=Math.min(d[0],e,u),d[1]=Math.min(d[1],n,h),d[2]=Math.max(d[2],e,u),d[3]=Math.max(d[3],n,h),this.#e(e,r,a,u,n,s,o,h,3*(-e+3*(r-a)+u),6*(e-2*r+a),3*(r-e),d),this.#e(e,r,a,u,n,s,o,h,3*(-n+3*(s-o)+h),6*(n-2*s+o),3*(s-n),d)}}function HW(i){return decodeURIComponent(escape(i))}let m0=null,V2=null;function gM(i){return m0||(m0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,V2=new Map([["","t"]])),i.replaceAll(m0,(e,n,r)=>n?n.normalize("NFKC"):V2.get(r))}function S1(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),pM(i)}const T1="pdfjs_internal_id_";function $W(i,e,n){if(!Array.isArray(n)||n.length<2)return!1;const[r,s,...a]=n;if(!i(r)&&!Number.isInteger(r)||!e(s))return!1;const o=a.length;let u=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;u=!1;break;default:return!1}for(const h of a)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function si(i,e,n){return Math.min(Math.max(i,e),n)}function mM(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(pM(i))}function GW(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):xf(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...e){return new Promise(n=>{n(i(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((e,n)=>e+n,0)});class Wd{static textContent(e){const n=[],r={items:n,styles:Object.create(null)};function s(a){if(!a)return;let o=null;const u=a.name;if(u==="#text")o=a.value;else if(Wd.shouldBuildText(u))a?.attributes?.textContent?o=a.attributes.textContent:a.value&&(o=a.value);else return;if(o!==null&&n.push({str:o}),!!a.children)for(const h of a.children)s(h)}return s(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class C1{static setupStorage(e,n,r,s,a){const o=s.getValue(n,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),a==="print")break;e.addEventListener("input",u=>{s.setValue(n,{value:u.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",u=>{s.setValue(n,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),a==="print")break;e.addEventListener("input",u=>{s.setValue(n,{value:u.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const u of r.children)u.attributes.value===o.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const h=u.target.options,d=h.selectedIndex===-1?"":h[h.selectedIndex].value;s.setValue(n,{value:d})});break}}static setAttributes({html:e,element:n,storage:r=null,intent:s,linkService:a}){const{attributes:o}=n,u=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[h,d]of Object.entries(o))if(d!=null)switch(h){case"class":d.length&&e.setAttribute(h,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!u||h!=="href"&&h!=="newWindow")&&e.setAttribute(h,d)}u&&a.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,n,r)}static render(e){const n=e.annotationStorage,r=e.linkService,s=e.xfaHtml,a=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:a,linkService:r});const u=a!=="richText",h=e.div;if(h.append(o),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;h.style.transform=g}u&&h.setAttribute("class","xfaLayer xfaFont");const d=[];if(s.children.length===0){if(s.value){const g=document.createTextNode(s.value);o.append(g),u&&Wd.shouldBuildText(s.name)&&d.push(g)}return{textDivs:d}}const p=[[s,-1,o]];for(;p.length>0;){const[g,y,b]=p.at(-1);if(y+1===g.children.length){p.pop();continue}const w=g.children[++p.at(-1)[1]];if(w===null)continue;const{name:x}=w;if(x==="#text"){const E=document.createTextNode(w.value);d.push(E),b.append(E);continue}const S=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,x):document.createElement(x);if(b.append(S),w.attributes&&this.setAttributes({html:S,element:w,storage:n,intent:a,linkService:r}),w.children?.length>0)p.push([w,-1,S]);else if(w.value){const E=document.createTextNode(w.value);u&&Wd.shouldBuildText(x)&&d.push(E),S.append(E)}}for(const g of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const n=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=n,e.div.hidden=!1}}const fa="http://www.w3.org/2000/svg";class Hl{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Pu(i,e="text"){if(dd(i,document.baseURI)){const n=await fetch(i);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,r)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":n(s.response);return}n(s.responseText);return}r(new Error(s.statusText))}},s.send(null)})}class Ef{constructor({viewBox:e,userUnit:n,scale:r,rotation:s,offsetX:a=0,offsetY:o=0,dontFlip:u=!1}){this.viewBox=e,this.userUnit=n,this.scale=r,this.rotation=s,this.offsetX=a,this.offsetY=o,r*=n;const h=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let p,g,y,b;switch(s%=360,s<0&&(s+=360),s){case 180:p=-1,g=0,y=0,b=1;break;case 90:p=0,g=1,y=1,b=0;break;case 270:p=0,g=-1,y=-1,b=0;break;case 0:p=1,g=0,y=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(y=-y,b=-b);let w,x,S,E;p===0?(w=Math.abs(d-e[1])*r+a,x=Math.abs(h-e[0])*r+o,S=(e[3]-e[1])*r,E=(e[2]-e[0])*r):(w=Math.abs(h-e[0])*r+a,x=Math.abs(d-e[1])*r+o,S=(e[2]-e[0])*r,E=(e[3]-e[1])*r),this.transform=[p*r,g*r,y*r,b*r,w-p*r*h-y*r*d,x-g*r*h-b*r*d],this.width=S,this.height=E}get rawDims(){const e=this.viewBox;return Jt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:n=this.rotation,offsetX:r=this.offsetX,offsetY:s=this.offsetY,dontFlip:a=!1}={}){return new Ef({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:n,offsetX:r,offsetY:s,dontFlip:a})}convertToViewportPoint(e,n){const r=[e,n];return Ct.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const n=[e[0],e[1]];Ct.applyTransform(n,this.transform);const r=[e[2],e[3]];return Ct.applyTransform(r,this.transform),[n[0],n[1],r[0],r[1]]}convertToPdfPoint(e,n){const r=[e,n];return Ct.applyInverseTransform(r,this.transform),r}}class Ay extends Kl{constructor(e,n=0){super(e,"RenderingCancelledException"),this.extraDelay=n}}function Sf(i){const e=i.length;let n=0;for(;n<e&&i[n].trim()==="";)n++;return i.substring(n,n+5).toLowerCase()==="data:"}function xy(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function yM(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function bM(i,e="document.pdf"){if(typeof i!="string")return e;if(Sf(i))return Xt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(i);if(!r)return e;const s=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},a=/\.pdf$/i,o=r.pathname.split("/").at(-1);if(a.test(o))return s(o);if(r.searchParams.size>0){const u=Array.from(r.searchParams.values()).reverse();for(const d of u)if(a.test(d))return s(d);const h=Array.from(r.searchParams.keys()).reverse();for(const d of h)if(a.test(d))return s(d)}if(r.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(h)return s(h[0])}return e}class j2{started=Object.create(null);times=[];time(e){e in this.started&&Xt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Xt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let n=0;for(const{name:r}of this.times)n=Math.max(r.length,n);for(const{name:r,start:s,end:a}of this.times)e.push(`${r.padEnd(n)} ${a-s}ms
`);return e.join("")}}function dd(i,e){const n=e?URL.parse(i,e):URL.parse(i);return n?.protocol==="http:"||n?.protocol==="https:"}function rr(i){i.preventDefault()}function en(i){i.preventDefault(),i.stopPropagation()}function qW(i){console.log("Deprecated API usage: "+i)}class km{static#t;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const n=this.#t.exec(e);if(!n)return null;const r=parseInt(n[1],10);let s=parseInt(n[2],10);s=s>=1&&s<=12?s-1:0;let a=parseInt(n[3],10);a=a>=1&&a<=31?a:1;let o=parseInt(n[4],10);o=o>=0&&o<=23?o:0;let u=parseInt(n[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(n[6],10);h=h>=0&&h<=59?h:0;const d=n[7]||"Z";let p=parseInt(n[8],10);p=p>=0&&p<=23?p:0;let g=parseInt(n[9],10)||0;return g=g>=0&&g<=59?g:0,d==="-"?(o+=p,u+=g):d==="+"&&(o-=p,u-=g),new Date(Date.UTC(r,s,a,o,u,h))}}function vM(i,{scale:e=1,rotation:n=0}){const{width:r,height:s}=i.attributes.style,a=[0,0,parseInt(r),parseInt(s)];return new Ef({viewBox:a,userUnit:1,scale:e,rotation:n})}function Ou(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Xt(`Not a valid color format: "${i}"`),[0,0,0])}function WW(i){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const n of i.keys()){e.style.color=n;const r=window.getComputedStyle(e).color;i.set(n,Ou(r))}e.remove()}function tn(i){const{a:e,b:n,c:r,d:s,e:a,f:o}=i.getTransform();return[e,n,r,s,a,o]}function ws(i){const{a:e,b:n,c:r,d:s,e:a,f:o}=i.getTransform().invertSelf();return[e,n,r,s,a,o]}function Oo(i,e,n=!1,r=!0){if(e instanceof Ef){const{pageWidth:s,pageHeight:a}=e.rawDims,{style:o}=i,u=Un.isCSSRoundSupported,h=`var(--total-scale-factor) * ${s}px`,d=`var(--total-scale-factor) * ${a}px`,p=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,g=u?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!n||e.rotation%180===0?(o.width=p,o.height=g):(o.width=g,o.height=p)}r&&i.setAttribute("data-main-rotation",e.rotation)}class Yr{constructor(){const{pixelRatio:e}=Yr;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,n,r,s,a=-1){let o=1/0,u=1/0,h=1/0;r=Yr.capPixels(r,a),r>0&&(o=Math.sqrt(r/(e*n))),s!==-1&&(u=s/e,h=s/n);const d=Math.min(o,u,h);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,n){if(n>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+n/100));return e>0?Math.min(e,r):r}return e}}const Nm=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class XW{static get isDarkMode(){return Jt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class _M{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:n}=e;n.width=n.height="0",n.display="none",n.color="var(--comment-fg-color)",document.body.append(e);const{color:r}=window.getComputedStyle(e);return e.remove(),Jt(this,"commentForegroundColor",Ou(r))}}function wM(i,e,n,r){r=Math.min(Math.max(r??1,0),1);const s=255*(1-r);return i=Math.round(i*r+s),e=Math.round(e*r+s),n=Math.round(n*r+s),[i,e,n]}function z2(i,e){const n=i[0]/255,r=i[1]/255,s=i[2]/255,a=Math.max(n,r,s),o=Math.min(n,r,s),u=(a+o)/2;if(a===o)e[0]=e[1]=0;else{const h=a-o;switch(e[1]=u<.5?h/(a+o):h/(2-a-o),a){case n:e[0]=((r-s)/h+(r<s?6:0))*60;break;case r:e[0]=((s-n)/h+2)*60;break;case s:e[0]=((n-r)/h+4)*60;break}}e[2]=u}function O_(i,e){const n=i[0],r=i[1],s=i[2],a=(1-Math.abs(2*s-1))*r,o=a*(1-Math.abs(n/60%2-1)),u=s-a/2;switch(Math.floor(n/60)){case 0:e[0]=a+u,e[1]=o+u,e[2]=u;break;case 1:e[0]=o+u,e[1]=a+u,e[2]=u;break;case 2:e[0]=u,e[1]=a+u,e[2]=o+u;break;case 3:e[0]=u,e[1]=o+u,e[2]=a+u;break;case 4:e[0]=o+u,e[1]=u,e[2]=a+u;break;case 5:case 6:e[0]=a+u,e[1]=u,e[2]=o+u;break}}function H2(i){return i<=.03928?i/12.92:((i+.055)/1.055)**2.4}function $2(i,e,n){O_(i,n),n.map(H2);const r=.2126*n[0]+.7152*n[1]+.0722*n[2];O_(e,n),n.map(H2);const s=.2126*n[0]+.7152*n[1]+.0722*n[2];return r>s?(r+.05)/(s+.05):(s+.05)/(r+.05)}const G2=new Map;function AM(i,e){const n=i[0]+i[1]*256+i[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let r=G2.get(n);if(r)return r;const s=new Float32Array(9),a=s.subarray(0,3),o=s.subarray(3,6);z2(i,o);const u=s.subarray(6,9);z2(e,u);const h=u[2]<.5,d=h?12:4.5;if(o[2]=h?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),$2(o,u,a)<d){let p,g;h?(p=o[2],g=1):(p=0,g=o[2]);const y=.005;for(;g-p>y;){const b=o[2]=(p+g)/2;h===$2(o,u,a)<d?p=b:g=b}o[2]=h?g:p}return O_(o,a),r=Ct.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),G2.set(n,r),r}function R1({html:i,dir:e,className:n},r){const s=document.createDocumentFragment();if(typeof i=="string"){const a=document.createElement("p");a.dir=e||"auto";const o=i.split(/(?:\r\n?|\n)/);for(let u=0,h=o.length;u<h;++u){const d=o[u];a.append(document.createTextNode(d)),u<h-1&&a.append(document.createElement("br"))}s.append(a)}else C1.render({xfaHtml:i,div:s,intent:"richText"});s.firstChild.classList.add("richText",n),r.append(s)}class Td{#t=null;#e=null;#i;#n=null;#a=null;#r=null;#s=null;#o=null;static#c=null;constructor(e){this.#i=e,Td.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#t=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const n=this.#i._uiManager._signal;n instanceof AbortSignal&&!n.aborted&&(e.addEventListener("contextmenu",rr,{signal:n}),e.addEventListener("pointerdown",Td.#l,{signal:n}));const r=this.#n=document.createElement("div");r.className="buttons",e.append(r);const s=this.#i.toolbarPosition;if(s){const{style:a}=e,o=this.#i._uiManager.direction==="ltr"?1-s[0]:s[0];a.insetInlineEnd=`${100*o}%`,a.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#t}static#l(e){e.stopPropagation()}#d(e){this.#i._focusEventsAllowed=!1,en(e)}#h(e){this.#i._focusEventsAllowed=!0,en(e)}#f(e){const n=this.#i._uiManager._signal;return!(n instanceof AbortSignal)||n.aborted?!1:(e.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:n}),e.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:n}),e.addEventListener("contextmenu",rr,{signal:n}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:e,_uiManager:n}=this.#i,r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",Td.#c[e]),this.#f(r)&&r.addEventListener("click",s=>{n.delete()},{signal:n._signal}),this.#n.append(r)}get#m(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const n=await e.render();this.#f(n),this.#n.append(n,this.#m),this.#a=e}addComment(e,n=null){if(this.#r)return;const r=e.renderForToolbar();if(!r)return;this.#f(r);const s=this.#s=this.#m;n?(this.#n.insertBefore(r,n),this.#n.insertBefore(s,n)):this.#n.append(r,s),this.#r=e,e.toolbar=this}addColorPicker(e){if(this.#e)return;this.#e=e;const n=e.renderButton();this.#f(n),this.#n.append(n,this.#m)}async addEditSignatureButton(e){const n=this.#o=await e.renderEditButton(this.#i);this.#f(n),this.#n.append(n,this.#m)}removeButton(e){switch(e){case"comment":this.#r?.removeToolbarCommentButton(),this.#r=null,this.#s?.remove(),this.#s=null;break}}async addButton(e,n){switch(e){case"colorPicker":this.addColorPicker(n);break;case"altText":await this.addAltText(n);break;case"editSignature":await this.addEditSignatureButton(n);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(n);break}}async addButtonBefore(e,n,r){const s=this.#n.querySelector(r);s&&e==="comment"&&this.addComment(n,s)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class YW{#t=null;#e=null;#i;constructor(e){this.#i=e}#n(){const e=this.#e=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const n=this.#i._signal;n instanceof AbortSignal&&!n.aborted&&e.addEventListener("contextmenu",rr,{signal:n});const r=this.#t=document.createElement("div");return r.className="buttons",e.append(r),this.#i.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),e}#a(e,n){let r=0,s=0;for(const a of e){const o=a.y+a.height;if(o<r)continue;const u=a.x+(n?a.width:0);if(o>r){s=u,r=o;continue}n?u>s&&(s=u):u<s&&(s=u)}return[n?1-s:s,r]}show(e,n,r){const[s,a]=this.#a(n,r),{style:o}=this.#e||=this.#n();e.append(this.#e),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(e,n,r,s){const a=document.createElement("button");a.classList.add("basic",e),a.tabIndex=0,a.setAttribute("data-l10n-id",n);const o=document.createElement("span");a.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",r);const u=this.#i._signal;u instanceof AbortSignal&&!u.aborted&&(a.addEventListener("contextmenu",rr,{signal:u}),a.addEventListener("click",s,{signal:u})),this.#t.append(a)}}function xM(i,e,n){for(const r of n)e.addEventListener(r,i[r].bind(i))}class KW{#t=0;get id(){return`${Gd}${this.#t++}`}}class I1{#t=S1();#e=0;#i=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const a=s.decode().then(()=>(r.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return Jt(this,"_isSVGFittingCanvas",a)}async#n(e,n){this.#i||=new Map;let r=this.#i.get(e);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let s;if(typeof n=="string"?(r.url=n,s=await Pu(n,"blob")):n instanceof File?s=r.file=n:n instanceof Blob&&(s=n),s.type==="image/svg+xml"){const a=I1._isSVGFittingCanvas,o=new FileReader,u=new Image,h=new Promise((d,p)=>{u.onload=()=>{r.bitmap=u,r.isSvg=!0,d()},o.onload=async()=>{const g=r.svgUrl=o.result;u.src=await a?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=o.onerror=p});o.readAsDataURL(s),await h}else r.bitmap=await createImageBitmap(s);r.refCounter=1}catch(s){Xt(s),r=null}return this.#i.set(e,r),r&&this.#i.set(r.id,r),r}async getFromFile(e){const{lastModified:n,name:r,size:s,type:a}=e;return this.#n(`${n}_${r}_${s}_${a}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,n){const r=await n;return this.#n(e,r)}async getFromId(e){this.#i||=new Map;const n=this.#i.get(e);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:r}=n;return delete n.blobPromise,this.getFromBlob(n.id,r)}return this.getFromUrl(n.url)}getFromCanvas(e,n){this.#i||=new Map;let r=this.#i.get(e);if(r?.bitmap)return r.refCounter+=1,r;const s=new OffscreenCanvas(n.width,n.height);return s.getContext("2d").drawImage(n,0,0),r={bitmap:s.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(e,r),this.#i.set(r.id,r),r}getSvgUrl(e){const n=this.#i.get(e);return n?.isSvg?n.svgUrl:null}deleteId(e){this.#i||=new Map;const n=this.#i.get(e);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:r}=n;if(!n.url&&!n.file){const s=new OffscreenCanvas(r.width,r.height);s.getContext("bitmaprenderer").transferFromImageBitmap(r),n.blobPromise=s.convertToBlob()}r.close?.(),n.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#t}_`)}}class QW{#t=[];#e=!1;#i;#n=-1;constructor(e=128){this.#i=e}add({cmd:e,undo:n,post:r,mustExec:s,type:a=NaN,overwriteIfSameType:o=!1,keepUndo:u=!1}){if(s&&e(),this.#e)return;const h={cmd:e,undo:n,post:r,type:a};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(h);return}if(o&&this.#t[this.#n].type===a){u&&(h.undo=this.#t[this.#n].undo),this.#t[this.#n]=h;return}const d=this.#n+1;d===this.#i?this.#t.splice(0,1):(this.#n=d,d<this.#t.length&&this.#t.splice(d)),this.#t.push(h)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:e,post:n}=this.#t[this.#n];e(),n?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:e,post:n}=this.#t[this.#n];e(),n?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(e){if(this.#n!==-1){for(let n=this.#n;n>=0;n--)if(this.#t[n].type!==e){this.#t.splice(n+1,this.#n-n),this.#n=n;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class Tf{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=Un.platform;for(const[r,s,a={}]of e)for(const o of r){const u=o.startsWith("mac+");n&&u?(this.callbacks.set(o.slice(4),{callback:s,options:a}),this.allKeys.add(o.split("+").at(-1))):!n&&!u&&(this.callbacks.set(o,{callback:s,options:a}),this.allKeys.add(o.split("+").at(-1)))}}#t(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const n=this.buffer.join("+");return this.buffer.length=0,n}exec(e,n){if(!this.allKeys.has(n.key))return;const r=this.callbacks.get(this.#t(n));if(!r)return;const{callback:s,options:{bubbles:a=!1,args:o=[],checker:u=null}}=r;u&&!u(e,n)||(s.bind(e,...o,n)(),a||en(n))}}class D1{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return WW(e),Jt(this,"_colors",e)}convert(e){const n=Ou(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[r,s]of this._colors)if(s.every((a,o)=>a===n[o]))return D1._colorsMapping.get(r);return n}getHexCode(e){const n=this._colors.get(e);return n?Ct.makeHexColor(...n):e}}class Ra{#t=new AbortController;#e=null;#i=null;#n=new Map;#a=new Map;#r=null;#s=null;#o=null;#c=new QW;#l=null;#d=null;#h=null;#f=0;#m=new Set;#p=null;#u=null;#g=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#S=null;#x=null;#_=null;#C=null;#A=!1;#E=null;#D=new KW;#R=!1;#I=!1;#B=!1;#N=null;#P=null;#F=null;#O=null;#$=null;#T=Wt.NONE;#w=new Set;#M=null;#U=null;#j=null;#W=null;#q=null;#X={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#z=[0,0];#L=null;#G=null;#Z=null;#J=null;#V=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Ra.prototype,n=o=>o.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},s=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Jt(this,"_keyboardManager",new Tf([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&o.#G.contains(u)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&o.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:n}]]))}constructor(e,n,r,s,a,o,u,h,d,p,g,y,b,w,x,S){const E=this._signal=this.#t.signal;this.#G=e,this.#Z=n,this.#J=r,this.#r=s,this.#l=a,this.#U=o,this.#q=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:E}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),u._on("setpreference",this.onSetPreference.bind(this),{signal:E}),u._on("switchannotationeditorparams",k=>this.updateParams(k.type,k.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#I=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#I=!1},{capture:!0,signal:E}),this.#lt(),this.#dt(),this.#et(),this.#s=h.annotationStorage,this.#S=h.filterFactory,this.#j=d,this.#C=p||null,this.#y=g,this.#v=y,this.#b=b,this.#$=w||null,this.viewParameters={realScale:Hl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=S!==!1,a?.setSidebarUiManager(this)}destroy(){this.#V?.resolve(),this.#V=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const e of this.#a.values())e.destroy();this.#a.clear(),this.#n.clear(),this.#g.clear(),this.#O?.clear(),this.#e=null,this.#w.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#E?.hide(),this.#E=null,this.#F?.destroy(),this.#F=null,this.#i=null,this.#x&&(clearTimeout(this.#x),this.#x=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#$}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return Jt(this,"hcmFilter",this.#j?this.#S.addHCMFilter(this.#j.foreground,this.#j.background):"none")}get direction(){return Jt(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return Jt(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(e=>(e=e.split("=").map(n=>n.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Jt(this,"highlightColors",null);const n=new Map,r=!!this.#j;for(const[s,a]of e){const o=s.endsWith("_HCM");if(r&&o){n.set(s.replace("_HCM",""),a);continue}!r&&!o&&n.set(s,a)}return Jt(this,"highlightColors",n)}get highlightColorNames(){return Jt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const n=this.highlightColorNames.get(e);return this._highlightColors.get(n)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=e}setMainHighlightColorPicker(e){this.#F=e}editAltText(e,n=!1){this.#r?.editAltText(this,e,n)}hasCommentManager(){return!!this.#l}editComment(e,n,r,s){this.#l?.showDialog(this,e,n,r,s)}selectComment(e,n){this.#a.get(e)?.getEditorByUID(n)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,n,r=void 0){this.#l?.toggleCommentPopup(e,n,r)}makeCommentColor(e,n){return e&&this.#l?.makeCommentColor(e,n)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#a.has(e-1))return;const{resolve:n,promise:r}=Promise.withResolvers(),s=a=>{a.pageNumber===e&&(this._eventBus._off("editorsrendered",s),n())};this._eventBus.on("editorsrendered",s),await r}getSignature(e){this.#U?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#U}switchToMode(e,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,n){this._eventBus.dispatch("setpreference",{source:this,name:e,value:n})}onSetPreference({name:e,value:n}){switch(e){case"enableNewAltTextWhenAddingImage":this.#b=n;break}}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#G.focus()}findParent(e,n){for(const r of this.#a.values()){const{x:s,y:a,width:o,height:u}=r.div.getBoundingClientRect();if(e>=s&&e<=s+o&&n>=a&&n<=a+u)return r}return null}disableUserSelect(e=!1){this.#Z.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#g.add(e)}removeShouldRescale(e){this.#g.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Hl.PDF_TO_CSS_UNITS;for(const n of this.#g)n.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Q({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#tt(e){const{currentLayer:n}=this;if(n.hasTextLayer(e))return n;for(const r of this.#a.values())if(r.hasTextLayer(e))return r;return null}highlightSelection(e="",n=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:s,anchorOffset:a,focusNode:o,focusOffset:u}=r,h=r.toString(),p=this.#Q(r).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;r.empty();const y=this.#tt(p),b=this.#T===Wt.NONE,w=()=>{const x=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:s,anchorOffset:a,focusNode:o,focusOffset:u,text:h});b&&this.showAllEditors("highlight",!0,!0),n&&x?.editComment()};if(b){this.switchToMode(Wt.HIGHLIGHT,w);return}w()}commentSelection(e=""){this.highlightSelection(e,!0)}#at(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=this.#Q(e).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(this.#E||=new YW(this),this.#E.show(r,s,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#s)return null;const n=`${Gd}${e}`,r=this.#s.getRawValue(n);return r&&this.#s.remove(n),r}addToAnnotationStorage(e){!e.isEmpty()&&this.#s&&!this.#s.has(e.id)&&this.#s.setValue(e.id,e)}a11yAlert(e,n=null){const r=this.#J;r&&(r.setAttribute("data-l10n-id",e),n?r.setAttribute("data-l10n-args",JSON.stringify(n)):r.removeAttribute("data-l10n-args"))}#ot(){const e=document.getSelection();if(!e||e.isCollapsed){this.#M&&(this.#E?.hide(),this.#M=null,this.#k({hasSelectedText:!1}));return}const{anchorNode:n}=e;if(n===this.#M)return;const s=this.#Q(e).closest(".textLayer");if(!s){this.#M&&(this.#E?.hide(),this.#M=null,this.#k({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#M=n,this.#k({hasSelectedText:!0}),!(this.#T!==Wt.HIGHLIGHT&&this.#T!==Wt.NONE)&&(this.#T===Wt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#T===Wt.HIGHLIGHT?this.#tt(s):null;if(a?.toggleDrawing(),this.#I){const o=new AbortController,u=this.combinedSignal(o),h=d=>{d.type==="pointerup"&&d.button!==0||(o.abort(),a?.toggleDrawing(!0),d.type==="pointerup"&&this.#Y("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else a?.toggleDrawing(!0),this.#Y("main_toolbar")}}#Y(e=""){this.#T===Wt.HIGHLIGHT?this.highlightSelection(e):this.#y&&this.#at()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#_)return;this.#_=new AbortController;const e=this.combinedSignal(this.#_);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ut(){this.#_?.abort(),this.#_=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#Y("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const n of this.#w)if(n.div.contains(e)){this.#P=[n,e],n._focusEventsAllowed=!1;break}}focus(){if(!this.#P)return;const[e,n]=this.#P;this.#P=null,n.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}#et(){if(this.#N)return;this.#N=new AbortController;const e=this.combinedSignal(this.#N);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ht(){this.#N?.abort(),this.#N=null}#nt(){if(this.#d)return;this.#d=new AbortController;const e=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#it(){this.#d?.abort(),this.#d=null}#dt(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#ht(),this.#it()}dragOver(e){for(const{type:n}of e.dataTransfer.items)for(const r of this.#u)if(r.isHandlingMimeForPasting(n)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const n of e.dataTransfer.items)for(const r of this.#u)if(r.isHandlingMimeForPasting(n.type)){r.paste(n,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const n=[];for(const r of this.#w){const s=r.serialize(!0);s&&n.push(s)}n.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:n}=e;for(const a of n.items)for(const o of this.#u)if(o.isHandlingMimeForPasting(a.type)){o.paste(a,this.currentLayer);return}let r=n.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(a){Xt(`paste: "${a.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const a=[];for(const h of r){const d=await s.deserialize(h);if(!d)return;a.push(d)}const o=()=>{for(const h of a)this.#rt(h);this.#st(a)},u=()=>{for(const h of a)h.remove()};this.addCommands({cmd:o,undo:u,mustExec:!0})}catch(a){Xt(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==Wt.NONE&&!this.isEditorHandlingKeyboard&&Ra._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#Y("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#k(e){Object.entries(e).some(([r,s])=>this.#X[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#X,e)}),this.#T===Wt.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#H([[ce.HIGHLIGHT_FREE,!0]]))}#H(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ct(),this.#nt(),this.#k({isEditing:this.#T!==Wt.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#it(),this.#k({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#u){this.#u=e;for(const n of this.#u)this.#H(n.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(e){return this.#a.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#a.set(e.pageIndex,e),this.#R?e.enable():e.disable()}removeLayer(e){this.#a.delete(e.pageIndex)}async updateMode(e,n=null,r=!1,s=!1,a=!1){if(this.#T!==e&&!(this.#V&&(await this.#V.promise,!this.#V))){if(this.#V=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===Wt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=e,e===Wt.NONE){this.setEditingState(!1),this.#pt();for(const o of this.#n.values())o.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#V.resolve();return}for(const o of this.#n.values())o.addStandaloneCommentButton();e===Wt.SIGNATURE&&await this.#U?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const o of this.#a.values())o.updateMode(e);if(e===Wt.POPUP){this.#i||=await this.#q.getAnnotationsByType(new Set(this.#u.map(h=>h._editorType)));const o=new Set,u=[];for(const h of this.#n.values()){const{annotationElementId:d,hasComment:p,deleted:g}=h;d&&o.add(d),p&&!g&&u.push(h.getData())}for(const h of this.#i){const{id:d,popupRef:p,contentsObj:g}=h;p&&g?.str&&!o.has(d)&&!this.#m.has(d)&&u.push(h)}this.#l?.showSidebar(u)}if(!n){r&&this.addNewEditorFromKeyboard(),this.#V.resolve();return}for(const o of this.#n.values())o.uid===n?(this.setSelected(o),a?o.editComment():s?o.enterInEditMode():o.focus()):o.unselect();this.#V.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,n){if(this.#u){switch(e){case ce.CREATE:this.currentLayer.addNewEditor(n);return;case ce.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#W||=new Map).set(e,n),this.showAllEditors("highlight",n);break}if(this.hasSelection)for(const r of this.#w)r.updateParams(e,n);else for(const r of this.#u)r.updateDefaultParams(e,n)}}showAllEditors(e,n,r=!1){for(const a of this.#n.values())a.editorType===e&&a.show(n);(this.#W?.get(ce.HIGHLIGHT_SHOW_ALL)??!0)!==n&&this.#H([[ce.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(e=!1){if(this.#B!==e){this.#B=e;for(const n of this.#a.values())e?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",e)}}async#ft(){if(!this.#R){this.#R=!0;const e=[];for(const n of this.#a.values())e.push(n.enable());await Promise.all(e);for(const n of this.#n.values())n.enable()}}#pt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const e of this.#a.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const n of this.#n.values())n.pageIndex===e&&(yield n)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.focusMainContainer(),this.#x=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#O?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#m.has(e.annotationElementId))&&this.#s?.remove(e.id)}addDeletedAnnotationElement(e){this.#m.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#m.has(e)}removeDeletedAnnotationElement(e){this.#m.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#rt(e){const n=this.#a.get(e.pageIndex);n?n.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#e!==e&&(this.#e=e,e&&this.#H(e.propertiesToUpdate))}get#gt(){let e=null;for(e of this.#w);return e}updateUI(e){this.#gt===e&&this.#H(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#H(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#k({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#h?.commitOrRemove();for(const n of this.#w)n!==e&&n.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#k({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#k({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(e){this.#c.add(e),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(e){this.#c.cleanType(e)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const n=e?[e]:[...this.#w],r=()=>{this._editorUndoBar?.show(s,n.length===1?n[0].editorType:n.length);for(const a of n)a.remove()},s=()=>{for(const a of n)this.#rt(a)};this.addCommands({cmd:r,undo:s,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#st(e){for(const n of this.#w)n.unselect();this.#w.clear();for(const n of e)n.isEmpty()||(this.#w.add(n),n.select());this.#k({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#st(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==Wt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#k({hasSelectedEditor:!1})}}translateSelectedEditors(e,n,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#z[0]+=e,this.#z[1]+=n;const[s,a]=this.#z,o=[...this.#w],u=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#z[0]=this.#z[1]=0,this.addCommands({cmd:()=>{for(const h of o)this.#n.has(h.id)&&(h.translateInPage(s,a),h.translationDone())},undo:()=>{for(const h of o)this.#n.has(h.id)&&(h.translateInPage(-s,-a),h.translationDone())},mustExec:!1})},u);for(const h of o)h.translateInPage(e,n),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const e of this.#w)this.#p.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const e=this.#p;this.#p=null;let n=!1;for(const[{x:s,y:a,pageIndex:o},u]of e)u.newX=s,u.newY=a,u.newPageIndex=o,n||=s!==u.savedX||a!==u.savedY||o!==u.savedPageIndex;if(!n)return!1;const r=(s,a,o,u)=>{if(this.#n.has(s.id)){const h=this.#a.get(u);h?s._setParentAndPosition(h,a,o):(s.pageIndex=u,s.x=a,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:a,newY:o,newPageIndex:u}]of e)r(s,a,o,u)},undo:()=>{for(const[s,{savedX:a,savedY:o,savedPageIndex:u}]of e)r(s,a,o,u)},mustExec:!0}),!0}dragSelectedEditors(e,n){if(this.#p)for(const r of this.#p.keys())r.drag(e,n)}rebuild(e){if(e.parent===null){const n=this.getLayer(e.pageIndex);n?(n.changeParent(e),n.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#e===e}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==Wt.NONE}get imageManager(){return Jt(this,"imageManager",new I1)}getSelectionBoxes(e){if(!e)return null;const n=document.getSelection();for(let d=0,p=n.rangeCount;d<p;d++)if(!e.contains(n.getRangeAt(d).commonAncestorContainer))return null;const{x:r,y:s,width:a,height:o}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(d,p,g,y)=>({x:(p-s)/o,y:1-(d+g-r)/a,width:y/o,height:g/a});break;case"180":u=(d,p,g,y)=>({x:1-(d+g-r)/a,y:1-(p+y-s)/o,width:g/a,height:y/o});break;case"270":u=(d,p,g,y)=>({x:1-(p+y-s)/o,y:(d-r)/a,width:y/o,height:g/a});break;default:u=(d,p,g,y)=>({x:(d-r)/a,y:(p-s)/o,width:g/a,height:y/o});break}const h=[];for(let d=0,p=n.rangeCount;d<p;d++){const g=n.getRangeAt(d);if(!g.collapsed)for(const{x:y,y:b,width:w,height:x}of g.getClientRects())w===0||x===0||h.push(u(y,b,w,x))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:e,id:n}){(this.#o||=new Map).set(e,n)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const n=this.#o?.get(e.data.id);if(!n)return;const r=this.#s.getRawValue(n);r&&(this.#T===Wt.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,n,r){const s=this.#O?.get(e);s&&(s.setCanvas(n,r),this.#O.delete(e))}addMissingCanvas(e,n){(this.#O||=new Map).set(e,n)}}class Cs{#t=null;#e=!1;#i=null;#n=null;#a=null;#r=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#h=e._uiManager.useNewAltTextFlow,Cs.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Cs._l10n??=e}async render(){const e=this.#i=document.createElement("button");e.className="altText",e.tabIndex="0";const n=this.#n=document.createElement("span");e.append(n),this.#h?(e.classList.add("new"),e.setAttribute("data-l10n-id",Cs.#f.missing),n.setAttribute("data-l10n-id",Cs.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=this.#c._uiManager._signal;e.addEventListener("contextmenu",rr,{signal:r}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:r});const s=a=>{a.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#s=!0,s(a))},{signal:r}),await this.#p(),e}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#t===null&&(this.#l=e,this.#d=await Cs._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())}toggleAltTextBadge(e=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const n=this.#o=document.createElement("div");n.className="noAltTextBadge",this.#c.div.append(n)}this.#o.classList.toggle("hidden",!e)}serialize(e){let n=this.#t;return!e&&this.#l===n&&(n=this.#d),{altText:n,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:e,decorative:n,guessedText:r,textWithDisclaimer:s,cancel:a=!1}){r&&(this.#l=r,this.#d=s),!(this.#t===e&&this.#e===n)&&(a||(this.#t=e,this.#e=n),this.#p())}toggle(e=!1){this.#i&&(!e&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#i.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#a=null,this.#o?.remove(),this.#o=null}async#p(){const e=this.#i;if(!e)return;if(this.#h){if(e.classList.toggle("done",!!this.#t),e.setAttribute("data-l10n-id",Cs.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",Cs.#f[`${this.#m}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){e.classList.remove("done"),this.#a?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=this.#a;if(!n){this.#a=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${this.#c.id}`;const s=100,a=this.#c._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:a}),e.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#a?.classList.remove("show")},{signal:a})}this.#e?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=this.#t),n.parentNode||e.append(n),this.#c.getElementForAltText()?.setAttribute("aria-describedby",n.id)}}class _g{#t=null;#e=null;#i=!1;#n=null;#a=null;#r=null;#s=null;#o=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#e=document.createElement("button");return e.className="comment",this.#d(e,!1)}renderForStandalone(){const e=this.#t=document.createElement("button");e.className="annotationCommentButton";const n=this.#n.commentButtonPosition;if(n){const{style:r}=e;r.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-n[0]:n[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*n[1]}% - var(--comment-button-dim))`;const s=this.#n.commentButtonColor;s&&(r.backgroundColor=s)}return this.#d(e,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const e=this.#n.commentButtonColor;e&&(this.#t.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:e,y:n,height:r}=this.#t.getBoundingClientRect(),{x:s,y:a,width:o,height:u}=this.#n.parent.boundingClientRect;return[(e-s)/o,(n+r-a)/u]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:e,hasPopup:n}){this.#t&&(this.#t.classList.toggle("selected",e),this.#t.ariaExpanded=n)}#d(e,n){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",n?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const r=this.#n._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return e;e.addEventListener("contextmenu",rr,{signal:r}),n&&(e.addEventListener("focusin",a=>{this.#n._focusEventsAllowed=!1,en(a)},{capture:!0,signal:r}),e.addEventListener("focusout",a=>{this.#n._focusEventsAllowed=!0,en(a)},{capture:!0,signal:r})),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:r});const s=a=>{a.preventDefault(),e===this.#e?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#i=!0,s(a))},{signal:r}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:r}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:r}),e}edit(e){const n=this.commentPopupPositionInLayer;let r,s;if(n)[r,s]=n;else{[r,s]=this.#n.commentButtonPosition;const{width:p,height:g,x:y,y:b}=this.#n;r=y+r*p,s=b+s*g}const a=this.#n.parent.boundingClientRect,{x:o,y:u,width:h,height:d}=a;this.#n._uiManager.editComment(this.#n,o+r*h,u+s*d,{...e,parentDimensions:a})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#a}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#s&&(this.#r=null),e===null){this.#s="",this.#c=!0;return}this.#s=e,this.#o=new Date,this.#c=!1}setInitialText(e,n=null){this.#a=e,this.data=e,this.#o=null,this.#r=n}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#r=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class Cf{#t;#e=!1;#i=null;#n;#a;#r;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:e,isPinchingDisabled:n=null,isPinchingStopped:r=null,onPinchStart:s=null,onPinching:a=null,onPinchEnd:o=null,signal:u}){this.#t=e,this.#i=r,this.#n=n,this.#a=s,this.#r=a,this.#s=o,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Yr.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const s=this.#o=new AbortController,a=AbortSignal.any([this.#c,s.signal]),o=this.#t,u={capture:!0,signal:a,passive:!1},h=d=>{d.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};o.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(en(d),h(d))},u),o.addEventListener("pointerup",h,u),o.addEventListener("pointercancel",h,u);return}if(!this.#h){this.#h=new AbortController;const s=AbortSignal.any([this.#c,this.#h.signal]),a=this.#t,o={signal:s,capture:!1,passive:!1};a.addEventListener("touchmove",this.#m.bind(this),o);const u=this.#p.bind(this);a.addEventListener("touchend",u,o),a.addEventListener("touchcancel",u,o),o.capture=!0,a.addEventListener("pointerdown",en,o),a.addEventListener("pointermove",en,o),a.addEventListener("pointercancel",en,o),a.addEventListener("pointerup",en,o),this.#a?.()}if(en(e),e.touches.length!==2||this.#i?.()){this.#l=null;return}let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]),this.#l={touch0X:n.screenX,touch0Y:n.screenY,touch1X:r.screenX,touch1Y:r.screenY}}#m(e){if(!this.#l||e.touches.length!==2)return;en(e);let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]);const{screenX:s,screenY:a}=n,{screenX:o,screenY:u}=r,h=this.#l,{touch0X:d,touch0Y:p,touch1X:g,touch1Y:y}=h,b=g-d,w=y-p,x=o-s,S=u-a,E=Math.hypot(x,S)||1,k=Math.hypot(b,w)||1;if(!this.#e&&Math.abs(k-E)<=Cf.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=s,h.touch0Y=a,h.touch1X=o,h.touch1Y=u,!this.#e){this.#e=!0;return}const N=[(s+o)/2,(a+u)/2];this.#r?.(N,k,E)}#p(e){e.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(en(e),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class Lt{#t=null;#e=null;#i=null;#n=null;#a=null;#r=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#p=!1;#u=null;#g=!1;#y=!1;#v=!1;#b=null;#S=0;#x=0;#_=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#E=Lt._zIndex++;static _borderLineWidth=-1;static _colorManager=new D1;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Lt.prototype._resizeWithKeyboard,n=Ra.TRANSLATE_SMALL,r=Ra.TRANSLATE_BIG;return Jt(this,"_resizerKeyboardManager",new Tf([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],Lt.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:n,rawDims:{pageWidth:r,pageHeight:s,pageX:a,pageY:o}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[a,o];const[u,h]=this.parentDimensions;this.x=e.x/u,this.y=e.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Jt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const n=new ZW({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});n.annotationElementId=e.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(e,n){if(Lt._l10n??=e,Lt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Lt._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);Lt._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,n){Fe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(e){this.#A=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(e*2),this.y+=this.width*e/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(e*2),this.y-=this.width*e/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#L(),this.#h?.remove(),this.#h=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,n,r,s){const[a,o]=this.parentDimensions;[r,s]=this.screenToPageTranslation(r,s),this.x=(e+r)/a,this.y=(n+s)/o,this.fixAndSetPosition()}_moveAfterPaste(e,n){const[r,s]=this.parentDimensions;this.setAt(e*r,n*s,this.width*r,this.height*s),this._onTranslated()}#D([e,n],r,s){[r,s]=this.screenToPageTranslation(r,s),this.x+=r/e,this.y+=s/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,n){this.#D(this.parentDimensions,e,n)}translateInPage(e,n){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,e,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,n){this.#u||=[this.x,this.y,this.width,this.height];const{div:r,parentDimensions:[s,a]}=this;if(this.x+=e/s,this.y+=n/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:u}=this;const[h,d]=this.getBaseTranslation();o+=h,u+=d;const{style:p}=r;p.left=`${(100*o).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(o,u),r.scrollIntoView({block:"nearest"})}_onTranslating(e,n){}_onTranslated(e,n){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[e,n]=this.parentDimensions,{_borderLineWidth:r}=Lt,s=r/e,a=r/n;switch(this.rotation){case 90:return[-s,a];case 180:return[s,a];case 270:return[s,-a];default:return[-s,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:n},pageDimensions:[r,s]}=this;let{x:a,y:o,width:u,height:h}=this;if(u*=r,h*=s,a*=r,o*=s,this._mustFixPosition)switch(e){case 0:a=si(a,0,r-u),o=si(o,0,s-h);break;case 90:a=si(a,0,r-h),o=si(o,u,s);break;case 180:a=si(a,u,r),o=si(o,h,s);break;case 270:a=si(a,h,r),o=si(o,0,s-u);break}this.x=a/=r,this.y=o/=s;const[d,p]=this.getBaseTranslation();a+=d,o+=p,n.left=`${(100*a).toFixed(2)}%`,n.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#R(e,n,r){switch(r){case 90:return[n,-e];case 180:return[-e,-n];case 270:return[-n,e];default:return[e,n]}}screenToPageTranslation(e,n){return Lt.#R(e,n,this.parentRotation)}pageTranslationToScreen(e,n){return Lt.#R(e,n,360-this.parentRotation)}#I(e){switch(e){case 90:{const[n,r]=this.pageDimensions;return[0,-n/r,r/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,r]=this.pageDimensions;return[0,n/r,-r/n,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[n,r]}=this;return[n*e,r*e]}setDims(){const{div:{style:e},width:n,height:r}=this;e.width=`${(100*n).toFixed(2)}%`,e.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#B(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const r of e){const s=document.createElement("div");this.#c.append(s),s.classList.add("resizer",r),s.setAttribute("data-resizer-name",r),s.addEventListener("pointerdown",this.#N.bind(this,r),{signal:n}),s.addEventListener("contextmenu",rr,{signal:n}),s.tabIndex=-1}this.div.prepend(this.#c)}#N(e,n){n.preventDefault();const{isMac:r}=Un.platform;if(n.button!==0||n.ctrlKey&&r)return;this.#i?.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,this.#l=[n.screenX,n.screenY];const a=new AbortController,o=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#O.bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",en,{passive:!1,signal:o}),window.addEventListener("contextmenu",rr,{signal:o}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const d=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#F()};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}#P(e,n,r,s){this.width=r,this.height=s,this.x=e,this.y=n,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:e,savedY:n,savedWidth:r,savedHeight:s}=this.#d;this.#d=null;const a=this.x,o=this.y,u=this.width,h=this.height;a===e&&o===n&&u===r&&h===s||this.addCommands({cmd:this.#P.bind(this,a,o,u,h),undo:this.#P.bind(this,e,n,r,s),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#O(e,n){const[r,s]=this.parentDimensions,a=this.x,o=this.y,u=this.width,h=this.height,d=Lt.MIN_SIZE/r,p=Lt.MIN_SIZE/s,g=this.#I(this.rotation),y=(z,Y)=>[g[0]*z+g[2]*Y,g[1]*z+g[3]*Y],b=this.#I(360-this.rotation),w=(z,Y)=>[b[0]*z+b[2]*Y,b[1]*z+b[3]*Y];let x,S,E=!1,k=!1;switch(e){case"topLeft":E=!0,x=(z,Y)=>[0,0],S=(z,Y)=>[z,Y];break;case"topMiddle":x=(z,Y)=>[z/2,0],S=(z,Y)=>[z/2,Y];break;case"topRight":E=!0,x=(z,Y)=>[z,0],S=(z,Y)=>[0,Y];break;case"middleRight":k=!0,x=(z,Y)=>[z,Y/2],S=(z,Y)=>[0,Y/2];break;case"bottomRight":E=!0,x=(z,Y)=>[z,Y],S=(z,Y)=>[0,0];break;case"bottomMiddle":x=(z,Y)=>[z/2,Y],S=(z,Y)=>[z/2,0];break;case"bottomLeft":E=!0,x=(z,Y)=>[0,Y],S=(z,Y)=>[z,0];break;case"middleLeft":k=!0,x=(z,Y)=>[0,Y/2],S=(z,Y)=>[z,Y/2];break}const N=x(u,h),M=S(u,h);let O=y(...M);const B=Lt._round(a+O[0]),C=Lt._round(o+O[1]);let R=1,L=1,F,U;if(n.fromKeyboard)({deltaX:F,deltaY:U}=n);else{const{screenX:z,screenY:Y}=n,[nt,mt]=this.#l;[F,U]=this.screenToPageTranslation(z-nt,Y-mt),this.#l[0]=z,this.#l[1]=Y}if([F,U]=w(F/r,U/s),E){const z=Math.hypot(u,h);R=L=Math.max(Math.min(Math.hypot(M[0]-N[0]-F,M[1]-N[1]-U)/z,1/u,1/h),d/u,p/h)}else k?R=si(Math.abs(M[0]-N[0]-F),d,1)/u:L=si(Math.abs(M[1]-N[1]-U),p,1)/h;const $=Lt._round(u*R),V=Lt._round(h*L);O=y(...S($,V));const G=B-O[0],et=C-O[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=$,this.height=V,this.x=G,this.y=et,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new Td(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[n,r]of e)await this._editToolbar.addButton(n,r);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(e){const n=this._editToolbar?.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(Cs.initialize(Lt._l10n),this.#i=new Cs(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(e){this.#i&&(this.#i.data=e)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(e){await this.#i?.setGuessedText(e)}serializeAltText(e){return this.#i?.serialize(e)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new _g(this)}addStandaloneCommentButton(){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#n.renderForStandalone(),this.div.append(this.#a))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){const{data:{richText:e,text:n,date:r,deleted:s}}=this.#n;return{text:n,richText:e,date:r,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new _g(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:n,richText:r}){if(!n||(this.#n||=new _g(this),this.#n.setInitialText(e,r),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new _g(this),this.#n.edit(e)}toggleComment(e,n=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,n)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,s]=e.rect,[a]=this.pageDimensions,[o]=this.pageTranslation,u=o+a+1,h=s-100,d=u+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,d,s]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:n}}){this.#n.data=n?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#r?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#j();const[n,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/n).toFixed(2)}%`,e.style.maxHeight=`${(100*n/r).toFixed(2)}%`);const[s,a]=this.getInitialTranslation();return this.translate(s,a),xM(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new Cf({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#$.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#$(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(e,n,r){let a=.7*(r/n)+1-.7;if(a===1)return;const o=this.#I(this.rotation),u=(B,C)=>[o[0]*B+o[2]*C,o[1]*B+o[3]*C],[h,d]=this.parentDimensions,p=this.x,g=this.y,y=this.width,b=this.height,w=Lt.MIN_SIZE/h,x=Lt.MIN_SIZE/d;a=Math.max(Math.min(a,1/y,1/b),w/y,x/b);const S=Lt._round(y*a),E=Lt._round(b*a);if(S===y&&E===b)return;this.#u||=[p,g,y,b];const k=u(y/2,b/2),N=Lt._round(p+k[0]),M=Lt._round(g+k[1]),O=u(S/2,E/2);this.x=N-O[0],this.y=M-O[1],this.width=S,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(e){const{isMac:n}=Un.platform;if(e.button!==0||e.ctrlKey&&n){e.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#U(e);return}this.#M(e)}#M(e){const{isMac:n}=Un.platform;e.ctrlKey&&!n||e.shiftKey||e.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(e){const{isSelected:n}=this;this._uiManager.setUpDragSession();let r=!1;const s=new AbortController,a=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:a},u=d=>{s.abort(),this.#s=null,this.#p=!1,this._uiManager.endDragSession()||this.#M(d),r&&this._onStopDragging()};n&&(this.#S=e.clientX,this.#x=e.clientY,this.#s=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",d=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:g,pointerId:y}=d;if(y!==this.#s){en(d);return}const[b,w]=this.screenToPageTranslation(p-this.#S,g-this.#x);this.#S=p,this.#x=g,this._uiManager.dragSelectedEditors(b,w)},o),window.addEventListener("touchmove",en,o),window.addEventListener("pointerdown",d=>{d.pointerType===this.#o&&(this.#C||d.isPrimary)&&u(d),en(d)},o));const h=d=>{if(!this.#s||this.#s===d.pointerId){u(d);return}en(d)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,n,r){e.changeParent(this),this.x=n,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,n,r=this.rotation){const s=this.parentScale,[a,o]=this.pageDimensions,[u,h]=this.pageTranslation,d=e/s,p=n/s,g=this.x*a,y=this.y*o,b=this.width*a,w=this.height*o;switch(r){case 0:return[g+d+u,o-y-p-w+h,g+d+b+u,o-y-p+h];case 90:return[g+p+u,o-y+d+h,g+p+w+u,o-y+d+b+h];case 180:return[g-d-b+u,o-y+p+h,g-d+u,o-y+p+w+h];case 270:return[g-p-w+u,o-y-d-b+h,g-p+u,o-y-d+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,n){const[r,s,a,o]=e,u=a-r,h=o-s;switch(this.rotation){case 0:return[r,n-o,u,h];case 90:return[r,n-s,h,u];case 180:return[a,n-s,u,h];case 270:return[a,n-o,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Lt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:n,date:r,opacity:s,deleted:a,richText:o},uid:u,pageIndex:h,creationDate:d,modificationDate:p}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:d,modificationDate:r||p,popupRef:!a,color:n,opacity:s}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:n,bottom:r,right:s}=this.getClientDimensions(),{innerHeight:a,innerWidth:o}=window;return n<o&&s>0&&e<a&&r>0}#j(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#j()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,n=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,n,r){const s=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:r,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});s.rotation=e.rotation,s.#t=e.accessibilityData,s._isCopy=e.isCopy||!1;const[a,o]=s.pageDimensions,[u,h,d,p]=s.getRectInCurrentCoords(e.rect,o);return s.x=u/a,s.y=h/o,s.width=d/a,s.height=p/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#L(),this.removeEditToolbar(),this.#_){for(const e of this.#_.values())clearTimeout(e);this.#_=null}this.parent=null,this.#C?.destroy(),this.#C=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#B(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,n]}=this,[r,s,a,o]=this.getPDFRect();return[Lt._round(r+(a-r)*e),Lt._round(s+(o-s)*(1-n))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const n=this.#c.children;if(!this.#e){this.#e=Array.from(n);const o=this.#W.bind(this),u=this.#q.bind(this),h=this._uiManager._signal;for(const d of this.#e){const p=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",o,{signal:h}),d.addEventListener("blur",u,{signal:h}),d.addEventListener("focus",this.#X.bind(this,p),{signal:h}),d.setAttribute("data-l10n-id",Lt._l10nResizer[p])}}const r=this.#e[0];let s=0;for(const o of n){if(o===r)break;s++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(a!==s){if(a<s)for(let u=0;u<s-a;u++)this.#c.append(this.#c.firstChild);else if(a>s)for(let u=0;u<a-s;u++)this.#c.firstChild.before(this.#c.lastChild);let o=0;for(const u of n){const d=this.#e[o++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Lt._l10nResizer[d])}}this.#z(0),this.#v=!0,this.#c.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#W(e){Lt._resizerKeyboardManager.exec(this,e)}#q(e){this.#v&&e.relatedTarget?.parentNode!==this.#c&&this.#L()}#X(e){this.#m=this.#v?e:""}#z(e){if(this.#e)for(const n of this.#e)n.tabIndex=e}_resizeWithKeyboard(e,n){this.#v&&this.#O(this.#m,{deltaX:e,deltaY:n,fromKeyboard:!0})}#L(){this.#v=!1,this.#z(-1),this.#F()}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,n){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(e){this.#g=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,n=!1){if(n){this.#_||=new Map;const{action:r}=e;let s=this.#_.get(r);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),this.#_.delete(r),this.#_.size===0&&(this.#_=null)},Lt._telemetryTimeout),this.#_.set(r,s);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(e){if(!this.#h&&!this.deleted){this.#h=e.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let n=e.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),e.container.prepend(n);else if(n.nodeName==="CANVAS"){const r=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),r.before(n)}return n}resetAnnotationElement(e){const{firstChild:n}=e.container;n?.nodeName==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}}class ZW extends Lt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const q2=3285377520,br=4294901760,As=65535;class EM{constructor(e){this.h1=e?e&4294967295:q2,this.h2=e?e&4294967295:q2}update(e){let n,r;if(typeof e=="string"){n=new Uint8Array(e.length*2),r=0;for(let x=0,S=e.length;x<S;x++){const E=e.charCodeAt(x);E<=255?n[r++]=E:(n[r++]=E>>>8,n[r++]=E&255)}}else if(ArrayBuffer.isView(e))n=e.slice(),r=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=r>>2,a=r-s*4,o=new Uint32Array(n.buffer,0,s);let u=0,h=0,d=this.h1,p=this.h2;const g=3432918353,y=461845907,b=g&As,w=y&As;for(let x=0;x<s;x++)x&1?(u=o[x],u=u*g&br|u*b&As,u=u<<15|u>>>17,u=u*y&br|u*w&As,d^=u,d=d<<13|d>>>19,d=d*5+3864292196):(h=o[x],h=h*g&br|h*b&As,h=h<<15|h>>>17,h=h*y&br|h*w&As,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,a){case 3:u^=n[s*4+2]<<16;case 2:u^=n[s*4+1]<<8;case 1:u^=n[s*4],u=u*g&br|u*b&As,u=u<<15|u>>>17,u=u*y&br|u*w&As,s&1?d^=u:p^=u}this.h1=d,this.h2=p}hexdigest(){let e=this.h1,n=this.h2;return e^=n>>>1,e=e*3981806797&br|e*36045&As,n=n*4283543511&br|((n<<16|e>>>16)*2950163797&br)>>>16,e^=n>>>1,e=e*444984403&br|e*60499&As,n=n*3301882366&br|((n<<16|e>>>16)*3120437893&br)>>>16,e^=n>>>1,(e>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const L_=Object.freeze({map:null,hash:"",transfer:void 0});class k1{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,n){const r=this.#n.get(e);return r===void 0?n:Object.assign(n,r)}getRawValue(e){return this.#n.get(e)}remove(e){const n=this.#n.get(e);if(n!==void 0&&(n instanceof Lt&&this.#i.delete(n.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const r of this.#n.values())if(r instanceof Lt)return;this.onAnnotationEditor(null)}}setValue(e,n){const r=this.#n.get(e);let s=!1;if(r!==void 0)for(const[a,o]of Object.entries(n))r[a]!==o&&(s=!0,r[a]=o);else s=!0,this.#n.set(e,n);s&&this.#a(),n instanceof Lt&&((this.#i||=new Map).set(n.annotationElementId,n),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#a(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new SM(this)}get serializable(){if(this.#n.size===0)return L_;const e=new Map,n=new EM,r=[],s=Object.create(null);let a=!1;for(const[o,u]of this.#n){const h=u instanceof Lt?u.serialize(!1,s):u;h&&(e.set(o,h),n.update(`${o}:${JSON.stringify(h)}`),a||=!!h.bitmap)}if(a)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:n.hexdigest(),transfer:r}:L_}get editorStats(){let e=null;const n=new Map;let r=0,s=0;for(const a of this.#n.values()){if(!(a instanceof Lt)){a.popup&&(a.popup.deleted?s+=1:r+=1);continue}a.isCommentDeleted?s+=1:a.hasEditedComment&&(r+=1);const o=a.telemetryFinalData;if(!o)continue;const{type:u}=o;n.has(u)||n.set(u,Object.getPrototypeOf(a).constructor),e||=Object.create(null);const h=e[u]||=new Map;for(const[d,p]of Object.entries(o)){if(d==="type")continue;let g=h.get(d);g||(g=new Map,h.set(d,g));const y=g.get(p)??0;g.set(p,y+1)}}if((s>0||r>0)&&(e||=Object.create(null),e.comments={deleted:s,edited:r}),!e)return null;for(const[a,o]of n)e[a]=o.computeTelemetryFinalData(e[a]);return e}resetModifiedIds(){this.#e=null}updateEditor(e,n){const r=this.#i?.get(e);return r?(r.updateFromAnnotationLayer(n),!0):!1}getEditor(e){return this.#i?.get(e)||null}get modifiedIds(){if(this.#e)return this.#e;const e=[];if(this.#i)for(const n of this.#i.values())n.serialize()&&e.push(n.annotationElementId);return this.#e={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class SM extends k1{#t;constructor(e){super();const{map:n,hash:r,transfer:s}=e.serializable,a=structuredClone(n,s?{transfer:s}:null);this.#t={map:a,hash:r,transfer:s}}get print(){Fe("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Jt(this,"modifiedIds",{ids:new Set,hash:""})}}class JW{#t=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:n=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(e,n.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:n,_inspectFont:r}){if(!(!e||this.#t.has(e.loadedName))){if(fe(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:a,style:o}=e,u=new FontFace(s,a,o);this.addNativeFontFace(u);try{await u.load(),this.#t.add(s),r?.(e)}catch{Xt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Fe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(s){throw Xt(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const n=e.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const s=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Jt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Jt(this,"isSyncFontLoadingSupported",bi||Un.platform.isFirefox)}_queueLoadingCallback(e){function n(){for(fe(!s.done,"completeRequest() cannot be called twice."),s.done=!0;r.length>0&&r[0].done;){const a=r.shift();setTimeout(a.callback,0)}}const{loadingRequests:r}=this,s={done:!1,complete:n,callback:e};return r.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Jt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,n){function r(M,O){return M.charCodeAt(O)<<24|M.charCodeAt(O+1)<<16|M.charCodeAt(O+2)<<8|M.charCodeAt(O+3)&255}function s(M,O,B,C){const R=M.substring(0,O),L=M.substring(O+B);return R+C+L}let a,o;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let d=0;function p(M,O){if(++d>30){Xt("Load test font never loaded."),O();return}if(h.font="30px "+M,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(p.bind(null,M,O))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=s(y,976,g.length,g);const w=16,x=1482184792;let S=r(y,w);for(a=0,o=g.length-3;a<o;a+=4)S=S-x+r(g,a)|0;a<g.length&&(S=S-x+r(g+"XXX",a)|0),y=s(y,w,4,VW(S));const E=`url(data:font/opentype;base64,${btoa(y)});`,k=`@font-face {font-family:"${g}";src:${E}}`;this.insertRule(k);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const M of[e.loadedName,g]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=M,N.append(O)}this._document.body.append(N),p(g,()=>{N.remove(),n.complete()})}}class tX{#t;constructor(e,n=null,r,s){this.compiledGlyphs=Object.create(null),this.#t=e,this._inspectFont=n,r&&Object.assign(this,r),s&&(this.charProcOperatorList=s)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${mM(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return this._inspectFont?.(this,e),n}getPathGenerator(e,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const r=this.loadedName+"_path_"+n;let s;try{s=e.get(r)}catch(o){Xt(`getPathGenerator - ignoring character: "${o}".`)}const a=new Path2D(s||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[n]=a}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function eX(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(bi)return i;const e=URL.parse(i,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function nX(i){if(bi&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return xf(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i?.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function wg(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const B_=i=>typeof i=="object"&&Number.isInteger(i?.num)&&i.num>=0&&Number.isInteger(i?.gen)&&i.gen>=0,iX=i=>typeof i=="object"&&typeof i?.name=="string",TM=$W.bind(null,B_,iX);class rX{#t=new Map;#e=Promise.resolve();postMessage(e,n){const r={data:structuredClone(e,n?{transfer:n}:null)};this.#e.then(()=>{for(const[s]of this.#t)s.call(this,r)})}addEventListener(e,n,r=null){let s=null;if(r?.signal instanceof AbortSignal){const{signal:a}=r;if(a.aborted){Xt("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,n);s=()=>a.removeEventListener("abort",o),a.addEventListener("abort",o)}this.#t.set(n,s)}removeEventListener(e,n){this.#t.get(n)?.(),this.#t.delete(n)}terminate(){for(const[,e]of this.#t)e?.();this.#t.clear()}}const Ag={DATA:1,ERROR:2},Tn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function W2(){}function ki(i){if(i instanceof Ca||i instanceof Dm||i instanceof U2||i instanceof qd||i instanceof p0)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||Fe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Ca(i.message);case"InvalidPDFException":return new Dm(i.message);case"PasswordException":return new U2(i.message,i.code);case"ResponseException":return new qd(i.message,i.status,i.missing);case"UnknownErrorException":return new p0(i.message,i.details)}return new p0(i.message,i.toString())}class fd{#t=new AbortController;constructor(e,n,r){this.sourceName=e,this.targetName=n,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const r=e.callbackId,s=this.callbackCapabilities[r];if(!s)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===Ag.DATA)s.resolve(e.data);else if(e.callback===Ag.ERROR)s.reject(ki(e.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,s=e.sourceName,a=this.comObj;Promise.try(n,e.data).then(function(o){a.postMessage({sourceName:r,targetName:s,callback:Ag.DATA,callbackId:e.callbackId,data:o})},function(o){a.postMessage({sourceName:r,targetName:s,callback:Ag.ERROR,callbackId:e.callbackId,reason:ki(o)})});return}if(e.streamId){this.#i(e);return}n(e.data)}on(e,n){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=n}send(e,n,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:n},r)}sendWithPromise(e,n,r){const s=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[s]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:n},r)}catch(o){a.reject(o)}return a.promise}sendWithStream(e,n,r,s){const a=this.streamId++,o=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:d=>{const p=Promise.withResolvers();return this.streamControllers[a]={controller:d,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:o,targetName:u,action:e,streamId:a,data:n,desiredSize:d.desiredSize},s),p.promise},pull:d=>{const p=Promise.withResolvers();return this.streamControllers[a].pullCall=p,h.postMessage({sourceName:o,targetName:u,stream:Tn.PULL,streamId:a,desiredSize:d.desiredSize}),p.promise},cancel:d=>{fe(d instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[a].cancelCall=p,this.streamControllers[a].isClosed=!0,h.postMessage({sourceName:o,targetName:u,stream:Tn.CANCEL,streamId:a,reason:ki(d)}),p.promise}},r)}#i(e){const n=e.streamId,r=this.sourceName,s=e.sourceName,a=this.comObj,o=this,u=this.actionHandler[e.action],h={enqueue(d,p=1,g){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=p,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:r,targetName:s,stream:Tn.ENQUEUE,streamId:n,chunk:d},g)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:s,stream:Tn.CLOSE,streamId:n}),delete o.streamSinks[n])},error(d){fe(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:s,stream:Tn.ERROR,streamId:n,reason:ki(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[n]=h,Promise.try(u,e.data,h).then(function(){a.postMessage({sourceName:r,targetName:s,stream:Tn.START_COMPLETE,streamId:n,success:!0})},function(d){a.postMessage({sourceName:r,targetName:s,stream:Tn.START_COMPLETE,streamId:n,reason:ki(d)})})}#n(e){const n=e.streamId,r=this.sourceName,s=e.sourceName,a=this.comObj,o=this.streamControllers[n],u=this.streamSinks[n];switch(e.stream){case Tn.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(ki(e.reason));break;case Tn.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(ki(e.reason));break;case Tn.PULL:if(!u){a.postMessage({sourceName:r,targetName:s,stream:Tn.PULL_COMPLETE,streamId:n,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,Promise.try(u.onPull||W2).then(function(){a.postMessage({sourceName:r,targetName:s,stream:Tn.PULL_COMPLETE,streamId:n,success:!0})},function(d){a.postMessage({sourceName:r,targetName:s,stream:Tn.PULL_COMPLETE,streamId:n,reason:ki(d)})});break;case Tn.ENQUEUE:if(fe(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Tn.CLOSE:if(fe(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#a(o,n);break;case Tn.ERROR:fe(o,"error should have stream controller"),o.controller.error(ki(e.reason)),this.#a(o,n);break;case Tn.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(ki(e.reason)),this.#a(o,n);break;case Tn.CANCEL:if(!u)break;const h=ki(e.reason);Promise.try(u.onCancel||W2,h).then(function(){a.postMessage({sourceName:r,targetName:s,stream:Tn.CANCEL_COMPLETE,streamId:n,success:!0})},function(d){a.postMessage({sourceName:r,targetName:s,stream:Tn.CANCEL_COMPLETE,streamId:n,reason:ki(d)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}}async#a(e,n){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[n]}destroy(){this.#t?.abort(),this.#t=null}}class CM{#t=!1;constructor({enableHWA:e=!1}){this.#t=e}create(e,n){if(e<=0||n<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,n);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#t})}}reset(e,n,r){if(!e.canvas)throw new Error("Canvas is not specified");if(n<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=n,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,n){Fe("Abstract method `_createCanvas` called.")}}class sX extends CM{constructor({ownerDocument:e=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=e}_createCanvas(e,n){const r=this._document.createElement("canvas");return r.width=e,r.height=n,r}}class RM{constructor({baseUrl:e=null,isCompressed:n=!0}){this.baseUrl=e,this.isCompressed=n}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(e){Fe("Abstract method `_fetch` called.")}}class X2 extends RM{async _fetch(e){const n=await Pu(e,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):xf(n)}}class IM{addFilter(e){return"none"}addHCMFilter(e,n){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,n,r,s,a){return"none"}destroy(e=!1){}}class aX extends IM{#t;#e;#i;#n;#a;#r;#s=0;constructor({docId:e,ownerDocument:n=globalThis.document}){super(),this.#n=e,this.#a=n}get#o(){return this.#e||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#i){const e=this.#a.createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=this.#a.createElementNS(fa,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#i=this.#a.createElementNS(fa,"defs"),e.append(r),r.append(this.#i),this.#a.body.append(e)}return this.#i}#d(e){if(e.length===1){const h=e[0],d=new Array(256);for(let g=0;g<256;g++)d[g]=h[g]/255;const p=d.join(",");return[p,p,p]}const[n,r,s]=e,a=new Array(256),o=new Array(256),u=new Array(256);for(let h=0;h<256;h++)a[h]=n[h]/255,o[h]=r[h]/255,u[h]=s[h]/255;return[a.join(","),o.join(","),u.join(",")]}#h(e){if(this.#t===void 0){this.#t="";const n=this.#a.URL;n!==this.#a.baseURI&&(Sf(n)?Xt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=E1(n,""))}return`url(${this.#t}#${e})`}addFilter(e){if(!e)return"none";let n=this.#o.get(e);if(n)return n;const[r,s,a]=this.#d(e),o=e.length===1?r:`${r}${s}${a}`;if(n=this.#o.get(o),n)return this.#o.set(e,n),n;const u=`g_${this.#n}_transfer_map_${this.#s++}`,h=this.#h(u);this.#o.set(e,h),this.#o.set(o,h);const d=this.#p(u);return this.#g(r,s,a,d),h}addHCMFilter(e,n){const r=`${e}-${n}`,s="base";let a=this.#c.get(s);if(a?.key===r||(a?(a.filter?.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},this.#c.set(s,a)),!e||!n))return a.url;const o=this.#v(e);e=Ct.makeHexColor(...o);const u=this.#v(n);if(n=Ct.makeHexColor(...u),this.#l.style.color="",e==="#000000"&&n==="#ffffff"||e===n)return a.url;const h=new Array(256);for(let b=0;b<=255;b++){const w=b/255;h[b]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const d=h.join(","),p=`g_${this.#n}_hcm_filter`,g=a.filter=this.#p(p);this.#g(d,d,d,g),this.#m(g);const y=(b,w)=>{const x=o[b]/255,S=u[b]/255,E=new Array(w+1);for(let k=0;k<=w;k++)E[k]=x+k/w*(S-x);return E.join(",")};return this.#g(y(0,5),y(1,5),y(2,5),g),a.url=this.#h(p),a.url}addAlphaFilter(e){let n=this.#o.get(e);if(n)return n;const[r]=this.#d([e]),s=`alpha_${r}`;if(n=this.#o.get(s),n)return this.#o.set(e,n),n;const a=`g_${this.#n}_alpha_map_${this.#s++}`,o=this.#h(a);this.#o.set(e,o),this.#o.set(s,o);const u=this.#p(a);return this.#y(r,u),o}addLuminosityFilter(e){let n=this.#o.get(e||"luminosity");if(n)return n;let r,s;if(e?([r]=this.#d([e]),s=`luminosity_${r}`):s="luminosity",n=this.#o.get(s),n)return this.#o.set(e,n),n;const a=`g_${this.#n}_luminosity_map_${this.#s++}`,o=this.#h(a);this.#o.set(e,o),this.#o.set(s,o);const u=this.#p(a);return this.#f(u),e&&this.#y(r,u),o}addHighlightHCMFilter(e,n,r,s,a){const o=`${n}-${r}-${s}-${a}`;let u=this.#c.get(e);if(u?.key===o||(u?(u.filter?.remove(),u.key=o,u.url="none",u.filter=null):(u={key:o,url:"none",filter:null},this.#c.set(e,u)),!n||!r))return u.url;const[h,d]=[n,r].map(this.#v.bind(this));let p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[y,b]=[s,a].map(this.#v.bind(this));g<p&&([p,g,y,b]=[g,p,b,y]),this.#l.style.color="";const w=(E,k,N)=>{const M=new Array(256),O=(g-p)/N,B=E/255,C=(k-E)/(255*N);let R=0;for(let L=0;L<=N;L++){const F=Math.round(p+L*O),U=B+L*C;for(let $=R;$<=F;$++)M[$]=U;R=F+1}for(let L=R;L<256;L++)M[L]=M[R-1];return M.join(",")},x=`g_${this.#n}_hcm_${e}_filter`,S=u.filter=this.#p(x);return this.#m(S),this.#g(w(y[0],b[0],5),w(y[1],b[1],5),w(y[2],b[2],5),S),u.url=this.#h(x),u.url}destroy(e=!1){e&&this.#r?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#s=0)}#f(e){const n=this.#a.createElementNS(fa,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)}#m(e){const n=this.#a.createElementNS(fa,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)}#p(e){const n=this.#a.createElementNS(fa,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),this.#l.append(n),n}#u(e,n,r){const s=this.#a.createElementNS(fa,n);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),e.append(s)}#g(e,n,r,s){const a=this.#a.createElementNS(fa,"feComponentTransfer");s.append(a),this.#u(a,"feFuncR",e),this.#u(a,"feFuncG",n),this.#u(a,"feFuncB",r)}#y(e,n){const r=this.#a.createElementNS(fa,"feComponentTransfer");n.append(r),this.#u(r,"feFuncA",e)}#v(e){return this.#l.style.color=e,Ou(getComputedStyle(this.#l).getPropertyValue("color"))}}class DM{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(e){Fe("Abstract method `_fetch` called.")}}class Y2 extends DM{async _fetch(e){const n=await Pu(e,"arraybuffer");return new Uint8Array(n)}}class kM{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(e){Fe("Abstract method `_fetch` called.")}}class K2 extends kM{async _fetch(e){const n=await Pu(e,"arraybuffer");return new Uint8Array(n)}}bi&&Xt("Please use the `legacy` build in Node.js environments.");async function N1(i){const n=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(n)}class oX extends IM{}class lX extends CM{_createCanvas(e,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,n)}}class cX extends RM{async _fetch(e){return N1(e)}}class uX extends DM{async _fetch(e){return N1(e)}}class hX extends kM{async _fetch(e){return N1(e)}}const jc="__forcedDependency",{floor:Q2,ceil:Z2}=Math;function xg(i,e,n,r,s,a){i[e*4+0]=Math.min(i[e*4+0],n),i[e*4+1]=Math.min(i[e*4+1],r),i[e*4+2]=Math.max(i[e*4+2],s),i[e*4+3]=Math.max(i[e*4+3],a)}const F_=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class dX{#t;#e;constructor(e,n){this.#t=e,this.#e=n}get length(){return this.#t.length}isEmpty(e){return this.#t[e]===F_}minX(e){return this.#e[e*4+0]/256}minY(e){return this.#e[e*4+1]/256}maxX(e){return(this.#e[e*4+2]+1)/256}maxY(e){return(this.#e[e*4+3]+1)/256}}const Eg=(i,e)=>{if(!i)return;let n=i.get(e);return n||(n={dependencies:new Set,isRenderingOperation:!1},i.set(e,n)),n};class fX{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[jc]:[]};#i=new Map;#n=[];#a=[];#r=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#p;#u;#g;constructor(e,n,r=!1){this.#f=e.width,this.#m=e.height,this.#y(n),r&&(this.#g=new Map)}growOperationsCount(e){e>=this.#u.length&&this.#y(e,this.#u)}#y(e,n){const r=new ArrayBuffer(e*4);this.#p=new Uint8ClampedArray(r),this.#u=new Uint32Array(r),n&&n.length>0?(this.#u.set(n),this.#u.fill(F_,n.length)):this.#u.fill(F_)}save(e){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[jc]:{__proto__:this.#e[jc]}},this.#s={__proto__:this.#s},this.#n.push(e),this}restore(e){const n=Object.getPrototypeOf(this.#t);if(n===null)return this;this.#t=n,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const r=this.#n.pop();return r!==void 0&&(Eg(this.#g,e)?.dependencies.add(r),this.#u[e]=this.#u[r]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const n=this.#n.pop();return n!==void 0&&(Eg(this.#g,e)?.dependencies.add(n),this.#u[e]=this.#u[n]),this}beginMarkedContent(e){return this.#a.push(e),this}endMarkedContent(e){const n=this.#a.pop();return n!==void 0&&(Eg(this.#g,e)?.dependencies.add(n),this.#u[e]=this.#u[n]),this}pushBaseTransform(e){return this.#r.push(Ct.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(e,n){return this.#t[e]=n,this}recordIncrementalData(e,n){return this.#e[e].push(n),this}resetIncrementalData(e,n){return this.#e[e].length=0,this}recordNamedData(e,n){return this.#i.set(e,n),this}recordSimpleDataFromNamed(e,n,r){this.#t[e]=this.#i.get(n)??r}recordFutureForcedDependency(e,n){return this.recordIncrementalData(jc,n),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const n of e)n in this.#t&&this.recordFutureForcedDependency(n,this.#t[n]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(jc,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,n,r,s,a,o){const u=Ct.multiplyByDOMMatrix(this.#r.at(-1),n.getTransform()),h=[1/0,1/0,-1/0,-1/0];Ct.axialAlignedBoundingBox([r,a,s,o],u,h);const d=Ct.intersect(this.#s,h);return d?(this.#s[0]=d[0],this.#s[1]=d[1],this.#s[2]=d[2],this.#s[3]=d[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(e,n,r,s,a,o){const u=this.#s;if(u[0]===1/0)return this;const h=Ct.multiplyByDOMMatrix(this.#r.at(-1),n.getTransform());if(u[0]===-1/0)return Ct.axialAlignedBoundingBox([r,a,s,o],h,this.#o),this;const d=[1/0,1/0,-1/0,-1/0];return Ct.axialAlignedBoundingBox([r,a,s,o],h,d),this.#o[0]=Math.min(this.#o[0],Math.max(d[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(d[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(d[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(d[3],u[3])),this}recordCharacterBBox(e,n,r,s=1,a=0,o=0,u){const h=r.bbox;let d,p;if(h&&(d=h[2]!==h[0]&&h[3]!==h[1]&&this.#h.get(r),d!==!1&&(p=[0,0,0,0],Ct.axialAlignedBoundingBox(h,r.fontMatrix,p),(s!==1||a!==0||o!==0)&&Ct.scaleMinMax([s,0,0,-s,a,o],p),d)))return this.recordBBox(e,n,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(e);const g=u();return h&&p&&d===void 0&&(d=p[0]<=a-g.actualBoundingBoxLeft&&p[2]>=a+g.actualBoundingBoxRight&&p[1]<=o-g.actualBoundingBoxAscent&&p[3]>=o+g.actualBoundingBoxDescent,this.#h.set(r,d),d)?this.recordBBox(e,n,p[0],p[2],p[1],p[3]):this.recordBBox(e,n,a-g.actualBoundingBoxLeft,a+g.actualBoundingBoxRight,o-g.actualBoundingBoxAscent,o+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#m,this.#s[3]),this}getSimpleIndex(e){return this.#t[e]}recordDependencies(e,n){const r=this.#l,s=this.#t,a=this.#e;for(const o of n)o in this.#t?r.add(s[o]):o in a&&a[o].forEach(r.add,r);return this}recordNamedDependency(e,n){return this.#i.has(n)&&this.#l.add(this.#i.get(n)),this}recordOperation(e,n=!1){if(this.recordDependencies(e,[jc]),this.#g){const r=Eg(this.#g,e),{dependencies:s}=r;this.#l.forEach(s.add,s),this.#n.forEach(s.add,s),this.#a.forEach(s.add,s),s.delete(e),r.isRenderingOperation=!0}if(this.#c===e){const r=Q2(this.#o[0]*256/this.#f),s=Q2(this.#o[1]*256/this.#m),a=Z2(this.#o[2]*256/this.#f),o=Z2(this.#o[3]*256/this.#m);xg(this.#p,e,r,s,a,o);for(const u of this.#l)u!==e&&xg(this.#p,u,r,s,a,o);for(const u of this.#n)u!==e&&xg(this.#p,u,r,s,a,o);for(const u of this.#a)u!==e&&xg(this.#p,u,r,s,a,o);n||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,n=!1){const r=Array.from(this.#l);this.recordOperation(e,n),this.recordIncrementalData("sameLineText",e);for(const s of r)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(e,n=!1){return this.#c===e&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),n||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const n=this.#d.get(e);return this.#d.delete(e),n}_pushPendingDependencies(e){for(const n of e)this.#l.add(n)}take(){return this.#h.clear(),new dX(this.#u,this.#p)}takeDebugMetadata(){return this.#g}}class Mm{#t;#e;#i;#n=0;#a=0;constructor(e,n,r){if(e instanceof Mm&&e.#i===!!r)return e;this.#t=e,this.#e=n,this.#i=!!r}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#a++,this.#t.save(this.#e),this}restore(e){return this.#a>0&&(this.#t.restore(this.#e),this.#a--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#t.pushBaseTransform(e),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(e,n){return this.#t.recordSimpleData(e,this.#e),this}recordIncrementalData(e,n){return this.#t.recordIncrementalData(e,this.#e),this}resetIncrementalData(e,n){return this.#t.resetIncrementalData(e,this.#e),this}recordNamedData(e,n){return this}recordSimpleDataFromNamed(e,n,r){return this.#t.recordSimpleDataFromNamed(e,n,this.#e),this}recordFutureForcedDependency(e,n){return this.#t.recordFutureForcedDependency(e,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#t.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(e,n,r,s,a,o){return this.#i||this.#t.recordClipBox(this.#e,n,r,s,a,o),this}recordBBox(e,n,r,s,a,o){return this.#i||this.#t.recordBBox(this.#e,n,r,s,a,o),this}recordCharacterBBox(e,n,r,s,a,o,u){return this.#i||this.#t.recordCharacterBBox(this.#e,n,r,s,a,o,u),this}recordFullPageBBox(e){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(e){return this.#t.getSimpleIndex(e)}recordDependencies(e,n){return this.#t.recordDependencies(this.#e,n),this}recordNamedDependency(e,n){return this.#t.recordNamedDependency(this.#e,n),this}recordOperation(e){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(e){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(e){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const vr={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Kn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function U_(i,e){if(!e)return;const n=e[2]-e[0],r=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],n,r),i.clip(s)}class M1{isModifyingCurrentTransform(){return!1}getPattern(){Fe("Abstract method `getPattern` called.")}}class pX extends M1{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let n;this._type==="axial"?n=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)n.addColorStop(r[0],r[1]);return n}getPattern(e,n,r,s){let a;if(s===Kn.STROKE||s===Kn.FILL){const o=n.current.getClippedPathBoundingBox(s,tn(e))||[0,0,0,0],u=Math.ceil(o[2]-o[0])||1,h=Math.ceil(o[3]-o[1])||1,d=n.cachedCanvases.getCanvas("pattern",u,h),p=d.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-o[0],-o[1]),r=Ct.transform(r,[1,0,0,1,o[0],o[1]]),p.transform(...n.baseTransform),this.matrix&&p.transform(...this.matrix),U_(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),a=e.createPattern(d.canvas,"no-repeat");const g=new DOMMatrix(r);a.setTransform(g)}else U_(e,this._bbox),a=this._createGradient(e);return a}}function y0(i,e,n,r,s,a,o,u){const h=e.coords,d=e.colors,p=i.data,g=i.width*4;let y;h[n+1]>h[r+1]&&(y=n,n=r,r=y,y=a,a=o,o=y),h[r+1]>h[s+1]&&(y=r,r=s,s=y,y=o,o=u,u=y),h[n+1]>h[r+1]&&(y=n,n=r,r=y,y=a,a=o,o=y);const b=(h[n]+e.offsetX)*e.scaleX,w=(h[n+1]+e.offsetY)*e.scaleY,x=(h[r]+e.offsetX)*e.scaleX,S=(h[r+1]+e.offsetY)*e.scaleY,E=(h[s]+e.offsetX)*e.scaleX,k=(h[s+1]+e.offsetY)*e.scaleY;if(w>=k)return;const N=d[a],M=d[a+1],O=d[a+2],B=d[o],C=d[o+1],R=d[o+2],L=d[u],F=d[u+1],U=d[u+2],$=Math.round(w),V=Math.round(k);let G,et,z,Y,nt,mt,bt,q;for(let Z=$;Z<=V;Z++){if(Z<S){const yt=Z<w?0:(w-Z)/(w-S);G=b-(b-x)*yt,et=N-(N-B)*yt,z=M-(M-C)*yt,Y=O-(O-R)*yt}else{let yt;Z>k?yt=1:S===k?yt=0:yt=(S-Z)/(S-k),G=x-(x-E)*yt,et=B-(B-L)*yt,z=C-(C-F)*yt,Y=R-(R-U)*yt}let lt;Z<w?lt=0:Z>k?lt=1:lt=(w-Z)/(w-k),nt=b-(b-E)*lt,mt=N-(N-L)*lt,bt=M-(M-F)*lt,q=O-(O-U)*lt;const ct=Math.round(Math.min(G,nt)),At=Math.round(Math.max(G,nt));let ht=g*Z+ct*4;for(let yt=ct;yt<=At;yt++)lt=(G-yt)/(G-nt),lt<0?lt=0:lt>1&&(lt=1),p[ht++]=et-(et-mt)*lt|0,p[ht++]=z-(z-bt)*lt|0,p[ht++]=Y-(Y-q)*lt|0,p[ht++]=255}}function gX(i,e,n){const r=e.coords,s=e.colors;let a,o;switch(e.type){case"lattice":const u=e.verticesPerRow,h=Math.floor(r.length/u)-1,d=u-1;for(a=0;a<h;a++){let p=a*u;for(let g=0;g<d;g++,p++)y0(i,n,r[p],r[p+1],r[p+u],s[p],s[p+1],s[p+u]),y0(i,n,r[p+u+1],r[p+1],r[p+u],s[p+u+1],s[p+1],s[p+u])}break;case"triangles":for(a=0,o=r.length;a<o;a+=3)y0(i,n,r[a],r[a+1],r[a+2],s[a],s[a+1],s[a+2]);break;default:throw new Error("illegal figure")}}class mX extends M1{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,n,r){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,g=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(p*e[1]*1.1)),3e3),b=d/g,w=p/y,x={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/b,scaleY:1/w},S=g+4,E=y+4,k=r.getCanvas("mesh",S,E),N=k.context,M=N.createImageData(g,y);if(n){const B=M.data;for(let C=0,R=B.length;C<R;C+=4)B[C]=n[0],B[C+1]=n[1],B[C+2]=n[2],B[C+3]=255}for(const B of this._figures)gX(M,B,x);return N.putImageData(M,2,2),{canvas:k.canvas,offsetX:u-2*b,offsetY:h-2*w,scaleX:b,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(e,n,r,s){U_(e,this._bbox);const a=new Float32Array(2);if(s===Kn.SHADING)Ct.singularValueDecompose2dScale(tn(e),a);else if(this.matrix){Ct.singularValueDecompose2dScale(this.matrix,a);const[u,h]=a;Ct.singularValueDecompose2dScale(n.baseTransform,a),a[0]*=u,a[1]*=h}else Ct.singularValueDecompose2dScale(n.baseTransform,a);const o=this._createMeshCanvas(a,s===Kn.SHADING?null:this._background,n.cachedCanvases);return s!==Kn.SHADING&&(e.setTransform(...n.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class yX extends M1{getPattern(){return"hotpink"}}function bX(i){switch(i[0]){case"RadialAxial":return new pX(i);case"Mesh":return new mX(i);case"Dummy":return new yX}throw new Error(`Unknown IR type: ${i[0]}`)}const J2={COLORED:1,UNCOLORED:2};class P1{static MAX_PATTERN_SIZE=3e3;constructor(e,n,r,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e,n){const{bbox:r,operatorList:s,paintType:a,tilingType:o,color:u,canvasGraphicsFactory:h}=this;let{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),wy("TilingType: "+o);const g=r[0],y=r[1],b=r[2],w=r[3],x=b-g,S=w-y,E=new Float32Array(2);Ct.singularValueDecompose2dScale(this.matrix,E);const[k,N]=E;Ct.singularValueDecompose2dScale(this.baseTransform,E);const M=k*E[0],O=N*E[1];let B=x,C=S,R=!1,L=!1;const F=Math.ceil(d*M),U=Math.ceil(p*O),$=Math.ceil(x*M),V=Math.ceil(S*O);F>=$?B=d:R=!0,U>=V?C=p:L=!0;const G=this.getSizeAndScale(B,this.ctx.canvas.width,M),et=this.getSizeAndScale(C,this.ctx.canvas.height,O),z=e.cachedCanvases.getCanvas("pattern",G.size,et.size),Y=z.context,nt=h.createCanvasGraphics(Y,n);if(nt.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(nt,a,u),Y.translate(-G.scale*g,-et.scale*y),nt.transform(0,G.scale,0,0,et.scale,0,0),Y.save(),nt.dependencyTracker?.save(),this.clipBbox(nt,g,y,b,w),nt.baseTransform=tn(nt.ctx),nt.executeOperatorList(s),nt.endDrawing(),nt.dependencyTracker?.restore(),Y.restore(),R||L){const mt=z.canvas;R&&(B=d),L&&(C=p);const bt=this.getSizeAndScale(B,this.ctx.canvas.width,M),q=this.getSizeAndScale(C,this.ctx.canvas.height,O),Z=bt.size,lt=q.size,ct=e.cachedCanvases.getCanvas("pattern-workaround",Z,lt),At=ct.context,ht=R?Math.floor(x/d):0,yt=L?Math.floor(S/p):0;for(let Pt=0;Pt<=ht;Pt++)for(let kt=0;kt<=yt;kt++)At.drawImage(mt,Z*Pt,lt*kt,Z,lt,0,0,Z,lt);return{canvas:ct.canvas,scaleX:bt.scale,scaleY:q.scale,offsetX:g,offsetY:y}}return{canvas:z.canvas,scaleX:G.scale,scaleY:et.scale,offsetX:g,offsetY:y}}getSizeAndScale(e,n,r){const s=Math.max(P1.MAX_PATTERN_SIZE,n);let a=Math.ceil(e*r);return a>=s?a=s:r=a/e,{scale:r,size:a}}clipBbox(e,n,r,s,a){const o=s-n,u=a-r;e.ctx.rect(n,r,o,u),Ct.axialAlignedBoundingBox([n,r,s,a],tn(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,n,r){const s=e.ctx,a=e.current;switch(n){case J2.COLORED:const{fillStyle:o,strokeStyle:u}=this.ctx;s.fillStyle=a.fillColor=o,s.strokeStyle=a.strokeColor=u;break;case J2.UNCOLORED:s.fillStyle=s.strokeStyle=r,a.fillColor=a.strokeColor=r;break;default:throw new UW(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,n,r,s,a){let o=r;s!==Kn.SHADING&&(o=Ct.transform(o,n.baseTransform),this.matrix&&(o=Ct.transform(o,this.matrix)));const u=this.createPatternCanvas(n,a);let h=new DOMMatrix(o);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const d=e.createPattern(u.canvas,"repeat");return d.setTransform(h),d}}function vX({src:i,srcPos:e=0,dest:n,width:r,height:s,nonBlackColor:a=4294967295,inverseDecode:o=!1}){const u=Un.isLittleEndian?4278190080:255,[h,d]=o?[a,u]:[u,a],p=r>>3,g=r&7,y=i.length;n=new Uint32Array(n.buffer);let b=0;for(let w=0;w<s;w++){for(const S=e+p;e<S;e++){const E=e<y?i[e]:255;n[b++]=E&128?d:h,n[b++]=E&64?d:h,n[b++]=E&32?d:h,n[b++]=E&16?d:h,n[b++]=E&8?d:h,n[b++]=E&4?d:h,n[b++]=E&2?d:h,n[b++]=E&1?d:h}if(g===0)continue;const x=e<y?i[e++]:255;for(let S=0;S<g;S++)n[b++]=x&1<<7-S?d:h}return{srcPos:e,destPos:b}}const tR=16,eR=100,_X=15,nR=10,Ni=16,b0=new DOMMatrix,Qi=new Float32Array(2),Yc=new Float32Array([1/0,1/0,-1/0,-1/0]);function wX(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(n,r){e.translate(n,r),this.__originalTranslate(n,r)},i.scale=function(n,r){e.scale(n,r),this.__originalScale(n,r)},i.transform=function(n,r,s,a,o,u){e.transform(n,r,s,a,o,u),this.__originalTransform(n,r,s,a,o,u)},i.setTransform=function(n,r,s,a,o,u){e.setTransform(n,r,s,a,o,u),this.__originalSetTransform(n,r,s,a,o,u)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){e.rotate(n),this.__originalRotate(n)},i.clip=function(n){e.clip(n),this.__originalClip(n)},i.moveTo=function(n,r){e.moveTo(n,r),this.__originalMoveTo(n,r)},i.lineTo=function(n,r){e.lineTo(n,r),this.__originalLineTo(n,r)},i.bezierCurveTo=function(n,r,s,a,o,u){e.bezierCurveTo(n,r,s,a,o,u),this.__originalBezierCurveTo(n,r,s,a,o,u)},i.rect=function(n,r,s,a){e.rect(n,r,s,a),this.__originalRect(n,r,s,a)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class AX{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,n,r){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,n,r)):(s=this.canvasFactory.create(n,r),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const n=this.cache[e];this.canvasFactory.destroy(n),delete this.cache[e]}}}function Sg(i,e,n,r,s,a,o,u,h,d){const[p,g,y,b,w,x]=tn(i);if(g===0&&y===0){const k=o*p+w,N=Math.round(k),M=u*b+x,O=Math.round(M),B=(o+h)*p+w,C=Math.abs(Math.round(B)-N)||1,R=(u+d)*b+x,L=Math.abs(Math.round(R)-O)||1;return i.setTransform(Math.sign(p),0,0,Math.sign(b),N,O),i.drawImage(e,n,r,s,a,0,0,C,L),i.setTransform(p,g,y,b,w,x),[C,L]}if(p===0&&b===0){const k=u*y+w,N=Math.round(k),M=o*g+x,O=Math.round(M),B=(u+d)*y+w,C=Math.abs(Math.round(B)-N)||1,R=(o+h)*g+x,L=Math.abs(Math.round(R)-O)||1;return i.setTransform(0,Math.sign(g),Math.sign(y),0,N,O),i.drawImage(e,n,r,s,a,0,0,L,C),i.setTransform(p,g,y,b,w,x),[L,C]}i.drawImage(e,n,r,s,a,o,u,h,d);const S=Math.hypot(p,g),E=Math.hypot(y,b);return[S*h,E*d]}class iR{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=P_;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Xn.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,n,r){r?.(this),this.clipBox=new Float32Array([0,0,e,n]),this.minMax=Yc.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Kn.FILL,n=null){const r=this.minMax.slice();if(e===Kn.STROKE){n||Fe("Stroke bounding box must include transform."),Ct.singularValueDecompose2dScale(n,Qi);const s=Qi[0]*this.lineWidth/2,a=Qi[1]*this.lineWidth/2;r[0]-=s,r[1]-=a,r[2]+=s,r[3]+=a}return r}updateClipFromPath(){const e=Ct.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Yc,0)}getClippedPathBoundingBox(e=Kn.FILL,n=null){return Ct.intersect(this.clipBox,this.getPathBoundingBox(e,n))}}function rR(i,e){if(e instanceof ImageData){i.putImageData(e,0,0);return}const n=e.height,r=e.width,s=n%Ni,a=(n-s)/Ni,o=s===0?a:a+1,u=i.createImageData(r,Ni);let h=0,d;const p=e.data,g=u.data;let y,b,w,x;if(e.kind===Sd.GRAYSCALE_1BPP){const S=p.byteLength,E=new Uint32Array(g.buffer,0,g.byteLength>>2),k=E.length,N=r+7>>3,M=4294967295,O=Un.isLittleEndian?4278190080:255;for(y=0;y<o;y++){for(w=y<a?Ni:s,d=0,b=0;b<w;b++){const B=S-h;let C=0;const R=B>N?r:B*8-7,L=R&-8;let F=0,U=0;for(;C<L;C+=8)U=p[h++],E[d++]=U&128?M:O,E[d++]=U&64?M:O,E[d++]=U&32?M:O,E[d++]=U&16?M:O,E[d++]=U&8?M:O,E[d++]=U&4?M:O,E[d++]=U&2?M:O,E[d++]=U&1?M:O;for(;C<R;C++)F===0&&(U=p[h++],F=128),E[d++]=U&F?M:O,F>>=1}for(;d<k;)E[d++]=0;i.putImageData(u,0,y*Ni)}}else if(e.kind===Sd.RGBA_32BPP){for(b=0,x=r*Ni*4,y=0;y<a;y++)g.set(p.subarray(h,h+x)),h+=x,i.putImageData(u,0,b),b+=Ni;y<o&&(x=r*s*4,g.set(p.subarray(h,h+x)),i.putImageData(u,0,b))}else if(e.kind===Sd.RGB_24BPP)for(w=Ni,x=r*w,y=0;y<o;y++){for(y>=a&&(w=s,x=r*w),d=0,b=x;b--;)g[d++]=p[h++],g[d++]=p[h++],g[d++]=p[h++],g[d++]=255;i.putImageData(u,0,y*Ni)}else throw new Error(`bad image kind: ${e.kind}`)}function sR(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const n=e.height,r=e.width,s=n%Ni,a=(n-s)/Ni,o=s===0?a:a+1,u=i.createImageData(r,Ni);let h=0;const d=e.data,p=u.data;for(let g=0;g<o;g++){const y=g<a?Ni:s;({srcPos:h}=vX({src:d,srcPos:h,dest:p,width:r,height:y,nonBlackColor:0})),i.putImageData(u,0,g*Ni)}}function Kh(i,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of n)i[r]!==void 0&&(e[r]=i[r]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function Tg(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}function aR(i,e){if(e)return!0;Ct.singularValueDecompose2dScale(i,Qi);const n=Math.fround(Yr.pixelRatio*Hl.PDF_TO_CSS_UNITS);return Qi[0]<=n&&Qi[1]<=n}const xX=["butt","round","square"],EX=["miter","round","bevel"],SX={},oR={};class ru{constructor(e,n,r,s,a,{optionalContentConfig:o,markedContentStack:u=null},h,d,p){this.ctx=e,this.current=new iR(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=r,this.canvasFactory=s,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=o,this.cachedCanvases=new AX(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(e,n,r=null){return typeof n=="string"?(this.dependencyTracker?.recordNamedDependency(e,n),n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n)):r}beginDrawing({transform:e,viewport:n,transparency:r=!1,background:s=null}){const a=this.ctx.canvas.width,o=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,a,o),this.ctx.fillStyle=u,r){const h=this.cachedCanvases.getCanvas("transparent",a,o);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...tn(this.compositeCtx))}this.ctx.save(),Tg(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=tn(this.ctx)}executeOperatorList(e,n,r,s,a){const o=e.argsArray,u=e.fnArray;let h=n||0;const d=o.length;if(d===h)return h;const p=d-h>nR&&typeof r=="function",g=p?Date.now()+_X:0;let y=0;const b=this.commonObjs,w=this.objs;let x,S;for(;;){if(s!==void 0&&h===s.nextBreakPoint)return s.breakIt(h,r),h;if(!a||a(h))if(x=u[h],S=o[h]??null,x!==Au.dependency)S===null?this[x](h):this[x](h,...S);else for(const E of S){this.dependencyTracker?.recordNamedData(E,h);const k=E.startsWith("g_")?b:w;if(!k.has(E))return k.get(E,r),h}if(h++,h===d)return h;if(p&&++y>nR){if(Date.now()>g)return r(),h;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const n of e.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const n=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}}_scaleImage(e,n){const r=e.width??e.displayWidth,s=e.height??e.displayHeight;let a=Math.max(Math.hypot(n[0],n[1]),1),o=Math.max(Math.hypot(n[2],n[3]),1),u=r,h=s,d="prescale1",p,g;for(;a>2&&u>1||o>2&&h>1;){let y=u,b=h;a>2&&u>1&&(y=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),a/=u/y),o>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,o/=h/b),p=this.cachedCanvases.getCanvas(d,y,b),g=p.context,g.clearRect(0,0,y,b),g.drawImage(e,0,0,u,h,0,0,y,b),e=p.canvas,u=y,h=b,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:h}}_createMaskCanvas(e,n){const r=this.ctx,{width:s,height:a}=n,o=this.current.fillColor,u=this.current.patternFill,h=tn(r);let d,p,g,y;if((n.bitmap||n.data)&&n.count>1){const F=n.bitmap||n.data.buffer;p=JSON.stringify(u?h:[h.slice(0,4),o]),d=this._cachedBitmapsMap.get(F),d||(d=new Map,this._cachedBitmapsMap.set(F,d));const U=d.get(p);if(U&&!u){const $=Math.round(Math.min(h[0],h[2])+h[4]),V=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(e,vr.transformAndFill),{canvas:U,offsetX:$,offsetY:V}}g=U}g||(y=this.cachedCanvases.getCanvas("maskCanvas",s,a),sR(y.context,n));let b=Ct.transform(h,[1/s,0,0,-1/a,0,0]);b=Ct.transform(b,[1,0,0,1,0,-a]);const w=Yc.slice();Ct.axialAlignedBoundingBox([0,0,s,a],b,w);const[x,S,E,k]=w,N=Math.round(E-x)||1,M=Math.round(k-S)||1,O=this.cachedCanvases.getCanvas("fillCanvas",N,M),B=O.context,C=x,R=S;B.translate(-C,-R),B.transform(...b),g||(g=this._scaleImage(y.canvas,ws(B)),g=g.img,d&&u&&d.set(p,g)),B.imageSmoothingEnabled=aR(tn(B),n.interpolate),Sg(B,g,0,0,g.width,g.height,0,0,s,a),B.globalCompositeOperation="source-in";const L=Ct.transform(ws(B),[1,0,0,1,-C,-R]);return B.fillStyle=u?o.getPattern(r,this,L,Kn.FILL,e):o,B.fillRect(0,0,s,a),d&&!u&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,O.canvas)),this.dependencyTracker?.recordDependencies(e,vr.transformAndFill),{canvas:O.canvas,offsetX:Math.round(C),offsetY:Math.round(R)}}setLineWidth(e,n){this.dependencyTracker?.recordSimpleData("lineWidth",e),n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(e,n){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=xX[n]}setLineJoin(e,n){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=EX[n]}setMiterLimit(e,n){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=n}setDash(e,n,r){this.dependencyTracker?.recordSimpleData("dash",e);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(n),s.lineDashOffset=r)}setRenderingIntent(e,n){}setFlatness(e,n){}setGState(e,n){for(const[r,s]of n)switch(r){case"LW":this.setLineWidth(e,s);break;case"LC":this.setLineCap(e,s);break;case"LJ":this.setLineJoin(e,s);break;case"ML":this.setMiterLimit(e,s);break;case"D":this.setDash(e,s[0],s[1]);break;case"RI":this.setRenderingIntent(e,s);break;case"FL":this.setFlatness(e,s);break;case"Font":this.setFont(e,s[0],s[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=s;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=s;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,r=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(s,n,r);this.suspendedCtx=this.ctx;const o=this.ctx=a.context;o.setTransform(this.suspendedCtx.getTransform()),Kh(this.suspendedCtx,o),wX(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Kh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,n,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,n,r,s){const a=s[0],o=s[1],u=s[2]-a,h=s[3]-o;u===0||h===0||(this.genericComposeSMask(n.context,r,u,h,n.subtype,n.backdrop,n.transferMap,a,o,n.offsetX,n.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,n,r,s,a,o,u,h,d,p,g){let y=e.canvas,b=h-p,w=d-g;if(o)if(b<0||w<0||b+r>y.width||w+s>y.height){const S=this.cachedCanvases.getCanvas("maskExtension",r,s),E=S.context;E.drawImage(y,-b,-w),E.globalCompositeOperation="destination-atop",E.fillStyle=o,E.fillRect(0,0,r,s),E.globalCompositeOperation="source-over",y=S.canvas,b=w=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(b,w,r,s),e.clip(S),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(b,w,r,s),e.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),a==="Alpha"&&u?n.filter=this.filterFactory.addAlphaFilter(u):a==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(u));const x=new Path2D;x.rect(h,d,r,s),n.clip(x),n.globalCompositeOperation="destination-in",n.drawImage(y,b,w,r,s,h,d,r,s),n.restore()}save(e){this.inSMaskMode&&Kh(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Kh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,n,r,s,a,o,u){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(n,r,s,a,o,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,n,r,s){let[a]=r;if(!s){a||=r[0]=new Path2D,this[n](e,a);return}if(this.dependencyTracker!==null){const o=n===Au.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,s[0]-o,s[2]+o,s[1]-o,s[3]+o).recordDependencies(e,["transform"])}if(!(a instanceof Path2D)){const o=r[0]=new Path2D;for(let u=0,h=a.length;u<h;)switch(a[u++]){case vg.moveTo:o.moveTo(a[u++],a[u++]);break;case vg.lineTo:o.lineTo(a[u++],a[u++]);break;case vg.curveTo:o.bezierCurveTo(a[u++],a[u++],a[u++],a[u++],a[u++],a[u++]);break;case vg.closePath:o.closePath();break;default:Xt(`Unrecognized drawing path operator: ${a[u-1]}`);break}a=o}Ct.axialAlignedBoundingBox(s,tn(this.ctx),this.current.minMax),this[n](e,a),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,n,r=!0){const s=this.ctx,a=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const o=a.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=a.getPattern(s,this,ws(s),Kn.STROKE,e),o){const u=new Path2D;u.addPath(n,s.getTransform().invertSelf().multiplySelf(o)),n=u}this.rescaleAndStroke(n,!1),s.restore()}else this.rescaleAndStroke(n,!0);this.dependencyTracker?.recordDependencies(e,vr.stroke),r&&this.consumePath(e,n,this.current.getClippedPathBoundingBox(Kn.STROKE,tn(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e,n){this.stroke(e,n)}fill(e,n,r=!0){const s=this.ctx,a=this.current.fillColor,o=this.current.patternFill;let u=!1;if(o){const d=a.isModifyingCurrentTransform()?s.getTransform():null;if(this.dependencyTracker?.save(e),s.save(),s.fillStyle=a.getPattern(s,this,ws(s),Kn.FILL,e),d){const p=new Path2D;p.addPath(n,s.getTransform().invertSelf().multiplySelf(d)),n=p}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(s.fill(n,"evenodd"),this.pendingEOFill=!1):s.fill(n)),this.dependencyTracker?.recordDependencies(e,vr.fill),u&&(s.restore(),this.dependencyTracker?.restore(e)),r&&this.consumePath(e,n,h)}eoFill(e,n){this.pendingEOFill=!0,this.fill(e,n)}fillStroke(e,n){this.fill(e,n,!1),this.stroke(e,n,!1),this.consumePath(e,n)}eoFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}closeFillStroke(e,n){this.fillStroke(e,n)}closeEOFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}endPath(e,n){this.consumePath(e,n)}rawFillPath(e,n){this.ctx.fill(n),this.dependencyTracker?.recordDependencies(e,vr.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=SX}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=oR}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const n=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;n!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",e),s.recordCloseMarker(e)}if(n!==void 0){const s=new Path2D,a=r.getTransform().invertSelf();for(const{transform:o,x:u,y:h,fontSize:d,path:p}of n)p&&s.addPath(p,new DOMMatrix(o).preMultiplySelf(a).translate(u,h).scale(d,-d));r.clip(s)}delete this.pendingTextPaths}setCharSpacing(e,n){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=n}setWordSpacing(e,n){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=n}setHScale(e,n){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=n/100}setLeading(e,n){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-n}setFont(e,n,r){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",n,e);const s=this.commonObjs.get(n),a=this.current;if(!s)throw new Error(`Can't find font for ${n}`);if(a.fontMatrix=s.fontMatrix||P_,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&Xt("Invalid font matrix for font "+n),r<0?(r=-r,a.fontDirection=-1):a.fontDirection=1,this.current.font=s,this.current.fontSize=r,s.isType3Font)return;const o=s.loadedName||"sans-serif",u=s.systemFontInfo?.css||`"${o}", ${s.fallbackName}`;let h="normal";s.black?h="900":s.bold&&(h="bold");const d=s.italic?"italic":"normal";let p=r;r<tR?p=tR:r>eR&&(p=eR),this.current.fontSizeScale=r/p,this.ctx.font=`${d} ${h} ${p}px ${u}`}setTextRenderingMode(e,n){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=n}setTextRise(e,n){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=n}moveText(e,n,r){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,n,r){this.setLeading(e,-r),this.moveText(e,n,r)}setTextMatrix(e,n){this.dependencyTracker?.recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=n,r.textMatrixScale=Math.hypot(n[0],n[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#i(e,n,r){const s=new Path2D;return s.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(n)),s}paintChar(e,n,r,s,a,o){const u=this.ctx,h=this.current,d=h.font,p=h.textRenderingMode,g=h.fontSize/h.fontSizeScale,y=p&Xn.FILL_STROKE_MASK,b=!!(p&Xn.ADD_TO_PATH_FLAG),w=h.patternFill&&!d.missingFile,x=h.patternStroke&&!d.missingFile;let S;if((d.disableFontFace||b||w||x)&&!d.missingFile&&(S=d.getPathGenerator(this.commonObjs,n)),S&&(d.disableFontFace||w||x)){u.save(),u.translate(r,s),u.scale(g,-g),this.dependencyTracker?.recordCharacterBBox(e,u,d);let E;if(y===Xn.FILL||y===Xn.FILL_STROKE)if(a){E=u.getTransform(),u.setTransform(...a);const k=this.#i(S,E,a);u.fill(k)}else u.fill(S);if(y===Xn.STROKE||y===Xn.FILL_STROKE)if(o){E||=u.getTransform(),u.setTransform(...o);const{a:k,b:N,c:M,d:O}=E,B=Ct.inverseTransform(o),C=Ct.transform([k,N,M,O,0,0],B);Ct.singularValueDecompose2dScale(C,Qi),u.lineWidth*=Math.max(Qi[0],Qi[1])/g,u.stroke(this.#i(S,E,o))}else u.lineWidth/=g,u.stroke(S);u.restore()}else(y===Xn.FILL||y===Xn.FILL_STROKE)&&(u.fillText(n,r,s),this.dependencyTracker?.recordCharacterBBox(e,u,d,g,r,s,()=>u.measureText(n))),(y===Xn.STROKE||y===Xn.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,u,d,g,r,s,()=>u.measureText(n)).recordDependencies(e,vr.stroke),u.strokeText(n,r,s));b&&((this.pendingTextPaths||=[]).push({transform:tn(u),x:r,y:s,fontSize:g,path:S}),this.dependencyTracker?.recordCharacterBBox(e,u,d,g,r,s))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const n=e.getImageData(0,0,10,10).data;let r=!1;for(let s=3;s<n.length;s+=4)if(n[s]>0&&n[s]<255){r=!0;break}return Jt(this,"isFontSubpixelAAEnabled",r)}showText(e,n){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,vr.showText).resetBBox(e),this.current.textRenderingMode&Xn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,s=r.font;if(s.isType3Font){this.showType3Text(e,n),this.dependencyTracker?.recordShowTextOperation(e);return}const a=r.fontSize;if(a===0){this.dependencyTracker?.recordOperation(e);return}const o=this.ctx,u=r.fontSizeScale,h=r.charSpacing,d=r.wordSpacing,p=r.fontDirection,g=r.textHScale*p,y=n.length,b=s.vertical,w=b?1:-1,x=s.defaultVMetrics,S=a*r.fontMatrix[0],E=r.textRenderingMode===Xn.FILL&&!s.disableFontFace&&!r.patternFill;o.save(),r.textMatrix&&o.transform(...r.textMatrix),o.translate(r.x,r.y+r.textRise),p>0?o.scale(g,-1):o.scale(g,1);let k,N;if(r.patternFill){o.save();const R=r.fillColor.getPattern(o,this,ws(o),Kn.FILL,e);k=tn(o),o.restore(),o.fillStyle=R}if(r.patternStroke){o.save();const R=r.strokeColor.getPattern(o,this,ws(o),Kn.STROKE,e);N=tn(o),o.restore(),o.strokeStyle=R}let M=r.lineWidth;const O=r.textMatrixScale;if(O===0||M===0){const R=r.textRenderingMode&Xn.FILL_STROKE_MASK;(R===Xn.STROKE||R===Xn.FILL_STROKE)&&(M=this.getSinglePixelWidth())}else M/=O;if(u!==1&&(o.scale(u,u),M/=u),o.lineWidth=M,s.isInvalidPDFjsFont){const R=[];let L=0;for(const U of n)R.push(U.unicode),L+=U.width;const F=R.join("");if(o.fillText(F,0,0),this.dependencyTracker!==null){const U=o.measureText(F);this.dependencyTracker.recordBBox(e,this.ctx,-U.actualBoundingBoxLeft,U.actualBoundingBoxRight,-U.actualBoundingBoxAscent,U.actualBoundingBoxDescent).recordShowTextOperation(e)}r.x+=L*S*g,o.restore(),this.compose();return}let B=0,C;for(C=0;C<y;++C){const R=n[C];if(typeof R=="number"){B+=w*R*a/1e3;continue}let L=!1;const F=(R.isSpace?d:0)+h,U=R.fontChar,$=R.accent;let V,G,et=R.width;if(b){const nt=R.vmetric||x,mt=-(R.vmetric?nt[1]:et*.5)*S,bt=nt[2]*S;et=nt?-nt[0]:et,V=mt/u,G=(B+bt)/u}else V=B/u,G=0;let z;if(s.remeasure&&et>0){z=o.measureText(U);const nt=z.width*1e3/a*u;if(et<nt&&this.isFontSubpixelAAEnabled){const mt=et/nt;L=!0,o.save(),o.scale(mt,1),V/=mt}else et!==nt&&(V+=(et-nt)/2e3*a/u)}if(this.contentVisible&&(R.isInFont||s.missingFile)){if(E&&!$)o.fillText(U,V,G),this.dependencyTracker?.recordCharacterBBox(e,o,z?{bbox:null}:s,a/u,V,G,()=>z??o.measureText(U));else if(this.paintChar(e,U,V,G,k,N),$){const nt=V+a*$.offset.x/u,mt=G-a*$.offset.y/u;this.paintChar(e,$.fontChar,nt,mt,k,N)}}const Y=b?et*S-F*p:et*S+F*p;B+=Y,L&&o.restore()}b?r.y-=B:r.x+=B*g,o.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,n){const r=this.ctx,s=this.current,a=s.font,o=s.fontSize,u=s.fontDirection,h=a.vertical?1:-1,d=s.charSpacing,p=s.wordSpacing,g=s.textHScale*u,y=s.fontMatrix||P_,b=n.length,w=s.textRenderingMode===Xn.INVISIBLE;let x,S,E,k;if(w||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),s.textMatrix&&r.transform(...s.textMatrix),r.translate(s.x,s.y+s.textRise),r.scale(g,u);const N=this.dependencyTracker;for(this.dependencyTracker=N?new Mm(N,e):null,x=0;x<b;++x){if(S=n[x],typeof S=="number"){k=h*S*o/1e3,this.ctx.translate(k,0),s.x+=k*g;continue}const M=(S.isSpace?p:0)+d,O=a.charProcOperatorList[S.operatorListId];O?this.contentVisible&&(this.save(),r.scale(o,o),r.transform(...y),this.executeOperatorList(O),this.restore()):Xt(`Type3 character "${S.operatorListId}" is not available.`);const B=[S.width,0];Ct.applyTransform(B,y),E=B[0]*o+M,r.translate(E,0),s.x+=E*g}r.restore(),N&&(this.dependencyTracker=N)}setCharWidth(e,n,r){}setCharWidthAndBounds(e,n,r,s,a,o,u){const h=new Path2D;h.rect(s,a,o-s,u-a),this.ctx.clip(h),this.dependencyTracker?.recordBBox(e,this.ctx,s,o,a,u).recordClipBox(e,this.ctx,s,o,a,u),this.endPath(e)}getColorN_Pattern(e,n){let r;if(n[0]==="TilingPattern"){const s=this.baseTransform||tn(this.ctx),a={createCanvasGraphics:(o,u)=>new ru(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Mm(this.dependencyTracker,u,!0):null)};r=new P1(n,this.ctx,a,s)}else r=this._getPattern(e,n[1],n[2]);return r}setStrokeColorN(e,...n){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,n),this.current.patternStroke=!0}setFillColorN(e,...n){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,n),this.current.patternFill=!0}setStrokeRGBColor(e,n){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=n,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,n){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=n,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,n,r=null){let s;return this.cachedPatterns.has(n)?s=this.cachedPatterns.get(n):(s=bX(this.getObject(e,n)),this.cachedPatterns.set(n,s)),r&&(s.matrix=r),s}shadingFill(e,n){if(!this.contentVisible)return;const r=this.ctx;this.save(e);const s=this._getPattern(e,n);r.fillStyle=s.getPattern(r,this,ws(r),Kn.SHADING,e);const a=ws(r);if(a){const{width:o,height:u}=r.canvas,h=Yc.slice();Ct.axialAlignedBoundingBox([0,0,o,u],a,h);const[d,p,g,y]=h;this.ctx.fillRect(d,p,g-d,y-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,vr.transform).recordDependencies(e,vr.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Fe("Should not call beginInlineImage")}beginImageData(){Fe("Should not call beginImageData")}paintFormXObjectBegin(e,n,r){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),n&&this.transform(e,...n),this.baseTransform=tn(this.ctx),r)){Ct.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[s,a,o,u]=r,h=new Path2D;h.rect(s,a,o-s,u-a),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(e,this.ctx,s,o,a,u),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,n){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;n.isolated||wy("TODO: Support non-isolated groups."),n.knockout&&Xt("Knockout groups not supported.");const s=tn(r);if(n.matrix&&r.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let a=Yc.slice();Ct.axialAlignedBoundingBox(n.bbox,tn(r),a);const o=[0,0,r.canvas.width,r.canvas.height];a=Ct.intersect(a,o)||[0,0,0,0];const u=Math.floor(a[0]),h=Math.floor(a[1]),d=Math.max(Math.ceil(a[2])-u,1),p=Math.max(Math.ceil(a[3])-h,1);this.current.startNewPathAndClipBox([0,0,d,p]);let g="groupAt"+this.groupLevel;n.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,d,p),b=y.context;b.translate(-u,-h),b.transform(...s);let w=new Path2D;const[x,S,E,k]=n.bbox;if(w.rect(x,S,E-x,k-S),n.matrix){const N=new Path2D;N.addPath(w,new DOMMatrix(n.matrix)),w=N}b.clip(w),n.smask&&this.smaskStack.push({canvas:y.canvas,context:b,offsetX:u,offsetY:h,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}),(!n.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(u,h),r.save()),Kh(r,b),this.ctx=b,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,n){if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),n.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=tn(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const o=Yc.slice();Ct.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],a,o),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,n,r,s,a,o){if(this.#t(),Tg(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const u=r[2]-r[0],h=r[3]-r[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=r[0],s[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=u,r[3]=h,Ct.singularValueDecompose2dScale(tn(this.ctx),Qi);const{viewportScale:d}=this,p=Math.ceil(u*this.outputScaleX*d),g=Math.ceil(h*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(p,g);const{canvas:y,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(n,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(Qi[0],0,0,-Qi[1],0,h*Qi[1]),Tg(this.ctx)}else{Tg(this.ctx),this.endPath(e);const d=new Path2D;d.rect(r[0],r[1],u,h),this.ctx.clip(d)}}this.current=new iR(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...s),this.transform(e,...a)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,n){if(!this.contentVisible)return;const r=n.count;n=this.getObject(e,n.data,n),n.count=r;const s=this.ctx,a=this._createMaskCanvas(e,n),o=a.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,a.offsetX,a.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,a.offsetX,a.offsetX+o.width,a.offsetY,a.offsetY+o.height).recordOperation(e),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,n,r,s=0,a=0,o,u){if(!this.contentVisible)return;n=this.getObject(e,n.data,n);const h=this.ctx;h.save();const d=tn(h);h.transform(r,s,a,o,0,0);const p=this._createMaskCanvas(e,n);h.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]),this.dependencyTracker?.resetBBox(e);for(let g=0,y=u.length;g<y;g+=2){const b=Ct.transform(d,[r,s,a,o,u[g],u[g+1]]);h.drawImage(p.canvas,b[4],b[5]),this.dependencyTracker?.recordBBox(e,this.ctx,b[4],b[4]+p.canvas.width,b[5],b[5]+p.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,n){if(!this.contentVisible)return;const r=this.ctx,s=this.current.fillColor,a=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,vr.transformAndFill);for(const o of n){const{data:u,width:h,height:d,transform:p}=o,g=this.cachedCanvases.getCanvas("maskCanvas",h,d),y=g.context;y.save();const b=this.getObject(e,u,o);sR(y,b),y.globalCompositeOperation="source-in",y.fillStyle=a?s.getPattern(y,this,ws(r),Kn.FILL,e):s,y.fillRect(0,0,h,d),y.restore(),r.save(),r.transform(...p),r.scale(1,-1),Sg(r,g.canvas,0,0,h,d,0,-1,1,1),this.dependencyTracker?.recordBBox(e,r,0,h,0,d),r.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,n){if(!this.contentVisible)return;const r=this.getObject(e,n);if(!r){Xt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,n,r,s,a){if(!this.contentVisible)return;const o=this.getObject(e,n);if(!o){Xt("Dependent image isn't ready yet");return}const u=o.width,h=o.height,d=[];for(let p=0,g=a.length;p<g;p+=2)d.push({transform:[r,0,0,s,a[p],a[p+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(e,o,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:n,width:r,height:s}=e,a=this.cachedCanvases.getCanvas("inlineImage",r,s),o=a.context;return o.filter=this.current.transferMaps,o.drawImage(n,0,0),o.filter="none",a.canvas}paintInlineImageXObject(e,n){if(!this.contentVisible)return;const r=n.width,s=n.height,a=this.ctx;this.save(e);const{filter:o}=a;o!=="none"&&o!==""&&(a.filter="none"),a.scale(1/r,-1/s);let u;if(n.bitmap)u=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)u=n;else{const p=this.cachedCanvases.getCanvas("inlineImage",r,s).context;rR(p,n),u=this.applyTransferMapsToCanvas(p)}const h=this._scaleImage(u,ws(a));a.imageSmoothingEnabled=aR(tn(a),n.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,a,0,r,-s,0).recordDependencies(e,vr.imageXObject).recordOperation(e),Sg(a,h.img,0,0,h.paintWidth,h.paintHeight,0,-s,r,s),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,n,r){if(!this.contentVisible)return;const s=this.ctx;let a;if(n.bitmap)a=n.bitmap;else{const o=n.width,u=n.height,d=this.cachedCanvases.getCanvas("inlineImage",o,u).context;rR(d,n),a=this.applyTransferMapsToCanvas(d)}this.dependencyTracker?.resetBBox(e);for(const o of r)s.save(),s.transform(...o.transform),s.scale(1,-1),Sg(s,a,o.x,o.y,o.w,o.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,s,0,1,-1,0),s.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,vr.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,n){}markPointProps(e,n,r){}beginMarkedContent(e,n){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,n,r){this.dependencyTracker?.beginMarkedContent(e),n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,n,r){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const a=this.ctx;this.pendingClip?(s||(this.pendingClip===oR?a.clip(n,"evenodd"):a.clip(n)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=tn(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const n=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,s)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:n,b:r,c:s,d:a}=this.ctx.getTransform();let o,u;if(r===0&&s===0){const h=Math.abs(n),d=Math.abs(a);if(h===d)if(e===0)o=u=1/h;else{const p=h*e;o=u=p<1?1/p:1}else if(e===0)o=1/h,u=1/d;else{const p=h*e,g=d*e;o=p<1?1/p:1,u=g<1?1/g:1}}else{const h=Math.abs(n*a-r*s),d=Math.hypot(n,r),p=Math.hypot(s,a);if(e===0)o=p/h,u=d/h;else{const g=e*h;o=p>g?p/g:1,u=d>g?d/g:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e,n){const{ctx:r,current:{lineWidth:s}}=this,[a,o]=this.getScaleForStroking();if(a===o){r.lineWidth=(s||1)*a,r.stroke(e);return}const u=r.getLineDash();n&&r.save(),r.scale(a,o),b0.a=1/a,b0.d=1/o;const h=new Path2D;if(h.addPath(e,b0),u.length>0){const d=Math.max(a,o);r.setLineDash(u.map(p=>p/d)),r.lineDashOffset/=d}r.lineWidth=s||1,r.stroke(h),n&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const i in Au)ru.prototype[i]!==void 0&&(ru.prototype[Au[i]]=ru.prototype[i]);class su{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const n=new TextEncoder,r={};let s=0;for(const d of su.strings){const p=n.encode(e[d]);r[d]=p,s+=4+p.length}const a=new ArrayBuffer(s),o=new Uint8Array(a),u=new DataView(a);let h=0;for(const d of su.strings){const p=r[d],g=p.length;u.setUint32(h,g),o.set(p,h+4),h+=4+g}return fe(h===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}constructor(e){this.#t=e,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(e){fe(e<su.strings.length,"Invalid string index");let n=0;for(let s=0;s<e;s++)n+=this.#e.getUint32(n)+4;const r=this.#e.getUint32(n);return this.#i.decode(new Uint8Array(this.#t,n+4,r))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class au{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(e){const n=new TextEncoder,r={};let s=0;for(const y of au.strings){const b=n.encode(e[y]);r[y]=b,s+=4+b.length}s+=4;let a,o,u=1+s;e.style&&(a=n.encode(e.style.style),o=n.encode(e.style.weight),u+=4+a.length+4+o.length);const h=new ArrayBuffer(u),d=new Uint8Array(h),p=new DataView(h);let g=0;p.setUint8(g++,e.guessFallback?1:0),p.setUint32(g,0),g+=4,s=0;for(const y of au.strings){const b=r[y],w=b.length;s+=4+w,p.setUint32(g,w),d.set(b,g+4),g+=4+w}return p.setUint32(g-s-4,s),e.style&&(p.setUint32(g,a.length),d.set(a,g+4),g+=4+a.length,p.setUint32(g,o.length),d.set(o,g+4),g+=4+o.length),fe(g<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(g)}constructor(e){this.#t=e,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(e){fe(e<au.strings.length,"Invalid string index");let n=5;for(let s=0;s<e;s++)n+=this.#e.getUint32(n)+4;const r=this.#e.getUint32(n);return this.#i.decode(new Uint8Array(this.#t,n+4,r))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#e.getUint32(e);const n=this.#e.getUint32(e),r=this.#i.decode(new Uint8Array(this.#t,e+4,n));e+=4+n;const s=this.#e.getUint32(e),a=this.#i.decode(new Uint8Array(this.#t,e+4,s));return{style:r,weight:a}}}class Pe{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#a=this.#n+1+6;#r;#s;#o;constructor({data:e,extra:n}){this.#r=e,this.#s=new TextDecoder,this.#o=new DataView(this.#r),n&&Object.assign(this,n)}#c(e){fe(e<Pe.bools.length,"Invalid boolean index");const n=Math.floor(e/4),r=e*2%8,s=this.#o.getUint8(n)>>r&3;return s===0?void 0:s===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return fe(e<Pe.numbers.length,"Invalid number index"),this.#o.getFloat64(Pe.#t+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=Pe.#e;if(this.#o.getUint8(e)===0)return;e+=1;const r=[];for(let s=0;s<4;s++)r.push(this.#o.getInt16(e,!0)),e+=2;return r}get fontMatrix(){let e=Pe.#i;if(this.#o.getUint8(e)===0)return;e+=1;const r=[];for(let s=0;s<6;s++)r.push(this.#o.getFloat64(e,!0)),e+=8;return r}get defaultVMetrics(){let e=Pe.#n;if(this.#o.getUint8(e)===0)return;e+=1;const r=[];for(let s=0;s<3;s++)r.push(this.#o.getInt16(e,!0)),e+=2;return r}#d(e){fe(e<Pe.strings.length,"Invalid string index");let n=Pe.#a+4;for(let a=0;a<e;a++)n+=this.#o.getUint32(n)+4;const r=this.#o.getUint32(n),s=new Uint8Array(r);return s.set(new Uint8Array(this.#r,n+4,r)),this.#s.decode(s)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let e=Pe.#a;const n=this.#o.getUint32(e);e+=4+n;const r=this.#o.getUint32(e);e+=4+r;const s=this.#o.getUint32(e);e+=4+s;const a=this.#o.getUint32(e);if(a!==0)return new Uint8Array(this.#r,e+4,a)}clearData(){let e=Pe.#a;const n=this.#o.getUint32(e);e+=4+n;const r=this.#o.getUint32(e);e+=4+r;const s=this.#o.getUint32(e);e+=4+s;const a=this.#o.getUint32(e);new Uint8Array(this.#r,e+4,a).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=Pe.#a;const n=this.#o.getUint32(e);e+=4+n;const r=this.#o.getUint32(e);e+=4+r;const s=this.#o.getUint32(e);if(s===0)return null;const a=new Uint8Array(s);return a.set(new Uint8Array(this.#r,e+4,s)),new su(a.buffer)}get systemFontInfo(){let e=Pe.#a;const n=this.#o.getUint32(e);e+=4+n;const r=this.#o.getUint32(e);if(r===0)return null;const s=new Uint8Array(r);return s.set(new Uint8Array(this.#r,e+4,r)),new au(s.buffer)}static write(e){const n=e.systemFontInfo?au.write(e.systemFontInfo):null,r=e.cssFontInfo?su.write(e.cssFontInfo):null,s=new TextEncoder,a={};let o=0;for(const x of Pe.strings)a[x]=s.encode(e[x]),o+=4+a[x].length;const u=Pe.#a+4+o+4+(n?n.byteLength:0)+4+(r?r.byteLength:0)+4+(e.data?e.data.length:0),h=new ArrayBuffer(u),d=new Uint8Array(h),p=new DataView(h);let g=0;const y=Pe.bools.length;let b=0,w=0;for(let x=0;x<y;x++){const S=e[Pe.bools[x]];b|=(S===void 0?0:S?2:1)<<w,w+=2,(w===8||x===y-1)&&(p.setUint8(g++,b),b=0,w=0)}fe(g===Pe.#t,"FontInfo.write: Boolean properties offset mismatch");for(const x of Pe.numbers)p.setFloat64(g,e[x]),g+=8;if(fe(g===Pe.#e,"FontInfo.write: Number properties offset mismatch"),e.bbox){p.setUint8(g++,4);for(const x of e.bbox)p.setInt16(g,x,!0),g+=2}else p.setUint8(g++,0),g+=8;if(fe(g===Pe.#i,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){p.setUint8(g++,6);for(const x of e.fontMatrix)p.setFloat64(g,x,!0),g+=8}else p.setUint8(g++,0),g+=48;if(fe(g===Pe.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){p.setUint8(g++,1);for(const x of e.defaultVMetrics)p.setInt16(g,x,!0),g+=2}else p.setUint8(g++,0),g+=6;fe(g===Pe.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(Pe.#a,0),g+=4;for(const x of Pe.strings){const S=a[x],E=S.length;p.setUint32(g,E),d.set(S,g+4),g+=4+E}if(p.setUint32(Pe.#a,g-Pe.#a-4),!n)p.setUint32(g,0),g+=4;else{const x=n.byteLength;p.setUint32(g,x),fe(g+4+x<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),d.set(new Uint8Array(n),g+4),g+=4+x}if(!r)p.setUint32(g,0),g+=4;else{const x=r.byteLength;p.setUint32(g,x),fe(g+4+x<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),d.set(new Uint8Array(r),g+4),g+=4+x}return e.data===void 0?(p.setUint32(g,0),g+=4):(p.setUint32(g,e.data.length),d.set(e.data,g+4),g+=4+e.data.length),fe(g<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(g)}}class So{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#t=e}static get workerSrc(){return this.#e}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#e=e}}class TX{#t;#e;constructor({parsedData:e,rawData:n}){this.#t=e,this.#e=n}getRaw(){return this.#e}get(e){return this.#t.get(e)??null}[Symbol.iterator](){return this.#t.entries()}}const Wc=Symbol("INTERNAL");class CX{#t=!1;#e=!1;#i=!1;#n=!0;constructor(e,{name:n,intent:r,usage:s,rbGroups:a}){this.#t=!!(e&Yi.DISPLAY),this.#e=!!(e&Yi.PRINT),this.name=n,this.intent=r,this.usage=s,this.rbGroups=a}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:e,view:n}=this.usage;return this.#t?n?.viewState!=="OFF":this.#e?e?.printState!=="OFF":!0}_setVisible(e,n,r=!1){e!==Wc&&Fe("Internal method `_setVisible` called."),this.#i=r,this.#n=n}}class RX{#t=null;#e=new Map;#i=null;#n=null;constructor(e,n=Yi.DISPLAY){if(this.renderingIntent=n,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const r of e.groups)this.#e.set(r.id,new CX(n,r));if(e.baseState==="OFF")for(const r of this.#e.values())r._setVisible(Wc,!1);for(const r of e.on)this.#e.get(r)._setVisible(Wc,!0);for(const r of e.off)this.#e.get(r)._setVisible(Wc,!1);this.#i=this.getHash()}}#a(e){const n=e.length;if(n<2)return!0;const r=e[0];for(let s=1;s<n;s++){const a=e[s];let o;if(Array.isArray(a))o=this.#a(a);else if(this.#e.has(a))o=this.#e.get(a).visible;else return Xt(`Optional content group not found: ${a}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"}isVisible(e){if(this.#e.size===0)return!0;if(!e)return wy("Optional content group not defined."),!0;if(e.type==="OCG")return this.#e.has(e.id)?this.#e.get(e.id).visible:(Xt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#a(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const n of e.ids){if(!this.#e.has(n))return Xt(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const n of e.ids){if(!this.#e.has(n))return Xt(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const n of e.ids){if(!this.#e.has(n))return Xt(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const n of e.ids){if(!this.#e.has(n))return Xt(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!1}return!0}return Xt(`Unknown optional content policy ${e.policy}.`),!0}return Xt(`Unknown group type ${e.type}.`),!0}setVisibility(e,n=!0,r=!0){const s=this.#e.get(e);if(!s){Xt(`Optional content group not found: ${e}`);return}if(r&&n&&s.rbGroups.length)for(const a of s.rbGroups)for(const o of a)o!==e&&this.#e.get(o)?._setVisible(Wc,!1,!0);s._setVisible(Wc,!!n,!0),this.#t=null}setOCGState({state:e,preserveRB:n}){let r;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":r=s;continue}const a=this.#e.get(s);if(a)switch(r){case"ON":this.setVisibility(s,!0,n);break;case"OFF":this.setVisibility(s,!1,n);break;case"Toggle":this.setVisibility(s,!a.visible,n);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(e){return this.#e.get(e)||null}getHash(){if(this.#t!==null)return this.#t;const e=new EM;for(const[n,r]of this.#e)e.update(`${n}:${r.visible}`);return this.#t=e.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class IX{constructor(e,{disableRange:n=!1,disableStream:r=!1}){fe(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:a,progressiveDone:o,contentDispositionFilename:u}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=u,a?.length>0){const h=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!n,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((h,d)=>{this._onReceiveData({begin:h,chunk:d})}),e.addProgressListener((h,d)=>{this._onProgress({loaded:h,total:d})}),e.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:n}){const r=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const s=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(r),!0)});fe(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const n=this._rangeReaders.indexOf(e);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){fe(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new DX(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new kX(this,e,n);return this._pdfDataRangeTransport.requestDataRange(e,n),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class DX{constructor(e,n,r=!1,s=null){this._stream=e,this._done=r||!1,this._filename=xy(s)?s:null,this._queuedChunks=n||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class kX{constructor(e,n,r){this._stream=e,this._begin=n,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function NX(i){let e=!0,n=r("filename\\*","i").exec(i);if(n){n=n[1];let p=u(n);return p=unescape(p),p=h(p),p=d(p),a(p)}if(n=o(i),n){const p=d(n);return a(p)}if(n=r("filename","i").exec(i),n){n=n[1];let p=u(n);return p=d(p),a(p)}function r(p,g){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function s(p,g){if(p){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const y=new TextDecoder(p,{fatal:!0}),b=xf(g);g=y.decode(b),e=!1}catch{}}return g}function a(p){return e&&/[\x80-\xff]/.test(p)&&(p=s("utf-8",p),e&&(p=s("iso-8859-1",p))),p}function o(p){const g=[];let y;const b=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=b.exec(p))!==null;){let[,x,S,E]=y;if(x=parseInt(x,10),x in g){if(x===0)break;continue}g[x]=[S,E]}const w=[];for(let x=0;x<g.length&&x in g;++x){let[S,E]=g[x];E=u(E),S&&(E=unescape(E),x===0&&(E=h(E))),w.push(E)}return w.join("")}function u(p){if(p.startsWith('"')){const g=p.slice(1).split('\\"');for(let y=0;y<g.length;++y){const b=g[y].indexOf('"');b!==-1&&(g[y]=g[y].slice(0,b),g.length=y+1),g[y]=g[y].replaceAll(/\\(.)/g,"$1")}p=g.join('"')}return p}function h(p){const g=p.indexOf("'");if(g===-1)return p;const y=p.slice(0,g),w=p.slice(g+1).replace(/^[^']*'/,"");return s(y,w)}function d(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,y,b,w){if(b==="q"||b==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,S){return String.fromCharCode(parseInt(S,16))}),s(y,w);try{w=atob(w)}catch{}return s(y,w)})}return""}function NM(i,e){const n=new Headers;if(!i||!e||typeof e!="object")return n;for(const r in e){const s=e[r];s!==void 0&&n.append(r,s)}return n}function Ey(i){return URL.parse(i)?.origin??null}function MM({responseHeaders:i,isHttp:e,rangeChunkSize:n,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(i.get("Content-Length"),10);return!Number.isInteger(a)||(s.suggestedLength=a,a<=2*n)||r||!e||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function PM(i){const e=i.get("Content-Disposition");if(e){let n=NX(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(xy(n))return n}return null}function Rf(i,e){return new qd(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i,i===404||i===0&&e.startsWith("file:"))}function OM(i){return i===200||i===206}function LM(i,e,n){return{method:"GET",headers:i,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function BM(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Xt(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class MX{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=NM(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return fe(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PX(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new OX(this,e,n);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class PX{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const n=e.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const r=new Headers(e.headers),s=n.url;fetch(s,LM(r,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=Ey(a.url),!OM(a.status))throw Rf(a.status,s);this._reader=a.body.getReader(),this._headersCapability.resolve();const o=a.headers,{allowRangeRequests:u,suggestedLength:h}=MM({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=PM(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ca("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:BM(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class OX{constructor(e,n,r){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${n}-${r-1}`);const o=s.url;fetch(o,LM(a,this._withCredentials,this._abortController)).then(u=>{const h=Ey(u.url);if(h!==e._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${e._responseOrigin}".`);if(!OM(u.status))throw Rf(u.status,o);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:BM(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const v0=200,_0=206;function LX(i){const e=i.response;return typeof e!="string"?e:xf(e).buffer}class BX{_responseOrigin=null;constructor({url:e,httpHeaders:n,withCredentials:r}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=NM(this.isHttp,n),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const n=new XMLHttpRequest,r=this.currXhrId++,s=this.pendingRequests[r]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[a,o]of this.headers)n.setRequestHeader(a,o);return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=_0):s.expectedStatus=v0,n.responseType="arraybuffer",fe(e.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{e.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,r),n.onprogress=this.onProgress.bind(this,r),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,n.send(null),r}onProgress(e,n){const r=this.pendingRequests[e];r&&r.onProgress?.(n)}onStateChange(e,n){const r=this.pendingRequests[e];if(!r)return;const s=r.xhr;if(s.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){r.onError(s.status);return}const a=s.status||v0;if(!(a===v0&&r.expectedStatus===_0)&&a!==r.expectedStatus){r.onError(s.status);return}const u=LX(s);if(a===_0){const h=s.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);d?r.onDone({begin:parseInt(d[1],10),chunk:u}):(Xt('Missing or invalid "Content-Range" header.'),r.onError(0))}else u?r.onDone({begin:0,chunk:u}):r.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const n=this.pendingRequests[e].xhr;delete this.pendingRequests[e],n.abort()}}class FX{constructor(e){this._source=e,this._manager=new BX(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const n=this._rangeRequestReaders.indexOf(e);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return fe(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new UX(this._manager,this._source),this._fullRequestReader}getRangeReader(e,n){const r=new VX(this._manager,e,n);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class UX{constructor(e,n){this._manager=e,this._url=n.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,n=this._manager.getRequestXhr(e);this._manager._responseOrigin=Ey(n.responseURL);const r=n.getAllResponseHeaders(),s=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...d]=u.split(": ");return[h,d.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:o}=MM({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=PM(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Rf(e,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class VX{constructor(e,n,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:n,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=Ey(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const n=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=Rf(e,this._url);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const jX=/^[a-z][a-z0-9\-+.]+:/i;function zX(i){if(jX.test(i))return new URL(i);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(i))}class HX{constructor(e){this.source=e,this.url=zX(e.url),fe(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return fe(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new $X(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new GX(this,e,n);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class $X{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=e.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=Rf(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ca("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class GX{constructor(e,n,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:n,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Qh=Symbol("INITIAL_DATA");class FM{#t=Object.create(null);#e(e){return this.#t[e]||={...Promise.withResolvers(),data:Qh}}get(e,n=null){if(n){const s=this.#e(e);return s.promise.then(()=>n(s.data)),null}const r=this.#t[e];if(!r||r.data===Qh)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const n=this.#t[e];return!!n&&n.data!==Qh}delete(e){const n=this.#t[e];return!n||n.data===Qh?!1:(delete this.#t[e],!0)}resolve(e,n=null){const r=this.#e(e);r.data=n,r.resolve()}clear(){for(const e in this.#t){const{data:n}=this.#t[e];n?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const e in this.#t){const{data:n}=this.#t[e];n!==Qh&&(yield[e,n])}}}const qX=1e5,lR=30;let Xd=class wr{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#r=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#p=null;#u=[];#g=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#S=new WeakMap;static#x=null;static#_=new Set;constructor({textContentSource:e,container:n,viewport:r}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(h){h.enqueue(e),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=n,this.#h=r.scale*Yr.pixelRatio,this.#d=r.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:a,pageX:o,pageY:u}=r.rawDims;this.#y=[1,0,0,-1,-o,u+a],this.#o=s,this.#s=a,wr.#I(),Oo(n,r),this.#t.promise.finally(()=>{wr.#_.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:n}=Un.platform;return Jt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&n?"Calibri, ":""}sans-serif`],["monospace",`${e&&n?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:n,done:r})=>{if(r){this.#t.resolve();return}this.#a??=n.lang,Object.assign(this.#f,n.styles),this.#C(n.items),e()},this.#t.reject)};return this.#c=this.#p.getReader(),wr.#_.add(this),e(),this.#t.promise}update({viewport:e,onBefore:n=null}){const r=e.scale*Yr.pixelRatio,s=e.rotation;if(s!==this.#d&&(n?.(),this.#d=s,Oo(this.#l,{rotation:s})),r!==this.#h){n?.(),this.#h=r;const a={div:null,properties:null,ctx:wr.#D(this.#a)};for(const o of this.#u)a.properties=this.#g.get(o),a.div=o,this.#E(a)}}cancel(){const e=new Ca("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#t.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#C(e){if(this.#i)return;this.#r.ctx??=wr.#D(this.#a);const n=this.#u,r=this.#m;for(const s of e){if(n.length>qX){Xt("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const a=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),s.id&&this.#e.setAttribute("id",`${s.id}`),a.append(this.#e)}else s.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}r.push(s.str),this.#A(s)}}#A(e){const n=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#u.push(n);const s=Ct.transform(this.#y,e.transform);let a=Math.atan2(s[1],s[0]);const o=this.#f[e.fontName];o.vertical&&(a+=Math.PI/2);let u=this.#n&&o.fontSubstitution||o.fontFamily;u=wr.fontFamilyMap.get(u)||u;const h=Math.hypot(s[2],s[3]),d=h*wr.#B(u,o,this.#a);let p,g;a===0?(p=s[4],g=s[5]-d):(p=s[4]+d*Math.sin(a),g=s[5]-d*Math.cos(a));const y="calc(var(--total-scale-factor) *",b=n.style;this.#e===this.#l?(b.left=`${(100*p/this.#o).toFixed(2)}%`,b.top=`${(100*g/this.#s).toFixed(2)}%`):(b.left=`${y}${p.toFixed(2)}px)`,b.top=`${y}${g.toFixed(2)}px)`),b.fontSize=`${y}${(wr.#x*h).toFixed(2)}px)`,b.fontFamily=u,r.fontSize=h,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,this.#n&&(n.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),a!==0&&(r.angle=a*(180/Math.PI));let w=!1;if(e.str.length>1)w=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const x=Math.abs(e.transform[0]),S=Math.abs(e.transform[3]);x!==S&&Math.max(x,S)/Math.min(x,S)>1.5&&(w=!0)}if(w&&(r.canvasWidth=o.vertical?e.height:e.width),this.#g.set(n,r),this.#r.div=n,this.#r.properties=r,this.#E(this.#r),r.hasText&&this.#e.append(n),r.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this.#e.append(x)}}#E(e){const{div:n,properties:r,ctx:s}=e,{style:a}=n;let o="";if(wr.#x>1&&(o=`scale(${1/wr.#x})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:u}=a,{canvasWidth:h,fontSize:d}=r;wr.#R(s,d*this.#h,u);const{width:p}=s.measureText(n.textContent);p>0&&(o=`scaleX(${h*this.#h/p}) ${o}`)}r.angle!==0&&(o=`rotate(${r.angle}deg) ${o}`),o.length>0&&(a.transform=o)}static cleanup(){if(!(this.#_.size>0)){this.#v.clear();for(const{canvas:e}of this.#b.values())e.remove();this.#b.clear()}}static#D(e=null){let n=this.#b.get(e||="");if(!n){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),n=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(e,n),this.#S.set(n,{size:0,family:""})}return n}static#R(e,n,r){const s=this.#S.get(e);n===s.size&&r===s.family||(e.font=`${n}px ${r}`,s.size=n,s.family=r)}static#I(){if(this.#x!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#x=e.getBoundingClientRect().height,e.remove()}static#B(e,n,r){const s=this.#v.get(e);if(s)return s;const a=this.#D(r);a.canvas.width=a.canvas.height=lR,this.#R(a,lR,e);const o=a.measureText(""),u=o.fontBoundingBoxAscent,h=Math.abs(o.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let d=.8;return u?d=u/(u+h):(Un.platform.isFirefox&&Xt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?d=n.ascent:n.descent&&(d=1+n.descent)),this.#v.set(e,d),d}};const WX=100;function Ql(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const e=new O1,{docId:n}=e,r=i.url?eX(i.url):null,s=i.data?nX(i.data):null,a=i.httpHeaders||null,o=i.withCredentials===!0,u=i.password??null,h=i.range instanceof L1?i.range:null,d=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let p=i.worker instanceof xu?i.worker:null;const g=i.verbosity,y=typeof i.docBaseUrl=="string"&&!Sf(i.docBaseUrl)?i.docBaseUrl:null,b=wg(i.cMapUrl),w=i.cMapPacked!==!1,x=i.CMapReaderFactory||(bi?cX:X2),S=wg(i.iccUrl),E=wg(i.standardFontDataUrl),k=i.StandardFontDataFactory||(bi?uX:Y2),N=wg(i.wasmUrl),M=i.WasmFactory||(bi?hX:K2),O=i.stopAtErrors!==!0,B=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,C=i.isEvalSupported!==!1,R=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!bi,L=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!bi&&(Un.platform.isFirefox||!globalThis.chrome),F=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,U=typeof i.disableFontFace=="boolean"?i.disableFontFace:bi,$=i.fontExtraProperties===!0,V=i.enableXfa===!0,G=i.ownerDocument||globalThis.document,et=i.disableRange===!0,z=i.disableStream===!0,Y=i.disableAutoFetch===!0,nt=i.pdfBug===!0,mt=i.CanvasFactory||(bi?lX:sX),bt=i.FilterFactory||(bi?oX:aX),q=i.enableHWA===!0,Z=i.useWasm!==!1,lt=h?h.length:i.length??NaN,ct=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!bi&&!U,At=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(x===X2&&k===Y2&&M===K2&&b&&E&&N&&dd(b,document.baseURI)&&dd(E,document.baseURI)&&dd(N,document.baseURI)),ht=null;LW(g);const yt={canvasFactory:new mt({ownerDocument:G,enableHWA:q}),filterFactory:new bt({docId:n,ownerDocument:G}),cMapReaderFactory:At?null:new x({baseUrl:b,isCompressed:w}),standardFontDataFactory:At?null:new k({baseUrl:E}),wasmFactory:At?null:new M({baseUrl:N})};p||(p=xu.create({verbosity:g,port:So.workerPort}),e._worker=p);const Pt={docId:n,apiVersion:"5.4.296",data:s,password:u,disableAutoFetch:Y,rangeChunkSize:d,length:lt,docBaseUrl:y,enableXfa:V,evaluatorOptions:{maxImageSize:B,disableFontFace:U,ignoreErrors:O,isEvalSupported:C,isOffscreenCanvasSupported:R,isImageDecoderSupported:L,canvasMaxAreaInBytes:F,fontExtraProperties:$,useSystemFonts:ct,useWasm:Z,useWorkerFetch:At,cMapUrl:b,iccUrl:S,standardFontDataUrl:E,wasmUrl:N}},kt={ownerDocument:G,pdfBug:nt,styleElement:ht,loadingParams:{disableAutoFetch:Y,enableXfa:V}};return p.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Gt=p.messageHandler.sendWithPromise("GetDocRequest",Pt,s?[s.buffer]:null);let We;if(h)We=new IX(h,{disableRange:et,disableStream:z});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");const ne=dd(r)?MX:bi?HX:FX;We=new ne({url:r,length:lt,httpHeaders:a,withCredentials:o,rangeChunkSize:d,disableRange:et,disableStream:z})}return Gt.then(ne=>{if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const jt=new fd(n,ne,p.port),ee=new KX(jt,e,We,kt,yt,q);e._transport=ee,jt.send("Ready",null)})}).catch(e._capability.reject),e}class O1{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${O1.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let L1=class{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#a=[];constructor(e,n,r=!1,s=null){this.length=e,this.initialData=n,this.progressiveDone=r,this.contentDispositionFilename=s}addRangeListener(e){this.#a.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#i.push(e)}addProgressiveDoneListener(e){this.#e.push(e)}onDataRange(e,n){for(const r of this.#a)r(e,n)}onDataProgress(e,n){this.#t.promise.then(()=>{for(const r of this.#n)r(e,n)})}onDataProgressiveRead(e){this.#t.promise.then(()=>{for(const n of this.#i)n(e)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const e of this.#e)e()})}transportReady(){this.#t.resolve()}requestDataRange(e,n){Fe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class XX{constructor(e,n){this._pdfInfo=e,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Jt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,n){return this._transport.getAnnotationsByType(e,n)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class YX{#t=!1;constructor(e,n,r,s=!1){this._pageIndex=e,this._pageInfo=n,this._transport=r,this._stats=s?new j2:null,this._pdfBug=s,this.commonObjs=r.commonObjs,this.objs=new FM,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:a=!1}={}){return new Ef({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:n,offsetX:r,offsetY:s,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Jt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:n=e.canvas,viewport:r,intent:s="display",annotationMode:a=Is.ENABLE,transform:o=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:y=!1,recordOperations:b=!1,operationsFilter:w=null}){this._stats?.time("Overall");const x=this._transport.getRenderingIntent(s,a,g,y),{renderingIntent:S,cacheKey:E}=x;this.#t=!1,h||=this._transport.getOptionalContentConfig(S);let k=this._intentStates.get(E);k||(k=Object.create(null),this._intentStates.set(E,k)),k.streamReaderCancelTimeout&&(clearTimeout(k.streamReaderCancelTimeout),k.streamReaderCancelTimeout=null);const N=!!(S&Yi.PRINT);k.displayReadyCapability||(k.displayReadyCapability=Promise.withResolvers(),k.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(x));const M=!!(this._pdfBug&&globalThis.StepperManager?.enabled),O=!this.recordedBBoxes&&(b||M),B=L=>{if(k.renderTasks.delete(C),O){const F=C.gfx?.dependencyTracker.take();F&&(C.stepper&&C.stepper.setOperatorBBoxes(F,C.gfx.dependencyTracker.takeDebugMetadata()),b&&(this.recordedBBoxes=F))}N&&(this.#t=!0),this.#e(),L?(C.capability.reject(L),this._abortOperatorList({intentState:k,reason:L instanceof Error?L:new Error(L)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new Kc({callback:B,params:{canvas:n,canvasContext:e,dependencyTracker:O?new fX(n,k.operatorList.length,M):null,viewport:r,transform:o,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:k.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!N,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:w});(k.renderTasks||=new Set).add(C);const R=C.task;return Promise.all([k.displayReadyCapability.promise,h]).then(([L,F])=>{if(this.destroyed){B();return}if(this._stats?.time("Rendering"),!(F.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:L,optionalContentConfig:F}),C.operatorListChanged()}).catch(B),R}getOperatorList({intent:e="display",annotationMode:n=Is.ENABLE,printAnnotationStorage:r=null,isEditing:s=!1}={}){function a(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const o=this._transport.getRenderingIntent(e,n,r,s,!0);let u=this._intentStates.get(o.cacheKey);u||(u=Object.create(null),this._intentStates.set(o.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=a,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:n===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>Wd.textContent(r));const n=this.streamTextContent(e);return new Promise(function(r,s){function a(){o.read().then(function({value:h,done:d}){if(d){r(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),a()},s)}const o=n.getReader(),u={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const r of n.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#t=!1,Promise.all(e)}cleanup(e=!1){this.#t=!0;const n=this.#e();return e&&n&&(this._stats&&=new j2),n}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(e,n){const r=this._intentStates.get(n);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,n){for(let r=0,s=e.length;r<s;r++)n.operatorList.fnArray.push(e.fnArray[r]),n.operatorList.argsArray.push(e.argsArray[r]);n.operatorList.lastChunk=e.lastChunk,n.operatorList.separateAnnots=e.separateAnnots;for(const r of n.renderTasks)r.operatorListChanged();e.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:e,cacheKey:n,annotationStorageSerializable:r,modifiedIds:s}){const{map:a,transfer:o}=r,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:a,modifiedIds:s},o).getReader(),d=this._intentStates.get(n);d.streamReader=h;const p=()=>{h.read().then(({value:g,done:y})=>{if(y){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,d),p())},g=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const y of d.renderTasks)y.operatorListChanged();this.#e()}if(d.displayReadyCapability)d.displayReadyCapability.reject(g);else if(d.opListReadCapability)d.opListReadCapability.reject(g);else throw g}})};p()}_abortOperatorList({intentState:e,reason:n,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(n instanceof Ay){let s=WX;n.extraDelay>0&&n.extraDelay<1e3&&(s+=n.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},s);return}}if(e.streamReader.cancel(new Ca(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,a]of this._intentStates)if(a===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}var bo,jr,ga,Cl,Hm,Rl,Il,_i,Wg,UM,VM,pd,cu,Xg;const Qe=class Qe{constructor({name:e=null,port:n=null,verbosity:r=BW()}={}){bs(this,_i);bs(this,bo,Promise.withResolvers());bs(this,jr,null);bs(this,ga,null);bs(this,Cl,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,n){if(Ke(Qe,Il).has(n))throw new Error("Cannot use more than one PDFWorker per port.");Ke(Qe,Il).set(n,this),vs(this,_i,UM).call(this,n)}else vs(this,_i,VM).call(this)}get promise(){return Ke(this,bo).promise}get port(){return Ke(this,ga)}get messageHandler(){return Ke(this,jr)}destroy(){this.destroyed=!0,Ke(this,Cl)?.terminate(),Di(this,Cl,null),Ke(Qe,Il).delete(Ke(this,ga)),Di(this,ga,null),Ke(this,jr)?.destroy(),Di(this,jr,null)}static create(e){const n=Ke(this,Il).get(e?.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Qe(e)}static get workerSrc(){if(So.workerSrc)return So.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Jt(this,"_setupFakeWorkerGlobal",(async()=>Ke(this,cu,Xg)?Ke(this,cu,Xg):(await import(this.workerSrc)).WorkerMessageHandler)())}};bo=new WeakMap,jr=new WeakMap,ga=new WeakMap,Cl=new WeakMap,Hm=new WeakMap,Rl=new WeakMap,Il=new WeakMap,_i=new WeakSet,Wg=function(){Ke(this,bo).resolve(),Ke(this,jr).send("configure",{verbosity:this.verbosity})},UM=function(e){Di(this,ga,e),Di(this,jr,new fd("main","worker",e)),Ke(this,jr).on("ready",()=>{}),vs(this,_i,Wg).call(this)},VM=function(){if(Ke(Qe,Rl)||Ke(Qe,cu,Xg)){vs(this,_i,pd).call(this);return}let{workerSrc:e}=Qe;try{Qe._isSameOrigin(window.location,e)||(e=Qe._createCDNWrapper(new URL(e,window.location).href));const n=new Worker(e,{type:"module"}),r=new fd("main","worker",n),s=()=>{a.abort(),r.destroy(),n.terminate(),this.destroyed?Ke(this,bo).reject(new Error("Worker was destroyed")):vs(this,_i,pd).call(this)},a=new AbortController;n.addEventListener("error",()=>{Ke(this,Cl)||s()},{signal:a.signal}),r.on("test",u=>{if(a.abort(),this.destroyed||!u){s();return}Di(this,jr,r),Di(this,ga,n),Di(this,Cl,n),vs(this,_i,Wg).call(this)}),r.on("ready",u=>{if(a.abort(),this.destroyed){s();return}try{o()}catch{vs(this,_i,pd).call(this)}});const o=()=>{const u=new Uint8Array;r.send("test",u,[u.buffer])};o();return}catch{wy("The worker has been disabled.")}vs(this,_i,pd).call(this)},pd=function(){Ke(Qe,Rl)||(Xt("Setting up fake worker."),Di(Qe,Rl,!0)),Qe._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Ke(this,bo).reject(new Error("Worker was destroyed"));return}const n=new rX;Di(this,ga,n);const r=`fake${OS(Qe,Hm)._++}`,s=new fd(r+"_worker",r,n);e.setup(s,n),Di(this,jr,new fd(r,r+"_worker",n)),vs(this,_i,Wg).call(this)}).catch(e=>{Ke(this,bo).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},cu=new WeakSet,Xg=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},bs(Qe,cu),bs(Qe,Hm,0),bs(Qe,Rl,!1),bs(Qe,Il,new WeakMap),bi&&(Di(Qe,Rl,!0),So.workerSrc||="./pdf.worker.mjs"),Qe._isSameOrigin=(e,n)=>{const r=URL.parse(e);if(!r?.origin||r.origin==="null")return!1;const s=new URL(n,r);return r.origin===s.origin},Qe._createCDNWrapper=e=>{const n=`await import("${e}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},Qe.fromPort=e=>{if(qW("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Qe.create(e)};let xu=Qe;class KX{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#a=null;constructor(e,n,r,s,a,o){this.messageHandler=e,this.loadingTask=n,this.commonObjs=new FM,this.fontLoader=new JW({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}#r(e,n=null){const r=this.#t.get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,n);return this.#t.set(e,s),s}get annotationStorage(){return Jt(this,"annotationStorage",new k1)}getRenderingIntent(e,n=Is.ENABLE,r=null,s=!1,a=!1){let o=Yi.DISPLAY,u=L_;switch(e){case"any":o=Yi.ANY;break;case"display":break;case"print":o=Yi.PRINT;break;default:Xt(`getRenderingIntent - invalid intent: ${e}`)}const h=o&Yi.PRINT&&r instanceof SM?r:this.annotationStorage;switch(n){case Is.DISABLE:o+=Yi.ANNOTATIONS_DISABLE;break;case Is.ENABLE:break;case Is.ENABLE_FORMS:o+=Yi.ANNOTATIONS_FORMS;break;case Is.ENABLE_STORAGE:o+=Yi.ANNOTATIONS_STORAGE,u=h.serializable;break;default:Xt(`getRenderingIntent - invalid annotationMode: ${n}`)}s&&(o+=Yi.IS_EDITING),a&&(o+=Yi.OPLIST);const{ids:d,hash:p}=h.modifiedIds,g=[o,u.hash,p];return{renderingIntent:o,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of this.#e.values())e.push(r._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Xd.cleanup(),this._networkStream?.cancelAllRequests(new Ca("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(r,s)=>{fe(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},s.onPull=()=>{this._fullReader.read().then(function({value:a,done:o}){if(o){s.close();return}fe(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{this._fullReader.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async r=>{await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:a,contentLength:o}=this._fullReader;return(!s||!a)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{n.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:s,isRangeSupported:a,contentLength:o}}),e.on("GetRangeReader",(r,s)=>{fe(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(r.begin,r.end);if(!a){s.close();return}s.onPull=()=>{a.read().then(function({value:o,done:u}){if(u){s.close();return}fe(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{a.cancel(o),s.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,n._capability.resolve(new XX(r,this))}),e.on("DocException",r=>{n._capability.reject(ki(r))}),e.on("PasswordRequest",r=>{this.#a=Promise.withResolvers();try{if(!n.onPassword)throw ki(r);const s=a=>{a instanceof Error?this.#a.reject(a):this.#a.resolve({password:a})};n.onPassword(s,r.code)}catch(s){this.#a.reject(s)}return this.#a.promise}),e.on("DataLoaded",r=>{n.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#e.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,a])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":if("error"in a){const p=a.error;Xt(`Error during font loading: ${p}`),this.commonObjs.resolve(r,p);break}const o=new Pe(a),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,g)=>globalThis.FontInspector.fontAdded(p,g):null,h=new tX(o,u,a.extra,a.charProcOperatorList);this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(r,h)});break;case"CopyLocalImage":const{imageRef:d}=a;fe(d,"The imageRef must be defined.");for(const p of this.#e.values())for(const[,g]of p.objs)if(g?.ref===d)return g.dataLen?(this.commonObjs.resolve(r,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,a);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([r,s,a,o])=>{if(this.destroyed)return;const u=this.#e.get(s);if(!u.objs.has(r)){if(u._intentStates.size===0){o?.bitmap?.close();return}switch(a){case"Image":case"Pattern":u.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",r=>{this.destroyed||n.onProgress?.({loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[r.type];if(!s)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Xt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=e-1,r=this.#i.get(n);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#n.set(a.refStr,e);const o=new YX(n,a,this,this._params.pdfBug);return this.#e.set(n,o),o});return this.#i.set(n,s),s}getPageIndex(e){return B_(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:n})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,n){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:n})}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#r("GetOptionalContentConfig").then(n=>new RX(n,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",n=this.#t.get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,null).then(s=>({info:s[0],metadata:s[1]?new TX(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of this.#e.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Xd.cleanup()}}cachedPageNumber(e){if(!B_(e))return null;const n=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(n)??null}}class QX{#t=null;onContinue=null;onError=null;constructor(e){this.#t=e}get promise(){return this.#t.capability.promise}cancel(e=0){this.#t.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#t.operatorList;if(!e)return!1;const{annotationCanvasMap:n}=this.#t;return e.form||e.canvas&&n?.size>0}}class Kc{#t=null;static#e=new WeakSet;constructor({callback:e,params:n,objs:r,commonObjs:s,annotationCanvasMap:a,operatorList:o,pageIndex:u,canvasFactory:h,filterFactory:d,useRequestAnimationFrame:p=!1,pdfBug:g=!1,pageColors:y=null,enableHWA:b=!1,operationsFilter:w=null}){this.callback=e,this.params=n,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=d,this._pdfBug=g,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new QX(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=b,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(Kc.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Kc.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:s,background:a,dependencyTracker:o}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ru(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Kc.#e.delete(this._canvas),e||=new Ay(`Rendering cancelled, page ${this._pageIndex+1}`,n),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Kc.#e.delete(this._canvas),this.callback())))}}const B1="5.4.296",jM="f56dc8601";class Ki{#t=null;#e=null;#i;#n=null;#a=!1;#r=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return Jt(this,"_keyboardManager",new Tf([[["Escape","mac+Escape"],Ki.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ki.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ki.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ki.prototype._moveToPrevious],[["Home","mac+Home"],Ki.prototype._moveToBeginning],[["End","mac+End"],Ki.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:n=null}){e?(this.#r=!1,this.#s=e):this.#r=!0,this.#l=e?._uiManager||n,this.#o=this.#l._eventBus,this.#i=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Ki.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#t=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#s&&(e.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const n=this.#l._signal;e.addEventListener("click",this.#p.bind(this),{signal:n}),e.addEventListener("keydown",this.#m.bind(this),{signal:n});const r=this.#e=document.createElement("span");return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=this.#i,e.append(r),e}renderMainDropdown(){const e=this.#n=this.#h();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#h(){const e=document.createElement("div"),n=this.#l._signal;e.addEventListener("contextmenu",rr,{signal:n}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(e.id=`${this.#s.id}_colorpicker_dropdown`);for(const[r,s]of this.#l.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",s),a.title=r,a.setAttribute("data-l10n-id",Ki.#d[r]);const o=document.createElement("span");a.append(o),o.className="swatch",o.style.backgroundColor=s,a.ariaSelected=s===this.#i,a.addEventListener("click",this.#f.bind(this,s),{signal:n}),e.append(a)}return e.addEventListener("keydown",this.#m.bind(this),{signal:n}),e}#f(e,n){n.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:ce.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#t){this.#p(e);return}const n=e.target.getAttribute("data-color");n&&this.#f(n,e)}_moveToNext(e){if(!this.#g){this.#p(e);return}if(e.target===this.#t){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#t){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#p(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#g){this.#p(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#g){this.#p(e);return}this.#n.lastChild?.focus()}#m(e){Ki._keyboardManager.exec(this,e)}#p(e){if(this.#g){this.hideDropdown();return}if(this.#a=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const n=this.#n=this.#h();this.#t.append(n)}#u(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#g(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#g){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(e){if(this.#e&&(this.#e.style.backgroundColor=e),!this.#n)return;const n=this.#l.highlightColors.values();for(const r of this.#n.children)r.ariaSelected=n.next().value===e.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class Yd{#t=null;#e=null;#i=null;static#n=null;constructor(e){this.#e=e,this.#i=e._uiManager,Yd.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:e,colorType:n,colorValue:r}=this.#e,s=this.#t=document.createElement("input");return s.type="color",s.value=r||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",Yd.#n[e]),s.addEventListener("input",()=>{this.#i.updateParams(n,s.value)},{signal:this.#i._signal}),s}update(e){this.#t&&(this.#t.value=e)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function cR(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Zh(i){return Math.max(0,Math.min(255,255*i))}class uR{static CMYK_G([e,n,r,s]){return["G",1-Math.min(1,.3*e+.59*r+.11*n+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Zh(e),[e,e,e]}static G_HTML([e]){const n=cR(e);return`#${n}${n}${n}`}static RGB_G([e,n,r]){return["G",.3*e+.59*n+.11*r]}static RGB_rgb(e){return e.map(Zh)}static RGB_HTML(e){return`#${e.map(cR).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,n,r,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,r+s),1-Math.min(1,n+s)]}static CMYK_rgb([e,n,r,s]){return[Zh(1-Math.min(1,e+s)),Zh(1-Math.min(1,r+s)),Zh(1-Math.min(1,n+s))]}static CMYK_HTML(e){const n=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([e,n,r]){const s=1-e,a=1-n,o=1-r,u=Math.min(s,a,o);return["CMYK",s,a,o,u]}}class ZX{create(e,n,r=!1){if(e<=0||n<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),r||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${n}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${n}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Fe("Abstract method `_createSVG` called.")}}class Kd extends ZX{_createSVG(e){return document.createElementNS(fa,e)}}const JX=9,$l=new WeakSet,tY=new Date().getTimezoneOffset()*60*1e3;class hR{static create(e){switch(e.data.annotationType){case gn.LINK:return new F1(e);case gn.TEXT:return new nY(e);case gn.WIDGET:switch(e.data.fieldType){case"Tx":return new iY(e);case"Btn":return e.data.radioButton?new zM(e):e.data.checkBox?new sY(e):new aY(e);case"Ch":return new oY(e);case"Sig":return new rY(e)}return new Zl(e);case gn.POPUP:return new V_(e);case gn.FREETEXT:return new HM(e);case gn.LINE:return new cY(e);case gn.SQUARE:return new uY(e);case gn.CIRCLE:return new hY(e);case gn.POLYLINE:return new $M(e);case gn.CARET:return new fY(e);case gn.INK:return new U1(e);case gn.POLYGON:return new dY(e);case gn.HIGHLIGHT:return new GM(e);case gn.UNDERLINE:return new pY(e);case gn.SQUIGGLY:return new gY(e);case gn.STRIKEOUT:return new mY(e);case gn.STAMP:return new qM(e);case gn.FILEATTACHMENT:return new yY(e);default:return new rn(e)}}}class rn{#t=null;#e=!1;#i=null;constructor(e,{isRenderable:n=!1,ignoreBorder:r=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,n&&(this.container=this._createContainer(r)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:n}){return!!(e?.str||n?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return rn._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,n=this.annotationStorage?.getEditor(e.id);return n?n.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:n,inkLists:r,rect:s}=this.data;let a=-1/0,o=-1/0;if(n?.length>=8){for(let u=0;u<n.length;u+=8)n[u+1]>o?(o=n[u+1],a=n[u+2]):n[u+1]===o&&(a=Math.max(a,n[u+2]));return[a,o]}if(r?.length>=1){for(const u of r)for(let h=0,d=u.length;h<d;h+=2)u[h+1]>o?(o=u[h+1],a=u[h]):u[h+1]===o&&(a=Math.max(a,u[h]));if(a!==1/0)return[a,o]}return s?[s[2],s[3]]:null}_normalizePoint(e){const{page:{view:n},viewport:{rawDims:{pageWidth:r,pageHeight:s,pageX:a,pageY:o}}}=this.parent;return e[1]=n[3]-e[1]+n[1],e[0]=100*(e[0]-a)/r,e[1]=100*(e[1]-o)/s,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${Gd}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:n}=this,r={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(n.id,{popup:r})||this.annotationStorage.setValue(`${Gd}${n.id}`,{id:n.id,annotationType:n.annotationType,pageIndex:this.parent.page._pageIndex,popup:r,popupRef:n.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:n,popup:r}=e;n&&this.#n(n);let s=this.#i?.popup||this.popup;!s&&r?.text&&(this._createPopup(r),s=this.#i.popup),s&&(s.updateEdited(e),r?.deleted&&(s.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(e){const{container:{style:n},data:{rect:r,rotation:s},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:o,pageX:u,pageY:h}}}}=this;r?.splice(0,4,...e),n.left=`${100*(e[0]-u)/a}%`,n.top=`${100*(o-e[3]+h)/o}%`,s===0?(n.width=`${100*(e[2]-e[0])/a}%`,n.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(s)}_createContainer(e){const{data:n,parent:{page:r,viewport:s}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",n.id),!(this instanceof Zl)&&!(this instanceof F1)&&(a.tabIndex=0);const{style:o}=a;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,n.alternativeText&&(a.title=n.alternativeText),n.noRotate&&a.classList.add("norotate"),!n.rect||this instanceof V_){const{rotation:x}=n;return!n.hasOwnCanvas&&x!==0&&this.setRotation(x,a),a}const{width:u,height:h}=this;if(!e&&n.borderStyle.width>0){o.borderWidth=`${n.borderStyle.width}px`;const x=n.borderStyle.horizontalCornerRadius,S=n.borderStyle.verticalCornerRadius;if(x>0||S>0){const k=`calc(${x}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;o.borderRadius=k}else if(this instanceof zM){const k=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;o.borderRadius=k}switch(n.borderStyle.style){case qc.SOLID:o.borderStyle="solid";break;case qc.DASHED:o.borderStyle="dashed";break;case qc.BEVELED:Xt("Unimplemented border style: beveled");break;case qc.INSET:Xt("Unimplemented border style: inset");break;case qc.UNDERLINE:o.borderBottomStyle="solid";break}const E=n.borderColor||null;E?(this.#e=!0,o.borderColor=Ct.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):o.borderWidth=0}const d=Ct.normalizeRect([n.rect[0],r.view[3]-n.rect[1]+r.view[1],n.rect[2],r.view[3]-n.rect[3]+r.view[1]]),{pageWidth:p,pageHeight:g,pageX:y,pageY:b}=s.rawDims;o.left=`${100*(d[0]-y)/p}%`,o.top=`${100*(d[1]-b)/g}%`;const{rotation:w}=n;return n.hasOwnCanvas||w===0?(o.width=`${100*u/p}%`,o.height=`${100*h/g}%`):this.setRotation(w,a),a}setRotation(e,n=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:s}=this.parent.viewport.rawDims;let{width:a,height:o}=this;e%180!==0&&([a,o]=[o,a]),n.style.width=`${100*a/r}%`,n.style.height=`${100*o/s}%`,n.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(n,r,s)=>{const a=s.detail[n],o=a[0],u=a.slice(1);s.target.style[r]=uR[`${o}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[r]:uR[`${o}_rgb`](u)})};return Jt(this,"_commonActions",{display:n=>{const{display:r}=n.detail,s=r%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:r===1||r===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:r}=n.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{e("bgColor","backgroundColor",n)},fillColor:n=>{e("fillColor","backgroundColor",n)},fgColor:n=>{e("fgColor","color",n)},textColor:n=>{e("textColor","color",n)},borderColor:n=>{e("borderColor","borderColor",n)},strokeColor:n=>{e("strokeColor","borderColor",n)},rotation:n=>{const r=n.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,n){const r=this._commonActions;for(const s of Object.keys(n.detail))(e[s]||r[s])?.(n)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const r=this._commonActions;for(const[s,a]of Object.entries(n)){const o=r[s];if(o){const u={detail:{[s]:a},target:e};o(u),delete n[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[n,r,s,a]=this.data.rect.map(x=>Math.fround(x));if(e.length===8){const[x,S,E,k]=e.subarray(2,6);if(s===x&&a===S&&n===E&&r===k)return}const{style:o}=this.container;let u;if(this.#e){const{borderColor:x,borderWidth:S}=o;o.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const h=s-n,d=a-r,{svgFactory:p}=this,g=p.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const y=p.createElement("defs");g.append(y);const b=p.createElement("clipPath"),w=`clippath_${this.data.id}`;b.setAttribute("id",w),b.setAttribute("clipPathUnits","objectBoundingBox"),y.append(b);for(let x=2,S=e.length;x<S;x+=8){const E=e[x],k=e[x+1],N=e[x+2],M=e[x+3],O=p.createElement("rect"),B=(N-n)/h,C=(a-k)/d,R=(E-N)/h,L=(k-M)/d;O.setAttribute("x",B),O.setAttribute("y",C),O.setAttribute("width",R),O.setAttribute("height",L),b.append(O),u?.push(`<rect vector-effect="non-scaling-stroke" x="${B}" y="${C}" width="${R}" height="${L}"/>`)}this.#e&&(u.push("</g></svg>')"),o.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${w})`}_createPopup(e=null){const{data:n}=this;let r,s;e?(r={str:e.text},s=e.date):(r=n.contentsObj,s=n.modificationDate);const a=this.#i=new V_({data:{color:n.color,titleObj:n.titleObj,modificationDate:s,contentsObj:r,richText:n.richText,parentRect:n.rect,borderStyle:0,id:`popup_${n.id}`,rotation:n.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(a.render())}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){Fe("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,n=null){const r=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:a,id:o,exportValues:u}of s){if(a===-1||o===n)continue;const h=typeof u=="string"?u:null,d=document.querySelector(`[data-element-id="${o}"]`);if(d&&!$l.has(d)){Xt(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:h,domElement:d})}return r}for(const s of document.getElementsByName(e)){const{exportValue:a}=s,o=s.getAttribute("data-element-id");o!==n&&$l.has(s)&&r.push({id:o,exportValue:a,domElement:s})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const n of e)n.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:n,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class eY extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class F1 extends rn{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let s=!1;return e.url?(n.addLinkAttributes(r,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(r,e.action,e.overlaidText),s=!0):e.attachment?(this.#e(r,e.attachment,e.overlaidText,e.attachmentDest),s=!0):e.setOCGState?(this.#i(r,e.setOCGState,e.overlaidText),s=!0):e.dest?(this._bindLink(r,e.dest,e.overlaidText),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),s=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(r),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(e,n,r=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&this.#t(),r&&(e.title=r)}_bindNamedAction(e,n,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),r&&(e.title=r),this.#t()}#e(e,n,r="",s=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:r&&(e.title=r),e.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,s),!1),this.#t()}#i(e,n,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),r&&(e.title=r),this.#t()}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(n.actions)){const a=r.get(s);a&&(e[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:s}}),!1))}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),this.#t()}_bindResetFormAction(e,n){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Xt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{r?.();const{fields:s,refs:a,include:o}=n,u=[];if(s.length!==0||a.length!==0){const p=new Set(a);for(const g of s){const y=this._fieldObjects[g]||[];for(const{id:b}of y)p.add(b)}for(const g of Object.values(this._fieldObjects))for(const y of g)p.has(y.id)===o&&u.push(y)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const h=this.annotationStorage,d=[];for(const p of u){const{id:g}=p;switch(d.push(g),p.type){case"text":{const b=p.defaultValue||"";h.setValue(g,{value:b});break}case"checkbox":case"radiobutton":{const b=p.defaultValue===p.exportValues;h.setValue(g,{value:b});break}case"combobox":case"listbox":{const b=p.defaultValue||"";h.setValue(g,{value:b});break}default:continue}const y=document.querySelector(`[data-element-id="${g}"]`);if(y){if(!$l.has(y)){Xt(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class nY extends rn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Zl extends rn{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Un.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,n,r,s,a){r.includes("mouse")?e.addEventListener(r,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{if(r==="blur"){if(!n.focused||!o.relatedTarget)return;n.focused=!1}else if(r==="focus"){if(n.focused)return;n.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(o)}})})}_setEventListeners(e,n,r,s){for(const[a,o]of r)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(n||={focused:!1}),this._setEventListener(e,n,a,o,s),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,n,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,n,"focus","Focus",null))}_setBackgroundColor(e){const n=this.data.backgroundColor||null;e.style.backgroundColor=n===null?"transparent":Ct.makeHexColor(n[0],n[1],n[2])}_setTextStyle(e){const n=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||JX,a=e.style;let o;const u=2,h=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(d/(f0*s))||1,g=d/p;o=Math.min(s,h(g/f0))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-u);o=Math.min(s,h(d/f0))}a.fontSize=`calc(${o}px * var(--total-scale-factor))`,a.color=Ct.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(a.textAlign=n[this.data.textAlignment])}_setRequired(e,n){n?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",n)}}class iY extends Zl{constructor(e){const n=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:n})}setPropertyOnSiblings(e,n,r,s){const a=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[n]=r),a.setValue(o.id,{[s]:r})}render(){const e=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const s=e.getValue(n,{value:this.data.fieldValue});let a=s.value||"";const o=e.getValue(n,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let u=s.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=u??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",u??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),$l.add(r),r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:d,datetimeType:p,timeStep:g}=this.data,y=!!p&&this.enableScripting;d&&(r.title=d),this._setRequired(r,this.data.required),o&&(r.maxLength=o),r.addEventListener("input",w=>{e.setValue(n,{value:w.target.value}),this.setPropertyOnSiblings(r,"value",w.target.value,"value"),h.formattedValue=null}),r.addEventListener("resetform",w=>{const x=this.data.defaultFieldValue??"";r.value=h.userValue=x,h.formattedValue=null});let b=w=>{const{formattedValue:x}=h;x!=null&&(w.target.value=x),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",x=>{if(h.focused)return;const{target:S}=x;if(y&&(S.type=p,g&&(S.step=g)),h.userValue){const E=h.userValue;if(y)if(p==="time"){const k=new Date(E),N=[k.getHours(),k.getMinutes(),k.getSeconds()];S.value=N.map(M=>M.toString().padStart(2,"0")).join(":")}else S.value=new Date(E-tY).toISOString().split(p==="date"?"T":".",1)[0];else S.value=E}h.lastCommittedValue=S.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),r.addEventListener("updatefromsandbox",x=>{this.showElementAndHideCanvas(x.target);const S={value(E){h.userValue=E.detail.value??"",y||e.setValue(n,{value:h.userValue.toString()}),E.target.value=h.userValue},formattedValue(E){const{formattedValue:k}=E.detail;h.formattedValue=k,k!=null&&E.target!==document.activeElement&&(E.target.value=k);const N={formattedValue:k};y&&(N.value=k),e.setValue(n,N)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:k}=E.detail,{target:N}=E;if(k===0){N.removeAttribute("maxLength");return}N.setAttribute("maxLength",k);let M=h.userValue;!M||M.length<=k||(M=M.slice(0,k),N.value=h.userValue=M,e.setValue(n,{value:M}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:M,willCommit:!0,commitKey:1,selStart:N.selectionStart,selEnd:N.selectionEnd}}))}};this._dispatchEventFromSandbox(S,x)}),r.addEventListener("keydown",x=>{h.commitKey=1;let S=-1;if(x.key==="Escape"?S=0:x.key==="Enter"&&!this.data.multiLine?S=2:x.key==="Tab"&&(h.commitKey=3),S===-1)return;const{value:E}=x.target;h.lastCommittedValue!==E&&(h.lastCommittedValue=E,h.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:E,willCommit:!0,commitKey:S,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}))});const w=b;b=null,r.addEventListener("blur",x=>{if(!h.focused||!x.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:S}=x;let{value:E}=S;if(y){if(E&&p==="time"){const k=E.split(":").map(N=>parseInt(N,10));E=new Date(2e3,0,1,k[0],k[1],k[2]||0).valueOf(),S.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();S.type="text"}h.userValue=E,h.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:E,willCommit:!0,commitKey:h.commitKey,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}),w(x)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",x=>{h.lastCommittedValue=null;const{data:S,target:E}=x,{value:k,selectionStart:N,selectionEnd:M}=E;let O=N,B=M;switch(x.inputType){case"deleteWordBackward":{const C=k.substring(0,N).match(/\w*[^\w]*$/);C&&(O-=C[0].length);break}case"deleteWordForward":{const C=k.substring(N).match(/^[^\w]*\w*/);C&&(B+=C[0].length);break}case"deleteContentBackward":N===M&&(O-=1);break;case"deleteContentForward":N===M&&(B+=1);break}x.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:k,change:S||"",willCommit:!1,selStart:O,selEnd:B}})}),this._setEventListeners(r,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],x=>x.target.value)}if(b&&r.addEventListener("blur",b),this.data.comb){const x=(this.data.rect[2]-this.data.rect[0])/o;r.classList.add("comb"),r.style.letterSpacing=`calc(${x}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class rY extends Zl{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class sY extends Zl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,n=this.data,r=n.id;let s=e.getValue(r,{value:n.exportValue===n.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(r,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return $l.add(a),a.setAttribute("data-element-id",r),a.disabled=n.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=n.fieldName,s&&a.setAttribute("checked",!0),a.setAttribute("exportValue",n.exportValue),a.tabIndex=0,a.addEventListener("change",o=>{const{name:u,checked:h}=o.target;for(const d of this._getElementsByName(u,r)){const p=h&&d.exportValue===n.exportValue;d.domElement&&(d.domElement.checked=p),e.setValue(d.id,{value:p})}e.setValue(r,{value:h})}),a.addEventListener("resetform",o=>{const u=n.defaultFieldValue||"Off";o.target.checked=u===n.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",o=>{const u={value(h){h.target.checked=h.detail.value!=="Off",e.setValue(r,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class zM extends Zl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,n=this.data,r=n.id;let s=e.getValue(r,{value:n.fieldValue===n.buttonValue}).value;if(typeof s=="string"&&(s=s!==n.buttonValue,e.setValue(r,{value:s})),s)for(const o of this._getElementsByName(n.fieldName,r))e.setValue(o.id,{value:!1});const a=document.createElement("input");if($l.add(a),a.setAttribute("data-element-id",r),a.disabled=n.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=n.fieldName,s&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",o=>{const{name:u,checked:h}=o.target;for(const d of this._getElementsByName(u,r))e.setValue(d.id,{value:!1});e.setValue(r,{value:h})}),a.addEventListener("resetform",o=>{const u=n.defaultFieldValue;o.target.checked=u!=null&&u===n.buttonValue}),this.enableScripting&&this.hasJSActions){const o=n.buttonValue;a.addEventListener("updatefromsandbox",u=>{const h={value:d=>{const p=o===d.detail.value;for(const g of this._getElementsByName(d.target.name)){const y=p&&g.id===r;g.domElement&&(g.domElement.checked=y),e.setValue(g.id,{value:y})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class aY extends F1{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const n=e.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class oY extends Zl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,n=this.data.id,r=e.getValue(n,{value:this.data.fieldValue}),s=document.createElement("select");$l.add(s),s.setAttribute("data-element-id",n),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue;for(const y of s.options)y.selected=y.value===g});for(const p of this.data.options){const g=document.createElement("option");g.textContent=p.displayValue,g.value=p.exportValue,r.value.includes(p.exportValue)&&(g.setAttribute("selected",!0),a=!1),s.append(g)}let o=null;if(a){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),s.prepend(p),o=()=>{p.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const u=p=>{const g=p?"value":"textContent",{options:y,multiple:b}=s;return b?Array.prototype.filter.call(y,w=>w.selected).map(w=>w[g]):y.selectedIndex===-1?null:y[y.selectedIndex][g]};let h=u(!1);const d=p=>{const g=p.target.options;return Array.prototype.map.call(g,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",p=>{const g={value(y){o?.();const b=y.detail.value,w=new Set(Array.isArray(b)?b:[b]);for(const x of s.options)x.selected=w.has(x.value);e.setValue(n,{value:u(!0)}),h=u(!1)},multipleSelection(y){s.multiple=!0},remove(y){const b=s.options,w=y.detail.remove;b[w].selected=!1,s.remove(w),b.length>0&&Array.prototype.findIndex.call(b,S=>S.selected)===-1&&(b[0].selected=!0),e.setValue(n,{value:u(!0),items:d(y)}),h=u(!1)},clear(y){for(;s.length!==0;)s.remove(0);e.setValue(n,{value:null,items:[]}),h=u(!1)},insert(y){const{index:b,displayValue:w,exportValue:x}=y.detail.insert,S=s.children[b],E=document.createElement("option");E.textContent=w,E.value=x,S?S.before(E):s.append(E),e.setValue(n,{value:u(!0),items:d(y)}),h=u(!1)},items(y){const{items:b}=y.detail;for(;s.length!==0;)s.remove(0);for(const w of b){const{displayValue:x,exportValue:S}=w,E=document.createElement("option");E.textContent=x,E.value=S,s.append(E)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(n,{value:u(!0),items:d(y)}),h=u(!1)},indices(y){const b=new Set(y.detail.indices);for(const w of y.target.options)w.selected=b.has(w.index);e.setValue(n,{value:u(!0)}),h=u(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(g,p)}),s.addEventListener("input",p=>{const g=u(!0),y=u(!1);e.setValue(n,{value:g}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:h,change:y,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):s.addEventListener("input",function(p){e.setValue(n,{value:u(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class V_ extends rn{constructor(e){const{data:n,elements:r,parent:s}=e,a=!!s._commentManager;if(super(e,{isRenderable:!a&&rn._hasPopupData(n)}),this.elements=r,a&&rn._hasPopupData(n)){const o=this.popup=this.#t();for(const u of r)u.popup=o}else this.popup=null}#t(){return new lY({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=this.#t(),r=[];for(const s of this.elements)s.popup=n,s.container.ariaHasPopup="dialog",r.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(s=>`${T1}${s}`).join(",")),this.container}}class lY{#t=null;#e=this.#$.bind(this);#i=this.#U.bind(this);#n=this.#M.bind(this);#a=this.#w.bind(this);#r=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#p=null;#u=null;#g=null;#y=null;#v=null;#b=null;#S=null;#x=null;#_=null;#C=!1;#A=null;#E=null;constructor({container:e,color:n,elements:r,titleObj:s,modificationDate:a,contentsObj:o,richText:u,parent:h,rect:d,parentRect:p,open:g,commentManager:y=null}){this.#s=e,this.#x=s,this.#o=o,this.#S=u,this.#d=h,this.#r=n,this.#b=d,this.#h=p,this.#l=r,this.#t=y,this.#A=r[0],this.#c=km.toDateObject(a),this.trigger=r.flatMap(b=>b.getElementsToTriggerPopup()),y?this.renderCommentButton():(this.#D(),this.#s.hidden=!0,g&&this.#w())}#D(){if(this.#p)return;this.#p=new AbortController;const{signal:e}=this.#p;for(const n of this.trigger)n.addEventListener("click",this.#a,{signal:e}),n.addEventListener("pointerenter",this.#n,{signal:e}),n.addEventListener("pointerleave",this.#i,{signal:e}),n.classList.add("popupTriggerArea");for(const n of this.#l)n.container?.addEventListener("keydown",this.#e,{signal:e})}#R(){const e=this.#l.find(n=>n.hasCommentButton);e&&(this.#y=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#g||(this.#y||this.#R(),!this.#y))return;const{signal:e}=this.#p=new AbortController,n=!!this.#A.extraPopupElement,r=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!n)},s=()=>{this.#t.toggleCommentPopup(this,!1,!0,!n)},a=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(n){this.#g=this.#A.container;for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",this.#e,{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",s,{signal:e}),o.addEventListener("pointerleave",a,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=this.#g=document.createElement("button");o.className="annotationCommentButton";const u=this.#A.container;o.style.zIndex=u.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#B(),this.#I(),o.addEventListener("keydown",this.#e,{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",s,{signal:e}),o.addEventListener("pointerleave",a,{signal:e}),u.after(o)}}#I(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.renderCommentButton();const[e,n]=this.#y,{style:r}=this.#g;r.left=`calc(${e}%)`,r.top=`calc(${n}% - var(--comment-button-dim))`}#B(){this.#A.extraPopupElement||(this.renderCommentButton(),this.#g.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:n}=this.#A.commentData;return e?this.#d._commentManager.makeCommentColor(e,n):null}focusCommentButton(){setTimeout(()=>{this.#g?.focus()},0)}getData(){const{richText:e,color:n,opacity:r,creationDate:s,modificationDate:a}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:e,color:n,opacity:r,creationDate:s,modificationDate:a}}get elementBeforePopup(){return this.#g}get comment(){return this.#E||=this.#A.commentText,this.#E}set comment(e){e!==this.comment&&(this.#A.commentText=this.#E=e)}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:n}){this.#g&&(this.#g.classList.toggle("selected",e),this.#g.ariaExpanded=n)}setSelectedCommentButton(e){this.#g.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:e,y:n,height:r}=this.#g.getBoundingClientRect(),{x:s,y:a,width:o,height:u}=this.#A.layer.getBoundingClientRect();return[(e-s)/o,(n+r-a)/u]}set commentPopupPosition(e){this.#v=e}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#g.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[n,r]=this.#v||this.commentButtonPosition.map(d=>d/100),s=this.parentBoundingClientRect,{x:a,y:o,width:u,height:h}=s;this.#t.showDialog(null,this,a+n*u,o+r*h,{...e,parentDimensions:s})}render(){if(this.#m)return;const e=this.#m=document.createElement("div");if(e.className="popup",this.#r){const r=e.style.outlineColor=Ct.makeHexColor(...this.#r);e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const n=document.createElement("span");if(n.className="header",this.#x?.str){const r=document.createElement("span");r.className="title",n.append(r),{dir:r.dir,str:r.textContent}=this.#x}if(e.append(n),this.#c){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),r.dateTime=this.#c.toISOString(),n.append(r)}R1({html:this.#N||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#s.append(e)}get#N(){const e=this.#S,n=this.#o;return e?.str&&(!n?.str||n.str===e.str)&&this.#S.html||null}get#P(){return this.#N?.attributes?.style?.fontSize||0}get#F(){return this.#N?.attributes?.style?.color||null}#O(e){const n=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},s={style:{color:this.#F,fontSize:this.#P?`calc(${this.#P}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))n.push({name:"span",value:a,attributes:s});return r}#$(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:e,popup:n,deleted:r}){if(this.#t){r?(this.remove(),this.#E=null):n&&(n.deleted?this.remove():(this.#B(),this.#E=n.text)),e&&(this.#y=null,this.#R(),this.#I());return}if(r||n?.deleted){this.remove();return}this.#D(),this.#_||={contentsObj:this.#o,richText:this.#S},e&&(this.#u=null),n&&n.text&&(this.#S=this.#O(n.text),this.#c=km.toDateObject(n.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#_&&({contentsObj:this.#o,richText:this.#S}=this.#_,this.#_=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#m?.remove(),this.#m=null,this.#C=!1,this.#f=!1,this.#g?.remove(),this.#g=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:s,pageY:a}}}=this.#d;let o=!!this.#h,u=o?this.#h:this.#b;for(const w of this.#l)if(!u||Ct.intersect(w.data.rect,u)!==null){u=w.data.rect,o=!0;break}const h=Ct.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),p=o?u[2]-u[0]+5:0,g=h[0]+p,y=h[1];this.#u=[100*(g-s)/n,100*(y-a)/r];const{style:b}=this.#s;b.left=`${this.#u[0]}%`,b.top=`${this.#u[1]}%`}#w(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#M(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#e)):(this.#U(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#e))}#M(){this.#m||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#U(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#C&&(this.#m||this.#M(),this.#C=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class HM extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Wt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const n of this.textContent){const r=document.createElement("span");r.textContent=n,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class cY extends rn{#t=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:r}=this,s=this.svgFactory.create(n,r,!0),a=this.#t=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class uY extends rn{#t=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:r}=this,s=this.svgFactory.create(n,r,!0),a=e.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",n-a),o.setAttribute("height",r-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class hY extends rn{#t=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:r}=this,s=this.svgFactory.create(n,r,!0),a=e.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",n/2),o.setAttribute("cy",r/2),o.setAttribute("rx",n/2-a/2),o.setAttribute("ry",r/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class $M extends rn{#t=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:r,popupRef:s},width:a,height:o}=this;if(!n)return this.container;const u=this.svgFactory.create(a,o,!0);let h=[];for(let p=0,g=n.length;p<g;p+=2){const y=n[p]-e[0],b=e[3]-n[p+1];h.push(`${y},${b}`)}h=h.join(" ");const d=this.#t=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",h),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),u.append(d),this.container.append(u),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class dY extends $M{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class fY extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class U1 extends rn{#t=null;#e=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Wt.HIGHLIGHT:Wt.INK}#i(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:r,borderStyle:s,popupRef:a}}=this,{transform:o,width:u,height:h}=this.#i(n,e),d=this.svgFactory.create(u,h,!0),p=this.#t=this.svgFactory.createElement("svg:g");d.append(p),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",o);for(let g=0,y=r.length;g<y;g++){const b=this.svgFactory.createElement(this.svgElementName);this.#e.push(b),b.setAttribute("points",r[g].join(",")),p.append(b)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:r,rect:s}=e,a=this.#t;if(n>=0&&a.setAttribute("stroke-width",n||1),r)for(let o=0,u=this.#e.length;o<u;o++)this.#e[o].setAttribute("points",r[o].join(","));if(s){const{transform:o,width:u,height:h}=this.#i(this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class GM extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Wt.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class pY extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class gY extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class mY extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class qM extends rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Wt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class yY extends rn{#t=null;constructor(e){super(e,{isRenderable:!0});const{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",this.#e.bind(this)),this.#t=r;const{isMac:s}=Un.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&this.#e()}),!n.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let V1=class WM{#t=null;#e=null;#i=null;#n=new Map;#a=null;#r=null;constructor({div:e,accessibilityManager:n,annotationCanvasMap:r,annotationEditorUIManager:s,page:a,viewport:o,structTreeLayer:u,commentManager:h,linkService:d,annotationStorage:p}){this.div=e,this.#t=n,this.#e=r,this.#a=u||null,this.#r=d||null,this.#i=p||new k1,this.page=a,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=h||null}hasEditableAnnotations(){return this.#n.size>0}async#s(e,n,r){const s=e.firstChild||e,a=s.id=`${T1}${n}`,o=await this.#a?.getAriaAttributes(a);if(o)for(const[u,h]of o)s.setAttribute(u,h);r?r.at(-1).container.after(e):(this.div.append(e),this.#t?.moveElementInDOM(this.div,e,s,!1))}async render(e){const{annotations:n}=e,r=this.div;Oo(r,this.viewport);const s=new Map,a={data:null,layer:r,linkService:this.#r,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Kd,annotationStorage:this.#i,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of n){if(o.noHTML)continue;const u=o.annotationType===gn.POPUP;if(u){const p=s.get(o.id);if(!p)continue;a.elements=p}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;a.data=o;const h=hR.create(a);if(!h.isRenderable)continue;if(!u&&o.popupRef){const p=s.get(o.popupRef);p?p.push(h):s.set(o.popupRef,[h])}const d=h.render();o.hidden&&(d.style.visibility="hidden"),await this.#s(d,o.id,a.elements),h.extraPopupElement?.popup?.renderCommentButton(),h._isEditable&&(this.#n.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#o()}async addLinkAnnotations(e){const n={data:null,layer:this.div,linkService:this.#r,svgFactory:new Kd,parent:this};for(const r of e){r.borderStyle||=WM._defaultBorderStyle,n.data=r;const s=hR.create(n);if(!s.isRenderable)continue;const a=s.render();await this.#s(a,r.id,null)}}update({viewport:e}){const n=this.div;this.viewport=e,Oo(n,{rotation:e.rotation}),this.#o(),n.hidden=!1}#o(){if(!this.#e)return;const e=this.div;for(const[n,r]of this.#e){const s=e.querySelector(`[data-annotation-id="${n}"]`);if(!s)continue;r.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(r):a.classList.contains("annotationContent")?a.after(r):a.before(r):s.append(r);const o=this.#n.get(n);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(n,s.id,r),o._hasNoCanvas=!1):o.canvas=r)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:n}=this,{id:r,rotation:s}=e,a=new eY({data:{id:r,rect:e.getPDFRect(),rotation:s},editor:e,layer:n,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#i}),o=a.render();return n.append(o),this.#t?.moveElementInDOM(n,o,o,!1),a.createOrUpdatePopup(),a}static get _defaultBorderStyle(){return Jt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:qc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const Cg=/\r\n?|\n/g;class Ln extends Lt{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Ln.prototype,n=a=>a.isEmpty(),r=Ra.TRANSLATE_SMALL,s=Ra.TRANSLATE_BIG;return Jt(this,"_keyboardManager",new Tf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}]]))}static _type="freetext";static _editorType=Wt.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||Ln._defaultColor||Lt._defaultLineColor,this.#n=e.fontSize||Ln._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,n){Lt.initialize(e,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case ce.FREETEXT_SIZE:Ln._defaultFontSize=n;break;case ce.FREETEXT_COLOR:Ln._defaultColor=n;break}}updateParams(e,n){switch(e){case ce.FREETEXT_SIZE:this.#a(n);break;case ce.FREETEXT_COLOR:this.#r(n);break}}static get defaultPropertiesToUpdate(){return[[ce.FREETEXT_SIZE,Ln._defaultFontSize],[ce.FREETEXT_COLOR,Ln._defaultColor||Lt._defaultLineColor]]}get propertiesToUpdate(){return[[ce.FREETEXT_SIZE,this.#n],[ce.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Yd(this),[["colorPicker",this._colorPicker]]}get colorType(){return ce.FREETEXT_COLOR}#a(e){const n=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-this.#n)*this.parentScale),this.#n=s,this.#o()},r=this.#n;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ce.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(e){const n=s=>{this.color=s,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ce.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ln._internalPadding*e,-(Ln._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const e=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(Ln.#c(r)),n=r);return e.join(`
`)}#o(){const[e,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,o=a.style.display,u=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/n):(this.width=r.height/e,this.height=r.width/n),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,n=this.#t=this.#s().trimEnd();if(e===n)return;const r=s=>{if(this.#t=s,!s){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ln._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[d,p]=this.pageDimensions,[g,y]=this.pageTranslation;let b,w;switch(this.rotation){case 0:b=e+(o[0]-g)/d,w=n+this.height-(o[1]-y)/p;break;case 90:b=e+(o[0]-g)/d,w=n-(o[1]-y)/p,[u,h]=[h,-u];break;case 180:b=e-this.width+(o[0]-g)/d,w=n-(o[1]-y)/p,[u,h]=[-u,-h];break;case 270:b=e+(o[0]-g-this.height*p)/d,w=n+(o[1]-y-this.width*d)/p,[u,h]=[-h,u];break}this.setAt(b*s,w*a,u,h)}else this._moveAfterPaste(e,n);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Cg,"")}editorDivPaste(e){const n=e.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const s=Ln.#h(n.getData("text")||"").replaceAll(Cg,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!s.includes(`
`)){o.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:u,startOffset:h}=o,d=[],p=[];if(u.nodeType===Node.TEXT_NODE){const b=u.parentElement;if(p.push(u.nodeValue.slice(h).replaceAll(Cg,"")),b!==this.editorDiv){let w=d;for(const x of this.editorDiv.childNodes){if(x===b){w=p;continue}w.push(Ln.#c(x))}}d.push(u.nodeValue.slice(0,h).replaceAll(Cg,""))}else if(u===this.editorDiv){let b=d,w=0;for(const x of this.editorDiv.childNodes)w++===h&&(b=p),b.push(Ln.#c(x))}this.#t=`${d.join(`
`)}${s}${p.join(`
`)}`,this.#l();const g=new Range;let y=Math.sumPrecise(d.map(b=>b.length));for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const w=b.nodeValue.length;if(y<=w){g.setStart(b,y),g.setEnd(b,y);break}y-=w}a.removeAllRanges(),a.addRange(g)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}}#d(){return this.#t.replaceAll(""," ")}static#h(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Ln._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,r){let s=null;if(e instanceof HM){const{data:{defaultAppearanceData:{fontSize:o,fontColor:u},rect:h,rotation:d,id:p,popupRef:g,richText:y,contentsObj:b,creationDate:w,modificationDate:x},textContent:S,textPosition:E,parent:{page:{pageNumber:k}}}=e;if(!S||S.length===0)return null;s=e={annotationType:Wt.FREETEXT,color:Array.from(u),fontSize:o,value:S.join(`
`),position:E,pageIndex:k-1,rect:h.slice(0),rotation:d,annotationElementId:p,id:p,deleted:!1,popupRef:g,comment:b?.str||null,richText:y,creationDate:w,modificationDate:x}}const a=await super.deserialize(e,n,r);return a.#n=e.fontSize,a.color=Ct.makeHexColor(...e.color),a.#t=Ln.#h(e.value),a._initialData=s,e.comment&&a.setCommentData(e),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Lt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(e),{color:n,fontSize:this.#n,value:this.#d()});return this.addComment(r),e?(r.isCopy=!0,r):this.annotationElementId&&!this.#f(r)?null:(r.id=this.annotationElementId,r)}#f(e){const{value:n,fontSize:r,color:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==r||e.color.some((o,u)=>o!==s[u])||e.pageIndex!==a}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:r}=n;r.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,r.color=this.color,n.replaceChildren();for(const s of this.#t.split(`
`)){const a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),n.append(a)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class Tt{static PRECISION=1e-4;toSVGPath(){Fe("Abstract method `toSVGPath` must be implemented.")}get box(){Fe("Abstract getter `box` must be implemented.")}serialize(e,n){Fe("Abstract method `serialize` must be implemented.")}static _rescale(e,n,r,s,a,o){o||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)o[u]=n+e[u]*s,o[u+1]=r+e[u+1]*a;return o}static _rescaleAndSwap(e,n,r,s,a,o){o||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)o[u]=n+e[u+1]*s,o[u+1]=r+e[u]*a;return o}static _translate(e,n,r,s){s||=new Float32Array(e.length);for(let a=0,o=e.length;a<o;a+=2)s[a]=n+e[a],s[a+1]=r+e[a+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,n,r,s,a){switch(a){case 90:return[1-n/r,e/s];case 180:return[1-e/r,1-n/s];case 270:return[n/r,1-e/s];default:return[e/r,n/s]}}static _normalizePagePoint(e,n,r){switch(r){case 90:return[1-n,e];case 180:return[1-e,1-n];case 270:return[n,1-e];default:return[e,n]}}static createBezierPoints(e,n,r,s,a,o){return[(e+5*r)/6,(n+5*s)/6,(5*r+a)/6,(5*s+o)/6,(r+a)/2,(s+o)/2]}}class Tl{#t;#e=[];#i;#n;#a=[];#r=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#m=8;static#p=2;static#u=Tl.#m+Tl.#p;constructor({x:e,y:n},r,s,a,o,u=0){this.#t=r,this.#h=a*s,this.#n=o,this.#r.set([NaN,NaN,NaN,NaN,e,n],6),this.#i=u,this.#l=Tl.#m*s,this.#c=Tl.#u*s,this.#d=s,this.#f.push(e,n)}isEmpty(){return isNaN(this.#r[8])}#g(){const e=this.#r.subarray(4,6),n=this.#r.subarray(16,18),[r,s,a,o]=this.#t;return[(this.#s+(e[0]-n[0])/2-r)/a,(this.#o+(e[1]-n[1])/2-s)/o,(this.#s+(n[0]-e[0])/2-r)/a,(this.#o+(n[1]-e[1])/2-s)/o]}add({x:e,y:n}){this.#s=e,this.#o=n;const[r,s,a,o]=this.#t;let[u,h,d,p]=this.#r.subarray(8,12);const g=e-d,y=n-p,b=Math.hypot(g,y);if(b<this.#c)return!1;const w=b-this.#l,x=w/b,S=x*g,E=x*y;let k=u,N=h;u=d,h=p,d+=S,p+=E,this.#f?.push(e,n);const M=-E/w,O=S/w,B=M*this.#h,C=O*this.#h;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([d+B,p+C],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([d-B,p-C],16),isNaN(this.#r[6])?(this.#a.length===0&&(this.#r.set([u+B,h+C],2),this.#a.push(NaN,NaN,NaN,NaN,(u+B-r)/a,(h+C-s)/o),this.#r.set([u-B,h-C],14),this.#e.push(NaN,NaN,NaN,NaN,(u-B-r)/a,(h-C-s)/o)),this.#r.set([k,N,u,h,d,p],6),!this.isEmpty()):(this.#r.set([k,N,u,h,d,p],6),Math.abs(Math.atan2(N-h,k-u)-Math.atan2(E,S))<Math.PI/2?([u,h,d,p]=this.#r.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((u+d)/2-r)/a,((h+p)/2-s)/o),[u,h,k,N]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((k+u)/2-r)/a,((N+h)/2-s)/o),!0):([k,N,u,h,d,p]=this.#r.subarray(0,6),this.#a.push(((k+5*u)/6-r)/a,((N+5*h)/6-s)/o,((5*u+d)/6-r)/a,((5*h+p)/6-s)/o,((u+d)/2-r)/a,((h+p)/2-s)/o),[d,p,u,h,k,N]=this.#r.subarray(12,18),this.#e.push(((k+5*u)/6-r)/a,((N+5*h)/6-s)/o,((5*u+d)/6-r)/a,((5*h+p)/6-s)/o,((u+d)/2-r)/a,((h+p)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#a,n=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#y();const r=[];r.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?r.push(`L${e[s+4]} ${e[s+5]}`):r.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);this.#b(r);for(let s=n.length-6;s>=6;s-=6)isNaN(n[s])?r.push(`L${n[s+4]} ${n[s+5]}`):r.push(`C${n[s]} ${n[s+1]} ${n[s+2]} ${n[s+3]} ${n[s+4]} ${n[s+5]}`);return this.#v(r),r.join(" ")}#y(){const[e,n,r,s]=this.#t,[a,o,u,h]=this.#g();return`M${(this.#r[2]-e)/r} ${(this.#r[3]-n)/s} L${(this.#r[4]-e)/r} ${(this.#r[5]-n)/s} L${a} ${o} L${u} ${h} L${(this.#r[16]-e)/r} ${(this.#r[17]-n)/s} L${(this.#r[14]-e)/r} ${(this.#r[15]-n)/s} Z`}#v(e){const n=this.#e;e.push(`L${n[4]} ${n[5]} Z`)}#b(e){const[n,r,s,a]=this.#t,o=this.#r.subarray(4,6),u=this.#r.subarray(16,18),[h,d,p,g]=this.#g();e.push(`L${(o[0]-n)/s} ${(o[1]-r)/a} L${h} ${d} L${p} ${g} L${(u[0]-n)/s} ${(u[1]-r)/a}`)}newFreeDrawOutline(e,n,r,s,a,o){return new XM(e,n,r,s,a,o)}getOutlines(){const e=this.#a,n=this.#e,r=this.#r,[s,a,o,u]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let g=0,y=h.length-2;g<y;g+=2)h[g]=(this.#f[g]-s)/o,h[g+1]=(this.#f[g+1]-a)/u;if(h[h.length-2]=(this.#s-s)/o,h[h.length-1]=(this.#o-a)/u,isNaN(r[6])&&!this.isEmpty())return this.#S(h);const d=new Float32Array(this.#a.length+24+this.#e.length);let p=e.length;for(let g=0;g<p;g+=2){if(isNaN(e[g])){d[g]=d[g+1]=NaN;continue}d[g]=e[g],d[g+1]=e[g+1]}p=this.#_(d,p);for(let g=n.length-6;g>=6;g-=6)for(let y=0;y<6;y+=2){if(isNaN(n[g+y])){d[p]=d[p+1]=NaN,p+=2;continue}d[p]=n[g+y],d[p+1]=n[g+y+1],p+=2}return this.#x(d,p),this.newFreeDrawOutline(d,h,this.#t,this.#d,this.#i,this.#n)}#S(e){const n=this.#r,[r,s,a,o]=this.#t,[u,h,d,p]=this.#g(),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(n[2]-r)/a,(n[3]-s)/o,NaN,NaN,NaN,NaN,(n[4]-r)/a,(n[5]-s)/o,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,(n[16]-r)/a,(n[17]-s)/o,NaN,NaN,NaN,NaN,(n[14]-r)/a,(n[15]-s)/o],0),this.newFreeDrawOutline(g,e,this.#t,this.#d,this.#i,this.#n)}#x(e,n){const r=this.#e;return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],n),n+=6}#_(e,n){const r=this.#r.subarray(4,6),s=this.#r.subarray(16,18),[a,o,u,h]=this.#t,[d,p,g,y]=this.#g();return e.set([NaN,NaN,NaN,NaN,(r[0]-a)/u,(r[1]-o)/h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,g,y,NaN,NaN,NaN,NaN,(s[0]-a)/u,(s[1]-o)/h],n),n+=24}}class XM extends Tt{#t;#e=new Float32Array(4);#i;#n;#a;#r;#s;constructor(e,n,r,s,a,o){super(),this.#s=e,this.#a=n,this.#t=r,this.#r=s,this.#i=a,this.#n=o,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(o);const[u,h,d,p]=this.#e;for(let g=0,y=e.length;g<y;g+=2)e[g]=(e[g]-u)/d,e[g+1]=(e[g+1]-h)/p;for(let g=0,y=n.length;g<y;g+=2)n[g]=(n[g]-u)/d,n[g+1]=(n[g+1]-h)/p}toSVGPath(){const e=[`M${this.#s[4]} ${this.#s[5]}`];for(let n=6,r=this.#s.length;n<r;n+=6){if(isNaN(this.#s[n])){e.push(`L${this.#s[n+4]} ${this.#s[n+5]}`);continue}e.push(`C${this.#s[n]} ${this.#s[n+1]} ${this.#s[n+2]} ${this.#s[n+3]} ${this.#s[n+4]} ${this.#s[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,r,s],a){const o=r-e,u=s-n;let h,d;switch(a){case 0:h=Tt._rescale(this.#s,e,s,o,-u),d=Tt._rescale(this.#a,e,s,o,-u);break;case 90:h=Tt._rescaleAndSwap(this.#s,e,n,o,u),d=Tt._rescaleAndSwap(this.#a,e,n,o,u);break;case 180:h=Tt._rescale(this.#s,r,n,-o,u),d=Tt._rescale(this.#a,r,n,-o,u);break;case 270:h=Tt._rescaleAndSwap(this.#s,r,s,-o,-u),d=Tt._rescaleAndSwap(this.#a,r,s,-o,-u);break}return{outline:Array.from(h),points:[Array.from(d)]}}#o(e){const n=this.#s;let r=n[4],s=n[5];const a=[r,s,r,s];let o=r,u=s,h=r,d=s;const p=e?Math.max:Math.min,g=new Float32Array(4);for(let b=6,w=n.length;b<w;b+=6){const x=n[b+4],S=n[b+5];isNaN(n[b])?(Ct.pointBoundingBox(x,S,a),u>S?(o=x,u=S):u===S&&(o=p(o,x)),d<S?(h=x,d=S):d===S&&(h=p(h,x))):(g[0]=g[1]=1/0,g[2]=g[3]=-1/0,Ct.bezierBoundingBox(r,s,...n.slice(b,b+6),g),Ct.rectBoundingBox(g[0],g[1],g[2],g[3],a),u>g[1]?(o=g[0],u=g[1]):u===g[1]&&(o=p(o,g[0])),d<g[3]?(h=g[2],d=g[3]):d===g[3]&&(h=p(h,g[2]))),r=x,s=S}const y=this.#e;y[0]=a[0]-this.#i,y[1]=a[1]-this.#i,y[2]=a[2]-a[0]+2*this.#i,y[3]=a[3]-a[1]+2*this.#i,this.firstPoint=[o,u],this.lastPoint=[h,d]}get box(){return this.#e}newOutliner(e,n,r,s,a,o=0){return new Tl(e,n,r,s,a,o)}getNewOutline(e,n){const[r,s,a,o]=this.#e,[u,h,d,p]=this.#t,g=a*d,y=o*p,b=r*d+u,w=s*p+h,x=this.newOutliner({x:this.#a[0]*g+b,y:this.#a[1]*y+w},this.#t,this.#r,e,this.#n,n??this.#i);for(let S=2;S<this.#a.length;S+=2)x.add({x:this.#a[S]*g+b,y:this.#a[S+1]*y+w});return x.getOutlines()}}class j_{#t;#e;#i;#n=[];#a=[];constructor(e,n=0,r=0,s=!0){const a=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x,y:S,width:E,height:k}of e){const N=Math.floor((x-n)/o)*o,M=Math.ceil((x+E+n)/o)*o,O=Math.floor((S-n)/o)*o,B=Math.ceil((S+k+n)/o)*o,C=[N,O,B,!0],R=[M,O,B,!1];this.#n.push(C,R),Ct.rectBoundingBox(N,O,M,B,a)}const u=a[2]-a[0]+2*r,h=a[3]-a[1]+2*r,d=a[0]-r,p=a[1]-r;let g=s?-1/0:1/0,y=1/0;const b=this.#n.at(s?-1:-2),w=[b[0],b[2]];for(const x of this.#n){const[S,E,k,N]=x;!N&&s?E<y?(y=E,g=S):E===y&&(g=Math.max(g,S)):N&&!s&&(E<y?(y=E,g=S):E===y&&(g=Math.min(g,S))),x[0]=(S-d)/u,x[1]=(E-p)/h,x[2]=(k-p)/h}this.#t=new Float32Array([d,p,u,h]),this.#e=[g,y],this.#i=w}getOutlines(){this.#n.sort((n,r)=>n[0]-r[0]||n[1]-r[1]||n[2]-r[2]);const e=[];for(const n of this.#n)n[3]?(e.push(...this.#l(n)),this.#o(n)):(this.#c(n),e.push(...this.#l(n)));return this.#r(e)}#r(e){const n=[],r=new Set;for(const o of e){const[u,h,d]=o;n.push([u,h,o],[u,d,o])}n.sort((o,u)=>o[1]-u[1]||o[0]-u[0]);for(let o=0,u=n.length;o<u;o+=2){const h=n[o][2],d=n[o+1][2];h.push(d),d.push(h),r.add(h),r.add(d)}const s=[];let a;for(;r.size>0;){const o=r.values().next().value;let[u,h,d,p,g]=o;r.delete(o);let y=u,b=h;for(a=[u,d],s.push(a);;){let w;if(r.has(p))w=p;else if(r.has(g))w=g;else break;r.delete(w),[u,h,d,p,g]=w,y!==u&&(a.push(y,b,u,b===h?h:d),y=u),b=b===h?d:h}a.push(y,b)}return new bY(s,this.#t,this.#e,this.#i)}#s(e){const n=this.#a;let r=0,s=n.length-1;for(;r<=s;){const a=r+s>>1,o=n[a][0];if(o===e)return a;o<e?r=a+1:s=a-1}return s+1}#o([,e,n]){const r=this.#s(e);this.#a.splice(r,0,[e,n])}#c([,e,n]){const r=this.#s(e);for(let s=r;s<this.#a.length;s++){const[a,o]=this.#a[s];if(a!==e)break;if(a===e&&o===n){this.#a.splice(s,1);return}}for(let s=r-1;s>=0;s--){const[a,o]=this.#a[s];if(a!==e)break;if(a===e&&o===n){this.#a.splice(s,1);return}}}#l(e){const[n,r,s]=e,a=[[n,r,s]],o=this.#s(s);for(let u=0;u<o;u++){const[h,d]=this.#a[u];for(let p=0,g=a.length;p<g;p++){const[,y,b]=a[p];if(!(d<=y||b<=h)){if(y>=h){if(b>d)a[p][1]=d;else{if(g===1)return[];a.splice(p,1),p--,g--}continue}a[p][2]=h,b>d&&a.push([n,d,b])}}}return a}}class bY extends Tt{#t;#e;constructor(e,n,r,s){super(),this.#e=e,this.#t=n,this.firstPoint=r,this.lastPoint=s}toSVGPath(){const e=[];for(const n of this.#e){let[r,s]=n;e.push(`M${r} ${s}`);for(let a=2;a<n.length;a+=2){const o=n[a],u=n[a+1];o===r?(e.push(`V${u}`),s=u):u===s&&(e.push(`H${o}`),r=o)}e.push("Z")}return e.join(" ")}serialize([e,n,r,s],a){const o=[],u=r-e,h=s-n;for(const d of this.#e){const p=new Array(d.length);for(let g=0;g<d.length;g+=2)p[g]=e+d[g]*u,p[g+1]=s-d[g+1]*h;o.push(p)}return o}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class z_ extends Tl{newFreeDrawOutline(e,n,r,s,a,o){return new vY(e,n,r,s,a,o)}}class vY extends XM{newOutliner(e,n,r,s,a,o=0){return new z_(e,n,r,s,a,o)}}class mn extends Lt{#t=null;#e=0;#i;#n=null;#a=null;#r=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#p=null;#u="";#g;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Wt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=mn.prototype;return Jt(this,"_keyboardManager",new Tf([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||mn._defaultColor,this.#g=e.thickness||mn._defaultThickness,this.opacity=e.opacity||mn._defaultOpacity,this.#i=e.boxes||null,this.#y=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#h=!0,this.#b(e),this.#A()):this.#i&&(this.#t=e.anchorNode,this.#e=e.anchorOffset,this.#s=e.focusNode,this.#o=e.focusOffset,this.#v(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#v(){const e=new j_(this.#i,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const n=new j_(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#r=n.getOutlines();const{firstPoint:r}=this.#l;this.#f=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height];const{lastPoint:s}=this.#r;this.#m=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#b({highlightOutlines:e,highlightId:n,clipPathId:r}){this.#l=e;const s=1.5;if(this.#r=e.getNewOutline(this.#g/2+s,.0025),n>=0)this.#d=n,this.#n=r,this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:mn.#E(this.#l.box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:mn.#E(this.#r.box,g),path:{d:this.#r.toSVGPath()}})}const[a,o,u,h]=e.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=u,this.height=h;break;case 90:{const[g,y]=this.parentDimensions;this.x=o,this.y=1-a,this.width=u*y/g,this.height=h*g/y;break}case 180:this.x=1-a,this.y=1-o,this.width=u,this.height=h;break;case 270:{const[g,y]=this.parentDimensions;this.x=1-o,this.y=a,this.width=u*y/g,this.height=h*g/y;break}}const{firstPoint:d}=e;this.#f=[(d[0]-a)/u,(d[1]-o)/h];const{lastPoint:p}=this.#r;this.#m=[(p[0]-a)/u,(p[1]-o)/h]}static initialize(e,n){Lt.initialize(e,n),mn._defaultColor||=n.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,n){switch(e){case ce.HIGHLIGHT_COLOR:mn._defaultColor=n;break;case ce.HIGHLIGHT_THICKNESS:mn._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(e,n){switch(e){case ce.HIGHLIGHT_COLOR:this.#S(n);break;case ce.HIGHLIGHT_THICKNESS:this.#x(n);break}}static get defaultPropertiesToUpdate(){return[[ce.HIGHLIGHT_COLOR,mn._defaultColor],[ce.HIGHLIGHT_THICKNESS,mn._defaultThickness]]}get propertiesToUpdate(){return[[ce.HIGHLIGHT_COLOR,this.color||mn._defaultColor],[ce.HIGHLIGHT_THICKNESS,this.#g||mn._defaultThickness],[ce.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#S(e){const n=(a,o)=>{this.color=a,this.opacity=o,this.onUpdatedColor()},r=this.color,s=this.opacity;this.addCommands({cmd:n.bind(this,e,mn._defaultOpacity),undo:n.bind(this,r,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ce.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#x(e){const n=this.#g,r=s=>{this.#g=s,this.#_(s)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ce.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new Ki({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#I())}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,this.#I())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let n=!1;this.parent&&!e?this.#C():e&&(this.#A(e),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),n&&this.select()}#_(e){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#A(e=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#E([e,n,r,s],a){switch(a){case 90:return[1-n-s,e,s,r];case 180:return[1-e-r,1-n-s,r,s];case 270:return[n,1-e-r,s,r]}return[e,n,r,s]}rotate(e){const{drawLayer:n}=this.parent;let r;this.#h?(e=(e-this.rotation+360)%360,r=mn.#E(this.#l.box,e)):r=mn.#E([this.x,this.y,this.width,this.height],e),n.updateProperties(this.#d,{bbox:r,root:{"data-main-rotation":e}}),n.updateProperties(this.#p,{bbox:mn.#E(this.#r.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#h?e.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const n=this.#c=document.createElement("div");return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=this.#n,this.setDims(this.width,this.height),xM(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#D(e){mn._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(e){if(!this.#t)return;const n=window.getSelection();e?n.setPosition(this.#t,this.#e):n.setPosition(this.#s,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#R(!1))}get _mustFixPosition(){return!this.#h}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!e}}))}#I(){return this.#h?this.rotation:0}#B(){if(this.#h)return null;const[e,n]=this.pageDimensions,[r,s]=this.pageTranslation,a=this.#i,o=new Float32Array(a.length*8);let u=0;for(const{x:h,y:d,width:p,height:g}of a){const y=h*e+r,b=(1-d)*n+s;o[u]=o[u+4]=y,o[u+1]=o[u+3]=b,o[u+2]=o[u+6]=y+p*e,o[u+5]=o[u+7]=b-g*n,u+=8}return o}#N(e){return this.#l.serialize(e,this.#I())}static startHighlighting(e,n,{target:r,x:s,y:a}){const{x:o,y:u,width:h,height:d}=r.getBoundingClientRect(),p=new AbortController,g=e.combinedSignal(p),y=b=>{p.abort(),this.#F(e,b)};window.addEventListener("blur",y,{signal:g}),window.addEventListener("pointerup",y,{signal:g}),window.addEventListener("pointerdown",en,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",rr,{signal:g}),r.addEventListener("pointermove",this.#P.bind(this,e),{signal:g}),this._freeHighlight=new z_({x:s,y:a},[o,u,h,d],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#P(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,n,r){let s=null;if(e instanceof GM){const{data:{quadPoints:w,rect:x,rotation:S,id:E,color:k,opacity:N,popupRef:M,richText:O,contentsObj:B,creationDate:C,modificationDate:R},parent:{page:{pageNumber:L}}}=e;s=e={annotationType:Wt.HIGHLIGHT,color:Array.from(k),opacity:N,quadPoints:w,boxes:null,pageIndex:L-1,rect:x.slice(0),rotation:S,annotationElementId:E,id:E,deleted:!1,popupRef:M,richText:O,comment:B?.str||null,creationDate:C,modificationDate:R}}else if(e instanceof U1){const{data:{inkLists:w,rect:x,rotation:S,id:E,color:k,borderStyle:{rawWidth:N},popupRef:M,richText:O,contentsObj:B,creationDate:C,modificationDate:R},parent:{page:{pageNumber:L}}}=e;s=e={annotationType:Wt.HIGHLIGHT,color:Array.from(k),thickness:N,inkLists:w,boxes:null,pageIndex:L-1,rect:x.slice(0),rotation:S,annotationElementId:E,id:E,deleted:!1,popupRef:M,richText:O,comment:B?.str||null,creationDate:C,modificationDate:R}}const{color:a,quadPoints:o,inkLists:u,opacity:h}=e,d=await super.deserialize(e,n,r);d.color=Ct.makeHexColor(...a),d.opacity=h||1,u&&(d.#g=e.thickness),d._initialData=s,e.comment&&d.setCommentData(e);const[p,g]=d.pageDimensions,[y,b]=d.pageTranslation;if(o){const w=d.#i=[];for(let x=0;x<o.length;x+=8)w.push({x:(o[x]-y)/p,y:1-(o[x+1]-b)/g,width:(o[x+2]-o[x])/p,height:(o[x+1]-o[x+5])/g});d.#v(),d.#A(),d.rotate(d.rotation)}else if(u){d.#h=!0;const w=u[0],x={x:w[0]-y,y:g-(w[1]-b)},S=new z_(x,[0,0,p,g],1,d.#g/2,!0,.001);for(let N=0,M=w.length;N<M;N+=2)x.x=w[N]-y,x.y=g-(w[N+1]-b),S.add(x);const{id:E,clipPathId:k}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);d.#b({highlightOutlines:S.getOutlines(),highlightId:E,clipPathId:k}),d.#A(),d.rotate(d.parentRotation)}return d}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=Lt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(e);return Object.assign(r,{color:n,opacity:this.opacity,thickness:this.#g,quadPoints:this.#B(),outlines:this.#N(r.rect)}),this.addComment(r),this.annotationElementId&&!this.#O(r)?null:(r.id=this.annotationElementId,r)}#O(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((r,s)=>r!==n[s])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class YM{#t=Object.create(null);updateProperty(e,n){this[e]=n,this.updateSVGProperty(e,n)}updateProperties(e){if(e)for(const[n,r]of Object.entries(e))n.startsWith("_")||this.updateProperty(n,r)}updateSVGProperty(e,n){this.#t[e]=n}toSVGProperties(){const e=this.#t;return this.#t=Object.create(null),{root:e}}reset(){this.#t=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){Fe("Not implemented")}}class Ut extends Lt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#a=null;static#r=NaN;static#s=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#e=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#l(e),this.#f())}#l({drawOutlines:e,drawId:n,drawingOptions:r}){this.#t=e,this._drawingOptions||=r,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=this.#d(e,this.parent),this.#u(e.box)}#d(e,n){const{id:r}=n.drawLayer.draw(Ut._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r}static _mergeSVGProperties(e,n){const r=new Set(Object.keys(e));for(const[s,a]of Object.entries(n))r.has(s)?Object.assign(e[s],a):e[s]=a;return e}static getDefaultDrawingOptions(e){Fe("Not implemented")}static get typesMap(){Fe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(Ut.#i.updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[r,s]of this.typesMap)e.push([r,n[s]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[r,s]of this.constructor.typesMap)e.push([r,n[s]]);return e}_updateProperty(e,n,r){const s=this._drawingOptions,a=s[n],o=u=>{s.updateProperty(n,u);const h=this.#t.updateProperty(n,u);h&&this.#u(h),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,r),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Ut._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Ut._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(e,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Ut._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#h()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),n&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,e)}}#m([e,n,r,s]){const{parentDimensions:[a,o],rotation:u}=this;switch(u){case 90:return[n,1-e,r*(o/a),s*(a/o)];case 180:return[1-e,1-n,r,s];case 270:return[1-n,e,r*(o/a),s*(a/o)];default:return[e,n,r,s]}}#p(){const{x:e,y:n,width:r,height:s,parentDimensions:[a,o],rotation:u}=this;switch(u){case 90:return[1-n,e,r*(a/o),s*(o/a)];case 180:return[1-e,1-n,r,s];case 270:return[n,1-e,r*(a/o),s*(o/a)];default:return[e,n,r,s]}}#u(e){[this.x,this.y,this.width,this.height]=this.#m(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#g(){const{x:e,y:n,width:r,height:s,rotation:a,parentRotation:o,parentDimensions:[u,h]}=this;switch((a*4+o)/90){case 1:return[1-n-s,e,s,r];case 2:return[1-e-r,1-n-s,r,s];case 3:return[n,1-e-r,s,r];case 4:return[e,n-r*(u/h),s*(h/u),r*(u/h)];case 5:return[1-n,e,r*(u/h),s*(h/u)];case 6:return[1-e-s*(h/u),1-n,s*(h/u),r*(u/h)];case 7:return[n-r*(u/h),1-e-s*(h/u),r*(u/h),s*(h/u)];case 8:return[e-r,n-s,r,s];case 9:return[1-n,e-r,s,r];case 10:return[1-e,1-n,r,s];case 11:return[n-s,1-e,s,r];case 12:return[e-s*(h/u),n,s*(h/u),r*(u/h)];case 13:return[1-n-r*(u/h),e-s*(h/u),r*(u/h),s*(h/u)];case 14:return[1-e,1-n-r*(u/h),s*(h/u),r*(u/h)];case 15:return[n,1-e,r*(u/h),s*(h/u)];default:return[e,n,r,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ut._mergeSVGProperties({bbox:this.#g()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const r=super.render();r.classList.add("draw");const s=document.createElement("div");return r.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),r}static createDrawerInstance(e,n,r,s,a){Fe("Not implemented")}static startDrawing(e,n,r,s){const{target:a,offsetX:o,offsetY:u,pointerId:h,pointerType:d}=s;if(Ut.#s&&Ut.#s!==d)return;const{viewport:{rotation:p}}=e,{width:g,height:y}=a.getBoundingClientRect(),b=Ut.#n=new AbortController,w=e.combinedSignal(b);if(Ut.#r||=h,Ut.#s??=d,window.addEventListener("pointerup",x=>{Ut.#r===x.pointerId?this._endDraw(x):Ut.#o?.delete(x.pointerId)},{signal:w}),window.addEventListener("pointercancel",x=>{Ut.#r===x.pointerId?this._currentParent.endDrawingSession():Ut.#o?.delete(x.pointerId)},{signal:w}),window.addEventListener("pointerdown",x=>{Ut.#s===x.pointerType&&((Ut.#o||=new Set).add(x.pointerId),Ut.#i.isCancellable()&&(Ut.#i.removeLastElement(),Ut.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",rr,{signal:w}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),a.addEventListener("touchmove",x=>{x.timeStamp===Ut.#c&&en(x)},{signal:w}),e.toggleDrawing(),n._editorUndoBar?.hide(),Ut.#i){e.drawLayer.updateProperties(this._currentDrawId,Ut.#i.startNew(o,u,g,y,p));return}n.updateUIForDefaultProperties(this),Ut.#i=this.createDrawerInstance(o,u,g,y,p),Ut.#a=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Ut.#a.toSVGProperties(),Ut.#i.defaultSVGProperties),!0,!1)}static _drawMove(e){if(Ut.#c=-1,!Ut.#i)return;const{offsetX:n,offsetY:r,pointerId:s}=e;if(Ut.#r===s){if(Ut.#o?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ut.#i.add(n,r)),Ut.#c=e.timeStamp,en(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Ut.#i=null,Ut.#a=null,Ut.#s=null,Ut.#c=NaN),Ut.#n&&(Ut.#n.abort(),Ut.#n=null,Ut.#r=NaN,Ut.#o=null)}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),e?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,Ut.#i.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=Ut.#i,s=this._currentDrawId,a=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(s,r.setLastElement(a))},undo:()=>{n.drawLayer.updateProperties(s,r.removeLastElement())},mustExec:!1,type:ce.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(ce.DRAW_STEP),!Ut.#i.isEmpty()){const{pageDimensions:[r,s],scale:a}=n,o=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ut.#i.getOutlines(r*a,s*a,a,this._INNER_MARGIN),drawingOptions:Ut.#a,mustBeCommitted:!e});return this._cleanup(!0),o}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,r,s,a,o){Fe("Not implemented")}static async deserialize(e,n,r){const{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:u}}=n.viewport,h=this.deserializeDraw(o,u,s,a,this._INNER_MARGIN,e),d=await super.deserialize(e,n,r);return d.createDrawingOptions(e),d.#l({drawOutlines:h}),d.#f(),d.onScaleChanging(),d.rotate(),d}serializeDraw(e){const[n,r]=this.pageTranslation,[s,a]=this.pageDimensions;return this.#t.serialize([n,r,s,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class _Y{#t=new Float64Array(6);#e;#i;#n;#a;#r;#s="";#o=0;#c=new If;#l;#d;constructor(e,n,r,s,a,o){this.#l=r,this.#d=s,this.#n=a,this.#a=o,[e,n]=this.#h(e,n);const u=this.#e=[NaN,NaN,NaN,NaN,e,n];this.#r=[e,n],this.#i=[{line:u,points:this.#r}],this.#t.set(u,0)}updateProperty(e,n){e==="stroke-width"&&(this.#a=n)}#h(e,n){return Tt._normalizePoint(e,n,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#r.length<=10}add(e,n){[e,n]=this.#h(e,n);const[r,s,a,o]=this.#t.subarray(2,6),u=e-a,h=n-o;return Math.hypot(this.#l*u,this.#d*h)<=2?null:(this.#r.push(e,n),isNaN(r)?(this.#t.set([a,o,e,n],2),this.#e.push(NaN,NaN,NaN,NaN,e,n),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([r,s,a,o,e,n],0),this.#e.push(...Tt.createBezierPoints(r,s,a,o,e,n)),{path:{d:this.toSVGPath()}}))}end(e,n){const r=this.add(e,n);return r||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,n,r,s,a){this.#l=r,this.#d=s,this.#n=a,[e,n]=this.#h(e,n);const o=this.#e=[NaN,NaN,NaN,NaN,e,n];this.#r=[e,n];const u=this.#i.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#i.push({line:o,points:this.#r}),this.#t.set(o,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(e){return this.#i?(this.#i.push(e),this.#e=e.line,this.#r=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#s="";for(let e=0,n=this.#i.length;e<n;e++){const{line:r,points:s}=this.#i[e];this.#e=r,this.#r=s,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const e=Tt.svgRound(this.#e[4]),n=Tt.svgRound(this.#e[5]);if(this.#r.length===2)return this.#s=`${this.#s} M ${e} ${n} Z`,this.#s;if(this.#r.length<=6){const s=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,s)} M ${e} ${n}`,this.#o=6}if(this.#r.length===4){const s=Tt.svgRound(this.#e[10]),a=Tt.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${s} ${a}`,this.#o=12,this.#s}const r=[];this.#o===0&&(r.push(`M ${e} ${n}`),this.#o=6);for(let s=this.#o,a=this.#e.length;s<a;s+=6){const[o,u,h,d,p,g]=this.#e.slice(s,s+6).map(Tt.svgRound);r.push(`C${o} ${u} ${h} ${d} ${p} ${g}`)}return this.#s+=r.join(" "),this.#o=this.#e.length,this.#s}getOutlines(e,n,r,s){const a=this.#i.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#c.build(this.#i,e,n,r,this.#n,this.#a,s),this.#t=null,this.#e=null,this.#i=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class If extends Tt{#t;#e=0;#i;#n;#a;#r;#s;#o;#c;build(e,n,r,s,a,o,u){this.#a=n,this.#r=r,this.#s=s,this.#o=a,this.#c=o,this.#i=u??0,this.#n=e,this.#h()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of this.#n){if(e.push(`M${Tt.svgRound(n[4])} ${Tt.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${Tt.svgRound(n[10])} ${Tt.svgRound(n[11])}`);continue}for(let r=6,s=n.length;r<s;r+=6){const[a,o,u,h,d,p]=n.subarray(r,r+6).map(Tt.svgRound);e.push(`C${a} ${o} ${u} ${h} ${d} ${p}`)}}return e.join("")}serialize([e,n,r,s],a){const o=[],u=[],[h,d,p,g]=this.#d();let y,b,w,x,S,E,k,N,M;switch(this.#o){case 0:M=Tt._rescale,y=e,b=n+s,w=r,x=-s,S=e+h*r,E=n+(1-d-g)*s,k=e+(h+p)*r,N=n+(1-d)*s;break;case 90:M=Tt._rescaleAndSwap,y=e,b=n,w=r,x=s,S=e+d*r,E=n+h*s,k=e+(d+g)*r,N=n+(h+p)*s;break;case 180:M=Tt._rescale,y=e+r,b=n,w=-r,x=s,S=e+(1-h-p)*r,E=n+d*s,k=e+(1-h)*r,N=n+(d+g)*s;break;case 270:M=Tt._rescaleAndSwap,y=e+r,b=n+s,w=-r,x=-s,S=e+(1-d-g)*r,E=n+(1-h-p)*s,k=e+(1-d)*r,N=n+(1-h)*s;break}for(const{line:O,points:B}of this.#n)o.push(M(O,y,b,w,x,a?new Array(O.length):null)),u.push(M(B,y,b,w,x,a?new Array(B.length):null));return{lines:o,points:u,rect:[S,E,k,N]}}static deserialize(e,n,r,s,a,{paths:{lines:o,points:u},rotation:h,thickness:d}){const p=[];let g,y,b,w,x;switch(h){case 0:x=Tt._rescale,g=-e/r,y=n/s+1,b=1/r,w=-1/s;break;case 90:x=Tt._rescaleAndSwap,g=-n/s,y=-e/r,b=1/s,w=1/r;break;case 180:x=Tt._rescale,g=e/r+1,y=-n/s,b=-1/r,w=1/s;break;case 270:x=Tt._rescaleAndSwap,g=n/s+1,y=e/r+1,b=-1/s,w=-1/r;break}if(!o){o=[];for(const E of u){const k=E.length;if(k===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(k===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const N=new Float32Array(3*(k-2));o.push(N);let[M,O,B,C]=E.subarray(0,4);N.set([NaN,NaN,NaN,NaN,M,O],0);for(let R=4;R<k;R+=2){const L=E[R],F=E[R+1];N.set(Tt.createBezierPoints(M,O,B,C,L,F),(R-2)*3),[M,O,B,C]=[B,C,L,F]}}}for(let E=0,k=o.length;E<k;E++)p.push({line:x(o[E].map(N=>N??NaN),g,y,b,w),points:x(u[E].map(N=>N??NaN),g,y,b,w)});const S=new this.prototype.constructor;return S.build(p,r,s,1,h,d,a),S}#l(e=this.#c){const n=this.#i+e/2*this.#s;return this.#o%180===0?[n/this.#a,n/this.#r]:[n/this.#r,n/this.#a]}#d(){const[e,n,r,s]=this.#t,[a,o]=this.#l(0);return[e+a,n+o,r-2*a,s-2*o]}#h(){const e=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:s}of this.#n){if(s.length<=12){for(let u=4,h=s.length;u<h;u+=6)Ct.pointBoundingBox(s[u],s[u+1],e);continue}let a=s[4],o=s[5];for(let u=6,h=s.length;u<h;u+=6){const[d,p,g,y,b,w]=s.subarray(u,u+6);Ct.bezierBoundingBox(a,o,d,p,g,y,b,w,e),a=b,o=w}}const[n,r]=this.#l();e[0]=si(e[0]-n,0,1),e[1]=si(e[1]-r,0,1),e[2]=si(e[2]+n,0,1),e[3]=si(e[3]+r,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#t}updateProperty(e,n){return e==="stroke-width"?this.#f(n):null}#f(e){const[n,r]=this.#l();this.#c=e;const[s,a]=this.#l(),[o,u]=[s-n,a-r],h=this.#t;return h[0]-=o,h[1]-=u,h[2]+=2*o,h[3]+=2*u,h}updateParentDimensions([e,n],r){const[s,a]=this.#l();this.#a=e,this.#r=n,this.#s=r;const[o,u]=this.#l(),h=o-s,d=u-a,p=this.#t;return p[0]-=h,p[1]-=d,p[2]+=2*h,p[3]+=2*d,p}updateRotation(e){return this.#e=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(Tt.svgRound).join(" ")}get defaultProperties(){const[e,n]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Tt.svgRound(e)} ${Tt.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=this.#t;let r=0,s=0,a=0,o=0,u=0,h=0;switch(this.#e){case 90:s=n/e,a=-e/n,u=e;break;case 180:r=-1,o=-1,u=e,h=n;break;case 270:s=-n/e,a=e/n,h=n;break;default:return""}return`matrix(${r} ${s} ${a} ${o} ${Tt.svgRound(u)} ${Tt.svgRound(h)})`}getPathResizingSVGProperties([e,n,r,s]){const[a,o]=this.#l(),[u,h,d,p]=this.#t;if(Math.abs(d-a)<=Tt.PRECISION||Math.abs(p-o)<=Tt.PRECISION){const x=e+r/2-(u+d/2),S=n+s/2-(h+p/2);return{path:{"transform-origin":`${Tt.svgRound(e)} ${Tt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${x} ${S})`}}}const g=(r-2*a)/(d-2*a),y=(s-2*o)/(p-2*o),b=d/r,w=p/s;return{path:{"transform-origin":`${Tt.svgRound(u)} ${Tt.svgRound(h)}`,transform:`${this.rotationTransform} scale(${b} ${w}) translate(${Tt.svgRound(a)} ${Tt.svgRound(o)}) scale(${g} ${y}) translate(${Tt.svgRound(-a)} ${Tt.svgRound(-o)})`}}}getPathResizedSVGProperties([e,n,r,s]){const[a,o]=this.#l(),u=this.#t,[h,d,p,g]=u;if(u[0]=e,u[1]=n,u[2]=r,u[3]=s,Math.abs(p-a)<=Tt.PRECISION||Math.abs(g-o)<=Tt.PRECISION){const S=e+r/2-(h+p/2),E=n+s/2-(d+g/2);for(const{line:k,points:N}of this.#n)Tt._translate(k,S,E,k),Tt._translate(N,S,E,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Tt.svgRound(e)} ${Tt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(r-2*a)/(p-2*a),b=(s-2*o)/(g-2*o),w=-y*(h+a)+e+a,x=-b*(d+o)+n+o;if(y!==1||b!==1||w!==0||x!==0)for(const{line:S,points:E}of this.#n)Tt._rescale(S,w,x,y,b,S),Tt._rescale(E,w,x,y,b,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Tt.svgRound(e)} ${Tt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],r){const[s,a]=r,o=this.#t,u=e-o[0],h=n-o[1];if(this.#a===s&&this.#r===a)for(const{line:d,points:p}of this.#n)Tt._translate(d,u,h,d),Tt._translate(p,u,h,p);else{const d=this.#a/s,p=this.#r/a;this.#a=s,this.#r=a;for(const{line:g,points:y}of this.#n)Tt._rescale(g,u,h,d,p,g),Tt._rescale(y,u,h,d,p,y);o[2]*=d,o[3]*=p}return o[0]=e,o[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Tt.svgRound(e)} ${Tt.svgRound(n)}`}}}get defaultSVGProperties(){const e=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Tt.svgRound(e[0])} ${Tt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class Sy extends YM{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Lt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??=this["stroke-width"],n*=this._viewParameters.realScale),super.updateSVGProperty(e,n)}clone(){const e=new Sy(this._viewParameters);return e.updateAll(this),e}}class j1 extends Ut{static _type="ink";static _editorType=Wt.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){Lt.initialize(e,n),this._defaultDrawingOptions=new Sy(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Jt(this,"typesMap",new Map([[ce.INK_THICKNESS,"stroke-width"],[ce.INK_COLOR,"stroke"],[ce.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,r,s,a){return new _Y(e,n,r,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,r,s,a,o){return If.deserialize(e,n,r,s,a,o)}static async deserialize(e,n,r){let s=null;if(e instanceof U1){const{data:{inkLists:o,rect:u,rotation:h,id:d,color:p,opacity:g,borderStyle:{rawWidth:y},popupRef:b,richText:w,contentsObj:x,creationDate:S,modificationDate:E},parent:{page:{pageNumber:k}}}=e;s=e={annotationType:Wt.INK,color:Array.from(p),thickness:y,opacity:g,paths:{points:o},boxes:null,pageIndex:k-1,rect:u.slice(0),rotation:h,annotationElementId:d,id:d,deleted:!1,popupRef:b,richText:w,comment:x?.str||null,creationDate:S,modificationDate:E}}const a=await super.deserialize(e,n,r);return a._initialData=s,e.comment&&a.setCommentData(e),a}get toolbarButtons(){return this._colorPicker||=new Yd(this),[["colorPicker",this._colorPicker]]}get colorType(){return ce.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:r}){this._drawingOptions=j1.getDefaultDrawingOptions({stroke:Ct.makeHexColor(...e),"stroke-width":n,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r}=this.serializeDraw(e),{_drawingOptions:{stroke:s,"stroke-opacity":a,"stroke-width":o}}=this,u=Object.assign(super.serialize(e),{color:Lt._colorManager.convert(s),opacity:a,thickness:o,paths:{lines:n,points:r}});return this.addComment(u),e?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(e){const{color:n,thickness:r,opacity:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((o,u)=>o!==n[u])||e.thickness!==r||e.opacity!==s||e.pageIndex!==a}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}}class H_ extends If{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Rg=8,Jh=3;class Al{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(e,n,r,s){return r-=e,s-=n,r===0?s>0?0:4:r===1?s+6:2-s}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,n,r,s,a,o,u){const h=this.#e(r,s,a,o);for(let d=0;d<8;d++){const p=(-d+h-u+16)%8,g=this.#i[2*p],y=this.#i[2*p+1];if(e[(r+g)*n+(s+y)]!==0)return p}return-1}static#a(e,n,r,s,a,o,u){const h=this.#e(r,s,a,o);for(let d=0;d<8;d++){const p=(d+h+u+16)%8,g=this.#i[2*p],y=this.#i[2*p+1];if(e[(r+g)*n+(s+y)]!==0)return p}return-1}static#r(e,n,r,s){const a=e.length,o=new Int32Array(a);for(let p=0;p<a;p++)o[p]=e[p]<=s?1:0;for(let p=1;p<r-1;p++)o[p*n]=o[p*n+n-1]=0;for(let p=0;p<n;p++)o[p]=o[n*r-1-p]=0;let u=1,h;const d=[];for(let p=1;p<r-1;p++){h=1;for(let g=1;g<n-1;g++){const y=p*n+g,b=o[y];if(b===0)continue;let w=p,x=g;if(b===1&&o[y-1]===0)u+=1,x-=1;else if(b>=1&&o[y+1]===0)u+=1,x+=1,b>1&&(h=b);else{b!==1&&(h=Math.abs(b));continue}const S=[g,p],E=x===g+1,k={isHole:E,points:S,id:u,parent:0};d.push(k);let N;for(const U of d)if(U.id===h){N=U;break}N?N.isHole?k.parent=E?N.parent:h:k.parent=E?h:N.parent:k.parent=E?h:0;const M=this.#n(o,n,p,g,w,x,0);if(M===-1){o[y]=-u,o[y]!==1&&(h=Math.abs(o[y]));continue}let O=this.#i[2*M],B=this.#i[2*M+1];const C=p+O,R=g+B;w=C,x=R;let L=p,F=g;for(;;){const U=this.#a(o,n,L,F,w,x,1);O=this.#i[2*U],B=this.#i[2*U+1];const $=L+O,V=F+B;S.push(V,$);const G=L*n+F;if(o[G+1]===0?o[G]=-u:o[G]===1&&(o[G]=u),$===p&&V===g&&L===C&&F===R){o[y]!==1&&(h=Math.abs(o[y]));break}else w=L,x=F,L=$,F=V}}}return d}static#s(e,n,r,s){if(r-n<=4){for(let C=n;C<r-2;C+=2)s.push(e[C],e[C+1]);return}const a=e[n],o=e[n+1],u=e[r-4]-a,h=e[r-3]-o,d=Math.hypot(u,h),p=u/d,g=h/d,y=p*o-g*a,b=h/u,w=1/d,x=Math.atan(b),S=Math.cos(x),E=Math.sin(x),k=w*(Math.abs(S)+Math.abs(E)),N=w*(1-k+k**2),M=Math.max(Math.atan(Math.abs(E+S)*N),Math.atan(Math.abs(E-S)*N));let O=0,B=n;for(let C=n+2;C<r-2;C+=2){const R=Math.abs(y-p*e[C+1]+g*e[C]);R>O&&(B=C,O=R)}O>(d*M)**2?(this.#s(e,n,B+2,s),this.#s(e,B,r,s)):s.push(a,o)}static#o(e){const n=[],r=e.length;return this.#s(e,0,r,n),n.push(e[r-2],e[r-1]),n.length<=4?null:n}static#c(e,n,r,s,a,o){const u=new Float32Array(o**2),h=-2*s**2,d=o>>1;for(let x=0;x<o;x++){const S=(x-d)**2;for(let E=0;E<o;E++)u[x*o+E]=Math.exp((S+(E-d)**2)/h)}const p=new Float32Array(256),g=-2*a**2;for(let x=0;x<256;x++)p[x]=Math.exp(x**2/g);const y=e.length,b=new Uint8Array(y),w=new Uint32Array(256);for(let x=0;x<r;x++)for(let S=0;S<n;S++){const E=x*n+S,k=e[E];let N=0,M=0;for(let B=0;B<o;B++){const C=x+B-d;if(!(C<0||C>=r))for(let R=0;R<o;R++){const L=S+R-d;if(L<0||L>=n)continue;const F=e[C*n+L],U=u[B*o+R]*p[Math.abs(F-k)];N+=F*U,M+=U}}const O=b[E]=Math.round(N/M);w[O]++}return[b,w]}static#l(e){const n=new Uint32Array(256);for(const r of e)n[r]++;return n}static#d(e){const n=e.length,r=new Uint8ClampedArray(n>>2);let s=-1/0,a=1/0;for(let u=0,h=r.length;u<h;u++){const d=r[u]=e[u<<2];s=Math.max(s,d),a=Math.min(a,d)}const o=255/(s-a);for(let u=0,h=r.length;u<h;u++)r[u]=(r[u]-a)*o;return r}static#h(e){let n,r=-1/0,s=-1/0;const a=e.findIndex(h=>h!==0);let o=a,u=a;for(n=a;n<256;n++){const h=e[n];h>r&&(n-o>s&&(s=n-o,u=n-1),r=h,o=n)}for(n=u-1;n>=0&&!(e[n]>e[n+1]);n--);return n}static#f(e){const n=e,{width:r,height:s}=e,{maxDim:a}=this.#t;let o=r,u=s;if(r>a||s>a){let y=r,b=s,w=Math.log2(Math.max(r,s)/a);const x=Math.floor(w);w=w===x?x-1:x;for(let E=0;E<w;E++){o=Math.ceil(y/2),u=Math.ceil(b/2);const k=new OffscreenCanvas(o,u);k.getContext("2d").drawImage(e,0,0,y,b,0,0,o,u),y=o,b=u,e!==n&&e.close(),e=k.transferToImageBitmap()}const S=Math.min(a/o,a/u);o=Math.round(o*S),u=Math.round(u*S)}const d=new OffscreenCanvas(o,u).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,o,u),d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,o,u);const p=d.getImageData(0,0,o,u).data;return[this.#d(p),o,u]}static extractContoursFromText(e,{fontFamily:n,fontStyle:r,fontWeight:s},a,o,u,h){let d=new OffscreenCanvas(1,1),p=d.getContext("2d",{alpha:!1});const g=200,y=p.font=`${r} ${s} ${g}px ${n}`,{actualBoundingBoxLeft:b,actualBoundingBoxRight:w,actualBoundingBoxAscent:x,actualBoundingBoxDescent:S,fontBoundingBoxAscent:E,fontBoundingBoxDescent:k,width:N}=p.measureText(e),M=1.5,O=Math.ceil(Math.max(Math.abs(b)+Math.abs(w)||0,N)*M),B=Math.ceil(Math.max(Math.abs(x)+Math.abs(S)||g,Math.abs(E)+Math.abs(k)||g)*M);d=new OffscreenCanvas(O,B),p=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=y,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,O,B),p.fillStyle="black",p.fillText(e,O*(M-1)/2,B*(3-M)/2);const C=this.#d(p.getImageData(0,0,O,B).data),R=this.#l(C),L=this.#h(R),F=this.#r(C,O,B,L);return this.processDrawnLines({lines:{curves:F,width:O,height:B},pageWidth:a,pageHeight:o,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(e,n,r,s,a){const[o,u,h]=this.#f(e),[d,p]=this.#c(o,u,h,Math.hypot(u,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),g=this.#h(p),y=this.#r(d,u,h,g);return this.processDrawnLines({lines:{curves:y,width:u,height:h},pageWidth:n,pageHeight:r,rotation:s,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:n,pageHeight:r,rotation:s,innerMargin:a,mustSmooth:o,areContours:u}){s%180!==0&&([n,r]=[r,n]);const{curves:h,width:d,height:p}=e,g=e.thickness??0,y=[],b=Math.min(n/d,r/p),w=b/n,x=b/r,S=[];for(const{points:k}of h){const N=o?this.#o(k):k;if(!N)continue;S.push(N);const M=N.length,O=new Float32Array(M),B=new Float32Array(3*(M===2?2:M-2));if(y.push({line:B,points:O}),M===2){O[0]=N[0]*w,O[1]=N[1]*x,B.set([NaN,NaN,NaN,NaN,O[0],O[1]],0);continue}let[C,R,L,F]=N;C*=w,R*=x,L*=w,F*=x,O.set([C,R,L,F],0),B.set([NaN,NaN,NaN,NaN,C,R],0);for(let U=4;U<M;U+=2){const $=O[U]=N[U]*w,V=O[U+1]=N[U+1]*x;B.set(Tt.createBezierPoints(C,R,L,F,$,V),(U-2)*3),[C,R,L,F]=[L,F,$,V]}}if(y.length===0)return null;const E=u?new H_:new If;return E.build(y,n,r,1,s,u?0:g,a),{outline:E,newCurves:S,areContours:u,thickness:g,width:d,height:p}}static async compressSignature({outlines:e,areContours:n,thickness:r,width:s,height:a}){let o=1/0,u=-1/0,h=0;for(const N of e){h+=N.length;for(let M=2,O=N.length;M<O;M++){const B=N[M]-N[M-2];o=Math.min(o,B),u=Math.max(u,B)}}let d;o>=-128&&u<=127?d=Int8Array:o>=-32768&&u<=32767?d=Int16Array:d=Int32Array;const p=e.length,g=Rg+Jh*p,y=new Uint32Array(g);let b=0;y[b++]=g*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*d.BYTES_PER_ELEMENT,y[b++]=0,y[b++]=s,y[b++]=a,y[b++]=n?0:1,y[b++]=Math.max(0,Math.floor(r??0)),y[b++]=p,y[b++]=d.BYTES_PER_ELEMENT;for(const N of e)y[b++]=N.length-2,y[b++]=N[0],y[b++]=N[1];const w=new CompressionStream("deflate-raw"),x=w.writable.getWriter();await x.ready,x.write(y);const S=d.prototype.constructor;for(const N of e){const M=new S(N.length-2);for(let O=2,B=N.length;O<B;O++)M[O-2]=N[O]-N[O-2];x.write(M)}x.close();const E=await new Response(w.readable).arrayBuffer(),k=new Uint8Array(E);return mM(k)}static async decompressSignature(e){try{const n=GW(e),{readable:r,writable:s}=new DecompressionStream("deflate-raw"),a=s.getWriter();await a.ready,a.write(n).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let o=null,u=0;for await(const N of r)o||=new Uint8Array(new Uint32Array(N.buffer,0,4)[0]),o.set(N,u),u+=N.length;const h=new Uint32Array(o.buffer,0,o.length>>2),d=h[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const p=h[2],g=h[3],y=h[4]===0,b=h[5],w=h[6],x=h[7],S=[],E=(Rg+Jh*w)*Uint32Array.BYTES_PER_ELEMENT;let k;switch(x){case Int8Array.BYTES_PER_ELEMENT:k=new Int8Array(o.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:k=new Int16Array(o.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:k=new Int32Array(o.buffer,E);break}u=0;for(let N=0;N<w;N++){const M=h[Jh*N+Rg],O=new Float32Array(M+2);S.push(O);for(let B=0;B<Jh-1;B++)O[B]=h[Jh*N+Rg+B+1];for(let B=0;B<M;B++)O[B+2]=O[B]+k[u++]}return{areContours:y,thickness:b,outlines:S,width:p,height:g}}catch(n){return Xt(`decompressSignature: ${n}`),null}}}class z1 extends YM{constructor(){super(),super.updateProperties({fill:Lt._defaultLineColor,"stroke-width":0})}clone(){const e=new z1;return e.updateAll(this),e}}class H1 extends Sy{constructor(e){super(e),super.updateProperties({stroke:Lt._defaultLineColor,"stroke-width":1})}clone(){const e=new H1(this._viewParameters);return e.updateAll(this),e}}class Es extends Ut{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=Wt.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=e.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){Lt.initialize(e,n),this._defaultDrawingOptions=new z1,this._defaultDrawnSignatureOptions=new H1(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Jt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:s,mustSmooth:a,areContours:o,description:u,uuid:h,heightInPage:d}=this.#i,{rawDims:{pageWidth:p,pageHeight:g},rotation:y}=this.parent.viewport,b=Al.processDrawnLines({lines:s,pageWidth:p,pageHeight:g,rotation:y,innerMargin:Es._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(b,d,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(e){this.#e=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:r,width:s,height:a}=this.#i,o=Math.max(s,a),u=Al.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:r,width:s,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,r,s){const{x:a,y:o}=this,{outline:u}=this.#i=e;this.#t=u instanceof H_,this.description=r;let h;this.#t?h=Es.getDefaultDrawingOptions():(h=Es._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,d]=this.pageDimensions;let p=n/d;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:s}=this.parent.viewport;return Al.process(e,n,r,s,Es._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:r,pageHeight:s},rotation:a}=this.parent.viewport;return Al.extractContoursFromText(e,n,r,s,a,Es._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:s}=this.parent.viewport;return Al.processDrawnLines({lines:e,pageWidth:n,pageHeight:r,rotation:s,innerMargin:Es._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=Es.getDefaultDrawingOptions():(this._drawingOptions=Es._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":s}}=this,a=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:s});return this.addComment(a),e?(a.paths={lines:n,points:r},a.uuid=this.#n,a.isCopy=!0):a.lines=n,this.#e&&(a.accessibilityData={type:"Figure",alt:this.#e}),a}static deserializeDraw(e,n,r,s,a,o){return o.areContours?H_.deserialize(e,n,r,s,a,o):If.deserialize(e,n,r,s,a,o)}static async deserialize(e,n,r){const s=await super.deserialize(e,n,r);return s.#t=e.areContours,s.description=e.accessibilityData?.alt||"",s.#n=e.uuid,s}}class wY extends Lt{#t=null;#e=null;#i=null;#n=null;#a=null;#r="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=Wt.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#a=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){Lt.initialize(e,n)}static isHandlingMimeForPasting(e){return Nm.includes(e)}static paste(e,n){n.pasteEditor({mode:Wt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}#h(e,n=!1){if(!e){this.remove();return}this.#t=e.bitmap,n||(this.#e=e.id,this.#l=e.isSvg),e.file&&(this.#r=e.file.name),this.#p()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:o}=e||this.copyCanvas(null,null,!0).imageData,u=await r.guess({name:"altText",request:{data:s,width:a,height:o,channels:s.length/(a*o)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),n&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(r=>this.#h(r,!0)).finally(()=>this.#f());return}if(this.#n){const r=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(r).then(s=>this.#h(s)).finally(()=>this.#f());return}if(this.#a){const r=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(r).then(s=>this.#h(s)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=Nm.join(",");const n=this._uiManager._signal;this.#i=new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(s)}r()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>this.#f()),e.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#a||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:r,bitmap:s}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(this.#e=r,s&&(this.#t=s),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},e)}#p(){const{div:e}=this;let{width:n,height:r}=this.#t;const[s,a]=this.pageDimensions,o=.75;if(this.width)n=this.width*s,r=this.height*a;else if(n>o*s||r>o*a){const h=Math.min(o*s/n,o*a/r);n*=h,r*=h}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=n/s,this.height=r/a,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,n,r=!1){e||(e=224);const{width:s,height:a}=this.#t,o=new Yr;let u=this.#t,h=s,d=a,p=null;if(n){if(s>n||a>n){const B=Math.min(n/s,n/a);h=Math.floor(s*B),d=Math.floor(a*B)}p=document.createElement("canvas");const y=p.width=Math.ceil(h*o.sx),b=p.height=Math.ceil(d*o.sy);this.#l||(u=this.#u(y,b));const w=p.getContext("2d");w.filter=this._uiManager.hcmFilter;let x="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":XW.isDarkMode&&(x="#8f8f9d",S="#42414d");const E=15,k=E*o.sx,N=E*o.sy,M=new OffscreenCanvas(k*2,N*2),O=M.getContext("2d");O.fillStyle=x,O.fillRect(0,0,k*2,N*2),O.fillStyle=S,O.fillRect(0,0,k,N),O.fillRect(k,N,k,N),w.fillStyle=w.createPattern(M,"repeat"),w.fillRect(0,0,y,b),w.drawImage(u,0,0,u.width,u.height,0,0,y,b)}let g=null;if(r){let y,b;if(o.symmetric&&u.width<e&&u.height<e)y=u.width,b=u.height;else if(u=this.#t,s>e||a>e){const S=Math.min(e/s,e/a);y=Math.floor(s*S),b=Math.floor(a*S),this.#l||(u=this.#u(y,b))}const x=new OffscreenCanvas(y,b).getContext("2d",{willReadFrequently:!0});x.drawImage(u,0,0,u.width,u.height,0,0,y,b),g={width:y,height:b,data:x.getImageData(0,0,y,b).data}}return{canvas:p,width:h,height:d,imageData:g}}#u(e,n){const{width:r,height:s}=this.#t;let a=r,o=s,u=this.#t;for(;a>2*e||o>2*n;){const h=a,d=o;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*n&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const p=new OffscreenCanvas(a,o);p.getContext("2d").drawImage(u,0,0,h,d,0,0,a,o),u=p.transferToImageBitmap()}return u}#g(){const[e,n]=this.parentDimensions,{width:r,height:s}=this,a=new Yr,o=Math.ceil(r*e*a.sx),u=Math.ceil(s*n*a.sy),h=this.#s;if(!h||h.width===o&&h.height===u)return;h.width=o,h.height=u;const d=this.#l?this.#t:this.#u(o,u),p=h.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(d,0,0,d.width,d.height,0,0,o,u)}#y(e){if(e){if(this.#l){const s=this._uiManager.imageManager.getSvgUrl(this.#e);if(s)return s}const n=document.createElement("canvas");return{width:n.width,height:n.height}=this.#t,n.getContext("2d").drawImage(this.#t,0,0),n.toDataURL()}if(this.#l){const[n,r]=this.pageDimensions,s=Math.round(this.width*n*Hl.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*Hl.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(s,a);return o.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,s,a),o.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(e,n,r){let s=null,a=!1;if(e instanceof qM){const{data:{rect:x,rotation:S,id:E,structParent:k,popupRef:N,richText:M,contentsObj:O,creationDate:B,modificationDate:C},container:R,parent:{page:{pageNumber:L}},canvas:F}=e;let U,$;F?(delete e.canvas,{id:U,bitmap:$}=r.imageManager.getFromCanvas(R.id,F),F.remove()):(a=!0,e._hasNoCanvas=!0);const V=(await n._structTree.getAriaAttributes(`${T1}${E}`))?.get("aria-label")||"";s=e={annotationType:Wt.STAMP,bitmapId:U,bitmap:$,pageIndex:L-1,rect:x.slice(0),rotation:S,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:V},isSvg:!1,structParent:k,popupRef:N,richText:M,comment:O?.str||null,creationDate:B,modificationDate:C}}const o=await super.deserialize(e,n,r),{rect:u,bitmap:h,bitmapUrl:d,bitmapId:p,isSvg:g,accessibilityData:y}=e;a?(r.addMissingCanvas(e.id,o),o.#o=!0):p&&r.imageManager.isValidId(p)?(o.#e=p,h&&(o.#t=h)):o.#n=d,o.#l=g;const[b,w]=o.pageDimensions;return o.width=(u[2]-u[0])/b,o.height=(u[3]-u[1])/w,y&&(o.altTextData=y),o._initialData=s,e.comment&&o.setCommentData(e),o.#d=!!s,o}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(e),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(r),e)return r.bitmapUrl=this.#y(!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const u=this.#v(r);return u.isSame?null:(u.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(n===null)return r;n.stamps||=new Map;const o=this.#l?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(this.#e))n.stamps.set(this.#e,{area:o,serialized:r}),r.bitmap=this.#y(!1);else if(this.#l){const u=n.stamps.get(this.#e);o>u.area&&(u.area=o,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return r}#v(e){const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,s=e.pageIndex===n,a=(e.accessibilityData?.alt||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Rs{#t;#e=!1;#i=null;#n=null;#a=null;#r=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#p=-1;#u;static _initialized=!1;static#g=new Map([Ln,j1,wY,mn,Es].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:n,div:r,structTreeLayer:s,accessibilityManager:a,annotationLayer:o,drawLayer:u,textLayer:h,viewport:d,l10n:p}){const g=[...Rs.#g.values()];if(!Rs._initialized){Rs._initialized=!0;for(const y of g)y.initialize(p,e)}e.registerEditorTypes(g),this.#u=e,this.pageIndex=n,this.div=r,this.#t=a,this.#i=o,this.viewport=d,this.#h=h,this.drawLayer=u,this._structTree=s,this.#u.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Wt.NONE}updateToolbar(e){this.#u.updateToolbar(e)}updateMode(e=this.#u.getMode()){switch(this.#_(),e){case Wt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Wt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Wt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;if(n.toggle("nonEditing",!1),e===Wt.POPUP)n.toggle("commentEditing",!0);else{n.toggle("commentEditing",!1);for(const r of Rs.#g.values())n.toggle(`${r._type}Editing`,e===r._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#h?.div}setEditingState(e){this.#u.setEditingState(e)}addCommands(e){this.#u.addCommands(e)}cleanUndoStack(e){this.#u.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#i?.div.classList.toggle("disabled",!e)}get#y(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const e=new Set;for(const r of this.#y)r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#u.removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const n=this.#i;if(n)for(const r of n.getEditableAnnotations()){if(r.hide(),this.#u.isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const s=await this.deserialize(r);s&&(this.addOrRebuild(s),s.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const r=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",s=>{const{clientX:o,clientY:u,timeStamp:h}=s,d=this.#p;if(h-d>500){this.#p=h;return}this.#p=-1;const{classList:p}=this.div;p.toggle("getElements",!0);const g=document.elementsFromPoint(o,u);if(p.toggle("getElements",!1),!this.div.contains(g[0]))return;let y;const b=new RegExp(`^${Gd}[0-9]+$`);for(const x of g)if(b.test(x.id)){y=x.id;break}if(!y)return;const w=this.#r.get(y);w?.annotationElementId===null&&(s.stopPropagation(),s.preventDefault(),w.dblclick(s))},{signal:r,capture:!0})}const e=this.#i;if(e){const r=new Map,s=new Map;for(const o of this.#y){if(o.disableEditing(),!o.annotationElementId){o.updateFakeAnnotationElement(e);continue}if(o.serialize()!==null){r.set(o.annotationElementId,o);continue}else s.set(o.annotationElementId,o);this.getEditableAnnotation(o.annotationElementId)?.show(),o.remove()}const a=e.getEditableAnnotations();for(const o of a){const{id:u}=o.data;if(this.#u.isDeletedAnnotationElement(u)){o.updateEdited({deleted:!0});continue}let h=s.get(u);if(h){h.resetAnnotationElement(o),h.show(!1),o.show();continue}h=r.get(u),h&&(this.#u.addChangedExistingAnnotation(h),h.renderAnnotationElement(o)&&h.show(!1)),o.show()}}this.#_(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of Rs.#g.values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(e){return this.#i?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#u.getActive()!==e&&this.#u.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const e=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:e}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(e){this.#u.unselectAll();const{target:n}=e;if(n===this.#h.div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&this.#h.div.contains(n)){const{isMac:r}=Un.platform;if(e.button!==0||e.ctrlKey&&r)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),mn.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:e.x,y:e.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:e}),this.div.addEventListener("pointercancel",n,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#r.set(e.id,e);const{annotationElementId:n}=e;n&&this.#u.isDeletedAnnotationElement(n)&&this.#u.removeDeletedAnnotationElement(e)}detach(e){this.#r.delete(e.id),this.#t?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#u.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#u.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#u.addDeletedAnnotationElement(e.annotationElementId),Lt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#u.addEditor(e),this.attach(e),!e.isAttachedToDOM){const n=e.render();this.div.append(n),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#u.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!this.#a&&(e._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),n.focus())},0)),e._structTreeParentId=this.#t?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const n=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:n,undo:r,mustExec:!1})}getEditorByUID(e){for(const n of this.#r.values())if(n.uid===e)return n;return null}getNextId(){return this.#u.getId()}get#b(){return Rs.#g.get(this.#u.getMode())}combinedSignal(e){return this.#u.combinedSignal(e)}#S(e){const n=this.#b;return n?new n.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(e,n){this.updateToolbar(e),await this.#u.updateMode(e.mode);const{offsetX:r,offsetY:s}=this.#x(),a=this.getNextId(),o=this.#S({parent:this,id:a,x:r,y:s,uiManager:this.#u,isCentered:!0,...n});o&&this.add(o)}async deserialize(e){return await Rs.#g.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#u)||null}createAndAddNewEditor(e,n,r={}){const s=this.getNextId(),a=this.#S({parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:this.#u,isCentered:n,...r});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}#x(){const{x:e,y:n,width:r,height:s}=this.boundingClientRect,a=Math.max(0,e),o=Math.max(0,n),u=Math.min(window.innerWidth,e+r),h=Math.min(window.innerHeight,n+s),d=(a+u)/2-e,p=(o+h)/2-n,[g,y]=this.viewport.rotation%180===0?[d,p]:[p,d];return{offsetX:g,offsetY:y}}addNewEditor(e={}){this.createAndAddNewEditor(this.#x(),!0,e)}setSelected(e){this.#u.setSelected(e)}toggleSelected(e){this.#u.toggleSelected(e)}unselect(e){this.#u.unselect(e)}pointerup(e){const{isMac:n}=Un.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div||!this.#s||(this.#s=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const r=this.#u.getMode();if(r===Wt.STAMP||r===Wt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#u.getMode()===Wt.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:n}=Un.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div)return;if(this.#s=!0,this.#b?.isDrawer){this.startDrawingSession(e);return}const r=this.#u.getActive();this.#e=!r||r.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,e);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const n=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(this.#d=null,this.commitOrRemove())},{signal:n}),this.#b.startDrawing(this,this.#u,!1,e)}pause(e){if(e){const{activeElement:n}=document;this.div.contains(n)&&(this.#d=n);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(e=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(e)):null}findNewParent(e,n,r){const s=this.#u.findParent(n,r);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const e of this.#r.values())this.#t?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#_(){for(const e of this.#r.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Oo(this.div,e);for(const n of this.#u.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:e}){this.#u.commitOrRemove(),this.#_();const n=this.viewport.rotation,r=e.rotation;if(this.viewport=e,Oo(this.div,{rotation:r}),n!==r)for(const s of this.#r.values())s.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:n}=this.viewport.rawDims;return[e,n]}get scale(){return this.#u.viewParameters.realScale}}class Bn{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#t){this.#t=e;return}if(this.#t!==e){if(this.#e.size>0)for(const n of this.#e.values())n.remove(),e.append(n);this.#t=e}}static get _svgFactory(){return Jt(this,"_svgFactory",new Kd)}static#a(e,[n,r,s,a]){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*n}%`,o.width=`${100*s}%`,o.height=`${100*a}%`}#r(){const e=Bn._svgFactory.create(1,1,!0);return this.#t.append(e),e.setAttribute("aria-hidden",!0),e}#s(e,n){const r=Bn._svgFactory.createElement("clipPath");e.append(r);const s=`clip_${n}`;r.setAttribute("id",s),r.setAttribute("clipPathUnits","objectBoundingBox");const a=Bn._svgFactory.createElement("use");return r.append(a),a.setAttribute("href",`#${n}`),a.classList.add("clip"),s}#o(e,n){for(const[r,s]of Object.entries(n))s===null?e.removeAttribute(r):e.setAttribute(r,s)}draw(e,n=!1,r=!1){const s=Bn.#n++,a=this.#r(),o=Bn._svgFactory.createElement("defs");a.append(o);const u=Bn._svgFactory.createElement("path");o.append(u);const h=`path_p${this.pageIndex}_${s}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),n&&this.#i.set(s,u);const d=r?this.#s(o,h):null,p=Bn._svgFactory.createElement("use");return a.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(a,e),this.#e.set(s,a),{id:s,clipPathId:`url(#${d})`}}drawOutline(e,n){const r=Bn.#n++,s=this.#r(),a=Bn._svgFactory.createElement("defs");s.append(a);const o=Bn._svgFactory.createElement("path");a.append(o);const u=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",u),o.setAttribute("vector-effect","non-scaling-stroke");let h;if(n){const g=Bn._svgFactory.createElement("mask");a.append(g),h=`mask_p${this.pageIndex}_${r}`,g.setAttribute("id",h),g.setAttribute("maskUnits","objectBoundingBox");const y=Bn._svgFactory.createElement("rect");g.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const b=Bn._svgFactory.createElement("use");g.append(b),b.setAttribute("href",`#${u}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const d=Bn._svgFactory.createElement("use");s.append(d),d.setAttribute("href",`#${u}`),h&&d.setAttribute("mask",`url(#${h})`);const p=d.cloneNode();return s.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(s,e),this.#e.set(r,s),r}finalizeDraw(e,n){this.#i.delete(e),this.updateProperties(e,n)}updateProperties(e,n){if(!n)return;const{root:r,bbox:s,rootClass:a,path:o}=n,u=typeof e=="number"?this.#e.get(e):e;if(u){if(r&&this.#o(u,r),s&&Bn.#a(u,s),a){const{classList:h}=u;for(const[d,p]of Object.entries(a))h.toggle(d,p)}if(o){const d=u.firstChild.firstChild;this.#o(d,o)}}}updateParent(e,n){if(n===this)return;const r=this.#e.get(e);r&&(n.#t.append(r),this.#e.delete(e),n.#e.set(e,r))}remove(e){this.#i.delete(e),this.#t!==null&&(this.#e.get(e).remove(),this.#e.delete(e))}destroy(){this.#t=null;for(const e of this.#e.values())e.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:j_};globalThis.pdfjsLib={AbortException:Ca,AnnotationEditorLayer:Rs,AnnotationEditorParamsType:ce,AnnotationEditorType:Wt,AnnotationEditorUIManager:Ra,AnnotationLayer:V1,AnnotationMode:Is,AnnotationType:gn,applyOpacity:wM,build:jM,ColorPicker:Ki,createValidAbsoluteUrl:x1,CSSConstants:_M,DOMSVGFactory:Kd,DrawLayer:Bn,FeatureTest:Un,fetchData:Pu,findContrastColor:AM,getDocument:Ql,getFilenameFromUrl:yM,getPdfFilenameFromUrl:bM,getRGB:Ou,getUuid:S1,getXfaPageViewport:vM,GlobalWorkerOptions:So,ImageKind:Sd,InvalidPDFException:Dm,isDataScheme:Sf,isPdfFile:xy,isValidExplicitDest:TM,MathClamp:si,noContextMenu:rr,normalizeUnicode:gM,OPS:Au,OutputScale:Yr,PasswordResponses:fM,PDFDataRangeTransport:L1,PDFDateString:km,PDFWorker:xu,PermissionFlag:dM,PixelsPerInch:Hl,RenderingCancelledException:Ay,renderRichText:R1,ResponseException:qd,setLayerDimensions:Oo,shadow:Jt,SignatureExtractor:Al,stopEvent:en,SupportedImageMimeTypes:Nm,TextLayer:Xd,TouchManager:Cf,updateUrlHash:E1,Util:Ct,VerbosityLevel:Af,version:B1,XfaLayer:C1};const AY=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Ca,AnnotationEditorLayer:Rs,AnnotationEditorParamsType:ce,AnnotationEditorType:Wt,AnnotationEditorUIManager:Ra,AnnotationLayer:V1,AnnotationMode:Is,AnnotationType:gn,CSSConstants:_M,ColorPicker:Ki,DOMSVGFactory:Kd,DrawLayer:Bn,FeatureTest:Un,GlobalWorkerOptions:So,ImageKind:Sd,InvalidPDFException:Dm,MathClamp:si,OPS:Au,OutputScale:Yr,PDFDataRangeTransport:L1,PDFDateString:km,PDFWorker:xu,PasswordResponses:fM,PermissionFlag:dM,PixelsPerInch:Hl,RenderingCancelledException:Ay,ResponseException:qd,SignatureExtractor:Al,SupportedImageMimeTypes:Nm,TextLayer:Xd,TouchManager:Cf,Util:Ct,VerbosityLevel:Af,XfaLayer:C1,applyOpacity:wM,build:jM,createValidAbsoluteUrl:x1,fetchData:Pu,findContrastColor:AM,getDocument:Ql,getFilenameFromUrl:yM,getPdfFilenameFromUrl:bM,getRGB:Ou,getUuid:S1,getXfaPageViewport:vM,isDataScheme:Sf,isPdfFile:xy,isValidExplicitDest:TM,noContextMenu:rr,normalizeUnicode:gM,renderRichText:R1,setLayerDimensions:Oo,shadow:Jt,stopEvent:en,updateUrlHash:E1,version:B1},Symbol.toStringTag,{value:"Module"}));function KM(i){var e,n,r="";if(typeof i=="string"||typeof i=="number")r+=i;else if(typeof i=="object")if(Array.isArray(i)){var s=i.length;for(e=0;e<s;e++)i[e]&&(n=KM(i[e]))&&(r&&(r+=" "),r+=n)}else for(n in i)i[n]&&(r&&(r+=" "),r+=n);return r}function Ty(){for(var i,e,n=0,r="",s=arguments.length;n<s;n++)(i=arguments[n])&&(e=KM(i))&&(r&&(r+=" "),r+=e);return r}var dR=Object.prototype.hasOwnProperty;function fR(i,e,n){for(n of i.keys())if(ou(n,e))return n}function ou(i,e){var n,r,s;if(i===e)return!0;if(i&&e&&(n=i.constructor)===e.constructor){if(n===Date)return i.getTime()===e.getTime();if(n===RegExp)return i.toString()===e.toString();if(n===Array){if((r=i.length)===e.length)for(;r--&&ou(i[r],e[r]););return r===-1}if(n===Set){if(i.size!==e.size)return!1;for(r of i)if(s=r,s&&typeof s=="object"&&(s=fR(e,s),!s)||!e.has(s))return!1;return!0}if(n===Map){if(i.size!==e.size)return!1;for(r of i)if(s=r[0],s&&typeof s=="object"&&(s=fR(e,s),!s)||!ou(r[1],e.get(s)))return!1;return!0}if(n===ArrayBuffer)i=new Uint8Array(i),e=new Uint8Array(e);else if(n===DataView){if((r=i.byteLength)===e.byteLength)for(;r--&&i.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(i)){if((r=i.byteLength)===e.byteLength)for(;r--&&i[r]===e[r];);return r===-1}if(!n||typeof i=="object"){r=0;for(n in i)if(dR.call(i,n)&&++r&&!dR.call(e,n)||!(n in e)||!ou(i[n],e[n]))return!1;return Object.keys(e).length===r}}return i!==i&&e!==e}function Df(i){let e=!1;return{promise:new Promise((r,s)=>{i.then(a=>!e&&r(a)).catch(a=>!e&&s(a))}),cancel(){e=!0}}}const xY=["onCopy","onCut","onPaste"],EY=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],SY=["onFocus","onBlur"],TY=["onInput","onInvalid","onReset","onSubmit"],CY=["onLoad","onError"],RY=["onKeyDown","onKeyPress","onKeyUp"],IY=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],DY=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],kY=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],NY=["onSelect"],MY=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],PY=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],OY=["onScroll"],LY=["onWheel"],BY=["onAnimationStart","onAnimationEnd","onAnimationIteration"],FY=["onTransitionEnd"],UY=["onToggle"],VY=["onChange"],jY=[...xY,...EY,...SY,...TY,...CY,...RY,...IY,...DY,...kY,...NY,...MY,...PY,...OY,...LY,...BY,...FY,...VY,...UY];function QM(i,e){const n={};for(const r of jY){const s=i[r];s&&(e?n[r]=(a=>s(a,e(r))):n[r]=s)}return n}var zY="Invariant failed";function Oe(i,e){if(!i)throw new Error(zY)}var w0,pR;function HY(){if(pR)return w0;pR=1;var i=function(){};return w0=i,w0}var $Y=HY();const li=$m($Y),ZM=X.createContext(null),GY="noopener noreferrer nofollow";class qY{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Oe(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Oe(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,n,r){e.href=n,e.rel=this.externalLinkRel||GY,e.target=r?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(n=>{Oe(this.pdfDocument),Oe(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(n):Array.isArray(e)?n(e):e.then(n)}).then(n=>{Oe(Array.isArray(n));const r=n[0];new Promise(s=>{Oe(this.pdfDocument),r instanceof Object?this.pdfDocument.getPageIndex(r).then(a=>{s(a)}).catch(()=>{Oe(!1)}):typeof r=="number"?s(r):Oe(!1)}).then(s=>{const a=s+1;Oe(this.pdfViewer),Oe(a>=1&&a<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:n,pageIndex:s,pageNumber:a})})})}goToPage(e){const n=e-1;Oe(this.pdfViewer),Oe(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:n,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function lu({children:i,type:e}){return I.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:i})}const gR={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function WY(i,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function Eu(){return X.useReducer(WY,{value:void 0,error:void 0})}const Cy=typeof window<"u",JM=Cy&&window.location.protocol==="file:";function XY(i){return typeof i<"u"}function ml(i){return XY(i)&&i!==null}function YY(i){return typeof i=="string"}function KY(i){return i instanceof ArrayBuffer}function QY(i){return Oe(Cy),i instanceof Blob}function $_(i){return YY(i)&&/^data:/.test(i)}function mR(i){Oe($_(i));const[e="",n=""]=i.split(",");return e.split(";").indexOf("base64")!==-1?atob(n):unescape(n)}function ZY(){return Cy&&window.devicePixelRatio||1}const tP="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function yR(){li(!JM,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${tP}`)}function JY(){li(!JM,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${tP}`)}function Gl(i){i?.cancel&&i.cancel()}function G_(i,e){return Object.defineProperty(i,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function tK(i){return i.name==="RenderingCancelledException"}function eK(i){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return n(new Error("Error while reading a file."));e(r.result)},r.onerror=s=>{if(!s.target)return n(new Error("Error while reading a file."));const{error:a}=s.target;if(!a)return n(new Error("Error while reading a file."));switch(a.code){case a.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case a.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case a.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},r.readAsArrayBuffer(i)})}const{PDFDataRangeTransport:nK}=AY,iK=(i,e)=>{switch(e){case gR.NEED_PASSWORD:{const n=prompt("Enter the password to open this PDF file.");i(n);break}case gR.INCORRECT_PASSWORD:{const n=prompt("Invalid password. Please try again.");i(n);break}}};function bR(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const rK=X.forwardRef(function({children:e,className:n,error:r="Failed to load PDF file.",externalLinkRel:s,externalLinkTarget:a,file:o,inputRef:u,imageResourcesPath:h,loading:d="Loading PDF",noData:p="No PDF file specified.",onItemClick:g,onLoadError:y,onLoadProgress:b,onLoadSuccess:w,onPassword:x=iK,onSourceError:S,onSourceSuccess:E,options:k,renderMode:N,rotate:M,scale:O,...B},C){const[R,L]=Eu(),{value:F,error:U}=R,[$,V]=Eu(),{value:G,error:et}=$,z=X.useRef(new qY),Y=X.useRef([]),nt=X.useRef(void 0),mt=X.useRef(void 0);o&&o!==nt.current&&bR(o)&&(li(!ou(o,nt.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),nt.current=o),k&&k!==mt.current&&(li(!ou(k,mt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),mt.current=k);const bt=X.useRef({scrollPageIntoView:jt=>{const{dest:ee,pageNumber:Ee,pageIndex:Ie=Ee-1}=jt;if(g){g({dest:ee,pageIndex:Ie,pageNumber:Ee});return}const Ai=Y.current[Ie];if(Ai){Ai.scrollIntoView();return}li(!1,`An internal link leading to page ${Ee} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});X.useImperativeHandle(C,()=>({linkService:z,pages:Y,viewer:bt}),[]);function q(){E&&E()}function Z(){U&&(li(!1,U.toString()),S&&S(U))}function lt(){L({type:"RESET"})}X.useEffect(lt,[o,L]);const ct=X.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return $_(o)?{data:mR(o)}:(yR(),{url:o});if(o instanceof nK)return{range:o};if(KY(o))return{data:o};if(Cy&&QY(o))return{data:await eK(o)};if(Oe(typeof o=="object"),Oe(bR(o)),"url"in o&&typeof o.url=="string"){if($_(o.url)){const{url:jt,...ee}=o;return{data:mR(jt),...ee}}yR()}return o},[o]);X.useEffect(()=>{const jt=Df(ct());return jt.promise.then(ee=>{L({type:"RESOLVE",value:ee})}).catch(ee=>{L({type:"REJECT",error:ee})}),()=>{Gl(jt)}},[ct,L]),X.useEffect(()=>{if(!(typeof F>"u")){if(F===!1){Z();return}q()}},[F]);function At(){G&&(w&&w(G),Y.current=new Array(G.numPages),z.current.setDocument(G))}function ht(){et&&(li(!1,et.toString()),y&&y(et))}X.useEffect(function(){V({type:"RESET"})},[V,F]),X.useEffect(function(){if(!F)return;const ee=k?{...F,...k}:F,Ee=Ql(ee);b&&(Ee.onProgress=b),x&&(Ee.onPassword=x);const Ie=Ee,Ai=Ie.promise.then(Bi=>{V({type:"RESOLVE",value:Bi})}).catch(Bi=>{Ie.destroyed||V({type:"REJECT",error:Bi})});return()=>{Ai.finally(()=>Ie.destroy())}},[k,V,F]),X.useEffect(()=>{if(!(typeof G>"u")){if(G===!1){ht();return}At()}},[G]),X.useEffect(function(){z.current.setViewer(bt.current),z.current.setExternalLinkRel(s),z.current.setExternalLinkTarget(a)},[s,a]);const yt=X.useCallback((jt,ee)=>{Y.current[jt]=ee},[]),Pt=X.useCallback(jt=>{delete Y.current[jt]},[]),kt=X.useMemo(()=>({imageResourcesPath:h,linkService:z.current,onItemClick:g,pdf:G,registerPage:yt,renderMode:N,rotate:M,scale:O,unregisterPage:Pt}),[h,g,G,yt,N,M,O,Pt]),Gt=X.useMemo(()=>QM(B,()=>G),[B,G]);function We(){function jt(Ee){return!!Ee?.pdf}if(!jt(kt))throw new Error("pdf is undefined");const ee=typeof e=="function"?e(kt):e;return I.jsx(ZM.Provider,{value:kt,children:ee})}function ne(){return o?G==null?I.jsx(lu,{type:"loading",children:typeof d=="function"?d():d}):G===!1?I.jsx(lu,{type:"error",children:typeof r=="function"?r():r}):We():I.jsx(lu,{type:"no-data",children:typeof p=="function"?p():p})}return I.jsx("div",{className:Ty("react-pdf__Document",n),ref:u,...Gt,children:ne()})});function eP(){return X.useContext(ZM)}function nP(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var n=i.filter(Boolean);if(n.length<=1){var r=n[0];return r||null}return function(a){for(var o=0,u=n;o<u.length;o++){var h=u[o];typeof h=="function"?h(a):h&&(h.current=a)}}}const iP=X.createContext(null);function Ry(){return X.useContext(iP)}function sK(){const i=eP(),e=Ry();Oe(e);const n={...i,...e},{imageResourcesPath:r,linkService:s,onGetAnnotationsError:a,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:h,page:d,pdf:p,renderForms:g,rotate:y,scale:b=1}=n;Oe(p),Oe(d),Oe(s);const[w,x]=Eu(),{value:S,error:E}=w,k=X.useRef(null);li(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function N(){S&&o&&o(S)}function M(){E&&(li(!1,E.toString()),a&&a(E))}X.useEffect(function(){x({type:"RESET"})},[x,d]),X.useEffect(function(){if(!d)return;const L=Df(d.getAnnotations()),F=L;return L.promise.then(U=>{x({type:"RESOLVE",value:U})}).catch(U=>{x({type:"REJECT",error:U})}),()=>{Gl(F)}},[x,d]),X.useEffect(()=>{if(S!==void 0){if(S===!1){M();return}N()}},[S]);function O(){h&&h()}function B(R){li(!1,`${R}`),u&&u(R)}const C=X.useMemo(()=>d.getViewport({scale:b,rotation:y}),[d,y,b]);return X.useEffect(function(){if(!p||!d||!s||!S)return;const{current:L}=k;if(!L)return;const F=C.clone({dontFlip:!0}),U={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:p.annotationStorage,commentManager:null,div:L,l10n:null,linkService:s,page:d,structTreeLayer:null,viewport:F},$={annotations:S,annotationStorage:p.annotationStorage,div:L,imageResourcesPath:r,linkService:s,page:d,renderForms:g,viewport:F};L.innerHTML="";try{new V1(U).render($),O()}catch(V){B(V)}return()=>{}},[S,r,s,d,p,g,C]),I.jsx("div",{className:Ty("react-pdf__Page__annotations","annotationLayer"),ref:k})}const rP={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},aK=/^H(\d+)$/;function oK(i){return i in rP}function Iy(i){return"children"in i}function sP(i){return Iy(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function lK(i){const e={};if(Iy(i)){const{role:n}=i,r=n.match(aK);if(r)e.role="heading",e["aria-level"]=Number(r[1]);else if(oK(n)){const s=rP[n];s&&(e.role=s)}}return e}function aP(i){const e={};if(Iy(i)){if(i.alt!==void 0&&(e["aria-label"]=i.alt),i.lang!==void 0&&(e.lang=i.lang),sP(i)){const[n]=i.children;if(n){const r=aP(n);return{...e,...r}}}}else"id"in i&&(e["aria-owns"]=i.id);return e}function cK(i){return i?{...lK(i),...aP(i)}:null}function oP({className:i,node:e}){const n=X.useMemo(()=>cK(e),[e]),r=X.useMemo(()=>!Iy(e)||sP(e)?null:e.children.map((s,a)=>I.jsx(oP,{node:s},a)),[e]);return I.jsx("span",{className:i,...n,children:r})}function uK(){const i=Ry();Oe(i);const{onGetStructTreeError:e,onGetStructTreeSuccess:n}=i,[r,s]=Eu(),{value:a,error:o}=r,{customTextRenderer:u,page:h}=i;function d(){a&&n&&n(a)}function p(){o&&(li(!1,o.toString()),e&&e(o))}return X.useEffect(function(){s({type:"RESET"})},[s,h]),X.useEffect(function(){if(u||!h)return;const y=Df(h.getStructTree()),b=y;return y.promise.then(w=>{s({type:"RESOLVE",value:w})}).catch(w=>{s({type:"REJECT",error:w})}),()=>Gl(b)},[u,h,s]),X.useEffect(()=>{if(a!==void 0){if(a===!1){p();return}d()}},[a]),a?I.jsx(oP,{className:"react-pdf__Page__structTree structTree",node:a}):null}const vR=Is;function hK(i){const e=Ry();Oe(e);const n={...e,...i},{_className:r,canvasBackground:s,devicePixelRatio:a=ZY(),onRenderError:o,onRenderSuccess:u,page:h,renderForms:d,renderTextLayer:p,rotate:g,scale:y}=n,{canvasRef:b}=i;Oe(h);const w=X.useRef(null);function x(){h&&u&&u(G_(h,y))}function S(M){tK(M)||(li(!1,M.toString()),o&&o(M))}const E=X.useMemo(()=>h.getViewport({scale:y*a,rotation:g}),[a,h,g,y]),k=X.useMemo(()=>h.getViewport({scale:y,rotation:g}),[h,g,y]);X.useEffect(function(){if(!h)return;h.cleanup();const{current:O}=w;if(!O)return;O.width=E.width,O.height=E.height,O.style.width=`${Math.floor(k.width)}px`,O.style.height=`${Math.floor(k.height)}px`,O.style.visibility="hidden";const B={annotationMode:d?vR.ENABLE_FORMS:vR.ENABLE,canvas:O,canvasContext:O.getContext("2d",{alpha:!1}),viewport:E};s&&(B.background=s);const C=h.render(B),R=C;return C.promise.then(()=>{O.style.visibility="",x()}).catch(S),()=>Gl(R)},[s,h,d,E,k]);const N=X.useCallback(()=>{const{current:M}=w;M&&(M.width=0,M.height=0)},[]);return X.useEffect(()=>N,[N]),I.jsx("canvas",{className:`${r}__canvas`,dir:"ltr",ref:nP(b,w),style:{display:"block",userSelect:"none"},children:p?I.jsx(uK,{}):null})}function dK(i){return"str"in i}function fK(){const i=Ry();Oe(i);const{customTextRenderer:e,onGetTextError:n,onGetTextSuccess:r,onRenderTextLayerError:s,onRenderTextLayerSuccess:a,page:o,pageIndex:u,pageNumber:h,rotate:d,scale:p}=i;Oe(o);const[g,y]=Eu(),{value:b,error:w}=g,x=X.useRef(null);li(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function S(){b&&r&&r(b)}function E(){w&&(li(!1,w.toString()),n&&n(w))}X.useEffect(function(){y({type:"RESET"})},[o,y]),X.useEffect(function(){if(!o)return;const R=Df(o.getTextContent()),L=R;return R.promise.then(F=>{y({type:"RESOLVE",value:F})}).catch(F=>{y({type:"REJECT",error:F})}),()=>Gl(L)},[o,y]),X.useEffect(()=>{if(b!==void 0){if(b===!1){E();return}S()}},[b]);const k=X.useCallback(()=>{a&&a()},[a]),N=X.useCallback(C=>{li(!1,C.toString()),s&&s(C)},[s]);function M(){const C=x.current;C&&C.classList.add("selecting")}function O(){const C=x.current;C&&C.classList.remove("selecting")}const B=X.useMemo(()=>o.getViewport({scale:p,rotation:d}),[o,d,p]);return X.useLayoutEffect(function(){if(!o||!b)return;const{current:R}=x;if(!R)return;R.innerHTML="";const L=o.streamTextContent({includeMarkedContent:!0}),F={container:R,textContentSource:L,viewport:B},U=new Xd(F),$=U;return U.render().then(()=>{const V=document.createElement("div");V.className="endOfContent",R.append(V);const G=R.querySelectorAll('[role="presentation"]');if(e){let et=0;b.items.forEach((z,Y)=>{if(!dK(z))return;const nt=G[et];if(!nt)return;const mt=e({pageIndex:u,pageNumber:h,itemIndex:Y,...z});nt.innerHTML=mt,et+=z.str&&z.hasEOL?2:1})}k()}).catch(N),()=>Gl($)},[e,N,k,o,u,h,b,B]),I.jsx("div",{className:Ty("react-pdf__Page__textContent","textLayer"),onMouseUp:O,onMouseDown:M,ref:x})}const _R=1;function pK(i){const n={...eP(),...i},{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:a,canvasRef:o,children:u,className:h,customRenderer:d,customTextRenderer:p,devicePixelRatio:g,error:y="Failed to load the page.",height:b,inputRef:w,loading:x="Loading page",noData:S="No page specified.",onGetAnnotationsError:E,onGetAnnotationsSuccess:k,onGetStructTreeError:N,onGetStructTreeSuccess:M,onGetTextError:O,onGetTextSuccess:B,onLoadError:C,onLoadSuccess:R,onRenderAnnotationLayerError:L,onRenderAnnotationLayerSuccess:F,onRenderError:U,onRenderSuccess:$,onRenderTextLayerError:V,onRenderTextLayerSuccess:G,pageIndex:et,pageNumber:z,pdf:Y,registerPage:nt,renderAnnotationLayer:mt=!0,renderForms:bt=!1,renderMode:q="canvas",renderTextLayer:Z=!0,rotate:lt,scale:ct=_R,unregisterPage:At,width:ht,...yt}=n,[Pt,kt]=Eu(),{value:Gt,error:We}=Pt,ne=X.useRef(null);Oe(Y);const jt=ml(z)?z-1:et??null,ee=z??(ml(et)?et+1:null),Ee=lt??(Gt?Gt.rotate:null),Ie=X.useMemo(()=>{if(!Gt)return null;let ui=1;const zn=ct??_R;if(ht||b){const ei=Gt.getViewport({scale:1,rotation:Ee});ht?ui=ht/ei.width:b&&(ui=b/ei.height)}return zn*ui},[b,Gt,Ee,ct,ht]);X.useEffect(function(){return()=>{ml(jt)&&s&&At&&At(jt)}},[s,Y,jt,At]);function Ai(){if(R){if(!Gt||!Ie)return;R(G_(Gt,Ie))}if(s&&nt){if(!ml(jt)||!ne.current)return;nt(jt,ne.current)}}function Bi(){We&&(li(!1,We.toString()),C&&C(We))}X.useEffect(function(){kt({type:"RESET"})},[kt,Y,jt]),X.useEffect(function(){if(!Y||!ee)return;const zn=Df(Y.getPage(ee)),ei=zn;return zn.promise.then(hi=>{kt({type:"RESOLVE",value:hi})}).catch(hi=>{kt({type:"REJECT",error:hi})}),()=>Gl(ei)},[kt,Y,ee]),X.useEffect(()=>{if(Gt!==void 0){if(Gt===!1){Bi();return}Ai()}},[Gt,Ie]);const Ue=X.useMemo(()=>ml(jt)&&ee&&ml(Ee)&&ml(Ie)?{_className:r,canvasBackground:a,customTextRenderer:p,devicePixelRatio:g,onGetAnnotationsError:E,onGetAnnotationsSuccess:k,onGetStructTreeError:N,onGetStructTreeSuccess:M,onGetTextError:O,onGetTextSuccess:B,onRenderAnnotationLayerError:L,onRenderAnnotationLayerSuccess:F,onRenderError:U,onRenderSuccess:$,onRenderTextLayerError:V,onRenderTextLayerSuccess:G,page:Gt,pageIndex:jt,pageNumber:ee,renderForms:bt,renderTextLayer:Z,rotate:Ee,scale:Ie}:null,[r,a,p,g,E,k,N,M,O,B,L,F,U,$,V,G,Gt,jt,ee,bt,Z,Ee,Ie]),Ve=X.useMemo(()=>QM(yt,()=>Gt&&(Ie?G_(Gt,Ie):void 0)),[yt,Gt,Ie]),vt=`${jt}@${Ie}/${Ee}`;function Dt(){switch(q){case"custom":return Oe(d),I.jsx(d,{},`${vt}_custom`);case"none":return null;case"canvas":default:return I.jsx(hK,{canvasRef:o},`${vt}_canvas`)}}function pe(){return Z?I.jsx(fK,{},`${vt}_text`):null}function Ht(){return mt?I.jsx(sK,{},`${vt}_annotations`):null}function an(){function ui(ei){return!!ei?.page}if(!ui(Ue))throw new Error("page is undefined");const zn=typeof u=="function"?u(Ue):u;return I.jsxs(iP.Provider,{value:Ue,children:[Dt(),pe(),Ht(),zn]})}function Fi(){return ee?Y===null||Gt===void 0||Gt===null?I.jsx(lu,{type:"loading",children:typeof x=="function"?x():x}):Y===!1||Gt===!1?I.jsx(lu,{type:"error",children:typeof y=="function"?y():y}):an():I.jsx(lu,{type:"no-data",children:typeof S=="function"?S():S})}return I.jsx("div",{className:Ty(r,h),"data-page-number":ee,ref:nP(w,ne),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Ie}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Ve,children:Fi()})}JY();So.workerSrc="pdf.worker.mjs";async function wR(i,e=200){try{const s=await(await Ql(i).promise).getPage(1),a=s.getViewport({scale:1}),o=e/a.width,u=s.getViewport({scale:o}),h=document.createElement("canvas"),d=h.getContext("2d");if(!d)throw new Error("Canvas context not available");return h.width=u.width,h.height=u.height,await s.render({canvasContext:d,viewport:u}).promise,h.toDataURL("image/jpeg",.8)}catch(n){return console.error("Error generating thumbnail:",n),""}}async function gK(i){try{const n=await Ql(i).promise,r=[];for(let s=1;s<=n.numPages;s++){const u=(await(await n.getPage(s)).getTextContent()).items.map(h=>h.str).join(" ");r.push(u)}return r.join(`
`)}catch(e){return console.error("Error extracting PDF text:",e),""}}async function mK(i){try{const n=await Ql(i).promise,r=await n.getOutline();if(!r)return[];const s=async(a,o=0)=>{const u=[];for(const h of a){let d=1;if(h.dest)try{const p=typeof h.dest=="string"?await n.getDestination(h.dest):h.dest;if(p&&p[0]){const g=p[0];d=await n.getPageIndex(g)+1}}catch{console.warn("Could not resolve page for outline item")}if(u.push({title:h.title,page:d,level:o}),h.items&&h.items.length>0){const p=await s(h.items,o+1);u.push(...p)}}return u};return await s(r)}catch(e){return console.error("Error extracting PDF outline:",e),[]}}async function AR(i){try{const e=await i.arrayBuffer(),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(a=>a.toString(16).padStart(2,"0")).join("")}catch(e){return console.error("Error calculating PDF hash:",e),""}}function xR(i,e){const n=[];for(const r of e){if(i.pdfHash&&r.pdfHash===i.pdfHash){n.push(r);continue}if(i.doi&&r.doi===i.doi){n.push(r);continue}i.title&&r.title&&yK(i.title.toLowerCase(),r.title.toLowerCase())>.85&&n.push(r)}return n}function yK(i,e){const n=i.length>e.length?i:e,r=i.length>e.length?e:i;if(n.length===0)return 1;const s=bK(n,r);return(n.length-s)/n.length}function bK(i,e){const n=[];for(let r=0;r<=e.length;r++)n[r]=[r];for(let r=0;r<=i.length;r++)n[0][r]=r;for(let r=1;r<=e.length;r++)for(let s=1;s<=i.length;s++)e.charAt(r-1)===i.charAt(s-1)?n[r][s]=n[r-1][s-1]:n[r][s]=Math.min(n[r-1][s-1]+1,n[r][s-1]+1,n[r-1][s]+1);return n[e.length][i.length]}function $1(i){if(!i)return null;const e=i.trim(),n=/(?:https?:\/\/)?(?:www\.)?doi\.org\/(10\.\d{4,9}\/[-._;()/:A-Z0-9]+)/i,r=e.match(n);if(r)return r[1];const s=/^(10\.\d{4,9}\/[-._;()/:A-Z0-9]+)$/i,a=e.match(s);if(a)return a[1];const o=/\b(10[.][0-9]{4,}(?:[.][0-9]+)*\/(?:(?!["&\'<>])\S)+)\b/gi,u=e.match(o);return u?u[0]:null}async function q_(i,e="DOI"){try{let n="";const r="paperId,externalIds,title,authors,abstract,year,venue,citationCount,references,citations,publicationDate";if(e==="Title"){const o=`https://api.semanticscholar.org/graph/v1/paper/search?query=${encodeURIComponent(i)}&fields=${r}&limit=1`,h=await(await fetch(o)).json();return h.data&&h.data.length>0?h.data[0]:null}else{let o=i;if(e==="DOI"){const u=$1(i);if(!u)return console.error("Invalid DOI format:",i),null;o=u}n=`https://api.semanticscholar.org/graph/v1/paper/${e}:${o}?fields=${r}`}const s=await fetch(n);return s.ok?await s.json():null}catch(n){return console.error("Error fetching Semantic Scholar data:",n),null}}function ER(i,e){const n=i.filter(S=>S.status==="read"),r=new Date;r.setDate(1),r.setHours(0,0,0,0);const s=new Date;s.setDate(s.getDate()-s.getDay()),s.setHours(0,0,0,0);const a=n.filter(S=>S.lastReadAt&&S.lastReadAt>=r.getTime()).length,o=n.filter(S=>S.lastReadAt&&S.lastReadAt>=s.getTime()).length,u=i.reduce((S,E)=>S+(E.totalReadingTime||0),0),h=n.length>0?u/n.length:0,{currentStreak:d,longestStreak:p}=vK(i),g={};i.forEach(S=>{S.tags?.forEach(E=>{g[E]=(g[E]||0)+1})});const y={};i.forEach(S=>{S.methods?.forEach(E=>{y[E]=(y[E]||0)+1})});const b={};i.forEach(S=>{S.organisms?.forEach(E=>{b[E]=(b[E]||0)+1})});const w={};i.forEach(S=>{S.year&&(w[S.year]=(w[S.year]||0)+1)});const x=_K(i,12);return{papersReadTotal:n.length,papersReadThisMonth:a,papersReadThisWeek:o,totalReadingTime:u,averageReadingTime:h,currentStreak:d,longestStreak:p,tagFrequency:g,methodFrequency:y,organismFrequency:b,yearDistribution:w,monthlyReadings:x}}function vK(i){const e=i.filter(p=>p.status==="read"&&p.lastReadAt).sort((p,g)=>(g.lastReadAt||0)-(p.lastReadAt||0));if(e.length===0)return{currentStreak:0,longestStreak:0};const n=new Date;n.setHours(0,0,0,0);const r=new Set(e.map(p=>{const g=new Date(p.lastReadAt);return g.setHours(0,0,0,0),g.getTime()})),s=Array.from(r).sort((p,g)=>g-p);let a=0,o=n.getTime();const u=1440*60*1e3;for(const p of s)if(p===o||p===o-u)a++,o=p-u;else break;let h=0,d=1;for(let p=0;p<s.length-1;p++)s[p]-s[p+1]===u?d++:(h=Math.max(h,d),d=1);return h=Math.max(h,d),{currentStreak:a,longestStreak:h}}function _K(i,e){const n=[],r=new Date;for(let s=0;s<e;s++){const a=new Date(r.getFullYear(),r.getMonth()-s,1),o=new Date(r.getFullYear(),r.getMonth()-s+1,1),u=i.filter(h=>{if(!h.lastReadAt)return!1;const d=new Date(h.lastReadAt);return d>=a&&d<o}).length;n.unshift({month:a.toLocaleDateString("en-US",{year:"numeric",month:"short"}),count:u})}return n}function SR(i){if(i<60)return`${Math.round(i)}s`;if(i<3600)return`${Math.round(i/60)}m`;const e=Math.floor(i/3600),n=Math.round(i%3600/60);return`${e}h ${n}m`}function wK(i,e,n=Date.now()){let{repetitions:r,interval:s,ease:a}=i;a=a-.8+.28*e-.02*e*e,a<1.3&&(a=1.3),e<3?(r=0,s=1):(r+=1,r===1?s=1:r===2?s=6:s=Math.round(s*a));const o=1440*60*1e3,u=n+s*o;return{repetitions:r,interval:s,ease:a,due:u}}function AK(i=Date.now()){return{repetitions:0,interval:0,ease:2.5,due:i}}function xK(i,e=Date.now()){return i.filter(n=>n.srsDue&&n.srsDue<=e).sort((n,r)=>(n.srsDue||0)-(r.srsDue||0))}function A0(i){if(i<1)return"Today";if(i===1)return"1 day";if(i<30)return`${i} days`;if(i<365){const n=Math.round(i/30);return n===1?"1 month":`${n} months`}const e=Math.round(i/365);return e===1?"1 year":`${e} years`}var G1=dI();const EK=$m(G1);function yi(i){return`Minified Redux error #${i}; visit https://redux.js.org/Errors?code=${i} for the full message or use the non-minified dev environment for full errors. `}var SK=typeof Symbol=="function"&&Symbol.observable||"@@observable",TR=SK,CR=()=>Math.random().toString(36).substring(7).split("").join("."),TK={INIT:`@@redux/INIT${CR()}`,REPLACE:`@@redux/REPLACE${CR()}`},RR=TK;function CK(i){if(typeof i!="object"||i===null)return!1;let e=i;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(i)===e||Object.getPrototypeOf(i)===null}function lP(i,e,n){if(typeof i!="function")throw new Error(yi(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(yi(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(yi(1));return n(lP)(i,e)}let r=i,s=e,a=new Map,o=a,u=0,h=!1;function d(){o===a&&(o=new Map,a.forEach((S,E)=>{o.set(E,S)}))}function p(){if(h)throw new Error(yi(3));return s}function g(S){if(typeof S!="function")throw new Error(yi(4));if(h)throw new Error(yi(5));let E=!0;d();const k=u++;return o.set(k,S),function(){if(E){if(h)throw new Error(yi(6));E=!1,d(),o.delete(k),a=null}}}function y(S){if(!CK(S))throw new Error(yi(7));if(typeof S.type>"u")throw new Error(yi(8));if(typeof S.type!="string")throw new Error(yi(17));if(h)throw new Error(yi(9));try{h=!0,s=r(s,S)}finally{h=!1}return(a=o).forEach(k=>{k()}),S}function b(S){if(typeof S!="function")throw new Error(yi(10));r=S,y({type:RR.REPLACE})}function w(){const S=g;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(yi(11));function k(){const M=E;M.next&&M.next(p())}return k(),{unsubscribe:S(k)}},[TR](){return this}}}return y({type:RR.INIT}),{dispatch:y,subscribe:g,getState:p,replaceReducer:b,[TR]:w}}function IR(i,e){return function(...n){return e(i.apply(this,n))}}function DR(i,e){if(typeof i=="function")return IR(i,e);if(typeof i!="object"||i===null)throw new Error(yi(16));const n={};for(const r in i){const s=i[r];typeof s=="function"&&(n[r]=IR(s,e))}return n}function cP(...i){return i.length===0?e=>e:i.length===1?i[0]:i.reduce((e,n)=>(...r)=>e(n(...r)))}function RK(...i){return e=>(n,r)=>{const s=e(n,r);let a=()=>{throw new Error(yi(15))};const o={getState:s.getState,dispatch:(h,...d)=>a(h,...d)},u=i.map(h=>h(o));return a=cP(...u)(s.dispatch),{...s,dispatch:a}}}var x0={exports:{}},E0={};var kR;function IK(){if(kR)return E0;kR=1;var i=Gm();function e(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=i.useSyncExternalStore,s=i.useRef,a=i.useEffect,o=i.useMemo,u=i.useDebugValue;return E0.useSyncExternalStoreWithSelector=function(h,d,p,g,y){var b=s(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=o(function(){function S(O){if(!E){if(E=!0,k=O,O=g(O),y!==void 0&&w.hasValue){var B=w.value;if(y(B,O))return N=B}return N=O}if(B=N,n(k,O))return B;var C=g(O);return y!==void 0&&y(B,C)?(k=O,B):(k=O,N=C)}var E=!1,k,N,M=p===void 0?null:p;return[function(){return S(d())},M===null?void 0:function(){return S(M())}]},[d,p,g,y]);var x=r(h,b[0],b[1]);return a(function(){w.hasValue=!0,w.value=x},[x]),u(x),x},E0}var NR;function DK(){return NR||(NR=1,x0.exports=IK()),x0.exports}DK();var kK=X.version.startsWith("19"),NK=Symbol.for(kK?"react.transitional.element":"react.element"),MK=Symbol.for("react.portal"),PK=Symbol.for("react.fragment"),OK=Symbol.for("react.strict_mode"),LK=Symbol.for("react.profiler"),BK=Symbol.for("react.consumer"),FK=Symbol.for("react.context"),uP=Symbol.for("react.forward_ref"),UK=Symbol.for("react.suspense"),VK=Symbol.for("react.suspense_list"),q1=Symbol.for("react.memo"),jK=Symbol.for("react.lazy"),zK=uP,HK=q1;function $K(i){if(typeof i=="object"&&i!==null){const{$$typeof:e}=i;switch(e){case NK:switch(i=i.type,i){case PK:case LK:case OK:case UK:case VK:return i;default:switch(i=i&&i.$$typeof,i){case FK:case uP:case jK:case q1:return i;case BK:return i;default:return e}}case MK:return e}}}function GK(i){return $K(i)===q1}function qK(i,e,n,r,{areStatesEqual:s,areOwnPropsEqual:a,areStatePropsEqual:o}){let u=!1,h,d,p,g,y;function b(k,N){return h=k,d=N,p=i(h,d),g=e(r,d),y=n(p,g,d),u=!0,y}function w(){return p=i(h,d),e.dependsOnOwnProps&&(g=e(r,d)),y=n(p,g,d),y}function x(){return i.dependsOnOwnProps&&(p=i(h,d)),e.dependsOnOwnProps&&(g=e(r,d)),y=n(p,g,d),y}function S(){const k=i(h,d),N=!o(k,p);return p=k,N&&(y=n(p,g,d)),y}function E(k,N){const M=!a(N,d),O=!s(k,h,N,d);return h=k,d=N,M&&O?w():M?x():O?S():y}return function(N,M){return u?E(N,M):b(N,M)}}function WK(i,{initMapStateToProps:e,initMapDispatchToProps:n,initMergeProps:r,...s}){const a=e(i,s),o=n(i,s),u=r(i,s);return qK(a,o,u,i,s)}function XK(i,e){const n={};for(const r in i){const s=i[r];typeof s=="function"&&(n[r]=(...a)=>e(s(...a)))}return n}function W_(i){return function(n){const r=i(n);function s(){return r}return s.dependsOnOwnProps=!1,s}}function MR(i){return i.dependsOnOwnProps?!!i.dependsOnOwnProps:i.length!==1}function hP(i,e){return function(r,{displayName:s}){const a=function(u,h){return a.dependsOnOwnProps?a.mapToProps(u,h):a.mapToProps(u,void 0)};return a.dependsOnOwnProps=!0,a.mapToProps=function(u,h){a.mapToProps=i,a.dependsOnOwnProps=MR(i);let d=a(u,h);return typeof d=="function"&&(a.mapToProps=d,a.dependsOnOwnProps=MR(d),d=a(u,h)),d},a}}function W1(i,e){return(n,r)=>{throw new Error(`Invalid value of type ${typeof i} for ${e} argument when connecting component ${r.wrappedComponentName}.`)}}function YK(i){return i&&typeof i=="object"?W_(e=>XK(i,e)):i?typeof i=="function"?hP(i):W1(i,"mapDispatchToProps"):W_(e=>({dispatch:e}))}function KK(i){return i?typeof i=="function"?hP(i):W1(i,"mapStateToProps"):W_(()=>({}))}function QK(i,e,n){return{...n,...i,...e}}function ZK(i){return function(n,{displayName:r,areMergedPropsEqual:s}){let a=!1,o;return function(h,d,p){const g=i(h,d,p);return a?s(g,o)||(o=g):(a=!0,o=g),o}}}function JK(i){return i?typeof i=="function"?ZK(i):W1(i,"mergeProps"):()=>QK}function tQ(i){i()}function eQ(){let i=null,e=null;return{clear(){i=null,e=null},notify(){tQ(()=>{let n=i;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=i;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=e={callback:n,next:null,prev:e};return s.prev?s.prev.next=s:i=s,function(){!r||i===null||(r=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:i=s.next)}}}}var PR={notify(){},get:()=>[]};function dP(i,e){let n,r=PR,s=0,a=!1;function o(x){p();const S=r.subscribe(x);let E=!1;return()=>{E||(E=!0,S(),g())}}function u(){r.notify()}function h(){w.onStateChange&&w.onStateChange()}function d(){return a}function p(){s++,n||(n=e?e.addNestedSub(h):i.subscribe(h),r=eQ())}function g(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=PR)}function y(){a||(a=!0,p())}function b(){a&&(a=!1,g())}const w={addNestedSub:o,notifyNestedSubs:u,handleChangeWrapper:h,isSubscribed:d,trySubscribe:y,tryUnsubscribe:b,getListeners:()=>r};return w}var nQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iQ=nQ(),rQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",sQ=rQ(),aQ=()=>iQ||sQ?X.useLayoutEffect:X.useEffect,Pm=aQ();function OR(i,e){return i===e?i!==0||e!==0||1/i===1/e:i!==i&&e!==e}function S0(i,e){if(OR(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;const n=Object.keys(i),r=Object.keys(e);if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(e,n[s])||!OR(i[n[s]],e[n[s]]))return!1;return!0}var oQ={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},lQ={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},cQ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},fP={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},uQ={[zK]:cQ,[HK]:fP};function LR(i){return GK(i)?fP:uQ[i.$$typeof]||oQ}var hQ=Object.defineProperty,dQ=Object.getOwnPropertyNames,BR=Object.getOwnPropertySymbols,fQ=Object.getOwnPropertyDescriptor,pQ=Object.getPrototypeOf,FR=Object.prototype;function X_(i,e){if(typeof e!="string"){if(FR){const a=pQ(e);a&&a!==FR&&X_(i,a)}let n=dQ(e);BR&&(n=n.concat(BR(e)));const r=LR(i),s=LR(e);for(let a=0;a<n.length;++a){const o=n[a];if(!lQ[o]&&!(s&&s[o])&&!(r&&r[o])){const u=fQ(e,o);try{hQ(i,o,u)}catch{}}}}return i}var gQ=Symbol.for("react-redux-context"),mQ=typeof globalThis<"u"?globalThis:{};function yQ(){if(!X.createContext)return{};const i=mQ[gQ]??=new Map;let e=i.get(X.createContext);return e||(e=X.createContext(null),i.set(X.createContext,e)),e}var pP=yQ(),bQ=[null,null];function vQ(i,e,n){Pm(()=>i(...e),n)}function _Q(i,e,n,r,s,a){i.current=r,n.current=!1,s.current&&(s.current=null,a())}function wQ(i,e,n,r,s,a,o,u,h,d,p){if(!i)return()=>{};let g=!1,y=null;const b=()=>{if(g||!u.current)return;const x=e.getState();let S,E;try{S=r(x,s.current)}catch(k){E=k,y=k}E||(y=null),S===a.current?o.current||d():(a.current=S,h.current=S,o.current=!0,p())};return n.onStateChange=b,n.trySubscribe(),b(),()=>{if(g=!0,n.tryUnsubscribe(),n.onStateChange=null,y)throw y}}function AQ(i,e){return i===e}function xQ(i,e,n,{pure:r,areStatesEqual:s=AQ,areOwnPropsEqual:a=S0,areStatePropsEqual:o=S0,areMergedPropsEqual:u=S0,forwardRef:h=!1,context:d=pP}={}){const p=d,g=KK(i),y=YK(e),b=JK(n),w=!!i;return S=>{const E=S.displayName||S.name||"Component",k=`Connect(${E})`,N={shouldHandleStateChanges:w,displayName:k,wrappedComponentName:E,WrappedComponent:S,initMapStateToProps:g,initMapDispatchToProps:y,initMergeProps:b,areStatesEqual:s,areStatePropsEqual:o,areOwnPropsEqual:a,areMergedPropsEqual:u};function M(C){const[R,L,F]=X.useMemo(()=>{const{reactReduxForwardedRef:ne,...jt}=C;return[C.context,ne,jt]},[C]),U=X.useMemo(()=>{let ne=p;return R?.Consumer,ne},[R,p]),$=X.useContext(U),V=!!C.store&&!!C.store.getState&&!!C.store.dispatch,G=!!$&&!!$.store,et=V?C.store:$.store,z=G?$.getServerState:et.getState,Y=X.useMemo(()=>WK(et.dispatch,N),[et]),[nt,mt]=X.useMemo(()=>{if(!w)return bQ;const ne=dP(et,V?void 0:$.subscription),jt=ne.notifyNestedSubs.bind(ne);return[ne,jt]},[et,V,$]),bt=X.useMemo(()=>V?$:{...$,subscription:nt},[V,$,nt]),q=X.useRef(void 0),Z=X.useRef(F),lt=X.useRef(void 0),ct=X.useRef(!1),At=X.useRef(!1),ht=X.useRef(void 0);Pm(()=>(At.current=!0,()=>{At.current=!1}),[]);const yt=X.useMemo(()=>()=>lt.current&&F===Z.current?lt.current:Y(et.getState(),F),[et,F]),Pt=X.useMemo(()=>jt=>nt?wQ(w,et,nt,Y,Z,q,ct,At,lt,mt,jt):()=>{},[nt]);vQ(_Q,[Z,q,ct,F,lt,mt]);let kt;try{kt=X.useSyncExternalStore(Pt,yt,z?()=>Y(z(),F):yt)}catch(ne){throw ht.current&&(ne.message+=`
The error may be correlated with this previous error:
${ht.current.stack}

`),ne}Pm(()=>{ht.current=void 0,lt.current=void 0,q.current=kt});const Gt=X.useMemo(()=>X.createElement(S,{...kt,ref:L}),[L,S,kt]);return X.useMemo(()=>w?X.createElement(U.Provider,{value:bt},Gt):Gt,[U,Gt,bt])}const B=X.memo(M);if(B.WrappedComponent=S,B.displayName=M.displayName=k,h){const R=X.forwardRef(function(F,U){return X.createElement(B,{...F,reactReduxForwardedRef:U})});return R.displayName=k,R.WrappedComponent=S,X_(R,S)}return X_(B,S)}}var gP=xQ;function EQ(i){const{children:e,context:n,serverState:r,store:s}=i,a=X.useMemo(()=>{const h=dP(s);return{store:s,subscription:h,getServerState:r?()=>r:void 0}},[s,r]),o=X.useMemo(()=>s.getState(),[s]);Pm(()=>{const{subscription:h}=a;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),o!==s.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[a,o]);const u=n||pP;return X.createElement(u.Provider,{value:a},e)}var SQ=EQ,Gr=function(e){var n=e.top,r=e.right,s=e.bottom,a=e.left,o=r-a,u=s-n,h={top:n,right:r,bottom:s,left:a,width:o,height:u,x:a,y:n,center:{x:(r+a)/2,y:(s+n)/2}};return h},X1=function(e,n){return{top:e.top-n.top,left:e.left-n.left,bottom:e.bottom+n.bottom,right:e.right+n.right}},UR=function(e,n){return{top:e.top+n.top,left:e.left+n.left,bottom:e.bottom-n.bottom,right:e.right-n.right}},TQ=function(e,n){return{top:e.top+n.y,left:e.left+n.x,bottom:e.bottom+n.y,right:e.right+n.x}},T0={top:0,right:0,bottom:0,left:0},Y1=function(e){var n=e.borderBox,r=e.margin,s=r===void 0?T0:r,a=e.border,o=a===void 0?T0:a,u=e.padding,h=u===void 0?T0:u,d=Gr(X1(n,s)),p=Gr(UR(n,o)),g=Gr(UR(p,h));return{marginBox:d,borderBox:Gr(n),paddingBox:p,contentBox:g,margin:s,border:o,padding:h}},_r=function(e){var n=e.slice(0,-2),r=e.slice(-2);if(r!=="px")return 0;var s=Number(n);return isNaN(s)&&Oe(!1),s},CQ=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Om=function(e,n){var r=e.borderBox,s=e.border,a=e.margin,o=e.padding,u=TQ(r,n);return Y1({borderBox:u,border:s,margin:a,padding:o})},Lm=function(e,n){return n===void 0&&(n=CQ()),Om(e,n)},mP=function(e,n){var r={top:_r(n.marginTop),right:_r(n.marginRight),bottom:_r(n.marginBottom),left:_r(n.marginLeft)},s={top:_r(n.paddingTop),right:_r(n.paddingRight),bottom:_r(n.paddingBottom),left:_r(n.paddingLeft)},a={top:_r(n.borderTopWidth),right:_r(n.borderRightWidth),bottom:_r(n.borderBottomWidth),left:_r(n.borderLeftWidth)};return Y1({borderBox:e,margin:r,padding:s,border:a})},yP=function(e){var n=e.getBoundingClientRect(),r=window.getComputedStyle(e);return mP(n,r)},Qd=function(e){var n=[],r=null,s=function(){for(var o=arguments.length,u=new Array(o),h=0;h<o;h++)u[h]=arguments[h];n=u,!r&&(r=requestAnimationFrame(function(){r=null,e.apply(void 0,n)}))};return s.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},s};function Bm(){return Bm=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Bm.apply(null,arguments)}function bP(i,e){}bP.bind(null,"warn");bP.bind(null,"error");function To(){}function RQ(i,e){return{...i,...e}}function Cr(i,e,n){const r=e.map(s=>{const a=RQ(n,s.options);return i.addEventListener(s.eventName,s.fn,a),function(){i.removeEventListener(s.eventName,s.fn,a)}});return function(){r.forEach(a=>{a()})}}const IQ="Invariant failed";class Fm extends Error{}Fm.prototype.toString=function(){return this.message};function wt(i,e){throw new Fm(IQ)}class DQ extends nn.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=To,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof Fm&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Cr(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof Fm){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const kQ=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Um=i=>i+1,NQ=i=>`
  You have lifted an item in position ${Um(i.source.index)}
`,vP=(i,e)=>{const n=i.droppableId===e.droppableId,r=Um(i.index),s=Um(e.index);return n?`
      You have moved the item from position ${r}
      to position ${s}
    `:`
    You have moved the item from position ${r}
    in list ${i.droppableId}
    to list ${e.droppableId}
    in position ${s}
  `},_P=(i,e,n)=>e.droppableId===n.droppableId?`
      The item ${i}
      has been combined with ${n.draggableId}`:`
      The item ${i}
      in list ${e.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,MQ=i=>{const e=i.destination;if(e)return vP(i.source,e);const n=i.combine;return n?_P(i.draggableId,i.source,n):"You are over an area that cannot be dropped on"},VR=i=>`
  The item has returned to its starting position
  of ${Um(i.index)}
`,PQ=i=>{if(i.reason==="CANCEL")return`
      Movement cancelled.
      ${VR(i.source)}
    `;const e=i.destination,n=i.combine;return e?`
      You have dropped the item.
      ${vP(i.source,e)}
    `:n?`
      You have dropped the item.
      ${_P(i.draggableId,i.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${VR(i.source)}
  `},Yg={dragHandleUsageInstructions:kQ,onDragStart:NQ,onDragUpdate:MQ,onDragEnd:PQ};function OQ(i,e){return!!(i===e||Number.isNaN(i)&&Number.isNaN(e))}function wP(i,e){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++)if(!OQ(i[n],e[n]))return!1;return!0}function me(i,e){const n=X.useState(()=>({inputs:e,result:i()}))[0],r=X.useRef(!0),s=X.useRef(n),o=r.current||!!(e&&s.current.inputs&&wP(e,s.current.inputs))?s.current:{inputs:e,result:i()};return X.useEffect(()=>{r.current=!1,s.current=o},[o]),o.result}function Nt(i,e){return me(()=>i,e)}const jn={x:0,y:0},Zn=(i,e)=>({x:i.x+e.x,y:i.y+e.y}),tr=(i,e)=>({x:i.x-e.x,y:i.y-e.y}),Co=(i,e)=>i.x===e.x&&i.y===e.y,Lu=i=>({x:i.x!==0?-i.x:0,y:i.y!==0?-i.y:0}),ql=(i,e,n=0)=>i==="x"?{x:e,y:n}:{x:n,y:e},Zd=(i,e)=>Math.sqrt((e.x-i.x)**2+(e.y-i.y)**2),jR=(i,e)=>Math.min(...e.map(n=>Zd(i,n))),AP=i=>e=>({x:i(e.x),y:i(e.y)});var LQ=(i,e)=>{const n=Gr({top:Math.max(e.top,i.top),right:Math.min(e.right,i.right),bottom:Math.min(e.bottom,i.bottom),left:Math.max(e.left,i.left)});return n.width<=0||n.height<=0?null:n};const kf=(i,e)=>({top:i.top+e.y,left:i.left+e.x,bottom:i.bottom+e.y,right:i.right+e.x}),zR=i=>[{x:i.left,y:i.top},{x:i.right,y:i.top},{x:i.left,y:i.bottom},{x:i.right,y:i.bottom}],BQ={top:0,right:0,bottom:0,left:0},FQ=(i,e)=>e?kf(i,e.scroll.diff.displacement):i,UQ=(i,e,n)=>n&&n.increasedBy?{...i,[e.end]:i[e.end]+n.increasedBy[e.line]}:i,VQ=(i,e)=>e&&e.shouldClipSubject?LQ(e.pageMarginBox,i):Gr(i);var Su=({page:i,withPlaceholder:e,axis:n,frame:r})=>{const s=FQ(i.marginBox,r),a=UQ(s,n,e),o=VQ(a,r);return{page:i,withPlaceholder:e,active:o}},K1=(i,e)=>{i.frame||wt();const n=i.frame,r=tr(e,n.scroll.initial),s=Lu(r),a={...n,scroll:{initial:n.scroll.initial,current:e,diff:{value:r,displacement:s},max:n.scroll.max}},o=Su({page:i.subject.page,withPlaceholder:i.subject.withPlaceholder,axis:i.axis,frame:a});return{...i,frame:a,subject:o}};function Vn(i,e=wP){let n=null;function r(...s){if(n&&n.lastThis===this&&e(s,n.lastArgs))return n.lastResult;const a=i.apply(this,s);return n={lastResult:a,lastArgs:s,lastThis:this},a}return r.clear=function(){n=null},r}const xP=Vn(i=>i.reduce((e,n)=>(e[n.descriptor.id]=n,e),{})),EP=Vn(i=>i.reduce((e,n)=>(e[n.descriptor.id]=n,e),{})),Dy=Vn(i=>Object.values(i)),jQ=Vn(i=>Object.values(i));var Bu=Vn((i,e)=>jQ(e).filter(r=>i===r.descriptor.droppableId).sort((r,s)=>r.descriptor.index-s.descriptor.index));function Q1(i){return i.at&&i.at.type==="REORDER"?i.at.destination:null}function ky(i){return i.at&&i.at.type==="COMBINE"?i.at.combine:null}var Ny=Vn((i,e)=>e.filter(n=>n.descriptor.id!==i.descriptor.id)),zQ=({isMovingForward:i,draggable:e,destination:n,insideDestination:r,previousImpact:s})=>{if(!n.isCombineEnabled||!Q1(s))return null;function o(b){const w={type:"COMBINE",combine:{draggableId:b,droppableId:n.descriptor.id}};return{...s,at:w}}const u=s.displaced.all,h=u.length?u[0]:null;if(i)return h?o(h):null;const d=Ny(e,r);if(!h){if(!d.length)return null;const b=d[d.length-1];return o(b.descriptor.id)}const p=d.findIndex(b=>b.descriptor.id===h);p===-1&&wt();const g=p-1;if(g<0)return null;const y=d[g];return o(y.descriptor.id)},Fu=(i,e)=>i.descriptor.droppableId===e.descriptor.id;const SP={point:jn,value:0},Jd={invisible:{},visible:{},all:[]},HQ={displaced:Jd,displacedBy:SP,at:null};var Rr=(i,e)=>n=>i<=n&&n<=e,TP=i=>{const e=Rr(i.top,i.bottom),n=Rr(i.left,i.right);return r=>{if(e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right))return!0;const a=e(r.top)||e(r.bottom),o=n(r.left)||n(r.right);if(a&&o)return!0;const h=r.top<i.top&&r.bottom>i.bottom,d=r.left<i.left&&r.right>i.right;return h&&d?!0:h&&o||d&&a}},$Q=i=>{const e=Rr(i.top,i.bottom),n=Rr(i.left,i.right);return r=>e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right)};const Z1={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},CP={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var GQ=i=>e=>{const n=Rr(e.top,e.bottom),r=Rr(e.left,e.right);return s=>i===Z1?n(s.top)&&n(s.bottom):r(s.left)&&r(s.right)};const qQ=(i,e)=>{const n=e.frame?e.frame.scroll.diff.displacement:jn;return kf(i,n)},WQ=(i,e,n)=>e.subject.active?n(e.subject.active)(i):!1,XQ=(i,e,n)=>n(e)(i),J1=({target:i,destination:e,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:s})=>{const a=r?qQ(i,e):i;return WQ(a,e,s)&&XQ(a,n,s)},YQ=i=>J1({...i,isVisibleThroughFrameFn:TP}),RP=i=>J1({...i,isVisibleThroughFrameFn:$Q}),KQ=i=>J1({...i,isVisibleThroughFrameFn:GQ(i.destination.axis)}),QQ=(i,e,n)=>{if(typeof n=="boolean")return n;if(!e)return!0;const{invisible:r,visible:s}=e;if(r[i])return!1;const a=s[i];return a?a.shouldAnimate:!0};function ZQ(i,e){const n=i.page.marginBox,r={top:e.point.y,right:0,bottom:0,left:e.point.x};return Gr(X1(n,r))}function tf({afterDragging:i,destination:e,displacedBy:n,viewport:r,forceShouldAnimate:s,last:a}){return i.reduce(function(u,h){const d=ZQ(h,n),p=h.descriptor.id;if(u.all.push(p),!YQ({target:d,destination:e,viewport:r,withDroppableDisplacement:!0}))return u.invisible[h.descriptor.id]=!0,u;const y=QQ(p,a,s),b={draggableId:p,shouldAnimate:y};return u.visible[p]=b,u},{all:[],visible:{},invisible:{}})}function JQ(i,e){if(!i.length)return 0;const n=i[i.length-1].descriptor.index;return e.inHomeList?n:n+1}function HR({insideDestination:i,inHomeList:e,displacedBy:n,destination:r}){const s=JQ(i,{inHomeList:e});return{displaced:Jd,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function Vm({draggable:i,insideDestination:e,destination:n,viewport:r,displacedBy:s,last:a,index:o,forceShouldAnimate:u}){const h=Fu(i,n);if(o==null)return HR({insideDestination:e,inHomeList:h,displacedBy:s,destination:n});const d=e.find(w=>w.descriptor.index===o);if(!d)return HR({insideDestination:e,inHomeList:h,displacedBy:s,destination:n});const p=Ny(i,e),g=e.indexOf(d),y=p.slice(g);return{displaced:tf({afterDragging:y,destination:n,displacedBy:s,last:a,viewport:r.frame,forceShouldAnimate:u}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function Lo(i,e){return!!e.effected[i]}var tZ=({isMovingForward:i,destination:e,draggables:n,combine:r,afterCritical:s})=>{if(!e.isCombineEnabled)return null;const a=r.draggableId,u=n[a].descriptor.index;return Lo(a,s)?i?u:u-1:i?u+1:u},eZ=({isMovingForward:i,isInHomeList:e,insideDestination:n,location:r})=>{if(!n.length)return null;const s=r.index,a=i?s+1:s-1,o=n[0].descriptor.index,u=n[n.length-1].descriptor.index,h=e?u:u+1;return a<o||a>h?null:a},nZ=({isMovingForward:i,isInHomeList:e,draggable:n,draggables:r,destination:s,insideDestination:a,previousImpact:o,viewport:u,afterCritical:h})=>{const d=o.at;if(d||wt(),d.type==="REORDER"){const g=eZ({isMovingForward:i,isInHomeList:e,location:d.destination,insideDestination:a});return g==null?null:Vm({draggable:n,insideDestination:a,destination:s,viewport:u,last:o.displaced,displacedBy:o.displacedBy,index:g})}const p=tZ({isMovingForward:i,destination:s,displaced:o.displaced,draggables:r,combine:d.combine,afterCritical:h});return p==null?null:Vm({draggable:n,insideDestination:a,destination:s,viewport:u,last:o.displaced,displacedBy:o.displacedBy,index:p})},iZ=({displaced:i,afterCritical:e,combineWith:n,displacedBy:r})=>{const s=!!(i.visible[n]||i.invisible[n]);return Lo(n,e)?s?jn:Lu(r.point):s?r.point:jn},rZ=({afterCritical:i,impact:e,draggables:n})=>{const r=ky(e);r||wt();const s=r.draggableId,a=n[s].page.borderBox.center,o=iZ({displaced:e.displaced,afterCritical:i,combineWith:s,displacedBy:e.displacedBy});return Zn(a,o)};const IP=(i,e)=>e.margin[i.start]+e.borderBox[i.size]/2,sZ=(i,e)=>e.margin[i.end]+e.borderBox[i.size]/2,tA=(i,e,n)=>e[i.crossAxisStart]+n.margin[i.crossAxisStart]+n.borderBox[i.crossAxisSize]/2,$R=({axis:i,moveRelativeTo:e,isMoving:n})=>ql(i.line,e.marginBox[i.end]+IP(i,n),tA(i,e.marginBox,n)),GR=({axis:i,moveRelativeTo:e,isMoving:n})=>ql(i.line,e.marginBox[i.start]-sZ(i,n),tA(i,e.marginBox,n)),aZ=({axis:i,moveInto:e,isMoving:n})=>ql(i.line,e.contentBox[i.start]+IP(i,n),tA(i,e.contentBox,n));var oZ=({impact:i,draggable:e,draggables:n,droppable:r,afterCritical:s})=>{const a=Bu(r.descriptor.id,n),o=e.page,u=r.axis;if(!a.length)return aZ({axis:u,moveInto:r.page,isMoving:o});const{displaced:h,displacedBy:d}=i,p=h.all[0];if(p){const y=n[p];if(Lo(p,s))return GR({axis:u,moveRelativeTo:y.page,isMoving:o});const b=Om(y.page,d.point);return GR({axis:u,moveRelativeTo:b,isMoving:o})}const g=a[a.length-1];if(g.descriptor.id===e.descriptor.id)return o.borderBox.center;if(Lo(g.descriptor.id,s)){const y=Om(g.page,Lu(s.displacedBy.point));return $R({axis:u,moveRelativeTo:y,isMoving:o})}return $R({axis:u,moveRelativeTo:g.page,isMoving:o})},Y_=(i,e)=>{const n=i.frame;return n?Zn(e,n.scroll.diff.displacement):e};const lZ=({impact:i,draggable:e,droppable:n,draggables:r,afterCritical:s})=>{const a=e.page.borderBox.center,o=i.at;return!n||!o?a:o.type==="REORDER"?oZ({impact:i,draggable:e,draggables:r,droppable:n,afterCritical:s}):rZ({impact:i,draggables:r,afterCritical:s})};var My=i=>{const e=lZ(i),n=i.droppable;return n?Y_(n,e):e},DP=(i,e)=>{const n=tr(e,i.scroll.initial),r=Lu(n);return{frame:Gr({top:e.y,bottom:e.y+i.frame.height,left:e.x,right:e.x+i.frame.width}),scroll:{initial:i.scroll.initial,max:i.scroll.max,current:e,diff:{value:n,displacement:r}}}};function qR(i,e){return i.map(n=>e[n])}function cZ(i,e){for(let n=0;n<e.length;n++){const r=e[n].visible[i];if(r)return r}return null}var uZ=({impact:i,viewport:e,destination:n,draggables:r,maxScrollChange:s})=>{const a=DP(e,Zn(e.scroll.current,s)),o=n.frame?K1(n,Zn(n.frame.scroll.current,s)):n,u=i.displaced,h=tf({afterDragging:qR(u.all,r),destination:n,displacedBy:i.displacedBy,viewport:a.frame,last:u,forceShouldAnimate:!1}),d=tf({afterDragging:qR(u.all,r),destination:o,displacedBy:i.displacedBy,viewport:e.frame,last:u,forceShouldAnimate:!1}),p={},g={},y=[u,h,d];return u.all.forEach(w=>{const x=cZ(w,y);if(x){g[w]=x;return}p[w]=!0}),{...i,displaced:{all:u.all,invisible:p,visible:g}}},hZ=(i,e)=>Zn(i.scroll.diff.displacement,e),eA=({pageBorderBoxCenter:i,draggable:e,viewport:n})=>{const r=hZ(n,i),s=tr(r,e.page.borderBox.center);return Zn(e.client.borderBox.center,s)},kP=({draggable:i,destination:e,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:s,onlyOnMainAxis:a=!1})=>{const o=tr(n,i.page.borderBox.center),h={target:kf(i.page.borderBox,o),destination:e,withDroppableDisplacement:s,viewport:r};return a?KQ(h):RP(h)},dZ=({isMovingForward:i,draggable:e,destination:n,draggables:r,previousImpact:s,viewport:a,previousPageBorderBoxCenter:o,previousClientSelection:u,afterCritical:h})=>{if(!n.isEnabled)return null;const d=Bu(n.descriptor.id,r),p=Fu(e,n),g=zQ({isMovingForward:i,draggable:e,destination:n,insideDestination:d,previousImpact:s})||nZ({isMovingForward:i,isInHomeList:p,draggable:e,draggables:r,destination:n,insideDestination:d,previousImpact:s,viewport:a,afterCritical:h});if(!g)return null;const y=My({impact:g,draggable:e,droppable:n,draggables:r,afterCritical:h});if(kP({draggable:e,destination:n,newPageBorderBoxCenter:y,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:eA({pageBorderBoxCenter:y,draggable:e,viewport:a}),impact:g,scrollJumpRequest:null};const w=tr(y,o),x=uZ({impact:g,viewport:a,destination:n,draggables:r,maxScrollChange:w});return{clientSelection:u,impact:x,scrollJumpRequest:w}};const mi=i=>{const e=i.subject.active;return e||wt(),e};var fZ=({isMovingForward:i,pageBorderBoxCenter:e,source:n,droppables:r,viewport:s})=>{const a=n.subject.active;if(!a)return null;const o=n.axis,u=Rr(a[o.start],a[o.end]),h=Dy(r).filter(p=>p!==n).filter(p=>p.isEnabled).filter(p=>!!p.subject.active).filter(p=>TP(s.frame)(mi(p))).filter(p=>{const g=mi(p);return i?a[o.crossAxisEnd]<g[o.crossAxisEnd]:g[o.crossAxisStart]<a[o.crossAxisStart]}).filter(p=>{const g=mi(p),y=Rr(g[o.start],g[o.end]);return u(g[o.start])||u(g[o.end])||y(a[o.start])||y(a[o.end])}).sort((p,g)=>{const y=mi(p)[o.crossAxisStart],b=mi(g)[o.crossAxisStart];return i?y-b:b-y}).filter((p,g,y)=>mi(p)[o.crossAxisStart]===mi(y[0])[o.crossAxisStart]);if(!h.length)return null;if(h.length===1)return h[0];const d=h.filter(p=>Rr(mi(p)[o.start],mi(p)[o.end])(e[o.line]));return d.length===1?d[0]:d.length>1?d.sort((p,g)=>mi(p)[o.start]-mi(g)[o.start])[0]:h.sort((p,g)=>{const y=jR(e,zR(mi(p))),b=jR(e,zR(mi(g)));return y!==b?y-b:mi(p)[o.start]-mi(g)[o.start]})[0]};const WR=(i,e)=>{const n=i.page.borderBox.center;return Lo(i.descriptor.id,e)?tr(n,e.displacedBy.point):n},pZ=(i,e)=>{const n=i.page.borderBox;return Lo(i.descriptor.id,e)?kf(n,Lu(e.displacedBy.point)):n};var gZ=({pageBorderBoxCenter:i,viewport:e,destination:n,insideDestination:r,afterCritical:s})=>r.filter(o=>RP({target:pZ(o,s),destination:n,viewport:e.frame,withDroppableDisplacement:!0})).sort((o,u)=>{const h=Zd(i,Y_(n,WR(o,s))),d=Zd(i,Y_(n,WR(u,s)));return h<d?-1:d<h?1:o.descriptor.index-u.descriptor.index})[0]||null,Nf=Vn(function(e,n){const r=n[e.line];return{value:r,point:ql(e.line,r)}});const mZ=(i,e,n)=>{const r=i.axis;if(i.descriptor.mode==="virtual")return ql(r.line,e[r.line]);const s=i.subject.page.contentBox[r.size],h=Bu(i.descriptor.id,n).reduce((d,p)=>d+p.client.marginBox[r.size],0)+e[r.line]-s;return h<=0?null:ql(r.line,h)},NP=(i,e)=>({...i,scroll:{...i.scroll,max:e}}),MP=(i,e,n)=>{const r=i.frame;Fu(e,i)&&wt(),i.subject.withPlaceholder&&wt();const s=Nf(i.axis,e.displaceBy).point,a=mZ(i,s,n),o={placeholderSize:s,increasedBy:a,oldFrameMaxScroll:i.frame?i.frame.scroll.max:null};if(!r){const p=Su({page:i.subject.page,withPlaceholder:o,axis:i.axis,frame:i.frame});return{...i,subject:p}}const u=a?Zn(r.scroll.max,a):r.scroll.max,h=NP(r,u),d=Su({page:i.subject.page,withPlaceholder:o,axis:i.axis,frame:h});return{...i,subject:d,frame:h}},yZ=i=>{const e=i.subject.withPlaceholder;e||wt();const n=i.frame;if(!n){const o=Su({page:i.subject.page,axis:i.axis,frame:null,withPlaceholder:null});return{...i,subject:o}}const r=e.oldFrameMaxScroll;r||wt();const s=NP(n,r),a=Su({page:i.subject.page,axis:i.axis,frame:s,withPlaceholder:null});return{...i,subject:a,frame:s}};var bZ=({previousPageBorderBoxCenter:i,moveRelativeTo:e,insideDestination:n,draggable:r,draggables:s,destination:a,viewport:o,afterCritical:u})=>{if(!e){if(n.length)return null;const g={displaced:Jd,displacedBy:SP,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},y=My({impact:g,draggable:r,droppable:a,draggables:s,afterCritical:u}),b=Fu(r,a)?a:MP(a,r,s);return kP({draggable:r,destination:b,newPageBorderBoxCenter:y,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?g:null}const h=i[a.axis.line]<=e.page.borderBox.center[a.axis.line],d=(()=>{const g=e.descriptor.index;return e.descriptor.id===r.descriptor.id||h?g:g+1})(),p=Nf(a.axis,r.displaceBy);return Vm({draggable:r,insideDestination:n,destination:a,viewport:o,displacedBy:p,last:Jd,index:d})},vZ=({isMovingForward:i,previousPageBorderBoxCenter:e,draggable:n,isOver:r,draggables:s,droppables:a,viewport:o,afterCritical:u})=>{const h=fZ({isMovingForward:i,pageBorderBoxCenter:e,source:r,droppables:a,viewport:o});if(!h)return null;const d=Bu(h.descriptor.id,s),p=gZ({pageBorderBoxCenter:e,viewport:o,destination:h,insideDestination:d,afterCritical:u}),g=bZ({previousPageBorderBoxCenter:e,destination:h,draggable:n,draggables:s,moveRelativeTo:p,insideDestination:d,viewport:o,afterCritical:u});if(!g)return null;const y=My({impact:g,draggable:n,droppable:h,draggables:s,afterCritical:u});return{clientSelection:eA({pageBorderBoxCenter:y,draggable:n,viewport:o}),impact:g,scrollJumpRequest:null}},er=i=>{const e=i.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null};const _Z=(i,e)=>{const n=er(i);return n?e[n]:null};var wZ=({state:i,type:e})=>{const n=_Z(i.impact,i.dimensions.droppables),r=!!n,s=i.dimensions.droppables[i.critical.droppable.id],a=n||s,o=a.axis.direction,u=o==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||o==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(u&&!r)return null;const h=e==="MOVE_DOWN"||e==="MOVE_RIGHT",d=i.dimensions.draggables[i.critical.draggable.id],p=i.current.page.borderBoxCenter,{draggables:g,droppables:y}=i.dimensions;return u?dZ({isMovingForward:h,previousPageBorderBoxCenter:p,draggable:d,destination:a,draggables:g,viewport:i.viewport,previousClientSelection:i.current.client.selection,previousImpact:i.impact,afterCritical:i.afterCritical}):vZ({isMovingForward:h,previousPageBorderBoxCenter:p,draggable:d,isOver:a,draggables:g,droppables:y,viewport:i.viewport,afterCritical:i.afterCritical})};function _l(i){return i.phase==="DRAGGING"||i.phase==="COLLECTING"}function PP(i){const e=Rr(i.top,i.bottom),n=Rr(i.left,i.right);return function(s){return e(s.y)&&n(s.x)}}function AZ(i,e){return i.left<e.right&&i.right>e.left&&i.top<e.bottom&&i.bottom>e.top}function xZ({pageBorderBox:i,draggable:e,candidates:n}){const r=e.page.borderBox.center,s=n.map(a=>{const o=a.axis,u=ql(a.axis.line,i.center[o.line],a.page.borderBox.center[o.crossAxisLine]);return{id:a.descriptor.id,distance:Zd(r,u)}}).sort((a,o)=>o.distance-a.distance);return s[0]?s[0].id:null}function EZ({pageBorderBox:i,draggable:e,droppables:n}){const r=Dy(n).filter(s=>{if(!s.isEnabled)return!1;const a=s.subject.active;if(!a||!AZ(i,a))return!1;if(PP(a)(i.center))return!0;const o=s.axis,u=a.center[o.crossAxisLine],h=i[o.crossAxisStart],d=i[o.crossAxisEnd],p=Rr(a[o.crossAxisStart],a[o.crossAxisEnd]),g=p(h),y=p(d);return!g&&!y?!0:g?h<u:d>u});return r.length?r.length===1?r[0].descriptor.id:xZ({pageBorderBox:i,draggable:e,candidates:r}):null}const OP=(i,e)=>Gr(kf(i,e));var SZ=(i,e)=>{const n=i.frame;return n?OP(e,n.scroll.diff.value):e};function LP({displaced:i,id:e}){return!!(i.visible[e]||i.invisible[e])}function TZ({draggable:i,closest:e,inHomeList:n}){return e?n&&e.descriptor.index>i.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var CZ=({pageBorderBoxWithDroppableScroll:i,draggable:e,destination:n,insideDestination:r,last:s,viewport:a,afterCritical:o})=>{const u=n.axis,h=Nf(n.axis,e.displaceBy),d=h.value,p=i[u.start],g=i[u.end],b=Ny(e,r).find(x=>{const S=x.descriptor.id,E=x.page.borderBox.center[u.line],k=Lo(S,o),N=LP({displaced:s,id:S});return k?N?g<=E:p<E-d:N?g<=E+d:p<E})||null,w=TZ({draggable:e,closest:b,inHomeList:Fu(e,n)});return Vm({draggable:e,insideDestination:r,destination:n,viewport:a,last:s,displacedBy:h,index:w})};const RZ=4;var IZ=({draggable:i,pageBorderBoxWithDroppableScroll:e,previousImpact:n,destination:r,insideDestination:s,afterCritical:a})=>{if(!r.isCombineEnabled)return null;const o=r.axis,u=Nf(r.axis,i.displaceBy),h=u.value,d=e[o.start],p=e[o.end],y=Ny(i,s).find(w=>{const x=w.descriptor.id,S=w.page.borderBox,k=S[o.size]/RZ,N=Lo(x,a),M=LP({displaced:n.displaced,id:x});return N?M?p>S[o.start]+k&&p<S[o.end]-k:d>S[o.start]-h+k&&d<S[o.end]-h-k:M?p>S[o.start]+h+k&&p<S[o.end]+h-k:d>S[o.start]+k&&d<S[o.end]-k});return y?{displacedBy:u,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:y.descriptor.id,droppableId:r.descriptor.id}}}:null},BP=({pageOffset:i,draggable:e,draggables:n,droppables:r,previousImpact:s,viewport:a,afterCritical:o})=>{const u=OP(e.page.borderBox,i),h=EZ({pageBorderBox:u,draggable:e,droppables:r});if(!h)return HQ;const d=r[h],p=Bu(d.descriptor.id,n),g=SZ(d,u);return IZ({pageBorderBoxWithDroppableScroll:g,draggable:e,previousImpact:s,destination:d,insideDestination:p,afterCritical:o})||CZ({pageBorderBoxWithDroppableScroll:g,draggable:e,destination:d,insideDestination:p,last:s.displaced,viewport:a,afterCritical:o})},nA=(i,e)=>({...i,[e.descriptor.id]:e});const DZ=({previousImpact:i,impact:e,droppables:n})=>{const r=er(i),s=er(e);if(!r||r===s)return n;const a=n[r];if(!a.subject.withPlaceholder)return n;const o=yZ(a);return nA(n,o)};var kZ=({draggable:i,draggables:e,droppables:n,previousImpact:r,impact:s})=>{const a=DZ({previousImpact:r,impact:s,droppables:n}),o=er(s);if(!o)return a;const u=n[o];if(Fu(i,u)||u.subject.withPlaceholder)return a;const h=MP(u,i,e);return nA(a,h)},Cd=({state:i,clientSelection:e,dimensions:n,viewport:r,impact:s,scrollJumpRequest:a})=>{const o=r||i.viewport,u=n||i.dimensions,h=e||i.current.client.selection,d=tr(h,i.initial.client.selection),p={offset:d,selection:h,borderBoxCenter:Zn(i.initial.client.borderBoxCenter,d)},g={selection:Zn(p.selection,o.scroll.current),borderBoxCenter:Zn(p.borderBoxCenter,o.scroll.current),offset:Zn(p.offset,o.scroll.diff.value)},y={client:p,page:g};if(i.phase==="COLLECTING")return{...i,dimensions:u,viewport:o,current:y};const b=u.draggables[i.critical.draggable.id],w=s||BP({pageOffset:g.offset,draggable:b,draggables:u.draggables,droppables:u.droppables,previousImpact:i.impact,viewport:o,afterCritical:i.afterCritical}),x=kZ({draggable:b,impact:w,previousImpact:i.impact,draggables:u.draggables,droppables:u.droppables});return{...i,current:y,dimensions:{draggables:u.draggables,droppables:x},impact:w,viewport:o,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null}};function NZ(i,e){return i.map(n=>e[n])}var FP=({impact:i,viewport:e,draggables:n,destination:r,forceShouldAnimate:s})=>{const a=i.displaced,o=NZ(a.all,n),u=tf({afterDragging:o,destination:r,displacedBy:i.displacedBy,viewport:e.frame,forceShouldAnimate:s,last:a});return{...i,displaced:u}},UP=({impact:i,draggable:e,droppable:n,draggables:r,viewport:s,afterCritical:a})=>{const o=My({impact:i,draggable:e,draggables:r,droppable:n,afterCritical:a});return eA({pageBorderBoxCenter:o,draggable:e,viewport:s})},VP=({state:i,dimensions:e,viewport:n})=>{i.movementMode!=="SNAP"&&wt();const r=i.impact,s=n||i.viewport,a=e||i.dimensions,{draggables:o,droppables:u}=a,h=o[i.critical.draggable.id],d=er(r);d||wt();const p=u[d],g=FP({impact:r,viewport:s,destination:p,draggables:o}),y=UP({impact:g,draggable:h,droppable:p,draggables:o,viewport:s,afterCritical:i.afterCritical});return Cd({impact:g,clientSelection:y,state:i,dimensions:a,viewport:s})},MZ=i=>({index:i.index,droppableId:i.droppableId}),jP=({draggable:i,home:e,draggables:n,viewport:r})=>{const s=Nf(e.axis,i.displaceBy),a=Bu(e.descriptor.id,n),o=a.indexOf(i);o===-1&&wt();const u=a.slice(o+1),h=u.reduce((y,b)=>(y[b.descriptor.id]=!0,y),{}),d={inVirtualList:e.descriptor.mode==="virtual",displacedBy:s,effected:h};return{impact:{displaced:tf({afterDragging:u,destination:e,displacedBy:s,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:MZ(i.descriptor)}},afterCritical:d}},PZ=(i,e)=>({draggables:i.draggables,droppables:nA(i.droppables,e)}),OZ=({draggable:i,offset:e,initialWindowScroll:n})=>{const r=Om(i.client,e),s=Lm(r,n);return{...i,placeholder:{...i.placeholder,client:r},client:r,page:s}},LZ=i=>{const e=i.frame;return e||wt(),e},BZ=({additions:i,updatedDroppables:e,viewport:n})=>{const r=n.scroll.diff.value;return i.map(s=>{const a=s.descriptor.droppableId,o=e[a],h=LZ(o).scroll.diff.value,d=Zn(r,h);return OZ({draggable:s,offset:d,initialWindowScroll:n.scroll.initial})})},FZ=({state:i,published:e})=>{const n=e.modified.map(E=>{const k=i.dimensions.droppables[E.droppableId];return K1(k,E.scroll)}),r={...i.dimensions.droppables,...xP(n)},s=EP(BZ({additions:e.additions,updatedDroppables:r,viewport:i.viewport})),a={...i.dimensions.draggables,...s};e.removals.forEach(E=>{delete a[E]});const o={droppables:r,draggables:a},u=er(i.impact),h=u?o.droppables[u]:null,d=o.draggables[i.critical.draggable.id],p=o.droppables[i.critical.droppable.id],{impact:g,afterCritical:y}=jP({draggable:d,home:p,draggables:a,viewport:i.viewport}),b=h&&h.isCombineEnabled?i.impact:g,w=BP({pageOffset:i.current.page.offset,draggable:o.draggables[i.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:b,viewport:i.viewport,afterCritical:y}),x={...i,phase:"DRAGGING",impact:w,onLiftImpact:g,dimensions:o,afterCritical:y,forceShouldAnimate:!1};return i.phase==="COLLECTING"?x:{...x,phase:"DROP_PENDING",reason:i.reason,isWaiting:!1}};const K_=i=>i.movementMode==="SNAP",C0=(i,e,n)=>{const r=PZ(i.dimensions,e);return!K_(i)||n?Cd({state:i,dimensions:r}):VP({state:i,dimensions:r})};function R0(i){return i.isDragging&&i.movementMode==="SNAP"?{...i,scrollJumpRequest:null}:i}const XR={phase:"IDLE",completed:null,shouldFlush:!1};var UZ=(i=XR,e)=>{if(e.type==="FLUSH")return{...XR,shouldFlush:!0};if(e.type==="INITIAL_PUBLISH"){i.phase!=="IDLE"&&wt();const{critical:n,clientSelection:r,viewport:s,dimensions:a,movementMode:o}=e.payload,u=a.draggables[n.draggable.id],h=a.droppables[n.droppable.id],d={selection:r,borderBoxCenter:u.client.borderBox.center,offset:jn},p={client:d,page:{selection:Zn(d.selection,s.scroll.initial),borderBoxCenter:Zn(d.selection,s.scroll.initial),offset:Zn(d.selection,s.scroll.diff.value)}},g=Dy(a.droppables).every(x=>!x.isFixedOnPage),{impact:y,afterCritical:b}=jP({draggable:u,home:h,draggables:a.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:a,initial:p,current:p,isWindowScrollAllowed:g,impact:y,afterCritical:b,onLiftImpact:y,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(e.type==="COLLECTION_STARTING")return i.phase==="COLLECTING"||i.phase==="DROP_PENDING"?i:(i.phase!=="DRAGGING"&&wt(),{...i,phase:"COLLECTING"});if(e.type==="PUBLISH_WHILE_DRAGGING")return i.phase==="COLLECTING"||i.phase==="DROP_PENDING"||wt(),FZ({state:i,published:e.payload});if(e.type==="MOVE"){if(i.phase==="DROP_PENDING")return i;_l(i)||wt();const{client:n}=e.payload;return Co(n,i.current.client.selection)?i:Cd({state:i,clientSelection:n,impact:K_(i)?i.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(i.phase==="DROP_PENDING"||i.phase==="COLLECTING")return R0(i);_l(i)||wt();const{id:n,newScroll:r}=e.payload,s=i.dimensions.droppables[n];if(!s)return i;const a=K1(s,r);return C0(i,a,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(i.phase==="DROP_PENDING")return i;_l(i)||wt();const{id:n,isEnabled:r}=e.payload,s=i.dimensions.droppables[n];s||wt(),s.isEnabled===r&&wt();const a={...s,isEnabled:r};return C0(i,a,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(i.phase==="DROP_PENDING")return i;_l(i)||wt();const{id:n,isCombineEnabled:r}=e.payload,s=i.dimensions.droppables[n];s||wt(),s.isCombineEnabled===r&&wt();const a={...s,isCombineEnabled:r};return C0(i,a,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(i.phase==="DROP_PENDING"||i.phase==="DROP_ANIMATING")return i;_l(i)||wt(),i.isWindowScrollAllowed||wt();const n=e.payload.newScroll;if(Co(i.viewport.scroll.current,n))return R0(i);const r=DP(i.viewport,n);return K_(i)?VP({state:i,viewport:r}):Cd({state:i,viewport:r})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!_l(i))return i;const n=e.payload.maxScroll;if(Co(n,i.viewport.scroll.max))return i;const r={...i.viewport,scroll:{...i.viewport.scroll,max:n}};return{...i,viewport:r}}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(i.phase==="COLLECTING"||i.phase==="DROP_PENDING")return i;i.phase!=="DRAGGING"&&wt();const n=wZ({state:i,type:e.type});return n?Cd({state:i,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):i}if(e.type==="DROP_PENDING"){const n=e.payload.reason;return i.phase!=="COLLECTING"&&wt(),{...i,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(e.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:s}=e.payload;return i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||wt(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:s,dimensions:i.dimensions}}if(e.type==="DROP_COMPLETE"){const{completed:n}=e.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return i};function Ae(i,e){return i instanceof Object&&"type"in i&&i.type===e}const VZ=i=>({type:"BEFORE_INITIAL_CAPTURE",payload:i}),jZ=i=>({type:"LIFT",payload:i}),zZ=i=>({type:"INITIAL_PUBLISH",payload:i}),HZ=i=>({type:"PUBLISH_WHILE_DRAGGING",payload:i}),$Z=()=>({type:"COLLECTION_STARTING",payload:null}),GZ=i=>({type:"UPDATE_DROPPABLE_SCROLL",payload:i}),qZ=i=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:i}),WZ=i=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:i}),zP=i=>({type:"MOVE",payload:i}),XZ=i=>({type:"MOVE_BY_WINDOW_SCROLL",payload:i}),YZ=i=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:i}),KZ=()=>({type:"MOVE_UP",payload:null}),QZ=()=>({type:"MOVE_DOWN",payload:null}),ZZ=()=>({type:"MOVE_RIGHT",payload:null}),JZ=()=>({type:"MOVE_LEFT",payload:null}),iA=()=>({type:"FLUSH",payload:null}),tJ=i=>({type:"DROP_ANIMATE",payload:i}),rA=i=>({type:"DROP_COMPLETE",payload:i}),HP=i=>({type:"DROP",payload:i}),eJ=i=>({type:"DROP_PENDING",payload:i}),$P=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var nJ=i=>({getState:e,dispatch:n})=>r=>s=>{if(!Ae(s,"LIFT")){r(s);return}const{id:a,clientSelection:o,movementMode:u}=s.payload,h=e();h.phase==="DROP_ANIMATING"&&n(rA({completed:h.completed})),e().phase!=="IDLE"&&wt(),n(iA()),n(VZ({draggableId:a,movementMode:u}));const p={draggableId:a,scrollOptions:{shouldPublishImmediately:u==="SNAP"}},{critical:g,dimensions:y,viewport:b}=i.startPublishing(p);n(zZ({critical:g,dimensions:y,clientSelection:o,movementMode:u,viewport:b}))},iJ=i=>()=>e=>n=>{Ae(n,"INITIAL_PUBLISH")&&i.dragging(),Ae(n,"DROP_ANIMATE")&&i.dropping(n.payload.completed.result.reason),(Ae(n,"FLUSH")||Ae(n,"DROP_COMPLETE"))&&i.resting(),e(n)};const sA={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ef={opacity:{drop:0,combining:.7},scale:{drop:.75}},GP={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},yl=`${GP.outOfTheWay}s ${sA.outOfTheWay}`,Rd={fluid:`opacity ${yl}`,snap:`transform ${yl}, opacity ${yl}`,drop:i=>{const e=`${i}s ${sA.drop}`;return`transform ${e}, opacity ${e}`},outOfTheWay:`transform ${yl}`,placeholder:`height ${yl}, width ${yl}, margin ${yl}`},YR=i=>Co(i,jn)?void 0:`translate(${i.x}px, ${i.y}px)`,Q_={moveTo:YR,drop:(i,e)=>{const n=YR(i);if(n)return e?`${n} scale(${ef.scale.drop})`:n}},{minDropTime:Z_,maxDropTime:qP}=GP,rJ=qP-Z_,KR=1500,sJ=.6;var aJ=({current:i,destination:e,reason:n})=>{const r=Zd(i,e);if(r<=0)return Z_;if(r>=KR)return qP;const s=r/KR,a=Z_+rJ*s,o=n==="CANCEL"?a*sJ:a;return Number(o.toFixed(2))},oJ=({impact:i,draggable:e,dimensions:n,viewport:r,afterCritical:s})=>{const{draggables:a,droppables:o}=n,u=er(i),h=u?o[u]:null,d=o[e.descriptor.droppableId],p=UP({impact:i,draggable:e,draggables:a,afterCritical:s,droppable:h||d,viewport:r});return tr(p,e.client.borderBox.center)},lJ=({draggables:i,reason:e,lastImpact:n,home:r,viewport:s,onLiftImpact:a})=>!n.at||e!=="DROP"?{impact:FP({draggables:i,impact:a,destination:r,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:Jd},didDropInsideDroppable:!0};const cJ=({getState:i,dispatch:e})=>n=>r=>{if(!Ae(r,"DROP")){n(r);return}const s=i(),a=r.payload.reason;if(s.phase==="COLLECTING"){e(eJ({reason:a}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&wt(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||wt();const u=s.critical,h=s.dimensions,d=h.draggables[s.critical.draggable.id],{impact:p,didDropInsideDroppable:g}=lJ({reason:a,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),y=g?Q1(p):null,b=g?ky(p):null,w={index:u.draggable.index,droppableId:u.droppable.id},x={draggableId:d.descriptor.id,type:d.descriptor.type,source:w,reason:a,mode:s.movementMode,destination:y,combine:b},S=oJ({impact:p,draggable:d,dimensions:h,viewport:s.viewport,afterCritical:s.afterCritical}),E={critical:s.critical,afterCritical:s.afterCritical,result:x,impact:p};if(!(!Co(s.current.client.offset,S)||!!x.combine)){e(rA({completed:E}));return}const N=aJ({current:s.current.client.offset,destination:S,reason:a});e(tJ({newHomeClientOffset:S,dropDuration:N,completed:E}))};var WP=()=>({x:window.pageXOffset,y:window.pageYOffset});function uJ(i){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||i()}}}function hJ({onWindowScroll:i}){function e(){i(WP())}const n=Qd(e),r=uJ(n);let s=To;function a(){return s!==To}function o(){a()&&wt(),s=Cr(window,[r])}function u(){a()||wt(),n.cancel(),s(),s=To}return{start:o,stop:u,isActive:a}}const dJ=i=>Ae(i,"DROP_COMPLETE")||Ae(i,"DROP_ANIMATE")||Ae(i,"FLUSH"),fJ=i=>{const e=hJ({onWindowScroll:n=>{i.dispatch(XZ({newScroll:n}))}});return n=>r=>{!e.isActive()&&Ae(r,"INITIAL_PUBLISH")&&e.start(),e.isActive()&&dJ(r)&&e.stop(),n(r)}};var pJ=i=>{let e=!1,n=!1;const r=setTimeout(()=>{n=!0}),s=a=>{e||n||(e=!0,i(a),clearTimeout(r))};return s.wasCalled=()=>e,s},gJ=()=>{const i=[],e=s=>{const a=i.findIndex(u=>u.timerId===s);a===-1&&wt();const[o]=i.splice(a,1);o.callback()};return{add:s=>{const a=setTimeout(()=>e(a)),o={timerId:a,callback:s};i.push(o)},flush:()=>{if(!i.length)return;const s=[...i];i.length=0,s.forEach(a=>{clearTimeout(a.timerId),a.callback()})}}};const mJ=(i,e)=>i==null&&e==null?!0:i==null||e==null?!1:i.droppableId===e.droppableId&&i.index===e.index,yJ=(i,e)=>i==null&&e==null?!0:i==null||e==null?!1:i.draggableId===e.draggableId&&i.droppableId===e.droppableId,bJ=(i,e)=>{if(i===e)return!0;const n=i.draggable.id===e.draggable.id&&i.draggable.droppableId===e.draggable.droppableId&&i.draggable.type===e.draggable.type&&i.draggable.index===e.draggable.index,r=i.droppable.id===e.droppable.id&&i.droppable.type===e.droppable.type;return n&&r},td=(i,e)=>{e()},Ig=(i,e)=>({draggableId:i.draggable.id,type:i.droppable.type,source:{droppableId:i.droppable.id,index:i.draggable.index},mode:e});function I0(i,e,n,r){if(!i){n(r(e));return}const s=pJ(n);i(e,{announce:s}),s.wasCalled()||n(r(e))}var vJ=(i,e)=>{const n=gJ();let r=null;const s=(g,y)=>{r&&wt(),td("onBeforeCapture",()=>{const b=i().onBeforeCapture;b&&b({draggableId:g,mode:y})})},a=(g,y)=>{r&&wt(),td("onBeforeDragStart",()=>{const b=i().onBeforeDragStart;b&&b(Ig(g,y))})},o=(g,y)=>{r&&wt();const b=Ig(g,y);r={mode:y,lastCritical:g,lastLocation:b.source,lastCombine:null},n.add(()=>{td("onDragStart",()=>I0(i().onDragStart,b,e,Yg.onDragStart))})},u=(g,y)=>{const b=Q1(y),w=ky(y);r||wt();const x=!bJ(g,r.lastCritical);x&&(r.lastCritical=g);const S=!mJ(r.lastLocation,b);S&&(r.lastLocation=b);const E=!yJ(r.lastCombine,w);if(E&&(r.lastCombine=w),!x&&!S&&!E)return;const k={...Ig(g,r.mode),combine:w,destination:b};n.add(()=>{td("onDragUpdate",()=>I0(i().onDragUpdate,k,e,Yg.onDragUpdate))})},h=()=>{r||wt(),n.flush()},d=g=>{r||wt(),r=null,td("onDragEnd",()=>I0(i().onDragEnd,g,e,Yg.onDragEnd))};return{beforeCapture:s,beforeStart:a,start:o,update:u,flush:h,drop:d,abort:()=>{if(!r)return;const g={...Ig(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};d(g)}}},_J=(i,e)=>{const n=vJ(i,e);return r=>s=>a=>{if(Ae(a,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(Ae(a,"INITIAL_PUBLISH")){const u=a.payload.critical;n.beforeStart(u,a.payload.movementMode),s(a),n.start(u,a.payload.movementMode);return}if(Ae(a,"DROP_COMPLETE")){const u=a.payload.completed.result;n.flush(),s(a),n.drop(u);return}if(s(a),Ae(a,"FLUSH")){n.abort();return}const o=r.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const wJ=i=>e=>n=>{if(!Ae(n,"DROP_ANIMATION_FINISHED")){e(n);return}const r=i.getState();r.phase!=="DROP_ANIMATING"&&wt(),i.dispatch(rA({completed:r.completed}))},AJ=i=>{let e=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),e&&(e(),e=null)}return s=>a=>{if((Ae(a,"FLUSH")||Ae(a,"DROP_COMPLETE")||Ae(a,"DROP_ANIMATION_FINISHED"))&&r(),s(a),!Ae(a,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){i.getState().phase==="DROP_ANIMATING"&&i.dispatch($P())}};n=requestAnimationFrame(()=>{n=null,e=Cr(window,[o])})}};var xJ=i=>()=>e=>n=>{(Ae(n,"DROP_COMPLETE")||Ae(n,"FLUSH")||Ae(n,"DROP_ANIMATE"))&&i.stopPublishing(),e(n)},EJ=i=>{let e=!1;return()=>n=>r=>{if(Ae(r,"INITIAL_PUBLISH")){e=!0,i.tryRecordFocus(r.payload.critical.draggable.id),n(r),i.tryRestoreFocusRecorded();return}if(n(r),!!e){if(Ae(r,"FLUSH")){e=!1,i.tryRestoreFocusRecorded();return}if(Ae(r,"DROP_COMPLETE")){e=!1;const s=r.payload.completed.result;s.combine&&i.tryShiftRecord(s.draggableId,s.combine.draggableId),i.tryRestoreFocusRecorded()}}}};const SJ=i=>Ae(i,"DROP_COMPLETE")||Ae(i,"DROP_ANIMATE")||Ae(i,"FLUSH");var TJ=i=>e=>n=>r=>{if(SJ(r)){i.stop(),n(r);return}if(Ae(r,"INITIAL_PUBLISH")){n(r);const s=e.getState();s.phase!=="DRAGGING"&&wt(),i.start(s);return}n(r),i.scroll(e.getState())};const CJ=i=>e=>n=>{if(e(n),!Ae(n,"PUBLISH_WHILE_DRAGGING"))return;const r=i.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||i.dispatch(HP({reason:r.reason})))},RJ=cP;var IJ=({dimensionMarshal:i,focusMarshal:e,styleMarshal:n,getResponders:r,announce:s,autoScroller:a})=>lP(UZ,RJ(RK(iJ(n),xJ(i),nJ(i),cJ,wJ,AJ,CJ,TJ(a),fJ,EJ(e),_J(r,s))));const D0=()=>({additions:{},removals:{},modified:{}});function DJ({registry:i,callbacks:e}){let n=D0(),r=null;const s=()=>{r||(e.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:h,removals:d,modified:p}=n,g=Object.keys(h).map(w=>i.draggable.getById(w).getDimension(jn)).sort((w,x)=>w.descriptor.index-x.descriptor.index),y=Object.keys(p).map(w=>{const S=i.droppable.getById(w).callbacks.getScrollWhileDragging();return{droppableId:w,scroll:S}}),b={additions:g,removals:Object.keys(d),modified:y};n=D0(),e.publish(b)}))};return{add:h=>{const d=h.descriptor.id;n.additions[d]=h,n.modified[h.descriptor.droppableId]=!0,n.removals[d]&&delete n.removals[d],s()},remove:h=>{const d=h.descriptor;n.removals[d.id]=!0,n.modified[d.droppableId]=!0,n.additions[d.id]&&delete n.additions[d.id],s()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=D0())}}}var XP=({scrollHeight:i,scrollWidth:e,height:n,width:r})=>{const s=tr({x:e,y:i},{x:r,y:n});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},YP=()=>{const i=document.documentElement;return i||wt(),i},KP=()=>{const i=YP();return XP({scrollHeight:i.scrollHeight,scrollWidth:i.scrollWidth,width:i.clientWidth,height:i.clientHeight})},kJ=()=>{const i=WP(),e=KP(),n=i.y,r=i.x,s=YP(),a=s.clientWidth,o=s.clientHeight,u=r+a,h=n+o;return{frame:Gr({top:n,left:r,right:u,bottom:h}),scroll:{initial:i,current:i,max:e,diff:{value:jn,displacement:jn}}}},NJ=({critical:i,scrollOptions:e,registry:n})=>{const r=kJ(),s=r.scroll.current,a=i.droppable,o=n.droppable.getAllByType(a.type).map(p=>p.callbacks.getDimensionAndWatchScroll(s,e)),u=n.draggable.getAllByType(i.draggable.type).map(p=>p.getDimension(s));return{dimensions:{draggables:EP(u),droppables:xP(o)},critical:i,viewport:r}};function QR(i,e,n){return!(n.descriptor.id===e.id||n.descriptor.type!==e.type||i.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var MJ=(i,e)=>{let n=null;const r=DJ({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:i}),s=(y,b)=>{i.droppable.exists(y)||wt(),n&&e.updateDroppableIsEnabled({id:y,isEnabled:b})},a=(y,b)=>{n&&(i.droppable.exists(y)||wt(),e.updateDroppableIsCombineEnabled({id:y,isCombineEnabled:b}))},o=(y,b)=>{n&&(i.droppable.exists(y)||wt(),e.updateDroppableScroll({id:y,newScroll:b}))},u=(y,b)=>{n&&i.droppable.getById(y).callbacks.scroll(b)},h=()=>{if(!n)return;r.stop();const y=n.critical.droppable;i.droppable.getAllByType(y.type).forEach(b=>b.callbacks.dragStopped()),n.unsubscribe(),n=null},d=y=>{n||wt();const b=n.critical.draggable;y.type==="ADDITION"&&QR(i,b,y.value)&&r.add(y.value),y.type==="REMOVAL"&&QR(i,b,y.value)&&r.remove(y.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:a,scrollDroppable:u,updateDroppableScroll:o,startPublishing:y=>{n&&wt();const b=i.draggable.getById(y.draggableId),w=i.droppable.getById(b.descriptor.droppableId),x={draggable:b.descriptor,droppable:w.descriptor},S=i.subscribe(d);return n={critical:x,unsubscribe:S},NJ({critical:x,registry:i,scrollOptions:y.scrollOptions})},stopPublishing:h}},QP=(i,e)=>i.phase==="IDLE"?!0:i.phase!=="DROP_ANIMATING"||i.completed.result.draggableId===e?!1:i.completed.result.reason==="DROP",PJ=i=>{window.scrollBy(i.x,i.y)};const OJ=Vn(i=>Dy(i).filter(e=>!(!e.isEnabled||!e.frame))),LJ=(i,e)=>OJ(e).find(r=>(r.frame||wt(),PP(r.frame.pageMarginBox)(i)))||null;var BJ=({center:i,destination:e,droppables:n})=>{if(e){const s=n[e];return s.frame?s:null}return LJ(i,n)};const nf={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:i=>i**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var FJ=(i,e,n=()=>nf)=>{const r=n(),s=i[e.size]*r.startFromPercentage,a=i[e.size]*r.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:a}},ZP=({startOfRange:i,endOfRange:e,current:n})=>{const r=e-i;return r===0?0:(n-i)/r},aA=1,UJ=(i,e,n=()=>nf)=>{const r=n();if(i>e.startScrollingFrom)return 0;if(i<=e.maxScrollValueAt)return r.maxPixelScroll;if(i===e.startScrollingFrom)return aA;const a=1-ZP({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:i}),o=r.maxPixelScroll*r.ease(a);return Math.ceil(o)},VJ=(i,e,n)=>{const r=n(),s=r.durationDampening.accelerateAt,a=r.durationDampening.stopDampeningAt,o=e,u=a,d=Date.now()-o;if(d>=a)return i;if(d<s)return aA;const p=ZP({startOfRange:s,endOfRange:u,current:d}),g=i*r.ease(p);return Math.ceil(g)},ZR=({distanceToEdge:i,thresholds:e,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:s})=>{const a=UJ(i,e,s);return a===0?0:r?Math.max(VJ(a,n,s),aA):a},JR=({container:i,distanceToEdges:e,dragStartTime:n,axis:r,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const o=FJ(i,r,a);return e[r.end]<e[r.start]?ZR({distanceToEdge:e[r.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:a}):-1*ZR({distanceToEdge:e[r.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:a})},jJ=({container:i,subject:e,proposedScroll:n})=>{const r=e.height>i.height,s=e.width>i.width;return!s&&!r?n:s&&r?null:{x:s?0:n.x,y:r?0:n.y}};const zJ=AP(i=>i===0?0:i);var JP=({dragStartTime:i,container:e,subject:n,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const o={top:r.y-e.top,right:e.right-r.x,bottom:e.bottom-r.y,left:r.x-e.left},u=JR({container:e,distanceToEdges:o,dragStartTime:i,axis:Z1,shouldUseTimeDampening:s,getAutoScrollerOptions:a}),h=JR({container:e,distanceToEdges:o,dragStartTime:i,axis:CP,shouldUseTimeDampening:s,getAutoScrollerOptions:a}),d=zJ({x:h,y:u});if(Co(d,jn))return null;const p=jJ({container:e,subject:n,proposedScroll:d});return p?Co(p,jn)?null:p:null};const HJ=AP(i=>i===0?0:i>0?1:-1),oA=(()=>{const i=(e,n)=>e<0?e:e>n?e-n:0;return({current:e,max:n,change:r})=>{const s=Zn(e,r),a={x:i(s.x,n.x),y:i(s.y,n.y)};return Co(a,jn)?null:a}})(),tO=({max:i,current:e,change:n})=>{const r={x:Math.max(e.x,i.x),y:Math.max(e.y,i.y)},s=HJ(n),a=oA({max:r,current:e,change:s});return!a||s.x!==0&&a.x===0||s.y!==0&&a.y===0},lA=(i,e)=>tO({current:i.scroll.current,max:i.scroll.max,change:e}),$J=(i,e)=>{if(!lA(i,e))return null;const n=i.scroll.max,r=i.scroll.current;return oA({current:r,max:n,change:e})},cA=(i,e)=>{const n=i.frame;return n?tO({current:n.scroll.current,max:n.scroll.max,change:e}):!1},GJ=(i,e)=>{const n=i.frame;return!n||!cA(i,e)?null:oA({current:n.scroll.current,max:n.scroll.max,change:e})};var qJ=({viewport:i,subject:e,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const o=JP({dragStartTime:r,container:i.frame,subject:e,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:a});return o&&lA(i,o)?o:null},WJ=({droppable:i,subject:e,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const o=i.frame;if(!o)return null;const u=JP({dragStartTime:r,container:o.pageMarginBox,subject:e,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:a});return u&&cA(i,u)?u:null},tI=({state:i,dragStartTime:e,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:s,getAutoScrollerOptions:a})=>{const o=i.current.page.borderBoxCenter,h=i.dimensions.draggables[i.critical.draggable.id].page.marginBox;if(i.isWindowScrollAllowed){const g=i.viewport,y=qJ({dragStartTime:e,viewport:g,subject:h,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:a});if(y){r(y);return}}const d=BJ({center:o,destination:er(i.impact),droppables:i.dimensions.droppables});if(!d)return;const p=WJ({dragStartTime:e,droppable:d,subject:h,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:a});p&&s(d.descriptor.id,p)},XJ=({scrollWindow:i,scrollDroppable:e,getAutoScrollerOptions:n=()=>nf})=>{const r=Qd(i),s=Qd(e);let a=null;const o=d=>{a||wt();const{shouldUseTimeDampening:p,dragStartTime:g}=a;tI({state:d,scrollWindow:r,scrollDroppable:s,dragStartTime:g,shouldUseTimeDampening:p,getAutoScrollerOptions:n})};return{start:d=>{a&&wt();const p=Date.now();let g=!1;const y=()=>{g=!0};tI({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:y,scrollDroppable:y,getAutoScrollerOptions:n}),a={dragStartTime:p,shouldUseTimeDampening:g},g&&o(d)},stop:()=>{a&&(r.cancel(),s.cancel(),a=null)},scroll:o}},YJ=({move:i,scrollDroppable:e,scrollWindow:n})=>{const r=(u,h)=>{const d=Zn(u.current.client.selection,h);i({client:d})},s=(u,h)=>{if(!cA(u,h))return h;const d=GJ(u,h);if(!d)return e(u.descriptor.id,h),null;const p=tr(h,d);return e(u.descriptor.id,p),tr(h,p)},a=(u,h,d)=>{if(!u||!lA(h,d))return d;const p=$J(h,d);if(!p)return n(d),null;const g=tr(d,p);return n(g),tr(d,g)};return u=>{const h=u.scrollJumpRequest;if(!h)return;const d=er(u.impact);d||wt();const p=s(u.dimensions.droppables[d],h);if(!p)return;const g=u.viewport,y=a(u.isWindowScrollAllowed,g,p);y&&r(u,y)}},KJ=({scrollDroppable:i,scrollWindow:e,move:n,getAutoScrollerOptions:r})=>{const s=XJ({scrollWindow:e,scrollDroppable:i,getAutoScrollerOptions:r}),a=YJ({move:n,scrollWindow:e,scrollDroppable:i});return{scroll:h=>{if(!(r().disabled||h.phase!=="DRAGGING")){if(h.movementMode==="FLUID"){s.scroll(h);return}h.scrollJumpRequest&&a(h)}},start:s.start,stop:s.stop}};const Tu="data-rfd",Cu=(()=>{const i=`${Tu}-drag-handle`;return{base:i,draggableId:`${i}-draggable-id`,contextId:`${i}-context-id`}})(),J_=(()=>{const i=`${Tu}-draggable`;return{base:i,contextId:`${i}-context-id`,id:`${i}-id`}})(),QJ=(()=>{const i=`${Tu}-droppable`;return{base:i,contextId:`${i}-context-id`,id:`${i}-id`}})(),eI={contextId:`${Tu}-scroll-container-context-id`},ZJ=i=>e=>`[${e}="${i}"]`,ed=(i,e)=>i.map(n=>{const r=n.styles[e];return r?`${n.selector} { ${r} }`:""}).join(" "),JJ="pointer-events: none;";var ttt=i=>{const e=ZJ(i),n=(()=>{const u=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(Cu.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:u,dragging:JJ,dropAnimating:u}}})(),r=(()=>{const u=`
      transition: ${Rd.outOfTheWay};
    `;return{selector:e(J_.contextId),styles:{dragging:u,dropAnimating:u,userCancel:u}}})(),s={selector:e(QJ.contextId),styles:{always:"overflow-anchor: none;"}},o=[r,n,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:ed(o,"always"),resting:ed(o,"resting"),dragging:ed(o,"dragging"),dropAnimating:ed(o,"dropAnimating"),userCancel:ed(o,"userCancel")}};const nr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?X.useLayoutEffect:X.useEffect,k0=()=>{const i=document.querySelector("head");return i||wt(),i},nI=i=>{const e=document.createElement("style");return i&&e.setAttribute("nonce",i),e.type="text/css",e};function ett(i,e){const n=me(()=>ttt(i),[i]),r=X.useRef(null),s=X.useRef(null),a=Nt(Vn(g=>{const y=s.current;y||wt(),y.textContent=g}),[]),o=Nt(g=>{const y=r.current;y||wt(),y.textContent=g},[]);nr(()=>{!r.current&&!s.current||wt();const g=nI(e),y=nI(e);return r.current=g,s.current=y,g.setAttribute(`${Tu}-always`,i),y.setAttribute(`${Tu}-dynamic`,i),k0().appendChild(g),k0().appendChild(y),o(n.always),a(n.resting),()=>{const b=w=>{const x=w.current;x||wt(),k0().removeChild(x),w.current=null};b(r),b(s)}},[e,o,a,n.always,n.resting,i]);const u=Nt(()=>a(n.dragging),[a,n.dragging]),h=Nt(g=>{if(g==="DROP"){a(n.dropAnimating);return}a(n.userCancel)},[a,n.dropAnimating,n.userCancel]),d=Nt(()=>{s.current&&a(n.resting)},[a,n.resting]);return me(()=>({dragging:u,dropping:h,resting:d}),[u,h,d])}function eO(i,e){return Array.from(i.querySelectorAll(e))}var nO=i=>i&&i.ownerDocument&&i.ownerDocument.defaultView?i.ownerDocument.defaultView:window;function Py(i){return i instanceof nO(i).HTMLElement}function ntt(i,e){const n=`[${Cu.contextId}="${i}"]`,r=eO(document,n);if(!r.length)return null;const s=r.find(a=>a.getAttribute(Cu.draggableId)===e);return!s||!Py(s)?null:s}function itt(i){const e=X.useRef({}),n=X.useRef(null),r=X.useRef(null),s=X.useRef(!1),a=Nt(function(y,b){const w={id:y,focus:b};return e.current[y]=w,function(){const S=e.current;S[y]!==w&&delete S[y]}},[]),o=Nt(function(y){const b=ntt(i,y);b&&b!==document.activeElement&&b.focus()},[i]),u=Nt(function(y,b){n.current===y&&(n.current=b)},[]),h=Nt(function(){r.current||s.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const y=n.current;y&&o(y)}))},[o]),d=Nt(function(y){n.current=null;const b=document.activeElement;b&&b.getAttribute(Cu.draggableId)===y&&(n.current=y)},[]);return nr(()=>(s.current=!0,function(){s.current=!1;const y=r.current;y&&cancelAnimationFrame(y)}),[]),me(()=>({register:a,tryRecordFocus:d,tryRestoreFocusRecorded:h,tryShiftRecord:u}),[a,d,h,u])}function rtt(){const i={draggables:{},droppables:{}},e=[];function n(g){return e.push(g),function(){const b=e.indexOf(g);b!==-1&&e.splice(b,1)}}function r(g){e.length&&e.forEach(y=>y(g))}function s(g){return i.draggables[g]||null}function a(g){const y=s(g);return y||wt(),y}const o={register:g=>{i.draggables[g.descriptor.id]=g,r({type:"ADDITION",value:g})},update:(g,y)=>{const b=i.draggables[y.descriptor.id];b&&b.uniqueId===g.uniqueId&&(delete i.draggables[y.descriptor.id],i.draggables[g.descriptor.id]=g)},unregister:g=>{const y=g.descriptor.id,b=s(y);b&&g.uniqueId===b.uniqueId&&(delete i.draggables[y],i.droppables[g.descriptor.droppableId]&&r({type:"REMOVAL",value:g}))},getById:a,findById:s,exists:g=>!!s(g),getAllByType:g=>Object.values(i.draggables).filter(y=>y.descriptor.type===g)};function u(g){return i.droppables[g]||null}function h(g){const y=u(g);return y||wt(),y}const d={register:g=>{i.droppables[g.descriptor.id]=g},unregister:g=>{const y=u(g.descriptor.id);y&&g.uniqueId===y.uniqueId&&delete i.droppables[g.descriptor.id]},getById:h,findById:u,exists:g=>!!u(g),getAllByType:g=>Object.values(i.droppables).filter(y=>y.descriptor.type===g)};function p(){i.draggables={},i.droppables={},e.length=0}return{draggable:o,droppable:d,subscribe:n,clean:p}}function stt(){const i=me(rtt,[]);return X.useEffect(()=>function(){i.clean()},[i]),i}var uA=nn.createContext(null),jm=()=>{const i=document.body;return i||wt(),i};const att={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},ott=i=>`rfd-announcement-${i}`;function ltt(i){const e=me(()=>ott(i),[i]),n=X.useRef(null);return X.useEffect(function(){const a=document.createElement("div");return n.current=a,a.id=e,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),Bm(a.style,att),jm().appendChild(a),function(){setTimeout(function(){const h=jm();h.contains(a)&&h.removeChild(a),a===n.current&&(n.current=null)})}},[e]),Nt(s=>{const a=n.current;if(a){a.textContent=s;return}},[])}const ctt={separator:"::"};function hA(i,e=ctt){const n=nn.useId();return me(()=>`${i}${e.separator}${n}`,[e.separator,i,n])}function utt({contextId:i,uniqueId:e}){return`rfd-hidden-text-${i}-${e}`}function htt({contextId:i,text:e}){const n=hA("hidden-text",{separator:"-"}),r=me(()=>utt({contextId:i,uniqueId:n}),[n,i]);return X.useEffect(function(){const a=document.createElement("div");return a.id=r,a.textContent=e,a.style.display="none",jm().appendChild(a),function(){const u=jm();u.contains(a)&&u.removeChild(a)}},[r,e]),r}var Oy=nn.createContext(null);function iO(i){const e=X.useRef(i);return X.useEffect(()=>{e.current=i}),e}function dtt(){let i=null;function e(){return!!i}function n(o){return o===i}function r(o){i&&wt();const u={abandon:o};return i=u,u}function s(){i||wt(),i=null}function a(){i&&(i.abandon(),s())}return{isClaimed:e,isActive:n,claim:r,release:s,tryAbandon:a}}function rf(i){return i.phase==="IDLE"||i.phase==="DROP_ANIMATING"?!1:i.isDragging}const ftt=9,ptt=13,dA=27,rO=32,gtt=33,mtt=34,ytt=35,btt=36,vtt=37,_tt=38,wtt=39,Att=40,xtt={[ptt]:!0,[ftt]:!0};var sO=i=>{xtt[i.keyCode]&&i.preventDefault()};const Ly=(()=>{const i="visibilitychange";return typeof document>"u"?i:[i,`ms${i}`,`webkit${i}`,`moz${i}`,`o${i}`].find(r=>`on${r}`in document)||i})(),aO=0,iI=5;function Ett(i,e){return Math.abs(e.x-i.x)>=iI||Math.abs(e.y-i.y)>=iI}const rI={type:"IDLE"};function Stt({cancel:i,completed:e,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:s=>{const{button:a,clientX:o,clientY:u}=s;if(a!==aO)return;const h={x:o,y:u},d=n();if(d.type==="DRAGGING"){s.preventDefault(),d.actions.move(h);return}d.type!=="PENDING"&&wt();const p=d.point;if(!Ett(p,h))return;s.preventDefault();const g=d.actions.fluidLift(h);r({type:"DRAGGING",actions:g})}},{eventName:"mouseup",fn:s=>{const a=n();if(a.type!=="DRAGGING"){i();return}s.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:s=>{n().type==="DRAGGING"&&s.preventDefault(),i()}},{eventName:"keydown",fn:s=>{if(n().type==="PENDING"){i();return}if(s.keyCode===dA){s.preventDefault(),i();return}sO(s)}},{eventName:"resize",fn:i},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&i()}},{eventName:"webkitmouseforcedown",fn:s=>{const a=n();if(a.type==="IDLE"&&wt(),a.actions.shouldRespectForcePress()){i();return}s.preventDefault()}},{eventName:Ly,fn:i}]}function Ttt(i){const e=X.useRef(rI),n=X.useRef(To),r=me(()=>({eventName:"mousedown",fn:function(g){if(g.defaultPrevented||g.button!==aO||g.ctrlKey||g.metaKey||g.shiftKey||g.altKey)return;const y=i.findClosestDraggableId(g);if(!y)return;const b=i.tryGetLock(y,o,{sourceEvent:g});if(!b)return;g.preventDefault();const w={x:g.clientX,y:g.clientY};n.current(),d(b,w)}}),[i]),s=me(()=>({eventName:"webkitmouseforcewillbegin",fn:p=>{if(p.defaultPrevented)return;const g=i.findClosestDraggableId(p);if(!g)return;const y=i.findOptionsForDraggable(g);y&&(y.shouldRespectForcePress||i.canGetLock(g)&&p.preventDefault())}}),[i]),a=Nt(function(){const g={passive:!1,capture:!0};n.current=Cr(window,[s,r],g)},[s,r]),o=Nt(()=>{e.current.type!=="IDLE"&&(e.current=rI,n.current(),a())},[a]),u=Nt(()=>{const p=e.current;o(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[o]),h=Nt(function(){const g={capture:!0,passive:!1},y=Stt({cancel:u,completed:o,getPhase:()=>e.current,setPhase:b=>{e.current=b}});n.current=Cr(window,y,g)},[u,o]),d=Nt(function(g,y){e.current.type!=="IDLE"&&wt(),e.current={type:"PENDING",point:y,actions:g},h()},[h]);nr(function(){return a(),function(){n.current()}},[a])}function Ctt(){}const Rtt={[mtt]:!0,[gtt]:!0,[btt]:!0,[ytt]:!0};function Itt(i,e){function n(){e(),i.cancel()}function r(){e(),i.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===dA){s.preventDefault(),n();return}if(s.keyCode===rO){s.preventDefault(),r();return}if(s.keyCode===Att){s.preventDefault(),i.moveDown();return}if(s.keyCode===_tt){s.preventDefault(),i.moveUp();return}if(s.keyCode===wtt){s.preventDefault(),i.moveRight();return}if(s.keyCode===vtt){s.preventDefault(),i.moveLeft();return}if(Rtt[s.keyCode]){s.preventDefault();return}sO(s)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Ly,fn:n}]}function Dtt(i){const e=X.useRef(Ctt),n=me(()=>({eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==rO)return;const o=i.findClosestDraggableId(a);if(!o)return;const u=i.tryGetLock(o,p,{sourceEvent:a});if(!u)return;a.preventDefault();let h=!0;const d=u.snapLift();e.current();function p(){h||wt(),h=!1,e.current(),r()}e.current=Cr(window,Itt(d,p),{capture:!0,passive:!1})}}),[i]),r=Nt(function(){const a={passive:!1,capture:!0};e.current=Cr(window,[n],a)},[n]);nr(function(){return r(),function(){e.current()}},[r])}const N0={type:"IDLE"},ktt=120,Ntt=.15;function Mtt({cancel:i,getPhase:e}){return[{eventName:"orientationchange",fn:i},{eventName:"resize",fn:i},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(e().type!=="DRAGGING"){i();return}n.keyCode===dA&&n.preventDefault(),i()}},{eventName:Ly,fn:i}]}function Ptt({cancel:i,completed:e,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const s=n();if(s.type!=="DRAGGING"){i();return}s.hasMoved=!0;const{clientX:a,clientY:o}=r.touches[0],u={x:a,y:o};r.preventDefault(),s.actions.move(u)}},{eventName:"touchend",fn:r=>{const s=n();if(s.type!=="DRAGGING"){i();return}r.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){i();return}r.preventDefault(),i()}},{eventName:"touchforcechange",fn:r=>{const s=n();s.type==="IDLE"&&wt();const a=r.touches[0];if(!a||!(a.force>=Ntt))return;const u=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){u&&i();return}if(u){if(s.hasMoved){r.preventDefault();return}i();return}r.preventDefault()}},{eventName:Ly,fn:i}]}function Ott(i){const e=X.useRef(N0),n=X.useRef(To),r=Nt(function(){return e.current},[]),s=Nt(function(b){e.current=b},[]),a=me(()=>({eventName:"touchstart",fn:function(b){if(b.defaultPrevented)return;const w=i.findClosestDraggableId(b);if(!w)return;const x=i.tryGetLock(w,u,{sourceEvent:b});if(!x)return;const S=b.touches[0],{clientX:E,clientY:k}=S,N={x:E,y:k};n.current(),g(x,N)}}),[i]),o=Nt(function(){const b={capture:!0,passive:!1};n.current=Cr(window,[a],b)},[a]),u=Nt(()=>{const y=e.current;y.type!=="IDLE"&&(y.type==="PENDING"&&clearTimeout(y.longPressTimerId),s(N0),n.current(),o())},[o,s]),h=Nt(()=>{const y=e.current;u(),y.type==="DRAGGING"&&y.actions.cancel({shouldBlockNextClick:!0}),y.type==="PENDING"&&y.actions.abort()},[u]),d=Nt(function(){const b={capture:!0,passive:!1},w={cancel:h,completed:u,getPhase:r},x=Cr(window,Ptt(w),b),S=Cr(window,Mtt(w),b);n.current=function(){x(),S()}},[h,r,u]),p=Nt(function(){const b=r();b.type!=="PENDING"&&wt();const w=b.actions.fluidLift(b.point);s({type:"DRAGGING",actions:w,hasMoved:!1})},[r,s]),g=Nt(function(b,w){r().type!=="IDLE"&&wt();const x=setTimeout(p,ktt);s({type:"PENDING",point:w,actions:b,longPressTimerId:x}),d()},[d,r,s,p]);nr(function(){return o(),function(){n.current();const w=r();w.type==="PENDING"&&(clearTimeout(w.longPressTimerId),s(N0))}},[r,o,s]),nr(function(){return Cr(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Ltt=["input","button","textarea","select","option","optgroup","video","audio"];function oO(i,e){if(e==null)return!1;if(Ltt.includes(e.tagName.toLowerCase()))return!0;const r=e.getAttribute("contenteditable");return r==="true"||r===""?!0:e===i?!1:oO(i,e.parentElement)}function Btt(i,e){const n=e.target;return Py(n)?oO(i,n):!1}var Ftt=i=>Gr(i.getBoundingClientRect()).center;function Utt(i){return i instanceof nO(i).Element}const Vtt=(()=>{const i="matches";return typeof document>"u"?i:[i,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||i})();function lO(i,e){return i==null?null:i[Vtt](e)?i:lO(i.parentElement,e)}function jtt(i,e){return i.closest?i.closest(e):lO(i,e)}function ztt(i){return`[${Cu.contextId}="${i}"]`}function Htt(i,e){const n=e.target;if(!Utt(n))return null;const r=ztt(i),s=jtt(n,r);return!s||!Py(s)?null:s}function $tt(i,e){const n=Htt(i,e);return n?n.getAttribute(Cu.draggableId):null}function Gtt(i,e){const n=`[${J_.contextId}="${i}"]`,s=eO(document,n).find(a=>a.getAttribute(J_.id)===e);return!s||!Py(s)?null:s}function qtt(i){i.preventDefault()}function Dg({expected:i,phase:e,isLockActive:n,shouldWarn:r}){return!(!n()||i!==e)}function cO({lockAPI:i,store:e,registry:n,draggableId:r}){if(i.isClaimed())return!1;const s=n.draggable.findById(r);return!(!s||!s.options.isEnabled||!QP(e.getState(),r))}function Wtt({lockAPI:i,contextId:e,store:n,registry:r,draggableId:s,forceSensorStop:a,sourceEvent:o}){if(!cO({lockAPI:i,store:n,registry:r,draggableId:s}))return null;const h=r.draggable.getById(s),d=Gtt(e,h.descriptor.id);if(!d||o&&!h.options.canDragInteractiveElements&&Btt(d,o))return null;const p=i.claim(a||To);let g="PRE_DRAG";function y(){return h.options.shouldRespectForcePress}function b(){return i.isActive(p)}function w(O,B){Dg({expected:O,phase:g,isLockActive:b,shouldWarn:!0})&&n.dispatch(B())}const x=w.bind(null,"DRAGGING");function S(O){function B(){i.release(),g="COMPLETED"}g!=="PRE_DRAG"&&(B(),wt()),n.dispatch(jZ(O.liftActionArgs)),g="DRAGGING";function C(R,L={shouldBlockNextClick:!1}){if(O.cleanup(),L.shouldBlockNextClick){const F=Cr(window,[{eventName:"click",fn:qtt,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(F)}B(),n.dispatch(HP({reason:R}))}return{isActive:()=>Dg({expected:"DRAGGING",phase:g,isLockActive:b,shouldWarn:!1}),shouldRespectForcePress:y,drop:R=>C("DROP",R),cancel:R=>C("CANCEL",R),...O.actions}}function E(O){const B=Qd(R=>{x(()=>zP({client:R}))});return{...S({liftActionArgs:{id:s,clientSelection:O,movementMode:"FLUID"},cleanup:()=>B.cancel(),actions:{move:B}}),move:B}}function k(){const O={moveUp:()=>x(KZ),moveRight:()=>x(ZZ),moveDown:()=>x(QZ),moveLeft:()=>x(JZ)};return S({liftActionArgs:{id:s,clientSelection:Ftt(d),movementMode:"SNAP"},cleanup:To,actions:O})}function N(){Dg({expected:"PRE_DRAG",phase:g,isLockActive:b,shouldWarn:!0})&&i.release()}return{isActive:()=>Dg({expected:"PRE_DRAG",phase:g,isLockActive:b,shouldWarn:!1}),shouldRespectForcePress:y,fluidLift:E,snapLift:k,abort:N}}const Xtt=[Ttt,Dtt,Ott];function Ytt({contextId:i,store:e,registry:n,customSensors:r,enableDefaultSensors:s}){const a=[...s?Xtt:[],...r||[]],o=X.useState(()=>dtt())[0],u=Nt(function(S,E){rf(S)&&!rf(E)&&o.tryAbandon()},[o]);nr(function(){let S=e.getState();return e.subscribe(()=>{const k=e.getState();u(S,k),S=k})},[o,e,u]),nr(()=>o.tryAbandon,[o.tryAbandon]);const h=Nt(x=>cO({lockAPI:o,registry:n,store:e,draggableId:x}),[o,n,e]),d=Nt((x,S,E)=>Wtt({lockAPI:o,registry:n,contextId:i,store:e,draggableId:x,forceSensorStop:S||null,sourceEvent:E&&E.sourceEvent?E.sourceEvent:null}),[i,o,n,e]),p=Nt(x=>$tt(i,x),[i]),g=Nt(x=>{const S=n.draggable.findById(x);return S?S.options:null},[n.draggable]),y=Nt(function(){o.isClaimed()&&(o.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(iA()))},[o,e]),b=Nt(()=>o.isClaimed(),[o]),w=me(()=>({canGetLock:h,tryGetLock:d,findClosestDraggableId:p,findOptionsForDraggable:g,tryReleaseLock:y,isLockClaimed:b}),[h,d,p,g,y,b]);for(let x=0;x<a.length;x++)a[x](w)}const Ktt=i=>({onBeforeCapture:e=>{const n=()=>{i.onBeforeCapture&&i.onBeforeCapture(e)};G1.flushSync(n)},onBeforeDragStart:i.onBeforeDragStart,onDragStart:i.onDragStart,onDragEnd:i.onDragEnd,onDragUpdate:i.onDragUpdate}),Qtt=i=>({...nf,...i.autoScrollerOptions,durationDampening:{...nf.durationDampening,...i.autoScrollerOptions}});function nd(i){return i.current||wt(),i.current}function Ztt(i){const{contextId:e,setCallbacks:n,sensors:r,nonce:s,dragHandleUsageInstructions:a}=i,o=X.useRef(null),u=iO(i),h=Nt(()=>Ktt(u.current),[u]),d=Nt(()=>Qtt(u.current),[u]),p=ltt(e),g=htt({contextId:e,text:a}),y=ett(e,s),b=Nt(F=>{nd(o).dispatch(F)},[]),w=me(()=>DR({publishWhileDragging:HZ,updateDroppableScroll:GZ,updateDroppableIsEnabled:qZ,updateDroppableIsCombineEnabled:WZ,collectionStarting:$Z},b),[b]),x=stt(),S=me(()=>MJ(x,w),[x,w]),E=me(()=>KJ({scrollWindow:PJ,scrollDroppable:S.scrollDroppable,getAutoScrollerOptions:d,...DR({move:zP},b)}),[S.scrollDroppable,b,d]),k=itt(e),N=me(()=>IJ({announce:p,autoScroller:E,dimensionMarshal:S,focusMarshal:k,getResponders:h,styleMarshal:y}),[p,E,S,k,h,y]);o.current=N;const M=Nt(()=>{const F=nd(o);F.getState().phase!=="IDLE"&&F.dispatch(iA())},[]),O=Nt(()=>{const F=nd(o).getState();return F.phase==="DROP_ANIMATING"?!0:F.phase==="IDLE"?!1:F.isDragging},[]),B=me(()=>({isDragging:O,tryAbort:M}),[O,M]);n(B);const C=Nt(F=>QP(nd(o).getState(),F),[]),R=Nt(()=>_l(nd(o).getState()),[]),L=me(()=>({marshal:S,focus:k,contextId:e,canLift:C,isMovementAllowed:R,dragHandleUsageInstructionsId:g,registry:x}),[e,S,g,k,C,R,x]);return Ytt({contextId:e,store:N,registry:x,customSensors:r||null,enableDefaultSensors:i.enableDefaultSensors!==!1}),X.useEffect(()=>M,[M]),nn.createElement(Oy.Provider,{value:L},nn.createElement(SQ,{context:uA,store:N},i.children))}function Jtt(){return nn.useId()}function tet(i){const e=Jtt(),n=i.dragHandleUsageInstructions||Yg.dragHandleUsageInstructions;return nn.createElement(DQ,null,r=>nn.createElement(Ztt,{nonce:i.nonce,contextId:e,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:i.enableDefaultSensors,sensors:i.sensors,onBeforeCapture:i.onBeforeCapture,onBeforeDragStart:i.onBeforeDragStart,onDragStart:i.onDragStart,onDragUpdate:i.onDragUpdate,onDragEnd:i.onDragEnd,autoScrollerOptions:i.autoScrollerOptions},i.children))}const sI={dragging:5e3,dropAnimating:4500},eet=(i,e)=>e?Rd.drop(e.duration):i?Rd.snap:Rd.fluid,net=(i,e)=>{if(i)return e?ef.opacity.drop:ef.opacity.combining},iet=i=>i.forceShouldAnimate!=null?i.forceShouldAnimate:i.mode==="SNAP";function ret(i){const n=i.dimension.client,{offset:r,combineWith:s,dropping:a}=i,o=!!s,u=iet(i),h=!!a,d=h?Q_.drop(r,o):Q_.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:eet(u,a),transform:d,opacity:net(o,h),zIndex:h?sI.dropAnimating:sI.dragging,pointerEvents:"none"}}function set(i){return{transform:Q_.moveTo(i.offset),transition:i.shouldAnimateDisplacement?void 0:"none"}}function aet(i){return i.type==="DRAGGING"?ret(i):set(i)}function oet(i,e,n=jn){const r=window.getComputedStyle(e),s=e.getBoundingClientRect(),a=mP(s,r),o=Lm(a,n),u={client:a,tagName:e.tagName.toLowerCase(),display:r.display},h={x:a.marginBox.width,y:a.marginBox.height};return{descriptor:i,placeholder:u,displaceBy:h,client:a,page:o}}function cet(i){const e=hA("draggable"),{descriptor:n,registry:r,getDraggableRef:s,canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:u}=i,h=me(()=>({canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:u}),[a,u,o]),d=Nt(b=>{const w=s();return w||wt(),oet(n,w,b)},[n,s]),p=me(()=>({uniqueId:e,descriptor:n,options:h,getDimension:d}),[n,d,h,e]),g=X.useRef(p),y=X.useRef(!0);nr(()=>(r.draggable.register(g.current),()=>r.draggable.unregister(g.current)),[r.draggable]),nr(()=>{if(y.current){y.current=!1;return}const b=g.current;g.current=p,r.draggable.update(p,b)},[p,r.draggable])}var fA=nn.createContext(null);function zm(i){const e=X.useContext(i);return e||wt(),e}function uet(i){i.preventDefault()}const het=i=>{const e=X.useRef(null),n=Nt((B=null)=>{e.current=B},[]),r=Nt(()=>e.current,[]),{contextId:s,dragHandleUsageInstructionsId:a,registry:o}=zm(Oy),{type:u,droppableId:h}=zm(fA),d=me(()=>({id:i.draggableId,index:i.index,type:u,droppableId:h}),[i.draggableId,i.index,u,h]),{children:p,draggableId:g,isEnabled:y,shouldRespectForcePress:b,canDragInteractiveElements:w,isClone:x,mapped:S,dropAnimationFinished:E}=i;if(!x){const B=me(()=>({descriptor:d,registry:o,getDraggableRef:r,canDragInteractiveElements:w,shouldRespectForcePress:b,isEnabled:y}),[d,o,r,w,b,y]);cet(B)}const k=me(()=>y?{tabIndex:0,role:"button","aria-describedby":a,"data-rfd-drag-handle-draggable-id":g,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:uet}:null,[s,a,g,y]),N=Nt(B=>{S.type==="DRAGGING"&&S.dropping&&B.propertyName==="transform"&&G1.flushSync(E)},[E,S]),M=me(()=>{const B=aet(S),C=S.type==="DRAGGING"&&S.dropping?N:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":g,style:B,onTransitionEnd:C},dragHandleProps:k}},[s,k,g,S,N,n]),O=me(()=>({draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}),[d.droppableId,d.id,d.index,d.type]);return nn.createElement(nn.Fragment,null,p(M,S.snapshot,O))};var uO=(i,e)=>i===e,hO=i=>{const{combine:e,destination:n}=i;return n?n.droppableId:e?e.droppableId:null};const det=i=>i.combine?i.combine.draggableId:null,fet=i=>i.at&&i.at.type==="COMBINE"?i.at.combine.draggableId:null;function pet(){const i=Vn((s,a)=>({x:s,y:a})),e=Vn((s,a,o=null,u=null,h=null)=>({isDragging:!0,isClone:a,isDropAnimating:!!h,dropAnimation:h,mode:s,draggingOver:o,combineWith:u,combineTargetFor:null})),n=Vn((s,a,o,u,h=null,d=null,p=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:h,combineWith:d,mode:a,offset:s,dimension:o,forceShouldAnimate:p,snapshot:e(a,u,h,d,null)}}));return(s,a)=>{if(rf(s)){if(s.critical.draggable.id!==a.draggableId)return null;const o=s.current.client.offset,u=s.dimensions.draggables[a.draggableId],h=er(s.impact),d=fet(s.impact),p=s.forceShouldAnimate;return n(i(o.x,o.y),s.movementMode,u,a.isClone,h,d,p)}if(s.phase==="DROP_ANIMATING"){const o=s.completed;if(o.result.draggableId!==a.draggableId)return null;const u=a.isClone,h=s.dimensions.draggables[a.draggableId],d=o.result,p=d.mode,g=hO(d),y=det(d),w={duration:s.dropDuration,curve:sA.drop,moveTo:s.newHomeClientOffset,opacity:y?ef.opacity.drop:null,scale:y?ef.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:h,dropping:w,draggingOver:g,combineWith:y,mode:p,forceShouldAnimate:null,snapshot:e(p,u,g,y,w)}}}return null}}function dO(i=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:i,combineWith:null}}const get={mapped:{type:"SECONDARY",offset:jn,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:dO(null)}};function met(){const i=Vn((o,u)=>({x:o,y:u})),e=Vn(dO),n=Vn((o,u=null,h)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:u,shouldAnimateDisplacement:h,snapshot:e(u)}})),r=o=>o?n(jn,o,!0):null,s=(o,u,h,d)=>{const p=h.displaced.visible[o],g=!!(d.inVirtualList&&d.effected[o]),y=ky(h),b=y&&y.draggableId===o?u:null;if(!p){if(!g)return r(b);if(h.displaced.invisible[o])return null;const S=Lu(d.displacedBy.point),E=i(S.x,S.y);return n(E,b,!0)}if(g)return r(b);const w=h.displacedBy.point,x=i(w.x,w.y);return n(x,b,p.shouldAnimate)};return(o,u)=>{if(rf(o))return o.critical.draggable.id===u.draggableId?null:s(u.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const h=o.completed;return h.result.draggableId===u.draggableId?null:s(u.draggableId,h.result.draggableId,h.impact,h.afterCritical)}return null}}const yet=()=>{const i=pet(),e=met();return(r,s)=>i(r,s)||e(r,s)||get},bet={dropAnimationFinished:$P},vet=gP(yet,bet,null,{context:uA,areStatePropsEqual:uO})(het);function fO(i){return zm(fA).isUsingCloneFor===i.draggableId&&!i.isClone?null:nn.createElement(vet,i)}function _et(i){const e=typeof i.isDragDisabled=="boolean"?!i.isDragDisabled:!0,n=!!i.disableInteractiveElementBlocking,r=!!i.shouldRespectForcePress;return nn.createElement(fO,Bm({},i,{isClone:!1,isEnabled:e,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const pO=i=>e=>i===e,wet=pO("scroll"),Aet=pO("auto"),aI=(i,e)=>e(i.overflowX)||e(i.overflowY),xet=i=>{const e=window.getComputedStyle(i),n={overflowX:e.overflowX,overflowY:e.overflowY};return aI(n,wet)||aI(n,Aet)},Eet=()=>!1,gO=i=>i==null?null:i===document.body?Eet()?i:null:i===document.documentElement?null:xet(i)?i:gO(i.parentElement);var tw=i=>({x:i.scrollLeft,y:i.scrollTop});const mO=i=>i?window.getComputedStyle(i).position==="fixed"?!0:mO(i.parentElement):!1;var Tet=i=>{const e=gO(i),n=mO(i);return{closestScrollable:e,isFixedOnPage:n}},Cet=({descriptor:i,isEnabled:e,isCombineEnabled:n,isFixedOnPage:r,direction:s,client:a,page:o,closest:u})=>{const h=(()=>{if(!u)return null;const{scrollSize:y,client:b}=u,w=XP({scrollHeight:y.scrollHeight,scrollWidth:y.scrollWidth,height:b.paddingBox.height,width:b.paddingBox.width});return{pageMarginBox:u.page.marginBox,frameClient:b,scrollSize:y,shouldClipSubject:u.shouldClipSubject,scroll:{initial:u.scroll,current:u.scroll,max:w,diff:{value:jn,displacement:jn}}}})(),d=s==="vertical"?Z1:CP,p=Su({page:o,withPlaceholder:null,axis:d,frame:h});return{descriptor:i,isCombineEnabled:n,isFixedOnPage:r,axis:d,isEnabled:e,client:a,page:o,frame:h,subject:p}};const Ret=(i,e)=>{const n=yP(i);if(!e||i!==e)return n;const r=n.paddingBox.top-e.scrollTop,s=n.paddingBox.left-e.scrollLeft,a=r+e.scrollHeight,o=s+e.scrollWidth,h=X1({top:r,right:o,bottom:a,left:s},n.border);return Y1({borderBox:h,margin:n.margin,border:n.border,padding:n.padding})};var Iet=({ref:i,descriptor:e,env:n,windowScroll:r,direction:s,isDropDisabled:a,isCombineEnabled:o,shouldClipSubject:u})=>{const h=n.closestScrollable,d=Ret(i,h),p=Lm(d,r),g=(()=>{if(!h)return null;const b=yP(h),w={scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth};return{client:b,page:Lm(b,r),scroll:tw(h),scrollSize:w,shouldClipSubject:u}})();return Cet({descriptor:e,isEnabled:!a,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:s,client:d,page:p,closest:g})};const Det={passive:!1},ket={passive:!0};var oI=i=>i.shouldPublishImmediately?Det:ket;const kg=i=>i&&i.env.closestScrollable||null;function Net(i){const e=X.useRef(null),n=zm(Oy),r=hA("droppable"),{registry:s,marshal:a}=n,o=iO(i),u=me(()=>({id:i.droppableId,type:i.type,mode:i.mode}),[i.droppableId,i.mode,i.type]),h=X.useRef(u),d=me(()=>Vn((M,O)=>{e.current||wt();const B={x:M,y:O};a.updateDroppableScroll(u.id,B)}),[u.id,a]),p=Nt(()=>{const M=e.current;return!M||!M.env.closestScrollable?jn:tw(M.env.closestScrollable)},[]),g=Nt(()=>{const M=p();d(M.x,M.y)},[p,d]),y=me(()=>Qd(g),[g]),b=Nt(()=>{const M=e.current,O=kg(M);if(M&&O||wt(),M.scrollOptions.shouldPublishImmediately){g();return}y()},[y,g]),w=Nt((M,O)=>{e.current&&wt();const B=o.current,C=B.getDroppableRef();C||wt();const R=Tet(C),L={ref:C,descriptor:u,env:R,scrollOptions:O};e.current=L;const F=Iet({ref:C,descriptor:u,env:R,windowScroll:M,direction:B.direction,isDropDisabled:B.isDropDisabled,isCombineEnabled:B.isCombineEnabled,shouldClipSubject:!B.ignoreContainerClipping}),U=R.closestScrollable;return U&&(U.setAttribute(eI.contextId,n.contextId),U.addEventListener("scroll",b,oI(L.scrollOptions))),F},[n.contextId,u,b,o]),x=Nt(()=>{const M=e.current,O=kg(M);return M&&O||wt(),tw(O)},[]),S=Nt(()=>{const M=e.current;M||wt();const O=kg(M);e.current=null,O&&(y.cancel(),O.removeAttribute(eI.contextId),O.removeEventListener("scroll",b,oI(M.scrollOptions)))},[b,y]),E=Nt(M=>{const O=e.current;O||wt();const B=kg(O);B||wt(),B.scrollTop+=M.y,B.scrollLeft+=M.x},[]),k=me(()=>({getDimensionAndWatchScroll:w,getScrollWhileDragging:x,dragStopped:S,scroll:E}),[S,w,x,E]),N=me(()=>({uniqueId:r,descriptor:u,callbacks:k}),[k,u,r]);nr(()=>(h.current=N.descriptor,s.droppable.register(N),()=>{e.current&&S(),s.droppable.unregister(N)}),[k,u,S,N,a,s.droppable]),nr(()=>{e.current&&a.updateDroppableIsEnabled(h.current.id,!i.isDropDisabled)},[i.isDropDisabled,a]),nr(()=>{e.current&&a.updateDroppableIsCombineEnabled(h.current.id,i.isCombineEnabled)},[i.isCombineEnabled,a])}function M0(){}const lI={width:0,height:0,margin:BQ},Met=({isAnimatingOpenOnMount:i,placeholder:e,animate:n})=>i||n==="close"?lI:{height:e.client.borderBox.height,width:e.client.borderBox.width,margin:e.client.margin},Pet=({isAnimatingOpenOnMount:i,placeholder:e,animate:n})=>{const r=Met({isAnimatingOpenOnMount:i,placeholder:e,animate:n});return{display:e.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Rd.placeholder:null}},Oet=i=>{const e=X.useRef(null),n=Nt(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{animate:r,onTransitionEnd:s,onClose:a,contextId:o}=i,[u,h]=X.useState(i.animate==="open");X.useEffect(()=>u?r!=="open"?(n(),h(!1),M0):e.current?M0:(e.current=setTimeout(()=>{e.current=null,h(!1)}),n):M0,[r,u,n]);const d=Nt(g=>{g.propertyName==="height"&&(s(),r==="close"&&a())},[r,a,s]),p=Pet({isAnimatingOpenOnMount:u,animate:i.animate,placeholder:i.placeholder});return nn.createElement(i.placeholder.tagName,{style:p,"data-rfd-placeholder-context-id":o,onTransitionEnd:d,ref:i.innerRef})};var Let=nn.memo(Oet);class Bet extends nn.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,n){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!e.on,data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const Fet=i=>{const e=X.useContext(Oy);e||wt();const{contextId:n,isMovementAllowed:r}=e,s=X.useRef(null),a=X.useRef(null),{children:o,droppableId:u,type:h,mode:d,direction:p,ignoreContainerClipping:g,isDropDisabled:y,isCombineEnabled:b,snapshot:w,useClone:x,updateViewportMaxScroll:S,getContainerForClone:E}=i,k=Nt(()=>s.current,[]),N=Nt((U=null)=>{s.current=U},[]);Nt(()=>a.current,[]);const M=Nt((U=null)=>{a.current=U},[]),O=Nt(()=>{r()&&S({maxScroll:KP()})},[r,S]);Net({droppableId:u,type:h,mode:d,direction:p,isDropDisabled:y,isCombineEnabled:b,ignoreContainerClipping:g,getDroppableRef:k});const B=me(()=>nn.createElement(Bet,{on:i.placeholder,shouldAnimate:i.shouldAnimatePlaceholder},({onClose:U,data:$,animate:V})=>nn.createElement(Let,{placeholder:$,onClose:U,innerRef:M,animate:V,contextId:n,onTransitionEnd:O})),[n,O,i.placeholder,i.shouldAnimatePlaceholder,M]),C=me(()=>({innerRef:N,placeholder:B,droppableProps:{"data-rfd-droppable-id":u,"data-rfd-droppable-context-id":n}}),[n,u,B,N]),R=x?x.dragging.draggableId:null,L=me(()=>({droppableId:u,type:h,isUsingCloneFor:R}),[u,R,h]);function F(){if(!x)return null;const{dragging:U,render:$}=x,V=nn.createElement(fO,{draggableId:U.draggableId,index:U.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(G,et)=>$(G,et,U));return EK.createPortal(V,E())}return nn.createElement(fA.Provider,{value:L},o(C,w),F())};function Uet(){return document.body||wt(),document.body}const cI={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Uet},yO=i=>{let e={...i},n;for(n in cI)i[n]===void 0&&(e={...e,[n]:cI[n]});return e},P0=(i,e)=>i===e.droppable.type,uI=(i,e)=>e.draggables[i.draggable.id],Vet=()=>{const i={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e={...i,shouldAnimatePlaceholder:!1},n=Vn(a=>({draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}})),r=Vn((a,o,u,h,d,p)=>{const g=d.descriptor.id;if(d.descriptor.droppableId===a){const w=p?{render:p,dragging:n(d.descriptor)}:null,x={isDraggingOver:u,draggingOverWith:u?g:null,draggingFromThisWith:g,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:w}}if(!o)return e;if(!h)return i;const b={isDraggingOver:u,draggingOverWith:g,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:b,useClone:null}});return(a,o)=>{const u=yO(o),h=u.droppableId,d=u.type,p=!u.isDropDisabled,g=u.renderClone;if(rf(a)){const y=a.critical;if(!P0(d,y))return e;const b=uI(y,a.dimensions),w=er(a.impact)===h;return r(h,p,w,w,b,g)}if(a.phase==="DROP_ANIMATING"){const y=a.completed;if(!P0(d,y.critical))return e;const b=uI(y.critical,a.dimensions);return r(h,p,hO(y.result)===h,er(y.impact)===h,b,g)}if(a.phase==="IDLE"&&a.completed&&!a.shouldFlush){const y=a.completed;if(!P0(d,y.critical))return e;const b=er(y.impact)===h,w=!!(y.impact.at&&y.impact.at.type==="COMBINE"),x=y.critical.droppable.id===h;return b?w?i:e:x?i:e}return e}},jet={updateViewportMaxScroll:YZ},zet=gP(Vet,jet,(i,e,n)=>({...yO(n),...i,...e}),{context:uA,areStatePropsEqual:uO})(Fet),Het=({paper:i,onRead:e,onEdit:n,onDelete:r})=>I.jsxs("div",{className:`nb-card p-3 h-full flex flex-col ${i.color||"bg-white"} transition-transform hover:scale-[1.02]`,children:[I.jsxs("div",{className:"flex justify-between items-start mb-1",children:[I.jsx("h4",{className:"font-black text-sm uppercase leading-tight line-clamp-2",children:i.title}),i.rating&&I.jsxs("div",{className:"flex items-center text-xs font-bold shrink-0 ml-1",children:[I.jsx(Jk,{size:10,fill:"black"})," ",i.rating]})]}),I.jsx("p",{className:"text-xs truncate font-mono mb-2 text-gray-600",children:i.authors}),I.jsx("div",{className:"flex gap-1 flex-wrap mb-auto",children:i.tags?.slice(0,2).map(s=>I.jsx("span",{className:"text-[10px] border border-black px-1 bg-white/80",children:s},s))}),I.jsxs("div",{className:"flex justify-end gap-1 border-t-2 border-black/10 pt-2 mt-2",children:[I.jsx("button",{onClick:()=>e(i),className:"hover:bg-black hover:text-white p-1 rounded transition-colors",title:"Read",children:I.jsx(oz,{size:14})}),I.jsx("button",{onClick:()=>n(i),className:"hover:bg-black hover:text-white p-1 rounded transition-colors",title:"Edit",children:I.jsx(Cz,{size:14})}),I.jsx("button",{onClick:()=>r(i.id),className:"hover:bg-red-500 hover:text-white p-1 rounded transition-colors",title:"Delete",children:I.jsx(d_,{size:14})})]})]}),$et=({id:i,title:e,items:n,onRead:r,onEdit:s,onDelete:a})=>I.jsx(zet,{droppableId:i,children:(o,u)=>I.jsxs("div",{className:"flex-1 flex flex-col border-4 border-black bg-gray-100 min-h-0",children:[I.jsxs("div",{className:"p-3 border-b-4 border-black bg-white font-black uppercase flex justify-between items-center shrink-0",children:[I.jsx("span",{children:e}),I.jsx("span",{className:"bg-black text-white px-2 py-0.5 rounded-full text-xs",children:n.length})]}),I.jsxs("div",{ref:o.innerRef,...o.droppableProps,className:"flex-1 overflow-y-auto p-2 gap-2 flex flex-col",children:[n.map((h,d)=>I.jsx(_et,{draggableId:h.id,index:d,children:(p,g)=>I.jsx("div",{ref:p.innerRef,...p.draggableProps,...p.dragHandleProps,className:"mb-3",children:I.jsx(Het,{paper:h,onRead:r,onEdit:s,onDelete:a})})},h.id)),o.placeholder]})]})});function Get({papers:i,onStatusChange:e,onRead:n,onEdit:r,onDelete:s}){const a=X.useMemo(()=>[{id:"to-read",title:"To Read",items:i.filter(u=>u.status==="to-read")},{id:"reading",title:"Reading",items:i.filter(u=>u.status==="reading")},{id:"read",title:"Read",items:i.filter(u=>u.status==="read")}],[i]),o=u=>{const{destination:h,source:d,draggableId:p}=u;!h||h.droppableId===d.droppableId||e(p,h.droppableId)};return I.jsx(tet,{onDragEnd:o,children:I.jsx("div",{className:"flex-1 flex gap-4 p-4 bg-nb-gray min-h-0 overflow-hidden",children:a.map(u=>I.jsx($et,{id:u.id,title:u.title,items:u.items,onRead:n,onEdit:r,onDelete:s},u.id))})})}const bO="https://api.semanticscholar.org/graph/v1",qet="https://api.semanticscholar.org/recommendations/v1";async function hI(i){try{const e=i.replace(/^DOI:/i,""),n=await fetch(`${bO}/paper/DOI:${e}?fields=paperId,externalIds,title,citationCount,references,citations`);return n.ok?await n.json():null}catch(e){return console.error("Failed to fetch citation data:",e),null}}async function Wet(i,e=100){try{const n=["citingPaper.paperId","citingPaper.title","citingPaper.authors","citingPaper.year","citingPaper.venue","citingPaper.citationCount"].join(","),r=`${bO}/paper/${i}/citations?fields=${n}&limit=${e}`,s=await fetch(r);return s.ok?(await s.json()).data||[]:(console.error("Semantic Scholar API error:",s.status,s.statusText,r),[])}catch(n){return console.error("Failed to fetch citations:",n),[]}}async function Xet(i,e=100){try{const r=`${qet}/papers/forpaper/${i}?fields=paperId,title,authors,year,venue,citationCount&limit=${e}`,s=await fetch(r);return s.ok?(await s.json()).recommendedPapers||[]:(console.error("Recommendations API error:",s.status,s.statusText,r),[])}catch(n){return console.error("Failed to fetch recommended papers:",n),[]}}function Yet({currentPaper:i,onImport:e}){const[n,r]=X.useState([]),[s,a]=X.useState(!1),[o,u]=X.useState("citedby");X.useEffect(()=>{(i.semanticScholarId||i.doi)&&h()},[i,o]);const h=async()=>{o==="citedby"?await d():await p()},d=async()=>{a(!0);let g=i.semanticScholarId;if(!g&&i.doi){const w=i.doi.replace(/^DOI:/i,"");g=(await hI(w))?.paperId}if(!g){console.error("No Semantic Scholar ID for cited-by mode"),r([]),a(!1);return}let b=(await Wet(g,100)).map(w=>{const x=w.citingPaper;return x?{paperId:x.paperId,title:x.title,authors:x.authors?.map(S=>S.name).join(", ")||"Unknown",year:x.year,abstract:x.abstract,venue:x.venue,citationCount:x.citationCount||0}:null}).filter(w=>w&&w.paperId&&w.title);b.sort((w,x)=>(x.citationCount||0)-(w.citationCount||0)),r(b.slice(0,20)),a(!1)},p=async()=>{a(!0);let g=i.semanticScholarId;if(!g&&i.doi){const w=i.doi.replace(/^DOI:/i,"");g=(await hI(w))?.paperId}if(!g){console.error("No Semantic Scholar ID for recommendations"),r([]),a(!1);return}let b=(await Xet(g,500)).map(w=>({paperId:w.paperId,title:w.title,authors:w.authors?.map(x=>x.name).join(", ")||"Unknown",year:w.year,abstract:w.abstract,venue:w.venue,citationCount:w.citationCount||0})).filter(w=>w.paperId&&w.title);b.sort((w,x)=>(x.citationCount||0)-(w.citationCount||0)),r(b.slice(0,20)),a(!1)};return I.jsxs("div",{className:"bg-white border-4 border-black p-4 h-full flex flex-col",children:[I.jsxs("div",{className:"flex justify-between items-center mb-4 border-b-2 border-black pb-2",children:[I.jsxs("div",{className:"flex gap-2",children:[I.jsxs("button",{onClick:()=>u("citedby"),className:`px-3 py-1 text-xs font-bold uppercase border-2 border-black flex items-center gap-1 ${o==="citedby"?"bg-nb-lime":"bg-white hover:bg-gray-100"}`,children:[I.jsx(gz,{size:14}),"Cited By"]}),I.jsxs("button",{onClick:()=>u("recommended"),className:`px-3 py-1 text-xs font-bold uppercase border-2 border-black flex items-center gap-1 ${o==="recommended"?"bg-nb-peach":"bg-white hover:bg-gray-100"}`,children:[I.jsx(h_,{size:14}),"AI Recommended"]})]}),I.jsx("button",{onClick:h,className:"p-1 hover:bg-gray-100 rounded",children:I.jsx(Zk,{size:16,className:s?"animate-spin":""})})]}),I.jsx("div",{className:"mb-2 text-xs text-gray-600",children:o==="citedby"?"Top 20 most-cited papers that cite this paper":"Top 20 most-cited AI-recommended papers for this paper"}),I.jsx("div",{className:"flex-1 overflow-y-auto space-y-3",children:s?I.jsx("div",{className:"flex justify-center p-8",children:I.jsx(bu,{className:"animate-spin"})}):n.length===0?I.jsx("p",{className:"text-gray-500 text-sm text-center italic",children:o==="citedby"?"No citing papers found.":"No recommendations available."}):n.map((g,y)=>I.jsxs("div",{className:"border-2 border-black p-3 hover:bg-gray-50 transition-colors",children:[I.jsx("h4",{className:"font-bold text-sm leading-tight mb-1",children:g.title}),I.jsxs("div",{className:"text-xs text-gray-600 mb-2 flex items-center justify-between",children:[I.jsx("span",{children:g.year}),I.jsx("span",{className:"truncate max-w-[120px]",children:g.authors}),I.jsxs("span",{className:"ml-2 text-gray-400",children:[g.citationCount||0," cites"]})]}),I.jsxs("div",{className:"flex gap-2 mt-2",children:[I.jsxs("button",{onClick:()=>e({title:g.title,authors:g.authors,year:g.year?.toString(),abstract:g.abstract,venue:g.venue,semanticScholarId:g.paperId}),className:"nb-button py-1 px-2 text-xs flex items-center gap-1 bg-nb-lime flex-1 justify-center",children:[I.jsx(Qk,{size:12})," Add to Library"]}),I.jsx("a",{href:`https://www.semanticscholar.org/paper/${g.paperId}`,target:"_blank",rel:"noreferrer",className:"nb-button py-1 px-2 text-xs bg-white",children:I.jsx(sz,{size:12})})]})]},g.paperId||g.title||y))})]})}function Ket({papers:i,onAuthorClick:e}){const n=X.useRef(),r=X.useMemo(()=>{const a=new Map,o=new Map;i.forEach(p=>{if(!p.authors)return;const g=p.authors.split(",").map(y=>y.trim()).filter(y=>y.length>0);g.forEach(y=>{o.has(y)||o.set(y,[]),o.get(y).push(p),a.has(y)||a.set(y,new Set),g.forEach(b=>{b!==y&&a.get(y).add(b)})})});const u=Array.from(a.keys()).map(p=>({id:p,name:p,val:o.get(p).length,color:"#32b8c6"})),h=[],d=new Set;return a.forEach((p,g)=>{p.forEach(y=>{const b=[g,y].sort().join("|");d.has(b)||(d.add(b),h.push({source:g,target:y}))})}),{nodes:u,links:h}},[i]),s=(a,o)=>{if(!a.x||!a.y)return;const u=Math.sqrt(a.val)*8;o.fillStyle=a.color,o.beginPath(),o.arc(a.x,a.y,u,0,2*Math.PI),o.fill(),o.font="8px Arial",o.textAlign="center",o.textBaseline="middle",o.fillStyle="#1e293b",o.fillText(a.name,a.x,a.y+u+10)};return I.jsxs("div",{className:"h-full w-full bg-white rounded-xl border-4 border-black overflow-hidden",children:[I.jsx("div",{className:"p-3 border-b-4 border-black bg-white font-black uppercase",children:"Author Network"}),r.nodes.length===0?I.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"No author data available"}):I.jsx(A1,{ref:n,graphData:r,nodeRelSize:6,linkWidth:1,linkColor:()=>"#e5e7eb",backgroundColor:"#ffffff",nodeCanvasObject:s,onNodeClick:a=>e?.(a.id),d3AlphaDecay:.02,d3VelocityDecay:.3})]})}function Qet({papers:i,onTagClick:e}){const n=X.useMemo(()=>{const r=new Map;i.forEach(u=>{u.tags?.forEach(h=>{r.set(h,(r.get(h)||0)+1)})});const s=Array.from(r.entries()).sort((u,h)=>h[1]-u[1]).slice(0,50),a=s[0]?.[1]||1,o=s[s.length-1]?.[1]||1;return s.map(([u,h])=>{const d=(h-o)/(a-o),p=12+d*24,g=.5+d*.5;return{tag:u,count:h,fontSize:p,opacity:g}})},[i]);return n.length===0?I.jsxs("div",{className:"bg-white border-4 border-black p-6 rounded-xl",children:[I.jsx("h3",{className:"font-black uppercase mb-4 border-b-2 border-black pb-2",children:"Tag Cloud"}),I.jsx("p",{className:"text-gray-500 text-center",children:"No tags available"})]}):I.jsxs("div",{className:"bg-white border-4 border-black p-6 rounded-xl",children:[I.jsx("h3",{className:"font-black uppercase mb-4 border-b-2 border-black pb-2",children:"Tag Cloud"}),I.jsx("div",{className:"flex flex-wrap gap-3 justify-center items-center",children:n.map(({tag:r,count:s,fontSize:a,opacity:o})=>I.jsx("button",{onClick:()=>e?.(r),className:"font-bold hover:underline transition-all hover:scale-110",style:{fontSize:`${a}px`,opacity:o,color:"#1e293b"},title:`${s} papers`,children:r},r))})]})}function Zet({paper:i}){const[e,n]=X.useState(""),[r,s]=X.useState(!1),[a,o]=X.useState(!1),u=async()=>{s(!0);try{const d=i.abstract||"";if(!d){n("No abstract available for summarization."),s(!1);return}const y=`**Key Points:**

${(d.match(/[^.!?]+[.!?]+/g)||[]).slice(0,3).join(" ")}

**Topics:** ${i.tags?.join(", ")||"N/A"}
**Year:** ${i.year||"N/A"}`;await new Promise(b=>setTimeout(b,1e3)),n(y)}catch(d){console.error("Error generating summary:",d),n("Failed to generate summary. Please try again.")}s(!1)},h=()=>{navigator.clipboard.writeText(e),o(!0),setTimeout(()=>o(!1),2e3)};return I.jsxs("div",{className:"bg-white border-4 border-black p-4",children:[I.jsxs("div",{className:"flex items-center justify-between mb-4 pb-2 border-b-2 border-black",children:[I.jsxs("h3",{className:"font-black uppercase flex items-center gap-2",children:[I.jsx(h_,{size:18,className:"text-purple-600"}),"AI Summary"]}),e&&!r&&I.jsxs("button",{onClick:h,className:"nb-button text-xs px-2 py-1 bg-white flex items-center gap-1",children:[a?I.jsx(mm,{size:12}):I.jsx(ez,{size:12}),a?"Copied!":"Copy"]})]}),!e&&!r&&I.jsxs("button",{onClick:u,className:"nb-button w-full py-3 bg-purple-200 hover:bg-purple-300 flex items-center justify-center gap-2",children:[I.jsx(h_,{size:16}),"Generate AI Summary"]}),r&&I.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-500",children:[I.jsx(bu,{className:"animate-spin mb-2",size:32}),I.jsx("p",{className:"text-sm",children:"Generating summary..."})]}),e&&!r&&I.jsx("div",{className:"prose prose-sm max-w-none",children:I.jsx("div",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:e.split(`
`).map((d,p)=>I.jsx("p",{className:d.startsWith("**")?"font-bold mt-3":"",children:d.replace(/\*\*/g,"")},p))})})]})}const Jet=[{name:"Yellow",class:"bg-nb-yellow",hex:"#FFD90F"},{name:"Cyan",class:"bg-nb-cyan",hex:"#22d3ee"},{name:"Pink",class:"bg-nb-pink",hex:"#FF90E8"},{name:"Lime",class:"bg-nb-lime",hex:"#a3e635"},{name:"Purple",class:"bg-nb-purple",hex:"#c084fc"},{name:"Orange",class:"bg-nb-orange",hex:"#fb923c"}],tnt=["Electrophysiology","Patch Clamp","Voltage Clamp","Calcium Imaging","Two-Photon Microscopy","Confocal Microscopy","Optogenetics","Chemogenetics","DREADDs","Behavioral Analysis","Fear Conditioning","Morris Water Maze","Molecular Biology","Western Blot","PCR","RNA-seq","Immunohistochemistry","In Situ Hybridization","Computational Modeling","Neural Network Simulation","fMRI","EEG","MEG"],ent=["Mouse","Rat","Human","Non-human Primate","Zebrafish","C. elegans","Drosophila","Cell Culture","Organoid","Brain Slice"];function nnt({paper:i,allTags:e,onClose:n,onSave:r,addToast:s}){const[a,o]=X.useState({...i,rating:i.rating||0,methods:i.methods||[],organisms:i.organisms||[],hypotheses:i.hypotheses||[]}),[u,h]=X.useState(!1),[d,p]=X.useState(!1),g=async()=>{const b=a.doi?.trim();if(!b){s("Please add a DOI first.","error");return}h(!0);try{const w=$1(b);if(!w){s("Invalid DOI format. Try: 10.xxxx/xxxx or https://doi.org/10.xxxx/xxxx","error"),h(!1);return}console.log("Fetching metadata for normalized DOI:",w);const x=await q_(w,"DOI");if(x){console.log("Received data from Semantic Scholar:",x);let S=a.authors||"";x.authors&&Array.isArray(x.authors)&&x.authors.length>0&&(S=x.authors.map(N=>N.name).join(", "));let E=a.year||"";x.year?E=x.year.toString():x.publicationDate&&(E=x.publicationDate.split("-")[0]);const k={...a,doi:w,title:x.title||a.title,authors:S,abstract:x.abstract||a.abstract,year:E,venue:x.venue||a.venue,citationCount:x.citationCount||0,semanticScholarId:x.paperId||a.semanticScholarId};console.log("Updating form data with:",k),o(k),s(` Metadata fetched! ${x.citationCount||0} citations found.`,"success")}else s("DOI not found in Semantic Scholar database.","error")}catch(w){s("Error fetching metadata. Please check your connection.","error"),console.error("Error fetching DOI metadata:",w)}h(!1)},y=async()=>{if(!a.title?.trim()){s("Title is required!","error");return}p(!0);try{await r(a),n()}catch(b){s("Failed to save changes.","error"),console.error("Save error:",b)}p(!1)};return I.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:I.jsxs("div",{className:"bg-white border-4 border-black shadow-nb w-full max-w-2xl p-8 relative max-h-[90vh] overflow-y-auto",children:[I.jsx("button",{onClick:n,className:"absolute top-4 right-4 hover:rotate-90 transition-transform",children:I.jsx(yf,{size:32,strokeWidth:3})}),I.jsx("h2",{className:"text-3xl font-black uppercase mb-6 border-b-4 border-black pb-2",children:"Edit Metadata"}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{className:"bg-nb-purple/10 p-4 border-2 border-nb-purple",children:[I.jsxs("label",{className:"font-bold block mb-2 text-sm uppercase flex items-center gap-2",children:[I.jsx(ym,{size:16})," DOI - Auto-Fill All Fields"]}),I.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["Paste any DOI format: ",I.jsx("code",{className:"bg-gray-200 px-1",children:"10.xxxx/xxxx"})," | ",I.jsx("code",{className:"bg-gray-200 px-1",children:"https://doi.org/10.xxxx/xxxx"})," | ",I.jsx("code",{className:"bg-gray-200 px-1",children:"https://www.doi.org/10.xxxx/xxxx"})]}),I.jsxs("div",{className:"flex gap-2",children:[I.jsx("input",{className:"nb-input flex-1",value:a.doi||"",onChange:b=>o({...a,doi:b.target.value}),onKeyDown:b=>{b.key==="Enter"&&!u&&g()},placeholder:"Paste DOI here...",disabled:u}),I.jsx("button",{onClick:g,disabled:u||!a.doi?.trim(),className:"nb-button bg-nb-purple flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:u?I.jsxs(I.Fragment,{children:[I.jsx(bu,{className:"animate-spin",size:16}),"Fetching..."]}):I.jsxs(I.Fragment,{children:[I.jsx(ym,{size:16}),"Auto-Fill"]})})]})]}),(a.citationCount||0)>0&&I.jsx("div",{className:"bg-nb-lime p-4 border-2 border-black animate-in fade-in",children:I.jsxs("p",{className:"font-bold text-sm flex items-center gap-2",children:[I.jsx(Bj,{size:20}),a.citationCount," citations on Semantic Scholar"]})}),I.jsxs("div",{children:[I.jsx("label",{className:"font-bold block mb-2 text-sm uppercase",children:"Title *"}),I.jsx("input",{className:"nb-input w-full",value:a.title||"",onChange:b=>o({...a,title:b.target.value}),placeholder:"Paper title"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"font-bold block mb-2 text-sm uppercase",children:"Authors"}),I.jsx("input",{className:"nb-input w-full",value:a.authors||"",onChange:b=>o({...a,authors:b.target.value}),placeholder:"Author names (comma separated)"})]}),I.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"font-bold block mb-2 text-sm uppercase",children:"Year"}),I.jsx("input",{className:"nb-input w-full",value:a.year||"",onChange:b=>o({...a,year:b.target.value}),placeholder:"2025"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"font-bold block mb-2 text-sm uppercase",children:"Venue"}),I.jsx("input",{className:"nb-input w-full",value:a.venue||"",onChange:b=>o({...a,venue:b.target.value}),placeholder:"Conference or Journal"})]})]}),I.jsxs("div",{children:[I.jsx("label",{className:"font-bold block mb-2 text-sm uppercase",children:"Abstract"}),I.jsx("textarea",{className:"nb-input w-full",rows:4,value:a.abstract||"",onChange:b=>o({...a,abstract:b.target.value}),placeholder:"Paper abstract..."})]}),I.jsxs("div",{children:[I.jsx("label",{className:"font-bold block mb-2 text-sm uppercase",children:"Rating"}),I.jsxs("div",{className:"flex gap-2",children:[[1,2,3,4,5].map(b=>I.jsx("button",{onClick:()=>o({...a,rating:b}),className:"p-2 border-2 border-black hover:bg-nb-yellow transition-colors",children:I.jsx(Jk,{size:24,fill:b<=(a.rating||0)?"#FFD90F":"none",strokeWidth:2})},b)),(a.rating||0)>0&&I.jsx("button",{onClick:()=>o({...a,rating:0}),className:"ml-2 px-3 border-2 border-black text-xs font-bold hover:bg-red-500 hover:text-white",children:"Clear"})]})]}),I.jsxs("div",{children:[I.jsx("label",{className:"font-bold block mb-2 text-sm uppercase",children:"Tags"}),I.jsx(O0,{tags:a.tags||[],setTags:b=>o({...a,tags:b}),allTags:e,placeholder:"Add tag..."})]}),I.jsxs("div",{children:[I.jsx("label",{className:"font-bold block mb-2 text-sm uppercase",children:"Methods"}),I.jsx(O0,{tags:a.methods||[],setTags:b=>o({...a,methods:b}),allTags:tnt,placeholder:"Add method..."})]}),I.jsxs("div",{children:[I.jsx("label",{className:"font-bold block mb-2 text-sm uppercase",children:"Model Organisms"}),I.jsx(O0,{tags:a.organisms||[],setTags:b=>o({...a,organisms:b}),allTags:ent,placeholder:"Add organism..."})]}),I.jsxs("div",{children:[I.jsx("label",{className:"font-bold block mb-2 text-sm uppercase",children:"Key Hypotheses"}),I.jsx("textarea",{className:"nb-input w-full",rows:3,value:(a.hypotheses||[]).join(`
`),onChange:b=>o({...a,hypotheses:b.target.value.split(`
`).filter(Boolean)}),placeholder:"One hypothesis per line...\\nExample: Dopamine modulates learning rate"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"font-bold block mb-2 text-sm uppercase",children:"Link"}),I.jsx("input",{className:"nb-input w-full",value:a.link||"",onChange:b=>o({...a,link:b.target.value}),placeholder:"https://..."})]}),I.jsxs("div",{children:[I.jsx("label",{className:"font-bold block mb-2 text-sm uppercase",children:"Color Label"}),I.jsx("div",{className:"flex gap-2 flex-wrap",children:Jet.map(b=>I.jsx("button",{onClick:()=>o({...a,color:b.class}),className:`w-12 h-12 border-4 border-black ${b.class} ${a.color===b.class?"ring-4 ring-offset-2 ring-black":""} hover:scale-110 transition-transform`,title:b.name},b.name))})]}),I.jsxs("div",{children:[I.jsx("label",{className:"font-bold block mb-2 text-sm uppercase",children:"Notes"}),I.jsx("textarea",{className:"nb-input w-full",rows:4,value:a.notes||"",onChange:b=>o({...a,notes:b.target.value}),placeholder:"Personal notes about this paper..."})]}),I.jsxs("div",{className:"flex gap-4 pt-4 border-t-4 border-black",children:[I.jsx("button",{onClick:n,className:"flex-1 nb-button bg-white",disabled:d,children:"Cancel"}),I.jsx("button",{onClick:y,className:"flex-1 nb-button bg-nb-lime flex items-center justify-center gap-2",disabled:d,children:d?I.jsxs(I.Fragment,{children:[I.jsx(bu,{className:"animate-spin",size:16}),"Saving..."]}):"Save Changes"})]})]})]})})}function O0({tags:i,setTags:e,allTags:n,placeholder:r="Add tag..."}){const[s,a]=X.useState(""),[o,u]=X.useState(!1),h=n.filter(p=>p.toLowerCase().includes(s.toLowerCase())&&!i.includes(p)).slice(0,5),d=p=>{p&&!i.includes(p)&&(e([...i,p]),a(""),u(!1))};return I.jsxs("div",{className:"space-y-2",children:[I.jsx("div",{className:"flex gap-2 flex-wrap",children:i.map(p=>I.jsxs("span",{className:"bg-black text-white px-3 py-1 text-xs font-bold flex items-center gap-2 border-2 border-black",children:[p,I.jsx("button",{onClick:()=>e(i.filter(g=>g!==p)),className:"hover:text-red-400",children:I.jsx(yf,{size:12})})]},p))}),I.jsxs("div",{className:"relative",children:[I.jsxs("div",{className:"flex gap-2",children:[I.jsx("input",{className:"nb-input py-2 text-sm flex-1",value:s,onChange:p=>{a(p.target.value),u(!0)},onKeyDown:p=>{p.key==="Enter"&&(p.preventDefault(),d(s))},onFocus:()=>u(!0),onBlur:()=>setTimeout(()=>u(!1),200),placeholder:r}),I.jsxs("button",{onClick:()=>d(s),className:"nb-button py-2 px-4 flex items-center gap-1",children:[I.jsx(Qk,{size:16})," Add"]})]}),o&&h.length>0&&I.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border-2 border-black shadow-nb z-10 max-h-40 overflow-y-auto",children:h.map(p=>I.jsx("button",{onClick:()=>d(p),className:"w-full text-left px-3 py-2 hover:bg-nb-yellow font-bold text-sm border-b border-gray-200 last:border-b-0",children:p},p))})]})]})}function int({items:i,currentPage:e,onPageClick:n}){return i.length===0?I.jsx("div",{className:"p-4 text-gray-500 text-sm",children:"No table of contents available"}):I.jsxs("div",{className:"h-full overflow-y-auto",children:[I.jsx("div",{className:"p-3 border-b-2 border-black bg-white font-black uppercase sticky top-0",children:"Contents"}),I.jsx("div",{className:"p-2",children:i.map((r,s)=>I.jsx("button",{onClick:()=>n(r.page),className:`w-full text-left p-2 rounded transition-colors hover:bg-gray-100 
              ${e===r.page?"bg-nb-yellow font-bold":""}
              ${r.level===1?"text-sm font-bold":""}
              ${r.level===2?"text-xs ml-2":""}
              ${r.level>2?"text-xs ml-4 text-gray-600":""}`,children:I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsx("span",{className:"truncate flex-1",children:r.title}),I.jsx("span",{className:"text-xs text-gray-500 ml-2",children:r.page})]})},s))})]})}function rnt({onSearch:i,onResultClick:e}){const[n,r]=X.useState(""),[s,a]=X.useState([]),[o,u]=X.useState(!1),[h,d]=X.useState(!1),p=async()=>{if(!n.trim())return;u(!0),d(!0);const g=await i(n);a(g),u(!1)};return I.jsxs("div",{className:"bg-white border-2 border-black",children:[I.jsxs("div",{className:"flex items-center gap-2 p-2 border-b-2 border-black",children:[I.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[I.jsx(r1,{size:16,className:"text-gray-500"}),I.jsx("input",{type:"text",value:n,onChange:g=>r(g.target.value),onKeyDown:g=>g.key==="Enter"&&p(),placeholder:"Search in PDF...",className:"flex-1 outline-none text-sm"})]}),I.jsx("button",{onClick:p,disabled:o,className:"nb-button text-xs px-3 py-1 bg-nb-blue",children:o?I.jsx(bu,{size:14,className:"animate-spin"}):"Search"}),s.length>0&&I.jsx("button",{onClick:()=>d(!h),className:"p-1 hover:bg-gray-100 rounded",children:h?I.jsx(Zj,{size:16}):I.jsx(Xk,{size:16})})]}),h&&s.length>0&&I.jsxs("div",{className:"max-h-64 overflow-y-auto",children:[I.jsxs("div",{className:"p-2 text-xs text-gray-600 border-b border-gray-200",children:[s.length," ",s.length===1?"result":"results"," found"]}),s.map((g,y)=>I.jsxs("button",{onClick:()=>e(g),className:"w-full text-left p-2 border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[I.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Page ",g.page]}),I.jsx("div",{className:"text-sm line-clamp-2",children:g.text})]},y))]}),h&&s.length===0&&!o&&n&&I.jsxs("div",{className:"p-4 text-center text-sm text-gray-500",children:['No results found for "',n,'"']})]})}function snt(i,e,n){if(!i||i.isCollapsed)return[];const r=i.getRangeAt(0);return Array.from(r.getClientRects()).map(a=>({x:(a.left-e.left)/n,y:(a.top-e.top)/n,width:a.width/n,height:a.height/n}))}function ant(i){const e={methodology:"#22d3ee",results:"#a3e635","related-work":"#c084fc",discussion:"#fb923c",limitation:"#f87171",general:"#fde047"};return e[i]||e.general}function ont(i){const e={methodology:"bg-cyan-400",results:"bg-lime-400","related-work":"bg-purple-400",discussion:"bg-orange-400",limitation:"bg-red-400",general:"bg-yellow-300"};return e[i]||e.general}function lnt(i,e,n,r,s="general"){if(!i||i.isCollapsed)return null;const a=snt(i,e,n);return a.length===0?null:{id:Date.now(),page:r,rects:a,color:ant(s),text:i.toString().trim(),category:s,createdAt:Date.now()}}function cnt(i,e){localStorage.setItem(`highlights-${i}`,JSON.stringify(e))}function unt(i){try{const e=localStorage.getItem(`highlights-${i}`);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading highlights:",e),[]}}function hnt(i,e){localStorage.setItem(`postits-${i}`,JSON.stringify(e))}function dnt(i){try{const e=localStorage.getItem(`postits-${i}`);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading post-its:",e),[]}}function fnt(i,e){let n=`# Highlights: ${e}

`;const r=i.reduce((s,a)=>{const o=a.category||"general";return s[o]||(s[o]=[]),s[o].push(a),s},{});return Object.entries(r).forEach(([s,a])=>{n+=`## ${s.charAt(0).toUpperCase()+s.slice(1)}

`,a.sort((o,u)=>o.page-u.page).forEach(o=>{n+=`> **Page ${o.page}**: "${o.text}"
`,o.note&&(n+=`> *Note: ${o.note}*
`),n+=`
`})}),n}function pnt(i){return i.reduce((e,n)=>{const r=n.category||"general";return e[r]=(e[r]||0)+1,e},{})}function gnt(i,e){const n=e.toLowerCase().trim();return n?i.filter(r=>r.text.toLowerCase().includes(n)||r.note?.toLowerCase().includes(n)):i}function mnt(i,e,n,r,s={name:"yellow",class:"bg-yellow-200",hex:"#fef08a"}){return{id:Date.now(),page:n,x:i/r,y:e/r,text:"",color:s,createdAt:Date.now()}}function ynt(){return[{name:"yellow",class:"bg-yellow-200",hex:"#fef08a"},{name:"pink",class:"bg-pink-200",hex:"#fbcfe8"},{name:"blue",class:"bg-blue-200",hex:"#bfdbfe"},{name:"green",class:"bg-green-200",hex:"#bbf7d0"},{name:"purple",class:"bg-purple-200",hex:"#e9d5ff"},{name:"orange",class:"bg-orange-200",hex:"#fed7aa"}]}function bnt({highlights:i,postits:e,onHighlightClick:n,onHighlightDelete:r,onHighlightUpdate:s,onPostItClick:a,onPostItDelete:o,paperTitle:u}){const[h,d]=X.useState("highlights"),[p,g]=X.useState(null),[y,b]=X.useState(""),[w,x]=X.useState(null),[S,E]=X.useState(""),[k,N]=X.useState(new Set(["general"])),M=pnt(i),O=Object.keys(M).sort(),B=gnt(p?i.filter(V=>V.category===p):i,y),C=V=>{const G=new Set(k);G.has(V)?G.delete(V):G.add(V),N(G)},R=()=>{const V=fnt(i,u),G=new Blob([V],{type:"text/markdown"}),et=URL.createObjectURL(G),z=document.createElement("a");z.href=et,z.download=`${u.replace(/\s+/g,"-")}-highlights.md`,z.click(),URL.revokeObjectURL(et)},L=V=>{x(V.id),E(V.note||"")},F=V=>{s({...V,note:S}),x(null),E("")},U=()=>{x(null),E("")},$=B.reduce((V,G)=>{const et=G.category||"general";return V[et]||(V[et]=[]),V[et].push(G),V},{});return I.jsxs("div",{className:"flex flex-col h-full bg-white",children:[I.jsxs("div",{className:"border-b-4 border-black p-4",children:[I.jsx("h2",{className:"font-black uppercase text-lg mb-3",children:"Annotations"}),I.jsxs("div",{className:"flex gap-2 mb-3",children:[I.jsxs("button",{onClick:()=>d("highlights"),className:`flex-1 py-2 px-3 font-bold uppercase text-xs border-2 border-black ${h==="highlights"?"bg-nb-yellow":"bg-white hover:bg-gray-100"}`,children:[I.jsx(Kk,{size:14,className:"inline mr-1"}),"Highlights (",i.length,")"]}),I.jsxs("button",{onClick:()=>d("notes"),className:`flex-1 py-2 px-3 font-bold uppercase text-xs border-2 border-black ${h==="notes"?"bg-nb-yellow":"bg-white hover:bg-gray-100"}`,children:[I.jsx(tN,{size:14,className:"inline mr-1"}),"Notes (",e.length,")"]})]}),h==="highlights"&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"relative mb-2",children:[I.jsx(r1,{size:16,className:"absolute left-2 top-2 text-gray-400"}),I.jsx("input",{type:"text",placeholder:"Search highlights...",value:y,onChange:V=>b(V.target.value),className:"w-full pl-8 pr-3 py-2 border-2 border-black text-sm focus:outline-none focus:ring-2 focus:ring-nb-yellow"})]}),I.jsxs("div",{className:"flex gap-2",children:[I.jsxs("select",{value:p||"",onChange:V=>g(V.target.value||null),className:"flex-1 text-xs border-2 border-black p-1",children:[I.jsx("option",{value:"",children:"All Categories"}),O.map(V=>I.jsxs("option",{value:V,children:[V.charAt(0).toUpperCase()+V.slice(1)," (",M[V],")"]},V))]}),I.jsx("button",{onClick:R,className:"nb-button p-2 text-xs",title:"Export to Markdown",children:I.jsx(iz,{size:14})})]})]})]}),I.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:h==="highlights"?B.length===0?I.jsx("p",{className:"text-gray-500 text-sm text-center py-8",children:y||p?"No highlights match your filters":"No highlights yet"}):Object.entries($).sort(([V],[G])=>V.localeCompare(G)).map(([V,G])=>{const et=k.has(V);return I.jsxs("div",{className:"border-2 border-black",children:[I.jsx("button",{onClick:()=>C(V),className:`w-full p-2 flex items-center justify-between font-bold uppercase text-xs ${ont(V)} hover:opacity-80`,children:I.jsxs("span",{children:[et?I.jsx(Xk,{size:14,className:"inline mr-1"}):I.jsx(Yk,{size:14,className:"inline mr-1"}),V," (",G.length,")"]})}),et&&I.jsx("div",{className:"p-2 space-y-2",children:G.sort((z,Y)=>z.page-Y.page).map(z=>{const Y=w===z.id;return I.jsxs("div",{className:"border-2 border-black p-2 bg-white text-xs relative group hover:shadow-md transition-shadow",children:[I.jsxs("div",{className:"flex justify-between items-center mb-1",children:[I.jsxs("button",{onClick:()=>n(z),className:"text-gray-600 hover:text-black font-mono font-bold",children:["Page ",z.page]}),I.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[!Y&&I.jsx("button",{onClick:()=>L(z),className:"p-1 hover:bg-gray-100 rounded",title:"Add/edit note",children:I.jsx(Sz,{size:12})}),I.jsx("button",{onClick:()=>r(z),className:"p-1 hover:bg-red-100 text-red-600 rounded",title:"Delete",children:I.jsx(d_,{size:12})})]})]}),I.jsxs("p",{className:"text-gray-700 mb-2 leading-relaxed",children:['"',z.text,'"']}),Y?I.jsxs("div",{className:"mt-2",children:[I.jsx("textarea",{value:S,onChange:nt=>E(nt.target.value),placeholder:"Add a note...",className:"w-full p-2 border-2 border-black text-xs resize-none",rows:3,autoFocus:!0}),I.jsxs("div",{className:"flex gap-2 mt-2",children:[I.jsxs("button",{onClick:()=>F(z),className:"flex-1 nb-button p-1 text-xs",children:[I.jsx(kz,{size:12,className:"inline mr-1"}),"Save"]}),I.jsxs("button",{onClick:U,className:"flex-1 nb-button p-1 text-xs bg-gray-200",children:[I.jsx(yf,{size:12,className:"inline mr-1"}),"Cancel"]})]})]}):z.note&&I.jsx("div",{className:"mt-2 p-2 bg-gray-50 border-l-2 border-gray-300 italic text-gray-600",children:z.note}),z.createdAt&&I.jsx("div",{className:"mt-2 text-[10px] text-gray-400",children:new Date(z.createdAt).toLocaleDateString()})]},z.id)})})]},V)}):e.length===0?I.jsx("p",{className:"text-gray-500 text-sm text-center py-8",children:"No sticky notes yet"}):e.sort((V,G)=>V.page-G.page).map(V=>I.jsxs("div",{className:`border-2 border-black p-3 ${V.color.class} relative group hover:shadow-md transition-shadow`,children:[I.jsxs("div",{className:"flex justify-between items-center mb-2",children:[I.jsxs("button",{onClick:()=>a(V),className:"text-xs font-mono font-bold hover:underline",children:["Page ",V.page]}),I.jsx("button",{onClick:()=>o(V),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-red-100 text-red-600 rounded transition-opacity",title:"Delete",children:I.jsx(d_,{size:12})})]}),I.jsx("p",{className:"text-sm font-mono whitespace-pre-wrap",children:V.text||I.jsx("em",{className:"text-gray-500",children:"Empty note"})}),V.createdAt&&I.jsx("div",{className:"mt-2 text-[10px] text-gray-500",children:new Date(V.createdAt).toLocaleDateString()})]},V.id))}),I.jsx("div",{className:"border-t-4 border-black p-3 bg-gray-50",children:I.jsxs("div",{className:"text-xs font-mono",children:[I.jsx("div",{className:"font-bold mb-1",children:"Statistics"}),I.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[I.jsxs("div",{children:[I.jsx("span",{className:"text-gray-600",children:"Highlights:"}),I.jsx("span",{className:"font-bold ml-1",children:i.length})]}),I.jsxs("div",{children:[I.jsx("span",{className:"text-gray-600",children:"Notes:"}),I.jsx("span",{className:"font-bold ml-1",children:e.length})]}),I.jsxs("div",{children:[I.jsx("span",{className:"text-gray-600",children:"Categories:"}),I.jsx("span",{className:"font-bold ml-1",children:O.length})]}),I.jsxs("div",{children:[I.jsx("span",{className:"text-gray-600",children:"With Notes:"}),I.jsx("span",{className:"font-bold ml-1",children:i.filter(V=>V.note).length})]})]})]})})]})}function vnt({highlights:i,currentPage:e,scale:n,onHighlightClick:r,onHighlightDelete:s}){const a=i.filter(o=>o.page===e);return I.jsx(I.Fragment,{children:a.map(o=>I.jsx(nn.Fragment,{children:o.rects.map((u,h)=>I.jsx("div",{className:"absolute mix-blend-multiply cursor-pointer hover:opacity-60 transition-opacity",style:{left:u.x*n,top:u.y*n,width:u.width*n,height:u.height*n,backgroundColor:o.color,opacity:.4,pointerEvents:"auto"},onClick:()=>r?.(o),title:`${o.category}: ${o.text.substring(0,50)}...`},`${o.id}-${h}`))},o.id))})}function _nt({postits:i,currentPage:e,scale:n,onPostItUpdate:r,onPostItDelete:s,editable:a=!0}){const[o,u]=X.useState(null),h=i.filter(y=>y.page===e),d=ynt(),p=(y,b)=>{r({...y,text:b})},g=(y,b)=>{const w=d.find(x=>x.name===b);w&&r({...y,color:w})};return I.jsx(I.Fragment,{children:h.map(y=>{const b=o===y.id;return I.jsxs("div",{className:`absolute p-2 w-48 border-2 border-black shadow-lg font-mono text-sm ${y.color.class} group`,style:{left:y.x*n,top:y.y*n,zIndex:b?50:10},children:[I.jsx("div",{className:"absolute -top-2 -left-2 bg-black text-white p-1 rounded cursor-move opacity-0 group-hover:opacity-100 transition-opacity",children:I.jsx(uz,{size:12})}),a&&I.jsx("div",{className:"absolute -top-2 left-8 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:d.map(w=>I.jsx("button",{onClick:()=>g(y,w.name),className:`w-4 h-4 rounded-full border-2 ${y.color.name===w.name?"border-black":"border-gray-400"} ${w.class}`,title:w.name},w.name))}),a&&I.jsx("button",{onClick:()=>s(y),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors opacity-0 group-hover:opacity-100",title:"Delete note",children:I.jsx(yf,{size:12})}),I.jsx("textarea",{value:y.text,onChange:w=>p(y,w.target.value),onFocus:()=>u(y.id),onBlur:()=>u(null),placeholder:"Type your note here...",className:"w-full bg-transparent resize-none outline-none border-none focus:ring-0",style:{minHeight:"80px"},disabled:!a}),y.createdAt&&I.jsx("div",{className:"text-[10px] text-gray-600 mt-1 opacity-60",children:new Date(y.createdAt).toLocaleDateString()})]},y.id)})})}function wnt({paper:i,onClose:e,onUpdate:n,papers:r,onImportPaper:s}){const[a,o]=X.useState(0),[u,h]=X.useState(1),[d,p]=X.useState(1.2),[g,y]=X.useState(()=>unt(i.id)),[b,w]=X.useState(()=>dnt(i.id)),[x,S]=X.useState([]),[E,k]=X.useState(new Map),[N,M]=X.useState("read"),[O,B]=X.useState("annotations"),[C,R]=X.useState("general"),[L,F]=X.useState(!0),U=X.useRef(null);X.useEffect(()=>{i.pdfUrl&&$()},[i.pdfUrl]);const $=async()=>{try{const ht=await mK(i.pdfUrl);S(ht);const yt=await gK(i.pdfUrl),Pt=new Map;yt.split("\f").forEach((Gt,We)=>{Pt.set(We+1,Gt)}),k(Pt)}catch(ht){console.error("Error loading PDF data:",ht)}};X.useEffect(()=>{cnt(i.id,g),hnt(i.id,b)},[g,b,i.id]);const V=()=>{if(N!=="highlight")return;const ht=window.getSelection(),yt=U.current?.getBoundingClientRect();if(!ht||!yt)return;const Pt=lnt(ht,yt,d,u,C);Pt&&(y([...g,Pt]),ht.removeAllRanges())},G=ht=>{if(N!=="note")return;const yt=U.current?.getBoundingClientRect();if(!yt)return;const Pt=ht.clientX-yt.left,kt=ht.clientY-yt.top,Gt=mnt(Pt,kt,u,d);w([...b,Gt]),M("read")},et=async ht=>{const yt=[],Pt=ht.toLowerCase();return E.forEach((kt,Gt)=>{const We=kt.toLowerCase();let ne=We.indexOf(Pt);for(;ne!==-1;){const jt=Math.max(0,ne-50),ee=Math.min(kt.length,ne+ht.length+50),Ee=kt.substring(jt,ee);yt.push({page:Gt,text:Ee,matchIndex:ne}),ne=We.indexOf(Pt,ne+1)}}),yt},z=ht=>{h(ht.page)},Y=ht=>{y(g.filter(yt=>yt.id!==ht.id))},nt=ht=>{y(g.map(yt=>yt.id===ht.id?ht:yt))},mt=ht=>{h(ht.page)},bt=ht=>{w(b.filter(yt=>yt.id!==ht.id))},q=ht=>{w(b.map(yt=>yt.id===ht.id?ht:yt))},Z=()=>p(ht=>Math.min(3,ht+.1)),lt=()=>p(ht=>Math.max(.5,ht-.1)),ct=()=>h(ht=>Math.max(1,ht-1)),At=()=>h(ht=>Math.min(a,ht+1));return I.jsxs("div",{className:"flex h-full bg-gray-100",children:[I.jsxs("div",{className:"flex-1 flex flex-col",children:[I.jsxs("div",{className:"bg-white border-b-4 border-black p-2 flex justify-between items-center shadow-md z-10",children:[I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsxs("button",{onClick:e,className:"nb-button",children:[I.jsx(Bd,{size:16,className:"inline"})," Back"]}),I.jsx("span",{className:"font-black uppercase truncate max-w-xs text-sm",children:i.title})]}),I.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 p-1 rounded border-2 border-black",children:[I.jsx("button",{onClick:()=>M("read"),className:`p-2 rounded transition-colors ${N==="read"?"bg-black text-white":"hover:bg-white"}`,title:"Read Mode",children:I.jsx(Vj,{size:18})}),I.jsx("button",{onClick:()=>M("highlight"),className:`p-2 rounded transition-colors ${N==="highlight"?"bg-black text-white":"hover:bg-white"}`,title:"Highlight Mode",children:I.jsx(RC,{size:18})}),I.jsx("button",{onClick:()=>M("note"),className:`p-2 rounded transition-colors ${N==="note"?"bg-black text-white":"hover:bg-white"}`,title:"Add Sticky Note",children:I.jsx(tN,{size:18})}),N==="highlight"&&I.jsxs("select",{value:C,onChange:ht=>R(ht.target.value),className:"text-xs border-black border ml-2 p-1",children:[I.jsx("option",{value:"general",children:"General"}),I.jsx("option",{value:"methodology",children:"Methodology"}),I.jsx("option",{value:"results",children:"Results"}),I.jsx("option",{value:"related-work",children:"Related Work"}),I.jsx("option",{value:"discussion",children:"Discussion"}),I.jsx("option",{value:"limitation",children:"Limitation"})]})]}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("button",{onClick:lt,className:"nb-button p-1",disabled:d<=.5,children:I.jsx($z,{size:16})}),I.jsxs("span",{className:"font-mono font-bold text-sm min-w-[3rem] text-center",children:[Math.round(d*100),"%"]}),I.jsx("button",{onClick:Z,className:"nb-button p-1",disabled:d>=3,children:I.jsx(zz,{size:16})}),I.jsx("div",{className:"w-px h-6 bg-black mx-2"}),I.jsx("button",{onClick:()=>F(!L),className:"nb-button p-2",title:L?"Hide Sidebar":"Show Sidebar",children:I.jsx(IC,{size:16})})]})]}),I.jsx("div",{className:"border-b-2 border-black",children:I.jsx(rnt,{onSearch:et,onResultClick:ht=>h(ht.page)})}),I.jsx("div",{className:"flex-1 overflow-auto p-8 flex justify-center",onClick:G,style:{cursor:N==="note"?"crosshair":"default"},children:I.jsxs("div",{className:"relative pdf-page-container shadow-nb-lg border-4 border-black",ref:U,onMouseUp:V,style:{userSelect:N==="highlight"?"text":"none"},children:[I.jsx(rK,{file:i.pdfUrl,onLoadSuccess:({numPages:ht})=>o(ht),onItemClick:({pageNumber:ht})=>h(ht),children:I.jsx(pK,{pageNumber:u,scale:d,renderTextLayer:!0,renderAnnotationLayer:!0})}),I.jsx(vnt,{highlights:g,currentPage:u,scale:d,onHighlightClick:z,onHighlightDelete:Y}),I.jsx(_nt,{postits:b,currentPage:u,scale:d,onPostItUpdate:q,onPostItDelete:bt,editable:!0})]})}),I.jsxs("div",{className:"bg-white border-t-4 border-black p-2 flex justify-center items-center gap-4",children:[I.jsxs("button",{onClick:ct,disabled:u<=1,className:"nb-button disabled:opacity-50 disabled:cursor-not-allowed",children:[I.jsx(Bd,{size:16,className:"inline"})," Prev"]}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("input",{type:"number",min:1,max:a,value:u,onChange:ht=>{const yt=parseInt(ht.target.value);yt>=1&&yt<=a&&h(yt)},className:"w-16 text-center font-bold border-2 border-black p-1"}),I.jsxs("span",{className:"font-bold",children:["/ ",a]})]}),I.jsxs("button",{onClick:At,disabled:u>=a,className:"nb-button disabled:opacity-50 disabled:cursor-not-allowed",children:["Next ",I.jsx(Yk,{size:16,className:"inline"})]})]})]}),L&&I.jsxs("div",{className:"w-96 bg-white border-l-4 border-black flex flex-col",children:[I.jsxs("div",{className:"flex border-b-4 border-black",children:[I.jsxs("button",{onClick:()=>B("toc"),className:`flex-1 p-2 font-bold uppercase text-xs transition-colors ${O==="toc"?"bg-nb-yellow":"hover:bg-gray-100"}`,children:[I.jsx(IC,{size:14,className:"inline mr-1"}),"TOC"]}),I.jsxs("button",{onClick:()=>B("notes"),className:`flex-1 p-2 font-bold uppercase text-xs transition-colors ${O==="notes"?"bg-nb-yellow":"hover:bg-gray-100"}`,children:[I.jsx(Kk,{size:14,className:"inline mr-1"}),"Notes"]}),I.jsxs("button",{onClick:()=>B("annotations"),className:`flex-1 p-2 font-bold uppercase text-xs transition-colors relative ${O==="annotations"?"bg-nb-yellow":"hover:bg-gray-100"}`,children:[I.jsx(RC,{size:14,className:"inline mr-1"}),"Marks",(g.length>0||b.length>0)&&I.jsx("span",{className:"absolute top-1 right-1 bg-red-500 text-white text-[10px] rounded-full w-4 h-4 flex items-center justify-center",children:g.length+b.length})]}),I.jsxs("button",{onClick:()=>B("ai"),className:`flex-1 p-2 font-bold uppercase text-xs transition-colors ${O==="ai"?"bg-nb-purple":"hover:bg-gray-100"}`,children:[I.jsx(ym,{size:14,className:"inline mr-1"}),"AI"]}),I.jsxs("button",{onClick:()=>B("related"),className:`flex-1 p-2 font-bold uppercase text-xs transition-colors ${O==="related"?"bg-nb-lime":"hover:bg-gray-100"}`,children:[I.jsx(xz,{size:14,className:"inline mr-1"}),"Related"]})]}),I.jsxs("div",{className:"flex-1 overflow-hidden",children:[O==="toc"&&I.jsx("div",{className:"h-full overflow-y-auto p-4",children:I.jsx(int,{items:x,currentPage:u,onPageClick:h})}),O==="notes"&&I.jsxs("div",{className:"h-full overflow-y-auto p-4 space-y-4",children:[I.jsx("h3",{className:"font-black uppercase mb-2",children:"Structured Notes"}),[{key:"researchquestion",label:"Research Question"},{key:"methods",label:"Methods"},{key:"results",label:"Results"},{key:"conclusions",label:"Conclusions"},{key:"limitations",label:"Limitations"},{key:"futurework",label:"Future Work"}].map(ht=>I.jsxs("div",{children:[I.jsx("label",{className:"text-xs font-bold uppercase block mb-1",children:ht.label}),I.jsx("textarea",{className:"nb-input text-sm w-full",rows:3,placeholder:`Enter ${ht.label.toLowerCase()}...`,value:i.structuredNotes?.[ht.key]||"",onChange:yt=>{n({structuredNotes:{...i.structuredNotes,[ht.key]:yt.target.value}})}})]},ht.key))]}),O==="annotations"&&I.jsx(bnt,{highlights:g,postits:b,onHighlightClick:z,onHighlightDelete:Y,onHighlightUpdate:nt,onPostItClick:mt,onPostItDelete:bt,paperTitle:i.title}),O==="ai"&&I.jsx("div",{className:"h-full overflow-y-auto p-4",children:I.jsx(Zet,{paper:i})}),O==="related"&&I.jsx("div",{className:"h-full overflow-y-auto",children:I.jsx(Yet,{currentPaper:i,onImport:s||(()=>{})})})]})]})]})}function Ant({duePapers:i,onReview:e,onOpenPaper:n,onBack:r}){const[s,a]=X.useState(0),[o,u]=X.useState(!1);if(i.length===0)return I.jsxs("div",{className:"min-h-screen bg-nb-gray flex flex-col",children:[I.jsxs("div",{className:"bg-white border-b-4 border-black p-4 flex justify-between items-center",children:[I.jsxs("button",{onClick:r,className:"nb-button flex gap-2",children:[I.jsx(Bd,{strokeWidth:3})," Back to Library"]}),I.jsx("h1",{className:"text-3xl font-black uppercase",children:"Review Queue"}),I.jsx("div",{className:"w-32"})]}),I.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:I.jsxs("div",{className:"bg-white border-4 border-black shadow-nb p-12 max-w-md text-center",children:[I.jsx(mm,{className:"w-20 h-20 mx-auto mb-4 text-green-600",strokeWidth:3}),I.jsx("h2",{className:"text-4xl font-black uppercase mb-2",children:"All Done!"}),I.jsx("p",{className:"text-lg font-bold mb-6",children:"No papers due for review today."}),I.jsx("p",{className:"text-sm text-gray-600",children:"Come back tomorrow for more reviews!"})]})})]});const h=i[s],d=(s+1)/i.length*100,p=g=>{e(h,g),s<i.length-1?(a(s+1),u(!1)):r()};return I.jsxs("div",{className:"min-h-screen bg-nb-gray flex flex-col",children:[I.jsxs("div",{className:"bg-white border-b-4 border-black p-4 flex justify-between items-center",children:[I.jsxs("button",{onClick:r,className:"nb-button flex gap-2",children:[I.jsx(Bd,{strokeWidth:3})," Back"]}),I.jsx("h1",{className:"text-2xl font-black uppercase",children:"Review Queue"}),I.jsxs("div",{className:"text-sm font-bold",children:[s+1," / ",i.length]})]}),I.jsx("div",{className:"bg-white border-b-2 border-black",children:I.jsx("div",{className:"h-3 bg-nb-yellow",style:{width:`${d}%`}})}),I.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:I.jsxs("div",{className:"bg-white border-4 border-black shadow-nb max-w-3xl w-full",children:[I.jsxs("div",{className:"p-8 border-b-4 border-black",children:[I.jsxs("div",{className:"flex items-start justify-between mb-4",children:[I.jsxs("div",{className:"flex-1",children:[I.jsx("h2",{className:"text-2xl font-black uppercase mb-2",children:h.title}),I.jsxs("p",{className:"text-sm font-bold text-gray-600 mb-2",children:[h.authors,"  ",h.year,h.venue&&`  ${h.venue}`]}),h.tags&&h.tags.length>0&&I.jsx("div",{className:"flex flex-wrap gap-2",children:h.tags.map(g=>I.jsx("span",{className:"text-xs font-bold px-2 py-1 bg-gray-100 border-2 border-black",children:g},g))})]}),I.jsxs("button",{onClick:()=>n(h),className:"nb-button flex gap-2 ml-4",title:"Open in Reader",children:[I.jsx(u_,{size:16})," Read"]})]}),h.abstract&&I.jsx("div",{className:"mt-4 p-4 bg-gray-50 border-2 border-black",children:I.jsx("p",{className:"text-sm font-bold text-gray-700",children:h.abstract})})]}),o&&h.structuredNotes&&I.jsxs("div",{className:"p-8 border-b-4 border-black bg-nb-yellow",children:[I.jsx("h3",{className:"text-lg font-black uppercase mb-4",children:"Your Notes"}),I.jsx("div",{className:"space-y-4",children:Object.entries(h.structuredNotes).map(([g,y])=>y&&I.jsxs("div",{children:[I.jsx("h4",{className:"text-xs font-black uppercase text-gray-600 mb-1",children:g.replace(/([A-Z])/g," $1").trim()}),I.jsx("p",{className:"text-sm font-bold",children:y})]},g))})]}),I.jsx("div",{className:"p-8",children:o?I.jsxs("div",{className:"space-y-3",children:[I.jsx("p",{className:"text-center font-bold text-sm uppercase text-gray-600 mb-4",children:"How well did you remember this paper?"}),I.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[I.jsxs("button",{onClick:()=>p(1),className:"nb-button bg-red-500 text-white border-black hover:bg-red-600",children:[I.jsx(yf,{size:16,className:"inline mr-2"}),"Again",I.jsx("span",{className:"text-xs block mt-1",children:"Review in 1 day"})]}),I.jsxs("button",{onClick:()=>p(2),className:"nb-button bg-orange-500 text-white border-black hover:bg-orange-600",children:["Hard",I.jsx("span",{className:"text-xs block mt-1",children:"Review in 1 day"})]}),I.jsxs("button",{onClick:()=>p(4),className:"nb-button bg-green-500 text-white border-black hover:bg-green-600",children:[I.jsx(mm,{size:16,className:"inline mr-2"}),"Good",I.jsx("span",{className:"text-xs block mt-1",children:A0(h.srsInterval?Math.round(h.srsInterval*(h.srsEase||2.5)):6)})]}),I.jsxs("button",{onClick:()=>p(5),className:"nb-button bg-blue-500 text-white border-black hover:bg-blue-600",children:["Easy",I.jsx("span",{className:"text-xs block mt-1",children:A0(h.srsInterval?Math.round(h.srsInterval*(h.srsEase||2.5)*1.3):10)})]})]})]}):I.jsx("button",{onClick:()=>u(!0),className:"nb-button w-full text-lg",children:"Show Answer"})})]})}),I.jsxs("div",{className:"bg-white border-t-4 border-black p-4 flex justify-center items-center gap-8 text-sm font-bold",children:[I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx(Zk,{size:16,strokeWidth:3}),I.jsxs("span",{children:["Repetitions: ",h.srsRepetitions||0]})]}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx($j,{size:16,strokeWidth:3}),I.jsxs("span",{children:["Interval: ",A0(h.srsInterval||0)]})]})]})]})}So.workerSrc=`//unpkg.com/pdfjs-dist@${B1}/build/pdf.worker.min.mjs`;const xnt="science-rocks",id=[{name:"Yellow",class:"bg-nb-yellow",hex:"#FFD90F"},{name:"Cyan",class:"bg-nb-cyan",hex:"#22d3ee"},{name:"Pink",class:"bg-nb-pink",hex:"#FF90E8"},{name:"Lime",class:"bg-nb-lime",hex:"#a3e635"},{name:"Purple",class:"bg-nb-purple",hex:"#c084fc"},{name:"Orange",class:"bg-nb-orange",hex:"#fb923c"}],L0=i=>{if(!i)return[];const e=new Set(["the","and","of","for","with","analysis","study","using","based","from","that","this","introduction","conclusion","results","method","paper","proposed","http","https","doi","org","journal","vol","issue","et","al"]),n=i.split(/[\s,.-]+/).map(s=>s.toLowerCase().replace(/[^a-z]/g,"")).filter(s=>s.length>4&&!e.has(s)),r={};return n.forEach(s=>r[s]=(r[s]||0)+1),Object.entries(r).sort((s,a)=>a[1]-s[1]).slice(0,10).map(s=>s[0].charAt(0).toUpperCase()+s[0].slice(1))};function Ent(){const[i,e]=X.useState(!1),[n,r]=X.useState(""),[s]=Dj(i1),[a,o]=X.useState([]),[u,h]=X.useState("library"),[d,p]=X.useState(null),[g,y]=X.useState(""),[b,w]=X.useState("drop"),[x,S]=X.useState(!1),[E,k]=X.useState(!1),[N,M]=X.useState(null),O=X.useRef(null),[B,C]=X.useState(!1),[R,L]=X.useState(""),[F,U]=X.useState(""),[$,V]=X.useState(!1),[G,et]=X.useState(""),[z,Y]=X.useState(!1);X.useRef();const[nt,mt]=X.useState(null),[bt,q]=X.useState([]),[Z,lt]=X.useState({isOpen:!1,message:"",onConfirm:null}),ct=(vt,Dt="info")=>{const pe=Date.now()+Math.random();q(Ht=>[...Ht,{id:pe,message:vt,type:Dt}]),setTimeout(()=>{q(Ht=>Ht.filter(an=>an.id!==pe))},4e3)};X.useEffect(()=>{if(!s)return;const vt=JU(cg(_s,"papers"),tV("userId","==",s.uid)),Dt=sV(vt,pe=>{const Ht=pe.docs.map(an=>({id:an.id,...an.data()}));if(o(Ht),typeof ER=="function"){const an=ER(Ht);mt(an)}});return()=>Dt()},[s]);const At=X.useMemo(()=>xK(a),[a]),ht=async vt=>{const Dt=await vt.arrayBuffer(),Ht=await Ql(Dt).promise;let Fi=(await Ht.getMetadata())?.info?.Author||"";const zn=await(await Ht.getPage(1)).getTextContent();let ei=0,hi="",Ia="";zn.items.forEach(ze=>{const se=ze.str.trim();if(!se)return;Ia+=se+" ";const Se=Math.abs(ze.transform[3]);Se>ei?(ei=Se,hi=se):Math.abs(Se-ei)<1&&Se>10&&(hi+=" "+se)});const Vo=Ia.match(/10\.\d{4,9}\/[-._;()/:A-Z0-9]+/i);let di="";try{typeof AR=="function"&&(di=await AR(vt))}catch{}if(Vo){const ze=Vo[0];ct(`DOI detected: ${ze}`,"info");try{const se=await q_(ze,"DOI");if(se&&!se.error){let Se="";se.authors&&Array.isArray(se.authors)&&(Se=se.authors.map(ka=>ka.name).join(", "));let Da="";return se.year?Da=se.year.toString():se.publicationDate&&(Da=se.publicationDate.split("-")[0]),{title:se.title||hi,tags:L0(se.title+" "+(se.abstract||"")),authors:Se,abstract:se.abstract||"",year:Da||new Date().getFullYear().toString(),venue:se.venue||"",doi:ze,citationCount:se.citationCount||0,semanticScholarId:se.paperId,pdfHash:di,source:"doi"}}}catch(se){console.error("Error fetching Semantic Scholar data:",se)}}return hi.length<5&&(hi=vt.name.replace(".pdf","")),{title:hi,tags:L0(Ia),authors:Fi,abstract:"",year:new Date().getFullYear().toString(),venue:"",pdfHash:di,source:"local"}},yt=async vt=>{const Dt=await ht(vt);if(typeof xR=="function"){const Fi=xR(Dt,a);Fi.length>0&&ct(` Possible duplicate: "${Fi[0].title}"`,"warning")}const pe=mj(xj,`papers/${s.uid}/${Date.now()}_${vt.name}`);await pj(pe,vt);const Ht=await gj(pe);let an="";try{typeof wR=="function"&&(an=await wR(Ht))}catch{}await Zv(cg(_s,"papers"),{userId:s.uid,title:Dt.title,link:"",tags:Dt.tags,color:id[Math.floor(Math.random()*id.length)].class,status:"to-read",abstract:Dt.abstract,authors:Dt.authors,year:Dt.year,venue:Dt.venue,notes:"",pdfUrl:Ht,doi:Dt.doi||"",citationCount:Dt.citationCount||0,pdfHash:Dt.pdfHash||"",thumbnailUrl:an,createdAt:Date.now(),addedDate:Date.now(),rating:0,methods:[],organisms:[],hypotheses:[],structuredNotes:{}})},Pt=async vt=>{vt.preventDefault(),S(!1);const Dt=Array.from(vt.dataTransfer.files).filter(pe=>pe.type==="application/pdf");if(Dt.length>0){C(!0);for(let pe=0;pe<Dt.length;pe++)L(`Processing ${pe+1}/${Dt.length}...`),await yt(Dt[pe]);C(!1),ct("Upload complete!","success")}else ct("Please drop valid PDF files.","error")},kt=async vt=>{if(vt.target.files?.length){C(!0);for(let Dt=0;Dt<vt.target.files.length;Dt++)await yt(vt.target.files[Dt]);C(!1)}},Gt=async()=>{if(!F.trim()){ct("Please enter a DOI","error");return}V(!0);try{const vt=$1(F);if(!vt){ct("Invalid DOI format. Use formats like: 10.xxxx/xxxx or https://doi.org/10.xxxx/xxxx","error"),V(!1);return}ct(`Fetching metadata for DOI: ${vt}...`,"info");const Dt=await q_(vt,"DOI");if(Dt&&!Dt.error){let pe="";Dt.authors&&Array.isArray(Dt.authors)&&(pe=Dt.authors.map(an=>an.name).join(", "));let Ht="";Dt.year?Ht=Dt.year.toString():Dt.publicationDate&&(Ht=Dt.publicationDate.split("-")[0]),await Zv(cg(_s,"papers"),{userId:s.uid,title:Dt.title||"Untitled Paper",authors:pe,abstract:Dt.abstract||"",year:Ht||new Date().getFullYear().toString(),venue:Dt.venue||"",doi:vt,citationCount:Dt.citationCount||0,semanticScholarId:Dt.paperId,tags:L0(Dt.title+" "+(Dt.abstract||"")),color:id[Math.floor(Math.random()*id.length)].class,status:"to-read",link:`https://doi.org/${vt}`,notes:"",pdfUrl:"",thumbnailUrl:"",createdAt:Date.now(),addedDate:Date.now(),rating:0,methods:[],organisms:[],hypotheses:[],structuredNotes:{}}),ct("Paper added successfully with full metadata!","success"),U("")}else ct("Could not fetch metadata for this DOI. Please check the DOI or try manual entry.","error")}catch(vt){console.error("Error fetching DOI metadata:",vt),ct("Error fetching metadata. Please try again.","error")}V(!1)},We=vt=>{lt({isOpen:!0,message:"This will permanently delete the paper and all its annotations.",onConfirm:async()=>{await rV(vl(_s,"papers",vt)),ct("Paper deleted","info"),lt({isOpen:!1,message:"",onConfirm:null})}})},ne=async(vt,Dt)=>{if(await Vh(vl(_s,"papers",vt),{status:Dt}),Dt==="read"){const pe=a.find(Ht=>Ht.id===vt);if(pe&&!pe.srsDue){const Ht=AK();await Vh(vl(_s,"papers",vt),{srsRepetitions:Ht.repetitions,srsInterval:Ht.interval,srsEase:Ht.ease,srsDue:Ht.due}),ct("Paper added to review queue!","success")}}},jt=async(vt,Dt)=>{const pe={repetitions:vt.srsRepetitions??0,interval:vt.srsInterval??0,ease:vt.srsEase??2.5,due:vt.srsDue??Date.now()},Ht=wK(pe,Dt);await Vh(vl(_s,"papers",vt.id),{srsRepetitions:Ht.repetitions,srsInterval:Ht.interval,srsEase:Ht.ease,srsDue:Ht.due,modifiedDate:Date.now()}),ct("Review recorded!","success")},ee=X.useMemo(()=>{const vt=new Set;return a.forEach(Dt=>Dt.tags?.forEach(pe=>vt.add(pe))),Array.from(vt).sort()},[a]),Ee=a.filter(vt=>{const Dt=g.toLowerCase();return vt.title.toLowerCase().includes(Dt)||vt.tags?.some(pe=>pe.toLowerCase().includes(Dt))||vt.authors?.toLowerCase().includes(Dt)}),Ie=vt=>{y(vt),h("library"),ct(`Filtering by tag: ${vt}`,"info")},Ai=vt=>{y(vt),h("library"),ct(`Filtering by author: ${vt}`,"info")},Bi=async vt=>{d&&await Vh(vl(_s,"papers",d.id),{...vt,modifiedDate:Date.now()})},Ue=async vt=>{s&&(await Zv(cg(_s,"papers"),{userId:s.uid,title:vt.title,status:"to-read",color:id[0].class,tags:[],structuredNotes:{},...vt,createdAt:Date.now(),addedDate:Date.now()}),ct("Paper added to To-Read","success"))},Ve=()=>I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 pointer-events-none",children:bt.map(vt=>I.jsxs("div",{className:"pointer-events-auto flex items-center gap-3 p-4 bg-white border-4 border-black shadow-nb min-w-[300px] animate-in slide-in-from-right",children:[vt.type==="success"&&I.jsx(mm,{className:"text-green-600",size:24,strokeWidth:3}),vt.type==="error"&&I.jsx(CC,{className:"text-red-600",size:24,strokeWidth:3}),vt.type==="info"&&I.jsx(fz,{className:"text-blue-600",size:24,strokeWidth:3}),vt.type==="warning"&&I.jsx(CC,{className:"text-yellow-600",size:24,strokeWidth:3}),I.jsx("p",{className:"font-bold uppercase text-sm",children:vt.message})]},vt.id))}),Z.isOpen&&I.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:I.jsxs("div",{className:"bg-white border-4 border-black shadow-nb p-8 max-w-md w-full text-center",children:[I.jsx("h2",{className:"text-2xl font-black uppercase mb-2",children:"Are you sure?"}),I.jsx("p",{className:"font-bold text-gray-600 mb-6",children:Z.message}),I.jsxs("div",{className:"flex gap-4",children:[I.jsx("button",{onClick:()=>lt({isOpen:!1,message:"",onConfirm:null}),className:"flex-1 nb-button bg-white",children:"Cancel"}),I.jsx("button",{onClick:Z.onConfirm,className:"flex-1 nb-button bg-red-500 text-white border-black",children:"Confirm"})]})]})}),E&&N&&I.jsx(nnt,{paper:N,allTags:ee,onClose:()=>{k(!1),M(null)},onSave:async vt=>{await Vh(vl(_s,"papers",N.id),{...vt,modifiedDate:Date.now()}),ct("Paper updated successfully!","success")},addToast:ct})]});return i?s?u==="analytics"&&nt?I.jsxs("div",{className:"h-screen flex flex-col bg-nb-gray",children:[I.jsx(Ve,{}),I.jsxs("div",{className:"bg-white border-b-4 border-black p-4 flex justify-between items-center",children:[I.jsxs("button",{onClick:()=>h("library"),className:"nb-button flex gap-2 text-black",children:[I.jsx(Bd,{})," Back"]}),I.jsx("h1",{className:"text-3xl font-black uppercase",children:"Reading Analytics"})]}),I.jsxs("div",{className:"flex-1 overflow-y-auto p-8 grid grid-cols-1 lg:grid-cols-2 gap-8",children:[I.jsxs("div",{className:"col-span-1 lg:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-6",children:[I.jsxs("div",{className:"nb-card p-6 bg-nb-yellow",children:[I.jsx("div",{className:"text-4xl font-black mb-2",children:nt.papersReadTotal}),I.jsx("div",{className:"text-sm font-bold uppercase",children:"Papers Read"})]}),I.jsxs("div",{className:"nb-card p-6 bg-nb-cyan",children:[I.jsx("div",{className:"text-4xl font-black mb-2",children:nt.currentStreak}),I.jsx("div",{className:"text-sm font-bold uppercase",children:"Day Streak "})]}),I.jsxs("div",{className:"nb-card p-6 bg-nb-pink",children:[I.jsx("div",{className:"text-4xl font-black mb-2",children:SR?SR(nt.totalReadingTime):nt.totalReadingTime}),I.jsx("div",{className:"text-sm font-bold uppercase",children:"Total Reading Time"})]})]}),I.jsx("div",{className:"h-96",children:I.jsx(Qet,{papers:a,onTagClick:Ie})}),I.jsx("div",{className:"h-96",children:I.jsx(Ket,{papers:a,onAuthorClick:Ai})})]})]}):u==="review"?I.jsxs(I.Fragment,{children:[I.jsx(Ve,{}),I.jsx(Ant,{duePapers:At,onReview:jt,onOpenPaper:vt=>{p(vt),h("reader")},onBack:()=>h("library")})]}):u==="reader"&&d?I.jsxs(I.Fragment,{children:[I.jsx(Ve,{}),I.jsx(wnt,{paper:d,onClose:()=>h("library"),onUpdate:Bi,papers:a,onImportPaper:Ue})]}):I.jsxs("div",{className:"min-h-screen bg-nb-gray flex flex-col font-sans text-black",children:[I.jsx(Ve,{}),I.jsxs("header",{className:"bg-white border-b-4 border-black p-5 flex justify-between items-center shadow-sm sticky top-0 z-30",children:[I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx("div",{className:"bg-black text-white p-2",children:I.jsx(u_,{strokeWidth:3,size:32})}),I.jsx("h1",{className:"text-4xl font-black uppercase tracking-tighter",children:"Paper Vault"})]}),I.jsxs("div",{className:"flex gap-4",children:[I.jsxs("button",{onClick:()=>h("review"),className:"nb-button flex gap-2 relative",children:[I.jsx(zj,{strokeWidth:3})," Review",At.length>0&&I.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-black rounded-full w-6 h-6 flex items-center justify-center border-2 border-black",children:At.length})]}),I.jsxs("button",{onClick:()=>h("analytics"),className:"nb-button flex gap-2",children:[I.jsx(qj,{strokeWidth:3})," Analytics"]}),I.jsxs("button",{onClick:Sj,className:"nb-button flex gap-2",children:[I.jsx(wz,{strokeWidth:3})," Exit"]})]})]}),I.jsxs("div",{className:"bg-white border-b-4 border-black p-6 z-20",children:[I.jsxs("div",{className:"flex justify-between items-center mb-4",children:[I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx("button",{onClick:()=>w("drop"),className:`text-sm font-black uppercase border-b-4 pb-1 ${b==="drop"?"border-nb-purple":"border-transparent"}`,children:"Smart Drop"}),I.jsx("button",{onClick:()=>w("manual"),className:`text-sm font-black uppercase border-b-4 pb-1 ${b==="manual"?"border-nb-lime":"border-transparent"}`,children:"Manual Entry"})]}),I.jsxs("div",{className:"relative w-64",children:[I.jsx(r1,{className:"absolute left-3 top-1/2 -translate-y-1/2",strokeWidth:3,size:16}),I.jsx("input",{className:"nb-input pl-10 py-2 text-sm",placeholder:"Search Library...",value:g,onChange:vt=>y(vt.target.value)})]})]}),b==="drop"?I.jsxs("div",{onDragOver:vt=>{vt.preventDefault(),S(!0)},onDragLeave:()=>S(!1),onDrop:Pt,onClick:()=>O.current?.click(),className:`border-4 border-dashed h-32 flex flex-col items-center justify-center cursor-pointer ${x?"border-nb-purple bg-purple-50":"border-gray-300 bg-gray-50"}`,children:[I.jsxs("div",{className:"text-center",children:[I.jsx("p",{className:"font-black text-xl uppercase",children:"Drop PDF Here"}),I.jsx("p",{className:"text-sm text-gray-500",children:"Auto-detect: Metadata, Thumbnails, Duplicates"})]}),I.jsx("input",{ref:O,type:"file",accept:".pdf",className:"hidden",multiple:!0,onChange:kt})]}):I.jsxs("div",{className:"bg-nb-gray p-4 border-4 border-black",children:[I.jsx("p",{className:"text-xs font-bold text-gray-600 mb-2 uppercase",children:"Supports: 10.xxxx/xxxx | https://doi.org/10.xxxx/xxxx | https://www.doi.org/10.xxxx/xxxx"}),I.jsxs("div",{className:"flex gap-2",children:[I.jsx("input",{value:F,onChange:vt=>U(vt.target.value),onKeyDown:vt=>{vt.key==="Enter"&&Gt()},className:"nb-input flex-1",placeholder:"Paste DOI here...",disabled:$}),I.jsxs("button",{onClick:Gt,disabled:$,className:"nb-button bg-nb-purple flex gap-2",children:[$?I.jsx(bu,{className:"animate-spin"}):I.jsx(ym,{}),$?"Fetching...":"Auto-Fill"]})]})]})]}),I.jsx(Get,{papers:Ee,onStatusChange:ne,onRead:vt=>{p(vt),h("reader")},onEdit:vt=>{M(vt),k(!0)},onDelete:We})]}):I.jsx("div",{className:"min-h-screen flex items-center justify-center bg-nb-cyan p-4",children:I.jsxs("div",{className:"bg-white border-4 border-black shadow-[12px_12px_0px_0px_rgba(0,0,0,1)] p-10 max-w-md w-full text-center",children:[I.jsx(u_,{className:"w-20 h-20 mx-auto mb-6",strokeWidth:3}),I.jsx("h1",{className:"text-5xl font-black uppercase mb-2 tracking-tighter",children:"Paper Vault"}),I.jsxs("button",{onClick:Ej,className:"w-full border-4 border-black bg-nb-pink p-4 font-black flex items-center justify-center gap-3 text-lg hover:translate-x-1 hover:translate-y-1 hover:shadow-none transition-all shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]",children:[I.jsx(Fz,{strokeWidth:3})," ENTER WITH GOOGLE"]})]})}):I.jsx("div",{className:"min-h-screen flex items-center justify-center bg-nb-yellow p-4",children:I.jsxs("div",{className:"bg-white border-4 border-black shadow-nb p-8 max-w-md w-full text-center",children:[I.jsx(vz,{className:"w-12 h-12 mx-auto mb-4",strokeWidth:3}),I.jsx("h1",{className:"text-3xl font-black uppercase mb-4",children:"Restricted Access"}),I.jsx("input",{type:"password",value:n,onChange:vt=>r(vt.target.value),className:"nb-input text-center mb-4",placeholder:"PASSWORD"}),I.jsx("button",{onClick:()=>n===xnt&&e(!0),className:"nb-button w-full",children:"UNLOCK"})]})})}i3.createRoot(document.getElementById("root")).render(I.jsx(X.StrictMode,{children:I.jsx(Ent,{})}));
